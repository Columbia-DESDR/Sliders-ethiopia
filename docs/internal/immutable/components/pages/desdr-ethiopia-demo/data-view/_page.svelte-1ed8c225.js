import{S as fe,i as me,s as be,k as w,l as y,m as $,h as l,n as m,b as _,E as D,J as g,a2 as we,a6 as ye,a as E,e as ue,a7 as ge,c as x,U as z,a8 as he,f as K,t as Q,K as ce,a1 as de,o as ke,v as Ee,x as X,q as J,y as Y,r as O,z as Z,a5 as A,u as xe,A as ee,X as $e}from"../../../../chunks/index-c94ffb99.js";import{D as De,E as qe,F as Se,G as _e,H as Ve,J as pe,K as Ie,L as Le,M as Be,N as Me,s as Ne,O as te,P as Pe,Q as Ce}from"../../../../chunks/model_out-05365107.js";function Te(s){let a,r;return{c(){a=w("div"),r=w("div"),this.h()},l(t){a=y(t,"DIV",{class:!0});var d=$(a);r=y(d,"DIV",{id:!0}),$(r).forEach(l),d.forEach(l),this.h()},h(){m(r,"id","table"),m(a,"class","table-auto")},m(t,d){_(t,a,d),D(a,r)},p:g,i:g,o:g,d(t){t&&l(a)}}}function Je(s,a,r){let t;function d(v,p){if(console.log("in debug...."),t=v??t,!t||t.length==0)return;console.log("debug data is",t);let i=De(t);console.log("data table done,",i.print()),document.getElementById("table").innerHTML=i.toHTML()}return[d]}class Oe extends fe{constructor(a){super(),me(this,a,Je,Te,be,{render:0})}get render(){return this.$$.ctx[0]}}function Ge(s){return{c:g,l:g,m:g,p:g,i:g,o:g,d:g}}function He(s){let a,r,t,d,v,p,i=Object.keys(te)+"",o,u,b,N,P,h,V=JSON.stringify(s[4],null,2)+"",I,C,q,G,T,c,f,L,B,W,R,M,k,U,S,H,F,ae;a=new Pe({props:{country:"Ethiopia Data View",initTime:s[17]}});let ve={};return S=new Oe({props:ve}),s[11](S),{c(){X(a.$$.fragment),r=E(),t=w("div"),d=J("Models available"),v=E(),p=w("div"),o=J(i),u=E(),b=w("div"),N=J("Parameters currently"),P=E(),h=w("div"),I=J(V),C=E(),q=w("div"),G=J("Enter selected model"),T=E(),c=w("div"),f=w("input"),L=E(),B=w("div"),W=J("Enter param updates"),R=E(),M=w("div"),k=w("input"),U=E(),X(S.$$.fragment),this.h()},l(e){Y(a.$$.fragment,e),r=x(e),t=y(e,"DIV",{class:!0});var n=$(t);d=O(n,"Models available"),n.forEach(l),v=x(e),p=y(e,"DIV",{class:!0});var j=$(p);o=O(j,i),j.forEach(l),u=x(e),b=y(e,"DIV",{class:!0});var le=$(b);N=O(le,"Parameters currently"),le.forEach(l),P=x(e),h=y(e,"DIV",{class:!0});var re=$(h);I=O(re,V),re.forEach(l),C=x(e),q=y(e,"DIV",{class:!0});var se=$(q);G=O(se,"Enter selected model"),se.forEach(l),T=x(e),c=y(e,"DIV",{class:!0});var ne=$(c);f=y(ne,"INPUT",{type:!0,class:!0}),ne.forEach(l),L=x(e),B=y(e,"DIV",{class:!0});var ie=$(B);W=O(ie,"Enter param updates"),ie.forEach(l),R=x(e),M=y(e,"DIV",{class:!0});var oe=$(M);k=y(oe,"INPUT",{type:!0,class:!0}),oe.forEach(l),U=x(e),Y(S.$$.fragment,e),this.h()},h(){m(t,"class","text-2xl text-center svelte-1rq187w"),m(p,"class","px-5 py-2 bg-white border-solid border-2 border-black svelte-1rq187w"),m(b,"class","text-2xl text-center svelte-1rq187w"),m(h,"class","px-5 py-2 bg-white border-solid border-2 border-black svelte-1rq187w"),m(q,"class","text-2xl py-2 text-center svelte-1rq187w"),m(f,"type","text"),m(f,"class","block w-full px-5 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding bg-no-repeat border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"),m(c,"class","px-[1%] py-[1%] ml-[5.9%] svelte-1rq187w"),m(B,"class","text-2xl py-2 text-center svelte-1rq187w"),m(k,"type","text"),m(k,"class","block w-full px-5 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding bg-no-repeat border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"),m(M,"class","px-[1%] py-[1%] ml-[5.9%] svelte-1rq187w")},m(e,n){Z(a,e,n),_(e,r,n),_(e,t,n),D(t,d),_(e,v,n),_(e,p,n),D(p,o),_(e,u,n),_(e,b,n),D(b,N),_(e,P,n),_(e,h,n),D(h,I),_(e,C,n),_(e,q,n),D(q,G),_(e,T,n),_(e,c,n),D(c,f),A(f,s[1]),_(e,L,n),_(e,B,n),D(B,W),_(e,R,n),_(e,M,n),D(M,k),A(k,s[3]),_(e,U,n),Z(S,e,n),H=!0,F||(ae=[z(f,"input",s[9]),z(f,"change",s[7]),z(k,"input",s[10]),z(k,"change",s[6])],F=!0)},p(e,n){(!H||n&16)&&V!==(V=JSON.stringify(e[4],null,2)+"")&&xe(I,V),n&2&&f.value!==e[1]&&A(f,e[1]),n&8&&k.value!==e[3]&&A(k,e[3]);const j={};S.$set(j)},i(e){H||(K(a.$$.fragment,e),K(S.$$.fragment,e),H=!0)},o(e){Q(a.$$.fragment,e),Q(S.$$.fragment,e),H=!1},d(e){ee(a,e),e&&l(r),e&&l(t),e&&l(v),e&&l(p),e&&l(u),e&&l(b),e&&l(P),e&&l(h),e&&l(C),e&&l(q),e&&l(T),e&&l(c),e&&l(L),e&&l(B),e&&l(R),e&&l(M),e&&l(U),s[11](null),ee(S,e),F=!1,$e(ae)}}}function ze(s){let a,r;return a=new Ce({}),{c(){X(a.$$.fragment)},l(t){Y(a.$$.fragment,t)},m(t,d){Z(a,t,d),r=!0},p:g,i(t){r||(K(a.$$.fragment,t),r=!0)},o(t){Q(a.$$.fragment,t),r=!1},d(t){ee(a,t)}}}function Re(s){let a,r,t,d,v,p;we(s[8]);let i={ctx:s,current:null,token:null,hasCatch:!1,pending:ze,then:He,catch:Ge,value:17,blocks:[,,,]};return ye(s[5],i),{c(){a=w("meta"),r=E(),t=ue(),i.block.c(),this.h()},l(o){const u=ge("svelte-1qxraob",document.head);a=y(u,"META",{name:!0,content:!0}),u.forEach(l),r=x(o),t=ue(),i.block.l(o),this.h()},h(){document.title="DESDR: Ethiopia",m(a,"name","description"),m(a,"content","DESDR Ethiopia")},m(o,u){D(document.head,a),_(o,r,u),_(o,t,u),i.block.m(o,i.anchor=u),i.mount=()=>t.parentNode,i.anchor=t,d=!0,v||(p=z(window,"resize",s[8]),v=!0)},p(o,[u]){s=o,he(i,s,u)},i(o){d||(K(i.block),d=!0)},o(o){for(let u=0;u<3;u+=1){const b=i.blocks[u];Q(b)}d=!1},d(o){l(a),o&&l(r),o&&l(t),i.block.d(o),i.token=null,i=null,v=!1,p()}}}function Ue(s,a,r){let t,d;ce(s,_e,c=>r(13,t=c)),ce(s,pe,c=>r(14,d=c));let v=0,p=null,i=null,o=null,u=null,b={region:"Genete",dekcap:24,freq:.263,year_start:1981,year_end:2020,back_fill_year:2001,sum_early_weight:.4,sum_late_weight:.4,vegetation_weight:.6,sum_early_first:28,sum_early_last:33,sum_late_first:29,sum_late_last:34,vegetation_first:10,vegetation_last:30,scalar_vegetation:1,exit_multiplier:.8};de(_e,t=new Se,t),de(pe,d=new Ve,d);let N=t.createBackend({id:"duckdb1",type:"DuckDBBackend",name:"chirps_raw",url:qe,schema:[]});async function P(c){console.log("dbGoLive started");let f=Date.now();await c.init(!1),await c.loadCSVString("admin_raw",Ie),await c.loadCSVString("crop_cal_raw",Le),await c.loadCSVString("badyear_raw",Be),await c.loadCSVString("evi_raw",Me);let L=Date.now();return console.log("db go live time is,",L-f),L-f}let h=P(N),V=function(){console.log("new param raw entry is: ",u);let c=String(u),f=JSON.parse(c);console.log("new parameters received",f),r(4,b=Ne(b,f)),I()},I=function(){console.log("executing model: ",te[p].query),i=t.createBackend({id:"query_under_debug",type:"QueryBackend",query:te[p].query,name:"test",params:b,backend:N}),i.registerView(o),i.execute(b)};ke(async()=>{await h});function C(){r(0,v=window.innerWidth)}function q(){p=this.value,r(1,p)}function G(){u=this.value,r(3,u)}function T(c){Ee[c?"unshift":"push"](()=>{o=c,r(2,o)})}return[v,p,o,u,b,h,V,I,C,q,G,T]}class Ke extends fe{constructor(a){super(),me(this,a,Ue,Re,be,{})}}export{Ke as default};
