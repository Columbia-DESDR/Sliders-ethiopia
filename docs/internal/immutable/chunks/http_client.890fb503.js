import{B as Ge,S as Ct,i as Mt,T as D,s as Dt,g as j,l as L,m as R,d as N,r as x,a as U,v as z,n as st,f as ae,Y as Xn,Z as tr,k as St,q as Et,_ as O,P as W,$ as ee,a0 as fe,Q as Ht,y as rt,z as at,A as ft,e as ne,H as xn,t as ue,F as er,b as ke,C as nr,a1 as ir,j as qi,p as Ki,w as Wi,x as Gi,U as Qt,a2 as sr,a3 as rr,a4 as ar,R as Nt,N as or,a5 as Vn,c as lr,a6 as ur,O as Un}from"./index.9400ea7e.js";import{n as Hn,o as Zi,c as Z,_ as je,p as he,q as Nn,r as ie,s as Ut,t as dn,u as fr,w as hr,g as Xt,x as mn,y as cr,z as _r,j as dr,A as mr,k as et,C as gr,D as pr,E as Se,F as yr,G as Jn,e as ht,h as Ft,l as kt,H as br,I as vr,i as qn,m as wr,d as Kn,J as kr,K as Sr}from"./index.bfd1700f.js";import{w as dt}from"./paths.198b5f3f.js";import{s as Wn,j as $t,r as Yi,k as Qi,l as Tt,o as Er,q as Gn,P as Ar,t as Zn,u as xr,i as $i,v as Nr,x as Tr,y as Cr,z as ts,A as Mr,B as Yn,C as Dr,D as Ir,E as be,F as Or,I as es,G as Ee,H as ce,J as gn,K as Tn,L as Br,N as Fr,M as Le,O as ns,c as ze,a as Re,b as Xe,d as Ve,Q as Pr,e as Cn,R as jr,g as is,S as Yt,T as jt,U as Ae,V as xe,W as ss,X as Lr,Y as zr,Z as Rr,_ as Xr,$ as rs,a0 as Vr,a1 as Ur,a2 as ye,h as Hr,a3 as Ue,a4 as Mn,a5 as as,a6 as os,a7 as pn,a8 as Jr,a9 as qr,aa as Kr,ab as ls,ac as Wr}from"./dot.64a8505b.js";import{_ as Gr}from"./preload-helper.41c905a7.js";function us(e,t,n){return function(){for(var i=[],s=0,r=e,a=0;a<t.length||s<arguments.length;){var l;a<t.length&&(!Hn(t[a])||s>=arguments.length)?l=t[a]:(l=arguments[s],s+=1),i[a]=l,Hn(l)||(r-=1),a+=1}return r<=0?n.apply(this,i):Zi(r,us(e,i,n))}}var _e=Z(function(t,n){return t===1?je(n):Zi(t,us(t,[],n))});function Zr(e){return e&&e["@@transducer/reduced"]?e:{"@@transducer/value":e,"@@transducer/reduced":!0}}var Yr=Z(function(t,n){return n>t?n:t});function ve(e,t){for(var n=0,i=t.length,s=Array(i);n<i;)s[n]=e(t[n]),n+=1;return s}var Qr=function(){function e(t,n){this.xf=n,this.f=t}return e.prototype["@@transducer/init"]=he.init,e.prototype["@@transducer/result"]=he.result,e.prototype["@@transducer/step"]=function(t,n){return this.xf["@@transducer/step"](t,this.f(n))},e}(),$r=Z(function(t,n){return new Qr(t,n)}),ta=Z(Nn(["fantasy-land/map","map"],$r,function(t,n){switch(Object.prototype.toString.call(n)){case"[object Function]":return _e(n.length,function(){return t.call(this,n.apply(this,arguments))});case"[object Object]":return ie(function(i,s){return i[s]=t(n[s]),i},{},Ut(n));default:return ve(t,n)}}));const Lt=ta,ea=Number.isInteger||function(t){return t<<0===t};var na=Z(function(t,n){var i=t<0?n.length+t:t;return dn(n)?n.charAt(i):n[i]});const fs=na;var ia=Z(function(t,n){if(n!=null)return ea(t)?fs(t,n):n[t]});const yn=ia;var sa=Z(function(t,n){return Lt(yn(t),n)});const hs=sa;var ra=function(){function e(t,n){this.xf=n,this.f=t,this.any=!1}return e.prototype["@@transducer/init"]=he.init,e.prototype["@@transducer/result"]=function(t){return this.any||(t=this.xf["@@transducer/step"](t,!1)),this.xf["@@transducer/result"](t)},e.prototype["@@transducer/step"]=function(t,n){return this.f(n)&&(this.any=!0,t=Zr(this.xf["@@transducer/step"](t,!0))),t},e}(),aa=Z(function(t,n){return new ra(t,n)}),oa=Z(Nn(["any"],aa,function(t,n){for(var i=0;i<n.length;){if(t(n[i]))return!0;i+=1}return!1}));const cs=oa;var la=Z(function(t,n){return typeof n["fantasy-land/ap"]=="function"?n["fantasy-land/ap"](t):typeof t.ap=="function"?t.ap(n):typeof t=="function"?function(i){return t(i)(n(i))}:ie(function(i,s){return fr(i,Lt(s,n))},[],t)}),ua=Z(function(t,n){return t.apply(this,n)});function Qn(e,t){return mn(t)?t.map(e):Ut(t).reduce(function(n,i){return n[i]=e(t[i]),n},{})}var fa=je(function e(t){return t=Qn(function(n){return typeof n=="function"?n:e(n)},t),_e(hr(Yr,0,hs("length",Xt(t))),function(){var n=arguments;return Qn(function(i){return ua(i,n)},t)})});const $n=fa;function bn(e){var t=Object.prototype.toString.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"}var ha=Z(function(t,n){var i=_e(t,n);return _e(t,function(){return ie(la,Lt(i,arguments[0]),Array.prototype.slice.call(arguments,1))})}),ca=je(function(t){return ha(t.length,t)});function _a(e){return{"@@transducer/value":e,"@@transducer/reduced":!0}}var da=function(e){return{"@@transducer/init":he.init,"@@transducer/result":function(t){return e["@@transducer/result"](t)},"@@transducer/step":function(t,n){var i=e["@@transducer/step"](t,n);return i["@@transducer/reduced"]?_a(i):i}}},ma=function(t){var n=da(t);return{"@@transducer/init":he.init,"@@transducer/result":function(i){return n["@@transducer/result"](i)},"@@transducer/step":function(i,s){return cr(s)?ie(n,i,s):ie(n,i,[s])}}},ga=Z(function(t,n){return Lt(t,ma(n))}),pa=Z(Nn(["fantasy-land/chain","chain"],ga,function(t,n){return typeof n=="function"?function(i){return t(n(i))(i)}:_r(!1)(Lt(t,n))}));const _s=pa;function Ze(e){var t=e.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+t.replace(/"/g,'\\"')+'"'}var le=function(t){return(t<10?"0":"")+t},ya=typeof Date.prototype.toISOString=="function"?function(t){return t.toISOString()}:function(t){return t.getUTCFullYear()+"-"+le(t.getUTCMonth()+1)+"-"+le(t.getUTCDate())+"T"+le(t.getUTCHours())+":"+le(t.getUTCMinutes())+":"+le(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function ba(e){return function(){return!e.apply(this,arguments)}}var va=Z(function(t,n){return dr(ba(t),n)});const wa=va;function ds(e,t){var n=function(a){var l=t.concat([e]);return mr(a,l)?"<Circular>":ds(a,l)},i=function(r,a){return ve(function(l){return Ze(l)+": "+n(r[l])},a.slice().sort())};switch(Object.prototype.toString.call(e)){case"[object Arguments]":return"(function() { return arguments; }("+ve(n,e).join(", ")+"))";case"[object Array]":return"["+ve(n,e).concat(i(e,wa(function(r){return/^\d+$/.test(r)},Ut(e)))).join(", ")+"]";case"[object Boolean]":return typeof e=="object"?"new Boolean("+n(e.valueOf())+")":e.toString();case"[object Date]":return"new Date("+(isNaN(e.valueOf())?n(NaN):Ze(ya(e)))+")";case"[object Null]":return"null";case"[object Number]":return typeof e=="object"?"new Number("+n(e.valueOf())+")":1/e===-1/0?"-0":e.toString(10);case"[object String]":return typeof e=="object"?"new String("+n(e.valueOf())+")":Ze(e);case"[object Undefined]":return"undefined";default:if(typeof e.toString=="function"){var s=e.toString();if(s!=="[object Object]")return s}return"{"+i(e,Ut(e)).join(", ")+"}"}}var Ye=je(function(t){return ds(t,[])}),ka=Z(function(t,n){if(mn(t)){if(mn(n))return t.concat(n);throw new TypeError(Ye(n)+" is not an array")}if(dn(t)){if(dn(n))return t+n;throw new TypeError(Ye(n)+" is not a string")}if(t!=null&&bn(t["fantasy-land/concat"]))return t["fantasy-land/concat"](n);if(t!=null&&bn(t.concat))return t.concat(n);throw new TypeError(Ye(t)+' does not have a method named "concat" or "fantasy-land/concat"')});const vn=ka;var Sa=fs(-1);const Qe=Sa;var Ea=Z(function(t,n){return t||n}),Aa=Z(function(t,n){return bn(t)?function(){return t.apply(this,arguments)||n.apply(this,arguments)}:ca(Ea)(t,n)});const xa=Aa;var Na=Z(function(t,n){if(t.length===0||et(n))return!1;for(var i=n,s=0;s<t.length;)if(!et(i)&&gr(t[s],i))i=i[t[s]],s+=1;else return!1;return!0}),Ta=Z(function(t,n){return Na([t],n)});const Ne=Ta;var Ca=pr(function(t,n,i){return _e(Math.max(t.length,n.length,i.length),function(){return t.apply(this,arguments)?n.apply(this,arguments):i.apply(this,arguments)})});const ti=Ca;var Ma=Z(function(t,n){return ie(function(i,s){return i[s]=t(n[s],s,n),i},{},Ut(n))});const Da=Ma;var Ia=Z(function(t,n){for(var i={},s=0;s<t.length;)t[s]in n&&(i[t[s]]=n[t[s]]),s+=1;return i});const Oa=Ia;var Ba=Z(function(t,n){return Array.prototype.slice.call(n,0).sort(t)});const Fa=Ba;var Pa=Z(function(t,n){return vn(Se(t,n),Se(n,t))});const ja=Pa;function La(e,t){var n=0,i=0;return Float64Array.from(e,t===void 0?s=>n+=+s||0:s=>n+=+t(s,i++,e)||0)}function Dn(e,t,n){return(t.length!==2?Wn(Yi(e,t,n),([i,s],[r,a])=>$t(s,a)||$t(i,r)):Wn(Qi(e,n),([i,s],[r,a])=>t(s,a)||$t(i,r))).map(([i])=>i)}function ms(e,t=$t){let n,i=!1;if(t.length===1){let s;for(const r of e){const a=t(r);(i?$t(a,s)>0:$t(a,a)===0)&&(n=r,s=a,i=!0)}}else for(const s of e)(i?t(s,n)>0:t(s,s)===0)&&(n=s,i=!0);return n}const wn={capture:!0,passive:!1};function kn(e){e.preventDefault(),e.stopImmediatePropagation()}function za(e){var t=e.document.documentElement,n=Tt(e).on("dragstart.drag",kn,wn);"onselectstart"in t?n.on("selectstart.drag",kn,wn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ra(e,t){var n=e.document.documentElement,i=Tt(e).on("dragstart.drag",null);t&&(i.on("click.drag",kn,wn),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const $e=e=>()=>e;function Xa(e,{sourceEvent:t,target:n,selection:i,mode:s,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:s,enumerable:!0,configurable:!0},_:{value:r}})}function Va(e){e.stopImmediatePropagation()}function tn(e){e.preventDefault(),e.stopImmediatePropagation()}var ei={name:"drag"},en={name:"space"},Jt={name:"handle"},qt={name:"center"};const{abs:ni,max:lt,min:ut}=Math;function ii(e){return[+e[0],+e[1]]}function si(e){return[ii(e[0]),ii(e[1])]}var we={name:"x",handles:["w","e"].map(Te),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},nn={name:"y",handles:["n","s"].map(Te),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},xt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ri={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},ai={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Ua={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Ha={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Te(e){return{type:e}}function Ja(e){return!e.ctrlKey&&!e.button}function qa(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Ka(){return navigator.maxTouchPoints||"ontouchstart"in this}function sn(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Wa(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function Ga(){return Za(we)}function Za(e){var t=qa,n=Ja,i=Ka,s=!0,r=yr("start","brush","end"),a=6,l;function u(g){var _=g.property("__brush",k).selectAll(".overlay").data([Te("overlay")]);_.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",xt.overlay).merge(_).each(function(){var b=sn(this).extent;Tt(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),g.selectAll(".selection").data([Te("selection")]).enter().append("rect").attr("class","selection").attr("cursor",xt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var y=g.selectAll(".handle").data(e.handles,function(b){return b.type});y.exit().remove(),y.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return xt[b.type]}),g.each(f).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",m).filter(i).on("touchstart.brush",m).on("touchmove.brush",p).on("touchend.brush touchcancel.brush",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,_,y){g.tween?g.on("start.brush",function(b){c(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){c(this,arguments).end(b)}).tween("brush",function(){var b=this,w=b.__brush,M=c(b,arguments),B=w.selection,T=e.input(typeof _=="function"?_.apply(this,arguments):_,w.extent),F=Er(B,T);function K(S){w.selection=S===1&&T===null?null:F(S),f.call(b),M.brush()}return B!==null&&T!==null?K:K(1)}):g.each(function(){var b=this,w=arguments,M=b.__brush,B=e.input(typeof _=="function"?_.apply(b,w):_,M.extent),T=c(b,w).beforestart();Jn(b),M.selection=B===null?null:B,f.call(b),T.start(y).brush(y).end(y)})},u.clear=function(g,_){u.move(g,null,_)};function f(){var g=Tt(this),_=sn(this).selection;_?(g.selectAll(".selection").style("display",null).attr("x",_[0][0]).attr("y",_[0][1]).attr("width",_[1][0]-_[0][0]).attr("height",_[1][1]-_[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(y){return y.type[y.type.length-1]==="e"?_[1][0]-a/2:_[0][0]-a/2}).attr("y",function(y){return y.type[0]==="s"?_[1][1]-a/2:_[0][1]-a/2}).attr("width",function(y){return y.type==="n"||y.type==="s"?_[1][0]-_[0][0]+a:a}).attr("height",function(y){return y.type==="e"||y.type==="w"?_[1][1]-_[0][1]+a:a})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,_,y){var b=g.__brush.emitter;return b&&(!y||!b.clean)?b:new h(g,_,y)}function h(g,_,y){this.that=g,this.args=_,this.state=g.__brush,this.active=0,this.clean=y}h.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,_){return this.starting?(this.starting=!1,this.emit("start",g,_)):this.emit("brush",g),this},brush:function(g,_){return this.emit("brush",g,_),this},end:function(g,_){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,_)),this},emit:function(g,_,y){var b=Tt(this.that).datum();r.call(g,this.that,new Xa(g,{sourceEvent:_,target:u,selection:e.output(this.state.selection),mode:y,dispatch:r}),b)}};function m(g){if(l&&!g.touches||!n.apply(this,arguments))return;var _=this,y=g.target.__data__.type,b=(s&&g.metaKey?y="overlay":y)==="selection"?ei:s&&g.altKey?qt:Jt,w=e===nn?null:Ua[y],M=e===we?null:Ha[y],B=sn(_),T=B.extent,F=B.selection,K=T[0][0],S,A,V=T[0][1],C,H,E=T[1][0],X,nt,ct=T[1][1],Q,$,Y=0,J=0,yt,mt=w&&M&&s&&g.shiftKey,It,ot,it=Array.from(g.touches||[g],P=>{const tt=P.identifier;return P=Gn(P,_),P.point0=P.slice(),P.identifier=tt,P});Jn(_);var gt=c(_,arguments,!0).beforestart();if(y==="overlay"){F&&(yt=!0);const P=[it[0],it[1]||it[0]];B.selection=F=[[S=e===nn?K:ut(P[0][0],P[1][0]),C=e===we?V:ut(P[0][1],P[1][1])],[X=e===nn?E:lt(P[0][0],P[1][0]),Q=e===we?ct:lt(P[0][1],P[1][1])]],it.length>1&&bt(g)}else S=F[0][0],C=F[0][1],X=F[1][0],Q=F[1][1];A=S,H=C,nt=X,$=Q;var Ot=Tt(_).attr("pointer-events","none"),pt=Ot.selectAll(".overlay").attr("cursor",xt[y]);if(g.touches)gt.moved=ge,gt.ended=pe;else{var me=Tt(g.view).on("mousemove.brush",ge,!0).on("mouseup.brush",pe,!0);s&&me.on("keydown.brush",oe,!0).on("keyup.brush",Bt,!0),za(g.view)}f.call(_),gt.start(g,b.name);function ge(P){for(const tt of P.changedTouches||[P])for(const Rt of it)Rt.identifier===tt.identifier&&(Rt.cur=Gn(tt,_));if(mt&&!It&&!ot&&it.length===1){const tt=it[0];ni(tt.cur[0]-tt[0])>ni(tt.cur[1]-tt[1])?ot=!0:It=!0}for(const tt of it)tt.cur&&(tt[0]=tt.cur[0],tt[1]=tt.cur[1]);yt=!0,tn(P),bt(P)}function bt(P){const tt=it[0],Rt=tt.point0;var vt;switch(Y=tt[0]-Rt[0],J=tt[1]-Rt[1],b){case en:case ei:{w&&(Y=lt(K-S,ut(E-X,Y)),A=S+Y,nt=X+Y),M&&(J=lt(V-C,ut(ct-Q,J)),H=C+J,$=Q+J);break}case Jt:{it[1]?(w&&(A=lt(K,ut(E,it[0][0])),nt=lt(K,ut(E,it[1][0])),w=1),M&&(H=lt(V,ut(ct,it[0][1])),$=lt(V,ut(ct,it[1][1])),M=1)):(w<0?(Y=lt(K-S,ut(E-S,Y)),A=S+Y,nt=X):w>0&&(Y=lt(K-X,ut(E-X,Y)),A=S,nt=X+Y),M<0?(J=lt(V-C,ut(ct-C,J)),H=C+J,$=Q):M>0&&(J=lt(V-Q,ut(ct-Q,J)),H=C,$=Q+J));break}case qt:{w&&(A=lt(K,ut(E,S-Y*w)),nt=lt(K,ut(E,X+Y*w))),M&&(H=lt(V,ut(ct,C-J*M)),$=lt(V,ut(ct,Q+J*M)));break}}nt<A&&(w*=-1,vt=S,S=X,X=vt,vt=A,A=nt,nt=vt,y in ri&&pt.attr("cursor",xt[y=ri[y]])),$<H&&(M*=-1,vt=C,C=Q,Q=vt,vt=H,H=$,$=vt,y in ai&&pt.attr("cursor",xt[y=ai[y]])),B.selection&&(F=B.selection),It&&(A=F[0][0],nt=F[1][0]),ot&&(H=F[0][1],$=F[1][1]),(F[0][0]!==A||F[0][1]!==H||F[1][0]!==nt||F[1][1]!==$)&&(B.selection=[[A,H],[nt,$]],f.call(_),gt.brush(P,b.name))}function pe(P){if(Va(P),P.touches){if(P.touches.length)return;l&&clearTimeout(l),l=setTimeout(function(){l=null},500)}else Ra(P.view,yt),me.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Ot.attr("pointer-events","all"),pt.attr("cursor",xt.overlay),B.selection&&(F=B.selection),Wa(F)&&(B.selection=null,f.call(_)),gt.end(P,b.name)}function oe(P){switch(P.keyCode){case 16:{mt=w&&M;break}case 18:{b===Jt&&(w&&(X=nt-Y*w,S=A+Y*w),M&&(Q=$-J*M,C=H+J*M),b=qt,bt(P));break}case 32:{(b===Jt||b===qt)&&(w<0?X=nt-Y:w>0&&(S=A-Y),M<0?Q=$-J:M>0&&(C=H-J),b=en,pt.attr("cursor",xt.selection),bt(P));break}default:return}tn(P)}function Bt(P){switch(P.keyCode){case 16:{mt&&(It=ot=mt=!1,bt(P));break}case 18:{b===qt&&(w<0?X=nt:w>0&&(S=A),M<0?Q=$:M>0&&(C=H),b=Jt,bt(P));break}case 32:{b===en&&(P.altKey?(w&&(X=nt-Y*w,S=A+Y*w),M&&(Q=$-J*M,C=H+J*M),b=qt):(w<0?X=nt:w>0&&(S=A),M<0?Q=$:M>0&&(C=H),b=Jt),pt.attr("cursor",xt[y]),bt(P));break}default:return}tn(P)}}function p(g){c(this,arguments).moved(g)}function v(g){c(this,arguments).ended(g)}function k(){var g=this.__brush||{selection:null};return g.extent=si(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:$e(si(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:$e(!!g),u):n},u.touchable=function(g){return arguments.length?(i=typeof g=="function"?g:$e(!!g),u):i},u.handleSize=function(g){return arguments.length?(a=+g,u):a},u.keyModifiers=function(g){return arguments.length?(s=!!g,u):s},u.on=function(){var g=r.on.apply(r,arguments);return g===r?u:g},u}function Kt(e){return function(){return e}}function Ya(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new Ar(t)}function Qa(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function gs(e){this._context=e}gs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function He(e){return new gs(e)}function $a(e){return e[0]}function to(e){return e[1]}function eo(e,t){var n=Kt(!0),i=null,s=He,r=null,a=Ya(l);e=typeof e=="function"?e:e===void 0?$a:Kt(e),t=typeof t=="function"?t:t===void 0?to:Kt(t);function l(u){var f,c=(u=Qa(u)).length,h,m=!1,p;for(i==null&&(r=s(p=a())),f=0;f<=c;++f)!(f<c&&n(h=u[f],f,u))===m&&((m=!m)?r.lineStart():r.lineEnd()),m&&r.point(+e(h,f,u),+t(h,f,u));if(p)return r=null,p+""||null}return l.x=function(u){return arguments.length?(e=typeof u=="function"?u:Kt(+u),l):e},l.y=function(u){return arguments.length?(t=typeof u=="function"?u:Kt(+u),l):t},l.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Kt(!!u),l):n},l.curve=function(u){return arguments.length?(s=u,i!=null&&(r=s(i)),l):s},l.context=function(u){return arguments.length?(u==null?i=r=null:r=s(i=u),l):i},l}class ps{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function no(e){return new ps(e,!0)}function io(e){return new ps(e,!1)}function zt(){}function Ce(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Je(e){this._context=e}Je.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ce(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ce(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function so(e){return new Je(e)}function ys(e){this._context=e}ys.prototype={areaStart:zt,areaEnd:zt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Ce(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ro(e){return new ys(e)}function bs(e){this._context=e}bs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Ce(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ao(e){return new bs(e)}function vs(e,t){this._basis=new Je(e),this._beta=t}vs.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],s=t[0],r=e[n]-i,a=t[n]-s,l=-1,u;++l<=n;)u=l/n,this._basis.point(this._beta*e[l]+(1-this._beta)*(i+u*r),this._beta*t[l]+(1-this._beta)*(s+u*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const oo=function e(t){function n(i){return t===1?new Je(i):new vs(i,t)}return n.beta=function(i){return e(+i)},n}(.85);function Me(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function In(e,t){this._context=e,this._k=(1-t)/6}In.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Me(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Me(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const lo=function e(t){function n(i){return new In(i,t)}return n.tension=function(i){return e(+i)},n}(0);function On(e,t){this._context=e,this._k=(1-t)/6}On.prototype={areaStart:zt,areaEnd:zt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Me(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const uo=function e(t){function n(i){return new On(i,t)}return n.tension=function(i){return e(+i)},n}(0);function Bn(e,t){this._context=e,this._k=(1-t)/6}Bn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Me(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const fo=function e(t){function n(i){return new Bn(i,t)}return n.tension=function(i){return e(+i)},n}(0);function Fn(e,t,n){var i=e._x1,s=e._y1,r=e._x2,a=e._y2;if(e._l01_a>Zn){var l=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*l-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,s=(s*l-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Zn){var f=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);r=(r*f+e._x1*e._l23_2a-t*e._l12_2a)/c,a=(a*f+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(i,s,r,a,e._x2,e._y2)}function ws(e,t){this._context=e,this._alpha=t}ws.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Fn(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ho=function e(t){function n(i){return t?new ws(i,t):new In(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function ks(e,t){this._context=e,this._alpha=t}ks.prototype={areaStart:zt,areaEnd:zt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Fn(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const co=function e(t){function n(i){return t?new ks(i,t):new On(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function Ss(e,t){this._context=e,this._alpha=t}Ss.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Fn(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const _o=function e(t){function n(i){return t?new Ss(i,t):new Bn(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function Es(e){this._context=e}Es.prototype={areaStart:zt,areaEnd:zt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function mo(e){return new Es(e)}function oi(e){return e<0?-1:1}function li(e,t,n){var i=e._x1-e._x0,s=t-e._x1,r=(e._y1-e._y0)/(i||s<0&&-0),a=(n-e._y1)/(s||i<0&&-0),l=(r*s+a*i)/(i+s);return(oi(r)+oi(a))*Math.min(Math.abs(r),Math.abs(a),.5*Math.abs(l))||0}function ui(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function rn(e,t,n){var i=e._x0,s=e._y0,r=e._x1,a=e._y1,l=(r-i)/3;e._context.bezierCurveTo(i+l,s+l*t,r-l,a-l*n,r,a)}function De(e){this._context=e}De.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:rn(this,this._t0,ui(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,rn(this,ui(this,n=li(this,e,t)),n);break;default:rn(this,this._t0,n=li(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function As(e){this._context=new xs(e)}(As.prototype=Object.create(De.prototype)).point=function(e,t){De.prototype.point.call(this,t,e)};function xs(e){this._context=e}xs.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,s,r){this._context.bezierCurveTo(t,e,i,n,r,s)}};function go(e){return new De(e)}function po(e){return new As(e)}function Ns(e){this._context=e}Ns.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=fi(e),s=fi(t),r=0,a=1;a<n;++r,++a)this._context.bezierCurveTo(i[0][r],s[0][r],i[1][r],s[1][r],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function fi(e){var t,n=e.length-1,i,s=new Array(n),r=new Array(n),a=new Array(n);for(s[0]=0,r[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)s[t]=1,r[t]=4,a[t]=4*e[t]+2*e[t+1];for(s[n-1]=2,r[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=s[t]/r[t-1],r[t]-=i,a[t]-=i*a[t-1];for(s[n-1]=a[n-1]/r[n-1],t=n-2;t>=0;--t)s[t]=(a[t]-s[t+1])/r[t];for(r[n-1]=(e[n]+s[n-1])/2,t=0;t<n-1;++t)r[t]=2*e[t+1]-s[t+1];return[s,r]}function yo(e){return new Ns(e)}function qe(e,t){this._context=e,this._t=t}qe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function bo(e){return new qe(e,.5)}function vo(e){return new qe(e,0)}function wo(e){return new qe(e,1)}const ko=new Map([["basis",so],["basis-closed",ro],["basis-open",ao],["bundle",oo],["bump-x",no],["bump-y",io],["cardinal",lo],["cardinal-closed",uo],["cardinal-open",fo],["catmull-rom",ho],["catmull-rom-closed",co],["catmull-rom-open",_o],["linear",He],["linear-closed",mo],["monotone-x",go],["monotone-y",po],["natural",yo],["step",bo],["step-after",wo],["step-before",vo]]);function So(e=He,t){if(typeof e=="function")return e;const n=ko.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function Ts(e=se,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?se:So(e,t)}function se(e){return He(e)}function Eo(e={}){return xr(e)?e:{...e,x:$i}}function Ao(e={},t={}){arguments.length===1&&([e,t]=No(e));const{y1:n,y:i=n,x:s,...r}=t,[a,l,u,f]=Co(i,s,"y","x",e,r);return{...a,y1:n,y:l,x1:u,x2:f,x:Cr(u,f)}}function xo({x:e,x1:t,x2:n,...i}={}){return i=Nr(i,"y"),t===void 0&&n===void 0?Ao({x:e,...i}):([t,n]=Tr(e,t,n),{...i,x1:t,x2:n})}function No(e){const{offset:t,order:n,reverse:i,...s}=e;return[{offset:t,order:n,reverse:i},s]}const To={length:!0};function Co(e,t=Or,n,i,{offset:s,order:r,reverse:a},l){const u=ts(l),[f,c]=Mr(e),[h,m]=Yn(t),[p,v]=Yn(t);return h.hint=p.hint=To,s=Mo(s),r=Oo(r,s,i),[Dr(l,(k,g,_)=>{const y=e==null?void 0:c(Ir(be(k,e),_==null?void 0:_[n])),b=be(k,t,Float64Array),w=be(k,u),M=r&&r(k,y,b,w),B=k.length,T=m(new Float64Array(B)),F=v(new Float64Array(B)),K=[];for(const S of g){const A=y?Array.from(Qi(S,V=>y[V]).values()):[S];M&&zo(A,M);for(const V of A){let C=0,H=0;a&&V.reverse();for(const E of V){const X=b[E];X<0?C=F[E]=(T[E]=C)+X:X>0?H=F[E]=(T[E]=H)+X:F[E]=T[E]=H}}K.push(A)}return s&&s(K,T,F,w),{data:k,facets:g}}),f,h,p]}function Mo(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return Do;case"center":case"silhouette":return Io;case"wiggle":return Ms}throw new Error(`unknown offset: ${e}`)}}function Cs(e,t){let n=0,i=0;for(const s of e){const r=t[s];r<n&&(n=r),r>i&&(i=r)}return[n,i]}function Do(e,t,n){for(const i of e)for(const s of i){const[r,a]=Cs(s,n);for(const l of s){const u=1/(a-r||1);t[l]=u*(t[l]-r),n[l]=u*(n[l]-r)}}}function Io(e,t,n){for(const i of e){for(const s of i){const[r,a]=Cs(s,n);for(const l of s){const u=(a+r)/2;t[l]-=u,n[l]-=u}}Ds(i,t,n)}Is(e,t,n)}function Ms(e,t,n,i){for(const s of e){const r=new es;let a=0;for(const l of s){let u=-1;const f=l.map(p=>Math.abs(n[p]-t[p])),c=l.map(p=>{u=i?i[p]:++u;const v=n[p]-t[p],k=r.has(u)?v-r.get(u):0;return r.set(u,v),k}),h=[0,...La(c)];for(const p of l)t[p]+=a,n[p]+=a;const m=Ee(f);m&&(a-=Ee(f,(p,v)=>(c[v]/2+h[v])*p)/m)}Ds(s,t,n)}Is(e,t,n)}function Ds(e,t,n){const i=ce(e,s=>ce(s,r=>t[r]));for(const s of e)for(const r of s)t[r]-=i,n[r]-=i}function Is(e,t,n){const i=e.length;if(i===1)return;const s=e.map(l=>l.flat()),r=s.map(l=>(ce(l,u=>t[u])+gn(l,u=>n[u]))/2),a=ce(r);for(let l=0;l<i;l++){const u=a-r[l];for(const f of s[l])t[f]+=u,n[f]+=u}}function Oo(e,t,n){if(e===void 0&&t===Ms)return hi;if(e!=null){if(typeof e=="string"){switch(e.toLowerCase()){case"value":case n:return Bo;case"z":return Fo;case"sum":return Po;case"appearance":return jo;case"inside-out":return hi}return ci(Fr(e))}if(typeof e=="function")return ci(e);if(Array.isArray(e))return Lo(e);throw new Error(`invalid order: ${e}`)}}function Bo(e,t,n){return n}function Fo(e,t,n,i){return i}function Po(e,t,n,i){return Ke(i,Dn(Tn(e),s=>Ee(s,r=>n[r]),s=>i[s]))}function jo(e,t,n,i){return Ke(i,Dn(Tn(e),s=>t[ms(s,r=>n[r])],s=>i[s]))}function hi(e,t,n,i){const s=Tn(e),r=Dn(s,c=>t[ms(c,h=>n[h])],c=>i[c]),a=Yi(s,c=>Ee(c,h=>n[h]),c=>i[c]),l=[],u=[];let f=0;for(const c of r)f<0?(f+=a.get(c),l.push(c)):(f-=a.get(c),u.push(c));return Ke(i,u.reverse().concat(l))}function ci(e){return t=>be(t,e)}function Lo(e){return(t,n,i,s)=>Ke(s,e)}function Ke(e,t){if(!e)throw new Error("missing channel: z");return t=new es(t.map((n,i)=>[n,i])),e.map(n=>t.get(n))}function zo(e,t){for(const n of e)n.sort((i,s)=>Br(t[i],t[s]))}const Ro={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class Xo extends Le{constructor(t,n={}){const{x1:i,y1:s,x2:r,y2:a,curve:l,tension:u}=n;super(t,{x1:{value:i,scale:"x"},y1:{value:s,scale:"y"},x2:{value:r,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},n,Ro),this.curve=Ts(l,u),ns(this,n)}project(t,n,i){this.curve!==se&&super.project(t,n,i)}render(t,n,i,s,r){const{x1:a,y1:l,x2:u=a,y2:f=l}=i,{curve:c}=this;return ze("svg:g",r).call(Re,this,s,r).call(Xe,this,n).call(h=>h.selectAll().data(t).enter().append("path").call(Ve,this).attr("d",c===se&&r.projection?Vo(r.projection,a,l,u,f):m=>{const p=Pr(),v=c(p);return v.lineStart(),v.point(a[m],l[m]),v.point(u[m],f[m]),v.lineEnd(),p}).call(Cn,this,i).call(jr,this,i,r)).node()}}function Vo(e,t,n,i,s){const r=is(e);return t=Yt(t),n=Yt(n),i=Yt(i),s=Yt(s),a=>r({type:"LineString",coordinates:[[t[a],n[a]],[i[a],s[a]]]})}function Sn(e,{x:t,x1:n,x2:i,y:s,y1:r,y2:a,...l}={}){return[n,i]=_i(t,n,i),[r,a]=_i(s,r,a),new Xo(e,{...l,x1:n,x2:i,y1:r,y2:a})}function _i(e,t,n){if(e===void 0){if(t===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[t]}else{if(t===void 0)return n===void 0?[e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}class Uo extends Le{constructor(t,n,i={},s){super(t,n,i,s);const{inset:r=0,insetTop:a=r,insetRight:l=r,insetBottom:u=r,insetLeft:f=r,rx:c,ry:h}=i;this.insetTop=jt(a),this.insetRight=jt(l),this.insetBottom=jt(u),this.insetLeft=jt(f),this.rx=Ae(c,"auto"),this.ry=Ae(h,"auto")}render(t,n,i,s,r){const{rx:a,ry:l}=this;return ze("svg:g",r).call(Re,this,s,r).call(this._transform,this,n).call(u=>u.selectAll().data(t).enter().append("rect").call(Ve,this).attr("x",this._x(n,i,s)).attr("width",this._width(n,i,s)).attr("y",this._y(n,i,s)).attr("height",this._height(n,i,s)).call(xe,"rx",a).call(xe,"ry",l).call(Cn,this,i)).node()}_x(t,{x:n},{marginLeft:i}){const{insetLeft:s}=this;return n?r=>n[r]+s:i+s}_y(t,{y:n},{marginTop:i}){const{insetTop:s}=this;return n?r=>n[r]+s:i+s}_width({x:t},{x:n},{marginRight:i,marginLeft:s,width:r}){const{insetLeft:a,insetRight:l}=this,u=n&&t?t.bandwidth():r-i-s;return Math.max(0,u-a-l)}_height({y:t},{y:n},{marginTop:i,marginBottom:s,height:r}){const{insetTop:a,insetBottom:l}=this,u=n&&t?t.bandwidth():r-i-s;return Math.max(0,u-a-l)}}const Ho={ariaLabel:"cell"};class Jo extends Uo{constructor(t,{x:n,y:i,...s}={}){super(t,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:i,scale:"y",type:"band",optional:!0}},s,Ho)}_transform(t,n){t.call(Xe,n,{},0,0)}}function qo(e,{x:t,y:n,...i}={}){return[t,n]=ss(t,n),new Jo(e,{...i,x:t,y:n})}const Ko={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};let Wo=class extends Le{constructor(t,n={}){const{x:i,y:s,z:r,curve:a,tension:l}=n;super(t,{x:{value:i,scale:"x"},y:{value:s,scale:"y"},z:{value:ts(n),optional:!0}},n,Ko),this.z=r,this.curve=Ts(a,l),ns(this,n)}filter(t){return t}project(t,n,i){this.curve!==se&&super.project(t,n,i)}render(t,n,i,s,r){const{x:a,y:l}=i,{curve:u}=this;return ze("svg:g",r).call(Re,this,s,r).call(Xe,this,n).call(f=>f.selectAll().data(Lr(t,[a,l],this,i)).enter().append("path").call(Ve,this).call(zr,this,i).call(Rr,this,i,r).attr("d",u===se&&r.projection?Go(r.projection,a,l):eo().curve(u).defined(c=>c>=0).x(c=>a[c]).y(c=>l[c]))).node()}};function Go(e,t,n){const i=is(e);return t=Yt(t),n=Yt(n),s=>{let r=[];const a=[r];for(const l of s)l===-1?(r=[],a.push(r)):r.push([t[l],n[l]]);return i({type:"MultiLineString",coordinates:a})}}function Zo(e,{x:t,y:n,...i}={}){return[t,n]=ss(t,n),new Wo(e,{...i,x:t,y:n})}const Yo={ariaLabel:"rect"};class Os extends Le{constructor(t,n={}){const{x1:i,y1:s,x2:r,y2:a,inset:l=0,insetTop:u=l,insetRight:f=l,insetBottom:c=l,insetLeft:h=l,rx:m,ry:p}=n;super(t,{x1:{value:i,scale:"x",optional:!0},y1:{value:s,scale:"y",optional:!0},x2:{value:r,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},n,Yo),this.insetTop=jt(u),this.insetRight=jt(f),this.insetBottom=jt(c),this.insetLeft=jt(h),this.rx=Ae(m,"auto"),this.ry=Ae(p,"auto")}render(t,n,i,s,r){const{x:a,y:l}=n,{x1:u,y1:f,x2:c,y2:h}=i,{marginTop:m,marginRight:p,marginBottom:v,marginLeft:k,width:g,height:_}=s,{projection:y}=r,{insetTop:b,insetRight:w,insetBottom:M,insetLeft:B,rx:T,ry:F}=this;return ze("svg:g",r).call(Re,this,s,r).call(Xe,this,{x:u&&c&&a,y:f&&h&&l},0,0).call(K=>K.selectAll().data(t).enter().append("rect").call(Ve,this).attr("x",u&&c&&(y||!ye(a))?S=>Math.min(u[S],c[S])+B:k+B).attr("y",f&&h&&(y||!ye(l))?S=>Math.min(f[S],h[S])+b:m+b).attr("width",u&&c&&(y||!ye(a))?S=>Math.max(0,Math.abs(c[S]-u[S])-B-w):g-p-k-w-B).attr("height",f&&h&&(y||!ye(l))?S=>Math.max(0,Math.abs(f[S]-h[S])-b-M):_-m-v-b-M).call(xe,"rx",T).call(xe,"ry",F).call(Cn,this,i)).node()}}function Qo(e,t){return new Os(e,Xr(rs(t)))}function Pn(e,t={}){return Vr(t)||(t={...t,y:Ur,x2:$i,interval:1}),new Os(e,xo(rs(Eo(t))))}function $o(e,t={}){if(!e||e.length===0)return[];let n=Ut(e[0]),i=t.include?t.include:n;i=Se(t.include||n,t.exclude||[]);let s=Se(n,i);return console.log(i,s),_s(r=>i.map(a=>{let l=Oa(s,r);return l[t.key||"key"]=a,l[t.value||"value"]=r[a],l}),e)}class tl{add(t,n,i){let s=`${i.view.id}::${i.eventname}`;return et(this[s])?this[s]={iact:i,oldVal:t,newVal:n}:this[s].newVal=n,console.log("WriteSet.add",s,this[s]),this}forEach(t){Xt(this).forEach(t)}merge(t){if(et(t))return this;t.forEach(({iact:n,oldVal:i,newVal:s})=>{this.add(i,s,n)})}}const Vt=ht(Array),di=()=>null;let mi=0,el=0;function te(e,t,n){if(ht(String,t))e[t]=n;else if(Vt(t)){let[i,...s]=t;et(e[i])&&(e[i]={}),kt(s)?te(e,i,n):te(e[i],s,n)}}function Ie(e,t,n){if(ht(String,t))et(e[t])&&(e[t]=[]),e[t].push(n);else if(Vt(t)){let[i,...s]=t;et(e[i])&&(e[i]=kt(s)?[]:{}),kt(s)?Ie(e,i,n):Ie(e[i],s,n)}}function Pt(e,t,n){if(ht(String,t))return e[t]||(ht(Function,n)?n():n);if(Vt(t)){let[i,...s]=t;return et(e[i])?ht(Function,n)?n():n:kt(s)?Pt(e,i,n):Pt(e[i],s,n)}}class nl{constructor(){this.defaults={},this.dependencies={},this.view2iacts={},this.states={}}add(t,n,i=di,s){if(!t.attr)return this;let r=t.view.id,a=t.eventname;return Ie(this.dependencies,[r,a],{view:n,domainfunction:i}),Ie(this.view2iacts,n.id,t),this.setDefault(n,s),this}dependentViews(t){let n=t.eventname;return Pt(this.dependencies,[t.view.id,n],[])}cmp(t,n){return this.isDependentOn(t.view,n)?1:this.isDependentOn(n.view,t)?-1:0}isDependentOn(t,n){let i=this.getAncestorIacts(t);return cs(s=>(s.store??s)==n,i)}setDefault(t,n){return et(n)||(this.defaults[t.id]=n),this}getDefault(t,n){return(Pt(this.defaults,t.id)??di)(n,this.getAncestorIacts(t))}getAncestorIacts(t){let n=[];return Pt(this.view2iacts,t.id,[]).forEach(i=>{n.push(i),n=vn(n,this.getAncestorIacts(i.view))}),n}getStatesKey(t){let n=this.getAncestorIacts(t),i=vn([t.id],n.map(s=>[s.id,s.val()]));return console.debug("ancestorStates",i,JSON.stringify(i)),JSON.stringify(i)}saveState(t,n,i){let s=this.getStatesKey(n.view);!et(i)&&et(i.states[s])&&te(i.states,[s,n.eventname],{old:Pt(this.states,[s,n.eventname]),iact:n}),console.debug("saveState",s,n.eventname,Pt(this.states,[s,n.eventname]),t),te(this.states,[s,n.eventname],t)}restoreStates(t){Ft((n,i)=>{Ft(({iact:s,old:r},a)=>{console.debug("restoreState",i,s.eventname,r),te(this.states,[i,s.eventname],r)},n)},t.states)}getState(t,n,i=!0){let s=this.getStatesKey(t);return et(n)?this.states[s]:Pt(this.states,[s,n],()=>i?this.getDefault(t,n):void 0)}}class iu{constructor(t){this.interactions={},this.views={},this.backends={},this.i2b={},this.dependencies=new nl,this.transactions=[],this._isaborting=!1,this.backends=t;const n=i=>s=>this.backends.createBackend({...s,type:i});this.backend=i=>this.backends.createBackend(i),this.backend.array=n("array"),this.backend.duckdb=n("duckdb"),this.backend.identity=n("identity"),this.backend.overlay=n("overlay"),this.backend.query=n("query"),this.backend.matching=n("matching")}view(t){if(this.views[t.id]=t,Vt(t)){t.forEach(n=>this.view(n));return}this.interactions[t.id]=this.interactions[t.id]??{_attrs:{}},t.magic=this,Ft((n,i)=>{if(!et(this.interactions[t.id][i]))return;let s=r=>{t.load(o,event)};Object.assign(n,{start:(...r)=>this.start(n,...r),end:()=>this.end(n),abort:()=>this.abort(n),val:()=>Ge(n)??{},load:s,id:mi++,view:t,eventname:i,isActive:!1}),n.get=(r,a=null)=>{if(!et(this.interactions[t.id]._attrs[r]))return this.interactions[t.id]._attrs[r];let l={store:n,attr:r,view:t,eventname:i,load:s,default:a,id:mi++,val:()=>{let u=Ge(n);return Ne(r)(u)?u[r]:(kt(u)||console.error("could not find attr:",Ut(Ge(n)).length),ht(Function,a)?a():a)},start:()=>this.start(l),end:()=>this.end(l),abort:()=>this.abort(l)};return this.interactions[t.id]._attrs[r]=l,l},this.interactions[t.id][i]=n},t.interactions)}render(t,n,i,s={}){return t=Vt(t)?t:[t],n=Vt(n)?n:[n],t.map(a=>{if(ht(br,a))return a;let l=this.backend.identity();return this.connect(l,a),l}).forEach(a=>{n.forEach(l=>a.registerView(l,i,s))}),this}connect(t,n,i){var a;if(Vt(n)){n.forEach(l=>this.connect(t,l,i));return}let s=n,r=s.view;if(et(this.i2b[r.id])){let l=null;s.subscribe(u=>{if(vr(l,u)){console.debug("iact.subscribe.duplicate",r.id);return}console.log("iact.subscribe.handleEvent",r.id,s.id),l=u,this.handleEvent(u,s)}),s.store?s.store.isActive=!0:s.isActive=!0,(a=r.registerInteraction)==null||a.call(r,s),this.i2b[r.id]={}}et(t)||te(this.i2b,[r.id,t.id],this.processBindings(i))}processBindings(t){if(et(t)||kt(t))return qn;if(ht(Function,t))return t;let n=ti(xa(ht(Array),ht(Object)),Lt(i=>this.processBindings(i)),ti(ht(Function),qn,i=>()=>i))(t);return Ne("*",t)?i=>wr(i,$n(n)(i)):$n(n)}saveIactState(t,n,i){this.dependencies.saveState(t,n,i),this.dependencies.dependentViews(n).forEach(({view:s,domainfunction:r})=>{if(r){let l=this.dependencies.getAncestorIacts(s);s.render(r(t,l))}let a=this.dependencies.getState(s);Ft((l,u)=>{l=l??this.dependencies.getDefault(s,u),l&&(console.debug("saveIactState.load",s.id,u,l),s.load(l,u))},a),(et(a)||kt(a))&&(console.debug("saveIactState.load.default",s.id),s.load(this.dependencies.getDefault(s)))})}handleEvent(t,n){if(!et(t))if(console.log("handleEvent",this._isaborting,n.view.id,t),this._isaborting)this.dependencies.saveState(t,n,null),this.sendEventToBackends(t,n);else if(this.transactions.length==0||Qe(this.transactions).iact!=n)n.start(),this.handleEvent(t,n),n.end();else{let i=Qe(this.transactions),s=this.dependencies.getState(n.view,n.eventname,!1);i.writeSet.add(s,t,n),i.visible&&this.sendEventToBackends(t,n)}}sendEventToBackends(t,n){Ft((i,s)=>{let r=i(t);this.backends[s].execute(r,n)},this.i2b[n.view.id])}snapshot(){return Da(t=>t.snapshot(),this.backends)}restoreSnapshot(t){Ft((n,i)=>{et(n)||this.backends[i].restoreSnapshot(n)},t.snapshot)}start(t,n=!0){this.transactions.push({xid:el++,iact:t,visible:n,snapshot:this.snapshot(),states:{},writeSet:new tl}),console.log("magic.start",this.transactions)}end(t){if(!cs(r=>r.iact=t,this.transactions)){console.log("magic.end: can't find interaction",t);return}let n=this.transactions.pop();console.log("magic.end[",n.writeSet),n.writeSet.forEach(({newVal:r,iact:a})=>{this.saveIactState(r,a,n),n.visible||this.sendEventToBackends(r,a)});let i=Xt(n.writeSet).map(({iact:r})=>r.id),s=_s(r=>Xt(r).map(({iact:a})=>a.id),Xt(n.states));if(kt(ja(i,s))||console.error("writeset != statesids",i,s),this.transactions.length>0){let r=Qe(this.transactions);r.snapshot=Kn(r.snapshot,n.snapshot),r.states=Kn(r.states,n.states),r.writeSet.merge(n.writeSet)}console.log("magic.end]",this.dependencies.states,this.transactions)}abort(t){try{this._isaborting=!0;let n=this.transactions.pop();console.log("magic.abort",n.states,n.writeSet),this.restoreSnapshot(n),console.log("magic.abort.restoredStates.before",kr(this.dependencies.states)),this.dependencies.restoreStates(n),console.log("magic.abort.restoredStates.after",this.dependencies.states),Fa((s,r)=>this.dependencies.cmp(s.iact,r.iact),Xt(n.writeSet)).forEach(({iact:s})=>{let r=this.dependencies.getState(s.view,s.eventname);r&&s.view.load&&(console.log("magic.abort.load",r,s),s.view.load(r,s.eventname))})}finally{this._isaborting=!1}}importState(t){let n=JSON.parse(t);this.dependencies.states=n,Ft((i,s)=>{let r=this.views[s];this.walkViews(r)},this.dependencies.dependencies)}walkViews(t){let n=this.dependencies.getStatesKey(t),i=this.dependencies.states[n],s=Xt(i);if(s.length>1){console.error("unexpected behavior, multiple values for state");return}t.load(s[0]),Ft((r,a)=>{this.dependencies.dependentViews(r).forEach(u=>{this.walkViews(u.view)})},t.interactions)}exportState(){return JSON.stringify(this.dependencies.states)}}const Oe="_theplot_",il={top:30,right:20,bottom:50,left:40};function We(e,t){e.className=e.className||Oe,et(e.width);let n=Hr(e),i=null;return n.tagName=="svg"&&n.classList.contains(e.className)?i=n:i=n.querySelector(`svg.${e.className}`),i.classList.add(Oe),e.width||i.setAttribute("width","100%"),e.height||i.setAttribute("height","100%"),t.innerHTML="",t.appendChild(n),n}class jn{constructor({iact:t,magic:n,plot:i=null}){this.x=null,this.y=null,this.defaultSelection,this.brush,this.el,this.iact=t,this.magic=n,this.plot=i,i&&this.init(i)}load(t){if(!(!this.el||!this.brush)&&this.iact.isActive){if(!t||kt(t)){this.el.call(this.brush.clear);return}const{left:n,right:i}=t;this.el.call(this.brush.move,[this.x.apply(n),this.x.apply(i)])}}brushed({selection:t}){if(this.iact.isActive)if(!t)this.iact.set(this.defaultSelection);else{const[n,i]=t;this.iact.set({left:this.x.invert(n),right:this.x.invert(i)})}}brushstart({selection:t,sourceEvent:n}){this.iact.isActive&&n&&this.magic.start(this.iact)}brushended({selection:t,sourceEvent:n}){this.iact.isActive&&(t||this.iact.set({left:this.x.domain[0],right:this.x.domain[1]}),n&&this.magic.end(this.iact))}init(t){if(!this.iact.isActive)return;if(this.plot=t,this.x=t.scale("x"),this.y=t.scale("y"),this.y.range[0]<this.y.range[1]){let i=this.y.range[0];this.y.range[0]=this.y.range[1],this.y.range[1]=i}this.defaultSelection={left:this.x.domain[0],right:this.x.domain[1]};let n=t.classList.contains(Oe)?Tt(t):Tt(t.querySelector(`.${Oe}`));this.brush=Ga().extent([[this.x.range[0],this.y.range[1]],[this.x.range[1],this.y.range[0]]]).on("brush",i=>this.brushed(i)).on("start",i=>this.brushstart(i)).on("end",i=>this.brushended(i)),this.el=n.append("g").attr("class","brush").call(this.brush)}}function sl(e){let t,n;return{c(){t=j("div"),n=j("div"),this.h()},l(i){t=L(i,"DIV",{id:!0});var s=R(t);n=L(s,"DIV",{}),R(n).forEach(N),s.forEach(N),this.h()},h(){x(t,"id",e[0])},m(i,s){U(i,t,s),z(t,n),e[15](n)},p(i,[s]){s&1&&x(t,"id",i[0])},i:st,o:st,d(i){i&&N(t),e[15](null)}}}function rl(e,t,n){let{id:i,name:s,magic:r,description:a,xAttr:l,yAttr:u,xDomainMin:f=null,xDomainMax:c=null,brushX:h=dt({}),interactions:m={brushX:h}}=t,p,v=null,k={},g=[],_;function y(T,F){return F==="overlay"?(k=T,!0):!1}function b(T,F){!T||T.length===0||typeof F=="object"||(y(T,F)?console.debug("overlays"):g=T,M())}let{load:w=T=>_==null?void 0:_.load(T)}=t;function M(){n(2,f=f??ce(Lt(yn(l),g))),n(3,c=c??gn(Lt(yn(l),g)));const T=Math.max(36,Math.min(g.length,20));let F={x:{domain:[+f,+c]},height:200,marginBottom:50,color:{scheme:"Tableau10",legend:!0,style:{"font-size":10,"margin-left":"2rem"}},marks:[Ue({ticks:T,fontSize:10}),Mn({fontSize:10}),as([f]),os([0]),Zo(g,{x:l,y:u,marker:!0,strokeWidth:3}),Pn(k,{x1:"left",x2:"right",y2:gn(hs(u,g)),fill:"key",color:"key",opacity:.2})]};v=We(F,p),h.isActive&&(_=_??new jn({iact:h,magic:r}),_.init(v))}function B(T){ae[T?"unshift":"push"](()=>{p=T,n(1,p)})}return e.$$set=T=>{"id"in T&&n(4,i=T.id),"name"in T&&n(0,s=T.name),"magic"in T&&n(5,r=T.magic),"description"in T&&n(6,a=T.description),"xAttr"in T&&n(7,l=T.xAttr),"yAttr"in T&&n(8,u=T.yAttr),"xDomainMin"in T&&n(2,f=T.xDomainMin),"xDomainMax"in T&&n(3,c=T.xDomainMax),"brushX"in T&&n(9,h=T.brushX),"interactions"in T&&n(10,m=T.interactions),"load"in T&&n(13,w=T.load)},[s,p,f,c,i,r,a,l,u,h,m,y,b,w,M,B]}class su extends Ct{constructor(t){super(),Mt(this,t,rl,sl,Dt,{id:4,name:0,magic:5,description:6,xAttr:7,yAttr:8,xDomainMin:2,xDomainMax:3,brushX:9,interactions:10,overlay:11,render:12,load:13,update:14})}get id(){return this.$$.ctx[4]}set id(t){this.$$set({id:t}),D()}get name(){return this.$$.ctx[0]}set name(t){this.$$set({name:t}),D()}get magic(){return this.$$.ctx[5]}set magic(t){this.$$set({magic:t}),D()}get description(){return this.$$.ctx[6]}set description(t){this.$$set({description:t}),D()}get xAttr(){return this.$$.ctx[7]}set xAttr(t){this.$$set({xAttr:t}),D()}get yAttr(){return this.$$.ctx[8]}set yAttr(t){this.$$set({yAttr:t}),D()}get xDomainMin(){return this.$$.ctx[2]}set xDomainMin(t){this.$$set({xDomainMin:t}),D()}get xDomainMax(){return this.$$.ctx[3]}set xDomainMax(t){this.$$set({xDomainMax:t}),D()}get brushX(){return this.$$.ctx[9]}set brushX(t){this.$$set({brushX:t}),D()}get interactions(){return this.$$.ctx[10]}set interactions(t){this.$$set({interactions:t}),D()}get overlay(){return this.$$.ctx[11]}get render(){return this.$$.ctx[12]}get load(){return this.$$.ctx[13]}set load(t){this.$$set({load:t}),D()}get update(){return this.$$.ctx[14]}}function gi(e){return Object.prototype.toString.call(e)==="[object Date]"}function En(e,t,n,i){if(typeof n=="number"||gi(n)){const s=i-n,r=(n-t)/(e.dt||1/60),a=e.opts.stiffness*s,l=e.opts.damping*r,u=(a-l)*e.inv_mass,f=(r+u)*e.dt;return Math.abs(f)<e.opts.precision&&Math.abs(s)<e.opts.precision?i:(e.settled=!1,gi(n)?new Date(n.getTime()+f):n+f)}else{if(Array.isArray(n))return n.map((s,r)=>En(e,t[r],n[r],i[r]));if(typeof n=="object"){const s={};for(const r in n)s[r]=En(e,t[r],n[r],i[r]);return s}else throw new Error(`Cannot spring ${typeof n} values`)}}function al(e,t={}){const n=dt(e),{stiffness:i=.15,damping:s=.8,precision:r=.01}=t;let a,l,u,f=e,c=e,h=1,m=0,p=!1;function v(g,_={}){c=g;const y=u={};return e==null||_.hard||k.stiffness>=1&&k.damping>=1?(p=!0,a=Xn(),f=g,n.set(e=c),Promise.resolve()):(_.soft&&(m=1/((_.soft===!0?.5:+_.soft)*60),h=0),l||(a=Xn(),p=!1,l=tr(b=>{if(p)return p=!1,l=null,!1;h=Math.min(h+m,1);const w={inv_mass:h,opts:k,settled:!0,dt:(b-a)*60/1e3},M=En(w,f,e,c);return a=b,f=e,n.set(e=M),w.settled&&(l=null),!w.settled})),new Promise(b=>{l.promise.then(()=>{y===u&&b()})}))}const k={set:v,update:(g,_)=>v(g(c,e),_),subscribe:n.subscribe,stiffness:i,damping:s,precision:r};return k}function pi(e,t,n){const i=e.slice();return i[28]=t[n],i[30]=n,i}function yi(e){let t,n,i,s,r=(e[6]==="label"||e[7]==="label")&&bi(e);return{c(){t=j("span"),r&&r.c(),this.h()},l(a){t=L(a,"SPAN",{class:!0,style:!0});var l=R(t);r&&r.l(l),l.forEach(N),this.h()},h(){x(t,"class","pip first"),x(t,"style",n=e[14]+": 0%;"),O(t,"selected",e[18](e[0])),O(t,"in-range",e[17](e[0]))},m(a,l){U(a,t,l),r&&r.m(t,null),i||(s=[W(t,"click",function(){ee(e[21](e[0]))&&e[21](e[0]).apply(this,arguments)}),W(t,"touchend",fe(function(){ee(e[21](e[0]))&&e[21](e[0]).apply(this,arguments)}))],i=!0)},p(a,l){e=a,e[6]==="label"||e[7]==="label"?r?r.p(e,l):(r=bi(e),r.c(),r.m(t,null)):r&&(r.d(1),r=null),l&16384&&n!==(n=e[14]+": 0%;")&&x(t,"style",n),l&262145&&O(t,"selected",e[18](e[0])),l&131073&&O(t,"in-range",e[17](e[0]))},d(a){a&&N(t),r&&r.d(),i=!1,Ht(s)}}}function bi(e){let t,n=e[12](e[16](e[0]),0,0)+"",i,s=e[10]&&vi(e),r=e[11]&&wi(e);return{c(){t=j("span"),s&&s.c(),i=rt(n),r&&r.c(),this.h()},l(a){t=L(a,"SPAN",{class:!0});var l=R(t);s&&s.l(l),i=at(l,n),r&&r.l(l),l.forEach(N),this.h()},h(){x(t,"class","pipVal")},m(a,l){U(a,t,l),s&&s.m(t,null),z(t,i),r&&r.m(t,null)},p(a,l){a[10]?s?s.p(a,l):(s=vi(a),s.c(),s.m(t,i)):s&&(s.d(1),s=null),l&69633&&n!==(n=a[12](a[16](a[0]),0,0)+"")&&ft(i,n),a[11]?r?r.p(a,l):(r=wi(a),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},d(a){a&&N(t),s&&s.d(),r&&r.d()}}}function vi(e){let t,n;return{c(){t=j("span"),n=rt(e[10]),this.h()},l(i){t=L(i,"SPAN",{class:!0});var s=R(t);n=at(s,e[10]),s.forEach(N),this.h()},h(){x(t,"class","pipVal-prefix")},m(i,s){U(i,t,s),z(t,n)},p(i,s){s&1024&&ft(n,i[10])},d(i){i&&N(t)}}}function wi(e){let t,n;return{c(){t=j("span"),n=rt(e[11]),this.h()},l(i){t=L(i,"SPAN",{class:!0});var s=R(t);n=at(s,e[11]),s.forEach(N),this.h()},h(){x(t,"class","pipVal-suffix")},m(i,s){U(i,t,s),z(t,n)},p(i,s){s&2048&&ft(n,i[11])},d(i){i&&N(t)}}}function ki(e){let t,n=Array(e[20]+1),i=[];for(let s=0;s<n.length;s+=1)i[s]=Ni(pi(e,n,s));return{c(){for(let s=0;s<i.length;s+=1)i[s].c();t=ne()},l(s){for(let r=0;r<i.length;r+=1)i[r].l(s);t=ne()},m(s,r){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(s,r);U(s,t,r)},p(s,r){if(r&4120131){n=Array(s[20]+1);let a;for(a=0;a<n.length;a+=1){const l=pi(s,n,a);i[a]?i[a].p(l,r):(i[a]=Ni(l),i[a].c(),i[a].m(t.parentNode,t))}for(;a<i.length;a+=1)i[a].d(1);i.length=n.length}},d(s){xn(i,s),s&&N(t)}}}function Si(e){let t,n,i,s,r,a=(e[6]==="label"||e[9]==="label")&&Ei(e);return{c(){t=j("span"),a&&a.c(),n=St(),this.h()},l(l){t=L(l,"SPAN",{class:!0,style:!0});var u=R(t);a&&a.l(u),n=Et(u),u.forEach(N),this.h()},h(){x(t,"class","pip"),x(t,"style",i=e[14]+": "+e[15](e[19](e[30]))+"%;"),O(t,"selected",e[18](e[19](e[30]))),O(t,"in-range",e[17](e[19](e[30])))},m(l,u){U(l,t,u),a&&a.m(t,null),z(t,n),s||(r=[W(t,"click",function(){ee(e[21](e[19](e[30])))&&e[21](e[19](e[30])).apply(this,arguments)}),W(t,"touchend",fe(function(){ee(e[21](e[19](e[30])))&&e[21](e[19](e[30])).apply(this,arguments)}))],s=!0)},p(l,u){e=l,e[6]==="label"||e[9]==="label"?a?a.p(e,u):(a=Ei(e),a.c(),a.m(t,n)):a&&(a.d(1),a=null),u&573440&&i!==(i=e[14]+": "+e[15](e[19](e[30]))+"%;")&&x(t,"style",i),u&786432&&O(t,"selected",e[18](e[19](e[30]))),u&655360&&O(t,"in-range",e[17](e[19](e[30])))},d(l){l&&N(t),a&&a.d(),s=!1,Ht(r)}}}function Ei(e){let t,n=e[12](e[19](e[30]),e[30],e[15](e[19](e[30])))+"",i,s=e[10]&&Ai(e),r=e[11]&&xi(e);return{c(){t=j("span"),s&&s.c(),i=rt(n),r&&r.c(),this.h()},l(a){t=L(a,"SPAN",{class:!0});var l=R(t);s&&s.l(l),i=at(l,n),r&&r.l(l),l.forEach(N),this.h()},h(){x(t,"class","pipVal")},m(a,l){U(a,t,l),s&&s.m(t,null),z(t,i),r&&r.m(t,null)},p(a,l){a[10]?s?s.p(a,l):(s=Ai(a),s.c(),s.m(t,i)):s&&(s.d(1),s=null),l&561152&&n!==(n=a[12](a[19](a[30]),a[30],a[15](a[19](a[30])))+"")&&ft(i,n),a[11]?r?r.p(a,l):(r=xi(a),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},d(a){a&&N(t),s&&s.d(),r&&r.d()}}}function Ai(e){let t,n;return{c(){t=j("span"),n=rt(e[10]),this.h()},l(i){t=L(i,"SPAN",{class:!0});var s=R(t);n=at(s,e[10]),s.forEach(N),this.h()},h(){x(t,"class","pipVal-prefix")},m(i,s){U(i,t,s),z(t,n)},p(i,s){s&1024&&ft(n,i[10])},d(i){i&&N(t)}}}function xi(e){let t,n;return{c(){t=j("span"),n=rt(e[11]),this.h()},l(i){t=L(i,"SPAN",{class:!0});var s=R(t);n=at(s,e[11]),s.forEach(N),this.h()},h(){x(t,"class","pipVal-suffix")},m(i,s){U(i,t,s),z(t,n)},p(i,s){s&2048&&ft(n,i[11])},d(i){i&&N(t)}}}function Ni(e){let t=e[19](e[30])!==e[0]&&e[19](e[30])!==e[1],n,i=t&&Si(e);return{c(){i&&i.c(),n=ne()},l(s){i&&i.l(s),n=ne()},m(s,r){i&&i.m(s,r),U(s,n,r)},p(s,r){r&524291&&(t=s[19](s[30])!==s[0]&&s[19](s[30])!==s[1]),t?i?i.p(s,r):(i=Si(s),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},d(s){i&&i.d(s),s&&N(n)}}}function Ti(e){let t,n,i,s,r=(e[6]==="label"||e[8]==="label")&&Ci(e);return{c(){t=j("span"),r&&r.c(),this.h()},l(a){t=L(a,"SPAN",{class:!0,style:!0});var l=R(t);r&&r.l(l),l.forEach(N),this.h()},h(){x(t,"class","pip last"),x(t,"style",n=e[14]+": 100%;"),O(t,"selected",e[18](e[1])),O(t,"in-range",e[17](e[1]))},m(a,l){U(a,t,l),r&&r.m(t,null),i||(s=[W(t,"click",function(){ee(e[21](e[1]))&&e[21](e[1]).apply(this,arguments)}),W(t,"touchend",fe(function(){ee(e[21](e[1]))&&e[21](e[1]).apply(this,arguments)}))],i=!0)},p(a,l){e=a,e[6]==="label"||e[8]==="label"?r?r.p(e,l):(r=Ci(e),r.c(),r.m(t,null)):r&&(r.d(1),r=null),l&16384&&n!==(n=e[14]+": 100%;")&&x(t,"style",n),l&262146&&O(t,"selected",e[18](e[1])),l&131074&&O(t,"in-range",e[17](e[1]))},d(a){a&&N(t),r&&r.d(),i=!1,Ht(s)}}}function Ci(e){let t,n=e[12](e[16](e[1]),e[20],100)+"",i,s=e[10]&&Mi(e),r=e[11]&&Di(e);return{c(){t=j("span"),s&&s.c(),i=rt(n),r&&r.c(),this.h()},l(a){t=L(a,"SPAN",{class:!0});var l=R(t);s&&s.l(l),i=at(l,n),r&&r.l(l),l.forEach(N),this.h()},h(){x(t,"class","pipVal")},m(a,l){U(a,t,l),s&&s.m(t,null),z(t,i),r&&r.m(t,null)},p(a,l){a[10]?s?s.p(a,l):(s=Mi(a),s.c(),s.m(t,i)):s&&(s.d(1),s=null),l&1118210&&n!==(n=a[12](a[16](a[1]),a[20],100)+"")&&ft(i,n),a[11]?r?r.p(a,l):(r=Di(a),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},d(a){a&&N(t),s&&s.d(),r&&r.d()}}}function Mi(e){let t,n;return{c(){t=j("span"),n=rt(e[10]),this.h()},l(i){t=L(i,"SPAN",{class:!0});var s=R(t);n=at(s,e[10]),s.forEach(N),this.h()},h(){x(t,"class","pipVal-prefix")},m(i,s){U(i,t,s),z(t,n)},p(i,s){s&1024&&ft(n,i[10])},d(i){i&&N(t)}}}function Di(e){let t,n;return{c(){t=j("span"),n=rt(e[11]),this.h()},l(i){t=L(i,"SPAN",{class:!0});var s=R(t);n=at(s,e[11]),s.forEach(N),this.h()},h(){x(t,"class","pipVal-suffix")},m(i,s){U(i,t,s),z(t,n)},p(i,s){s&2048&&ft(n,i[11])},d(i){i&&N(t)}}}function ol(e){let t,n,i,s=(e[6]&&e[7]!==!1||e[7])&&yi(e),r=(e[6]&&e[9]!==!1||e[9])&&ki(e),a=(e[6]&&e[8]!==!1||e[8])&&Ti(e);return{c(){t=j("div"),s&&s.c(),n=St(),r&&r.c(),i=St(),a&&a.c(),this.h()},l(l){t=L(l,"DIV",{class:!0});var u=R(t);s&&s.l(u),n=Et(u),r&&r.l(u),i=Et(u),a&&a.l(u),u.forEach(N),this.h()},h(){x(t,"class","rangePips"),O(t,"disabled",e[5]),O(t,"hoverable",e[4]),O(t,"vertical",e[2]),O(t,"reversed",e[3]),O(t,"focus",e[13])},m(l,u){U(l,t,u),s&&s.m(t,null),z(t,n),r&&r.m(t,null),z(t,i),a&&a.m(t,null)},p(l,[u]){l[6]&&l[7]!==!1||l[7]?s?s.p(l,u):(s=yi(l),s.c(),s.m(t,n)):s&&(s.d(1),s=null),l[6]&&l[9]!==!1||l[9]?r?r.p(l,u):(r=ki(l),r.c(),r.m(t,i)):r&&(r.d(1),r=null),l[6]&&l[8]!==!1||l[8]?a?a.p(l,u):(a=Ti(l),a.c(),a.m(t,null)):a&&(a.d(1),a=null),u&32&&O(t,"disabled",l[5]),u&16&&O(t,"hoverable",l[4]),u&4&&O(t,"vertical",l[2]),u&8&&O(t,"reversed",l[3]),u&8192&&O(t,"focus",l[13])},i:st,o:st,d(l){l&&N(t),s&&s.d(),r&&r.d(),a&&a.d()}}}function ll(e,t,n){let i,s,r,a,l,{range:u=!1}=t,{min:f=0}=t,{max:c=100}=t,{step:h=1}=t,{values:m=[(c+f)/2]}=t,{vertical:p=!1}=t,{reversed:v=!1}=t,{hoverable:k=!0}=t,{disabled:g=!1}=t,{pipstep:_=void 0}=t,{all:y=!0}=t,{first:b=void 0}=t,{last:w=void 0}=t,{rest:M=void 0}=t,{prefix:B=""}=t,{suffix:T=""}=t,{formatter:F=(E,X)=>E}=t,{focus:K=void 0}=t,{orientationStart:S=void 0}=t,{percentOf:A=void 0}=t,{moveHandle:V=void 0}=t,{fixFloat:C=void 0}=t;function H(E){g||V(void 0,E)}return e.$$set=E=>{"range"in E&&n(22,u=E.range),"min"in E&&n(0,f=E.min),"max"in E&&n(1,c=E.max),"step"in E&&n(23,h=E.step),"values"in E&&n(24,m=E.values),"vertical"in E&&n(2,p=E.vertical),"reversed"in E&&n(3,v=E.reversed),"hoverable"in E&&n(4,k=E.hoverable),"disabled"in E&&n(5,g=E.disabled),"pipstep"in E&&n(25,_=E.pipstep),"all"in E&&n(6,y=E.all),"first"in E&&n(7,b=E.first),"last"in E&&n(8,w=E.last),"rest"in E&&n(9,M=E.rest),"prefix"in E&&n(10,B=E.prefix),"suffix"in E&&n(11,T=E.suffix),"formatter"in E&&n(12,F=E.formatter),"focus"in E&&n(13,K=E.focus),"orientationStart"in E&&n(14,S=E.orientationStart),"percentOf"in E&&n(15,A=E.percentOf),"moveHandle"in E&&n(26,V=E.moveHandle),"fixFloat"in E&&n(16,C=E.fixFloat)},e.$$.update=()=>{e.$$.dirty&41943047&&n(27,i=_||((c-f)/h>=(p?50:100)?(c-f)/(p?10:20):1)),e.$$.dirty&142606339&&n(20,s=parseInt((c-f)/(h*i),10)),e.$$.dirty&142671873&&n(19,r=function(E){return C(f+E*h*i)}),e.$$.dirty&16842752&&n(18,a=function(E){return m.some(X=>C(X)===C(E))}),e.$$.dirty&20971520&&n(17,l=function(E){if(u==="min")return m[0]>E;if(u==="max")return m[0]<E;if(u)return m[0]<E&&m[1]>E})},[f,c,p,v,k,g,y,b,w,M,B,T,F,K,S,A,C,l,a,r,s,H,u,h,m,_,V,i]}class ul extends Ct{constructor(t){super(),Mt(this,t,ll,ol,Dt,{range:22,min:0,max:1,step:23,values:24,vertical:2,reversed:3,hoverable:4,disabled:5,pipstep:25,all:6,first:7,last:8,rest:9,prefix:10,suffix:11,formatter:12,focus:13,orientationStart:14,percentOf:15,moveHandle:26,fixFloat:16})}}function Ii(e,t,n){const i=e.slice();return i[64]=t[n],i[66]=n,i}function Oi(e){let t,n=e[21](e[64],e[66],e[23](e[64]))+"",i,s=e[18]&&Bi(e),r=e[19]&&Fi(e);return{c(){t=j("span"),s&&s.c(),i=rt(n),r&&r.c(),this.h()},l(a){t=L(a,"SPAN",{class:!0});var l=R(t);s&&s.l(l),i=at(l,n),r&&r.l(l),l.forEach(N),this.h()},h(){x(t,"class","rangeFloat")},m(a,l){U(a,t,l),s&&s.m(t,null),z(t,i),r&&r.m(t,null)},p(a,l){a[18]?s?s.p(a,l):(s=Bi(a),s.c(),s.m(t,i)):s&&(s.d(1),s=null),l[0]&10485761&&n!==(n=a[21](a[64],a[66],a[23](a[64]))+"")&&ft(i,n),a[19]?r?r.p(a,l):(r=Fi(a),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},d(a){a&&N(t),s&&s.d(),r&&r.d()}}}function Bi(e){let t,n;return{c(){t=j("span"),n=rt(e[18]),this.h()},l(i){t=L(i,"SPAN",{class:!0});var s=R(t);n=at(s,e[18]),s.forEach(N),this.h()},h(){x(t,"class","rangeFloat-prefix")},m(i,s){U(i,t,s),z(t,n)},p(i,s){s[0]&262144&&ft(n,i[18])},d(i){i&&N(t)}}}function Fi(e){let t,n;return{c(){t=j("span"),n=rt(e[19]),this.h()},l(i){t=L(i,"SPAN",{class:!0});var s=R(t);n=at(s,e[19]),s.forEach(N),this.h()},h(){x(t,"class","rangeFloat-suffix")},m(i,s){U(i,t,s),z(t,n)},p(i,s){s[0]&524288&&ft(n,i[19])},d(i){i&&N(t)}}}function Pi(e){let t,n,i,s,r,a,l,u,f,c,h,m,p=e[7]&&Oi(e);return{c(){t=j("span"),n=j("span"),i=St(),p&&p.c(),this.h()},l(v){t=L(v,"SPAN",{role:!0,class:!0,"data-handle":!0,style:!0,"aria-valuemin":!0,"aria-valuemax":!0,"aria-valuenow":!0,"aria-valuetext":!0,"aria-orientation":!0,"aria-disabled":!0,disabled:!0,tabindex:!0});var k=R(t);n=L(k,"SPAN",{class:!0}),R(n).forEach(N),i=Et(k),p&&p.l(k),k.forEach(N),this.h()},h(){x(n,"class","rangeNub"),x(t,"role","slider"),x(t,"class","rangeHandle"),x(t,"data-handle",e[66]),x(t,"style",s=e[28]+": "+e[29][e[66]]+"%; z-index: "+(e[26]===e[66]?3:2)+";"),x(t,"aria-valuemin",r=e[2]===!0&&e[66]===1?e[0][0]:e[3]),x(t,"aria-valuemax",a=e[2]===!0&&e[66]===0?e[0][1]:e[4]),x(t,"aria-valuenow",l=e[64]),x(t,"aria-valuetext",u=""+(e[18]+e[21](e[64],e[66],e[23](e[64]))+e[19])),x(t,"aria-orientation",f=e[6]?"vertical":"horizontal"),x(t,"aria-disabled",e[10]),x(t,"disabled",e[10]),x(t,"tabindex",c=e[10]?-1:0),O(t,"active",e[24]&&e[26]===e[66]),O(t,"press",e[25]&&e[26]===e[66])},m(v,k){U(v,t,k),z(t,n),z(t,i),p&&p.m(t,null),h||(m=[W(t,"blur",e[34]),W(t,"focus",e[35]),W(t,"keydown",e[36])],h=!0)},p(v,k){v[7]?p?p.p(v,k):(p=Oi(v),p.c(),p.m(t,null)):p&&(p.d(1),p=null),k[0]&872415232&&s!==(s=v[28]+": "+v[29][v[66]]+"%; z-index: "+(v[26]===v[66]?3:2)+";")&&x(t,"style",s),k[0]&13&&r!==(r=v[2]===!0&&v[66]===1?v[0][0]:v[3])&&x(t,"aria-valuemin",r),k[0]&21&&a!==(a=v[2]===!0&&v[66]===0?v[0][1]:v[4])&&x(t,"aria-valuemax",a),k[0]&1&&l!==(l=v[64])&&x(t,"aria-valuenow",l),k[0]&11272193&&u!==(u=""+(v[18]+v[21](v[64],v[66],v[23](v[64]))+v[19]))&&x(t,"aria-valuetext",u),k[0]&64&&f!==(f=v[6]?"vertical":"horizontal")&&x(t,"aria-orientation",f),k[0]&1024&&x(t,"aria-disabled",v[10]),k[0]&1024&&x(t,"disabled",v[10]),k[0]&1024&&c!==(c=v[10]?-1:0)&&x(t,"tabindex",c),k[0]&83886080&&O(t,"active",v[24]&&v[26]===v[66]),k[0]&100663296&&O(t,"press",v[25]&&v[26]===v[66])},d(v){v&&N(t),p&&p.d(),h=!1,Ht(m)}}}function ji(e){let t,n;return{c(){t=j("span"),this.h()},l(i){t=L(i,"SPAN",{class:!0,style:!0}),R(t).forEach(N),this.h()},h(){x(t,"class","rangeBar"),x(t,"style",n=e[28]+": "+e[32](e[29])+"%; "+e[27]+": "+e[33](e[29])+"%;")},m(i,s){U(i,t,s)},p(i,s){s[0]&939524096&&n!==(n=i[28]+": "+i[32](i[29])+"%; "+i[27]+": "+i[33](i[29])+"%;")&&x(t,"style",n)},d(i){i&&N(t)}}}function Li(e){let t,n;return t=new ul({props:{values:e[0],min:e[3],max:e[4],step:e[5],range:e[2],vertical:e[6],reversed:e[8],orientationStart:e[28],hoverable:e[9],disabled:e[10],all:e[13],first:e[14],last:e[15],rest:e[16],pipstep:e[12],prefix:e[18],suffix:e[19],formatter:e[20],focus:e[24],percentOf:e[23],moveHandle:e[31],fixFloat:e[30]}}),{c(){qi(t.$$.fragment)},l(i){Ki(t.$$.fragment,i)},m(i,s){Wi(t,i,s),n=!0},p(i,s){const r={};s[0]&1&&(r.values=i[0]),s[0]&8&&(r.min=i[3]),s[0]&16&&(r.max=i[4]),s[0]&32&&(r.step=i[5]),s[0]&4&&(r.range=i[2]),s[0]&64&&(r.vertical=i[6]),s[0]&256&&(r.reversed=i[8]),s[0]&268435456&&(r.orientationStart=i[28]),s[0]&512&&(r.hoverable=i[9]),s[0]&1024&&(r.disabled=i[10]),s[0]&8192&&(r.all=i[13]),s[0]&16384&&(r.first=i[14]),s[0]&32768&&(r.last=i[15]),s[0]&65536&&(r.rest=i[16]),s[0]&4096&&(r.pipstep=i[12]),s[0]&262144&&(r.prefix=i[18]),s[0]&524288&&(r.suffix=i[19]),s[0]&1048576&&(r.formatter=i[20]),s[0]&16777216&&(r.focus=i[24]),s[0]&8388608&&(r.percentOf=i[23]),t.$set(r)},i(i){n||(ue(t.$$.fragment,i),n=!0)},o(i){ke(t.$$.fragment,i),n=!1},d(i){Gi(t,i)}}}function fl(e){let t,n,i,s,r,a,l=e[0],u=[];for(let h=0;h<l.length;h+=1)u[h]=Pi(Ii(e,l,h));let f=e[2]&&ji(e),c=e[11]&&Li(e);return{c(){t=j("div");for(let h=0;h<u.length;h+=1)u[h].c();n=St(),f&&f.c(),i=St(),c&&c.c(),this.h()},l(h){t=L(h,"DIV",{id:!0,class:!0});var m=R(t);for(let p=0;p<u.length;p+=1)u[p].l(m);n=Et(m),f&&f.l(m),i=Et(m),c&&c.l(m),m.forEach(N),this.h()},h(){x(t,"id",e[17]),x(t,"class","rangeSlider"),O(t,"range",e[2]),O(t,"disabled",e[10]),O(t,"hoverable",e[9]),O(t,"vertical",e[6]),O(t,"reversed",e[8]),O(t,"focus",e[24]),O(t,"min",e[2]==="min"),O(t,"max",e[2]==="max"),O(t,"pips",e[11]),O(t,"pip-labels",e[13]==="label"||e[14]==="label"||e[15]==="label"||e[16]==="label")},m(h,m){U(h,t,m);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(t,null);z(t,n),f&&f.m(t,null),z(t,i),c&&c.m(t,null),e[50](t),s=!0,r||(a=[W(window,"mousedown",e[39]),W(window,"touchstart",e[39]),W(window,"mousemove",e[40]),W(window,"touchmove",e[40]),W(window,"mouseup",e[41]),W(window,"touchend",e[42]),W(window,"keydown",e[43]),W(t,"mousedown",e[37]),W(t,"mouseup",e[38]),W(t,"touchstart",fe(e[37])),W(t,"touchend",fe(e[38]))],r=!0)},p(h,m){if(m[0]&934020317|m[1]&56){l=h[0];let p;for(p=0;p<l.length;p+=1){const v=Ii(h,l,p);u[p]?u[p].p(v,m):(u[p]=Pi(v),u[p].c(),u[p].m(t,n))}for(;p<u.length;p+=1)u[p].d(1);u.length=l.length}h[2]?f?f.p(h,m):(f=ji(h),f.c(),f.m(t,i)):f&&(f.d(1),f=null),h[11]?c?(c.p(h,m),m[0]&2048&&ue(c,1)):(c=Li(h),c.c(),ue(c,1),c.m(t,null)):c&&(er(),ke(c,1,1,()=>{c=null}),nr()),(!s||m[0]&131072)&&x(t,"id",h[17]),(!s||m[0]&4)&&O(t,"range",h[2]),(!s||m[0]&1024)&&O(t,"disabled",h[10]),(!s||m[0]&512)&&O(t,"hoverable",h[9]),(!s||m[0]&64)&&O(t,"vertical",h[6]),(!s||m[0]&256)&&O(t,"reversed",h[8]),(!s||m[0]&16777216)&&O(t,"focus",h[24]),(!s||m[0]&4)&&O(t,"min",h[2]==="min"),(!s||m[0]&4)&&O(t,"max",h[2]==="max"),(!s||m[0]&2048)&&O(t,"pips",h[11]),(!s||m[0]&122880)&&O(t,"pip-labels",h[13]==="label"||h[14]==="label"||h[15]==="label"||h[16]==="label")},i(h){s||(ue(c),s=!0)},o(h){ke(c),s=!1},d(h){h&&N(t),xn(u,h),f&&f.d(),c&&c.d(),e[50](null),r=!1,Ht(a)}}}function zi(e){if(!e)return-1;for(var t=0;e=e.previousElementSibling;)t++;return t}function an(e){return e.type.includes("touch")?e.touches[0]:e}function hl(e,t,n){let i,s,r,a,l,u,f=st,c=()=>(f(),f=Qt(Ot,d=>n(29,u=d)),Ot);e.$$.on_destroy.push(()=>f());let{slider:h=void 0}=t,{range:m=!1}=t,{pushy:p=!1}=t,{min:v=0}=t,{max:k=100}=t,{step:g=1}=t,{values:_=[(k+v)/2]}=t,{vertical:y=!1}=t,{float:b=!1}=t,{reversed:w=!1}=t,{hoverable:M=!0}=t,{disabled:B=!1}=t,{pips:T=!1}=t,{pipstep:F=void 0}=t,{all:K=void 0}=t,{first:S=void 0}=t,{last:A=void 0}=t,{rest:V=void 0}=t,{id:C=void 0}=t,{prefix:H=""}=t,{suffix:E=""}=t,{formatter:X=(d,I,G)=>d}=t,{handleFormatter:nt=X}=t,{precision:ct=2}=t,{springValues:Q={stiffness:.15,damping:.4}}=t;const $=ir();let Y=0,J=!1,yt=!1,mt=!1,It=!1,ot=_.length-1,it,gt,Ot;const pt=d=>parseFloat(d.toFixed(ct));function me(d){const I=h.querySelectorAll(".handle"),G=Array.prototype.includes.call(I,d),q=Array.prototype.some.call(I,At=>At.contains(d));return G||q}function ge(d){return m==="min"||m==="max"?d.slice(0,1):m?d.slice(0,2):d}function bt(){return h.getBoundingClientRect()}function pe(d){const I=bt();let G=0,q=0,At=0;y?(G=d.clientY-I.top,q=G/I.height*100,q=w?q:100-q):(G=d.clientX-I.left,q=G/I.width*100,q=w?100-q:q),At=(k-v)/100*q+v;let Rn;return m===!0&&_[0]===_[1]?At>_[1]?1:0:(Rn=_.indexOf([..._].sort((Qs,$s)=>Math.abs(At-Qs)-Math.abs(At-$s))[0]),Rn)}function oe(d){const I=bt();let G=0,q=0,At=0;y?(G=d.clientY-I.top,q=G/I.height*100,q=w?q:100-q):(G=d.clientX-I.left,q=G/I.width*100,q=w?100-q:q),At=(k-v)/100*q+v,Bt(ot,At)}function Bt(d,I){return I=r(I),typeof d>"u"&&(d=ot),m&&(d===0&&I>_[1]?p?n(0,_[1]=I,_):I=_[1]:d===1&&I<_[0]&&(p?n(0,_[0]=I,_):I=_[0])),_[d]!==I&&n(0,_[d]=I,_),gt!==I&&(Zs(),gt=I),I}function P(d){return m==="min"?0:d[0]}function tt(d){return m==="max"?0:m==="min"?100-d[0]:100-d[1]}function Rt(d){It&&(n(24,J=!1),yt=!1,n(25,mt=!1))}function vt(d){B||(n(26,ot=zi(d.target)),n(24,J=!0))}function Xs(d){if(!B){const I=zi(d.target);let G=d.ctrlKey||d.metaKey||d.shiftKey?g*10:g,q=!1;switch(d.key){case"PageDown":G*=10;case"ArrowRight":case"ArrowUp":Bt(I,_[I]+G),q=!0;break;case"PageUp":G*=10;case"ArrowLeft":case"ArrowDown":Bt(I,_[I]-G),q=!0;break;case"Home":Bt(I,v),q=!0;break;case"End":Bt(I,k),q=!0;break}q&&(d.preventDefault(),d.stopPropagation())}}function Vs(d){if(!B){const I=d.target,G=an(d);n(24,J=!0),yt=!0,n(25,mt=!0),n(26,ot=pe(G)),it=gt=r(_[ot]),Gs(),d.type==="touchstart"&&!I.matches(".pipVal")&&oe(G)}}function Us(d){d.type==="touchend"&&zn(),n(25,mt=!1)}function Hs(d){It=!1,J&&d.target!==h&&!h.contains(d.target)&&n(24,J=!1)}function Js(d){B||yt&&oe(an(d))}function qs(d){if(!B){const I=d.target;yt&&((I===h||h.contains(I))&&(n(24,J=!0),!me(I)&&!I.matches(".pipVal")&&oe(an(d))),zn())}yt=!1,n(25,mt=!1)}function Ks(d){yt=!1,n(25,mt=!1)}function Ws(d){B||(d.target===h||h.contains(d.target))&&(It=!0)}function Gs(){!B&&$("start",{activeHandle:ot,value:it,values:_.map(d=>r(d))})}function zn(){!B&&$("stop",{activeHandle:ot,startValue:it,value:_[ot],values:_.map(d=>r(d))})}function Zs(){!B&&$("change",{activeHandle:ot,startValue:it,previousValue:typeof gt>"u"?it:gt,value:_[ot],values:_.map(d=>r(d))})}function Ys(d){ae[d?"unshift":"push"](()=>{h=d,n(1,h)})}return e.$$set=d=>{"slider"in d&&n(1,h=d.slider),"range"in d&&n(2,m=d.range),"pushy"in d&&n(44,p=d.pushy),"min"in d&&n(3,v=d.min),"max"in d&&n(4,k=d.max),"step"in d&&n(5,g=d.step),"values"in d&&n(0,_=d.values),"vertical"in d&&n(6,y=d.vertical),"float"in d&&n(7,b=d.float),"reversed"in d&&n(8,w=d.reversed),"hoverable"in d&&n(9,M=d.hoverable),"disabled"in d&&n(10,B=d.disabled),"pips"in d&&n(11,T=d.pips),"pipstep"in d&&n(12,F=d.pipstep),"all"in d&&n(13,K=d.all),"first"in d&&n(14,S=d.first),"last"in d&&n(15,A=d.last),"rest"in d&&n(16,V=d.rest),"id"in d&&n(17,C=d.id),"prefix"in d&&n(18,H=d.prefix),"suffix"in d&&n(19,E=d.suffix),"formatter"in d&&n(20,X=d.formatter),"handleFormatter"in d&&n(21,nt=d.handleFormatter),"precision"in d&&n(45,ct=d.precision),"springValues"in d&&n(46,Q=d.springValues)},e.$$.update=()=>{e.$$.dirty[0]&24&&n(49,s=function(d){return d<=v?v:d>=k?k:d}),e.$$.dirty[0]&56|e.$$.dirty[1]&262144&&n(48,r=function(d){if(d<=v)return pt(v);if(d>=k)return pt(k);let I=(d-v)%g,G=d-I;return Math.abs(I)*2>=g&&(G+=I>0?g:-g),G=s(G),pt(G)}),e.$$.dirty[0]&24&&n(23,i=function(d){let I=(d-v)/(k-v)*100;return isNaN(I)||I<=0?0:I>=100?100:pt(I)}),e.$$.dirty[0]&12582937|e.$$.dirty[1]&229376&&(Array.isArray(_)||(n(0,_=[(k+v)/2]),console.error("'values' prop should be an Array (https://github.com/simeydotme/svelte-range-slider-pips#slider-props)")),n(0,_=ge(_.map(d=>r(d)))),Y!==_.length?c(n(22,Ot=al(_.map(d=>i(d)),Q))):Ot.set(_.map(d=>i(d))),n(47,Y=_.length)),e.$$.dirty[0]&320&&n(28,a=y?w?"top":"bottom":w?"right":"left"),e.$$.dirty[0]&320&&n(27,l=y?w?"bottom":"top":w?"left":"right")},[_,h,m,v,k,g,y,b,w,M,B,T,F,K,S,A,V,C,H,E,X,nt,Ot,i,J,mt,ot,l,a,u,pt,Bt,P,tt,Rt,vt,Xs,Vs,Us,Hs,Js,qs,Ks,Ws,p,ct,Q,Y,r,s,Ys]}class cl extends Ct{constructor(t){super(),Mt(this,t,hl,fl,Dt,{slider:1,range:2,pushy:44,min:3,max:4,step:5,values:0,vertical:6,float:7,reversed:8,hoverable:9,disabled:10,pips:11,pipstep:12,all:13,first:14,last:15,rest:16,id:17,prefix:18,suffix:19,formatter:20,handleFormatter:21,precision:45,springValues:46},null,[-1,-1,-1])}}function Ri(e){let t,n;return{c(){t=j("p"),n=rt(e[2])},l(i){t=L(i,"P",{});var s=R(t);n=at(s,e[2]),s.forEach(N)},m(i,s){U(i,t,s),z(t,n)},p(i,s){s&4&&ft(n,i[2])},d(i){i&&N(t)}}}function _l(e){let t,n,i,s,r,a=e[2]&&Ri(e);function l(f){e[14](f)}let u={min:+e[0],max:+e[1],pips:!0,range:!0,float:!0,first:"label",last:"label",springValues:!0,id:"slider"};return e[6]!==void 0&&(u.values=e[6]),i=new cl({props:u}),ae.push(()=>sr(i,"values",l)),i.$on("start",e[8]),i.$on("change",e[7]),i.$on("stop",e[9]),{c(){t=j("div"),a&&a.c(),n=St(),qi(i.$$.fragment),this.h()},l(f){t=L(f,"DIV",{class:!0,id:!0});var c=R(t);a&&a.l(c),n=Et(c),Ki(i.$$.fragment,c),c.forEach(N),this.h()},h(){x(t,"class","px-[1%] py-[1%] ml-[2.1%]"),x(t,"id","slider")},m(f,c){U(f,t,c),a&&a.m(t,null),z(t,n),Wi(i,t,null),r=!0},p(f,[c]){f[2]?a?a.p(f,c):(a=Ri(f),a.c(),a.m(t,n)):a&&(a.d(1),a=null);const h={};c&1&&(h.min=+f[0]),c&2&&(h.max=+f[1]),!s&&c&64&&(s=!0,h.values=f[6],rr(()=>s=!1)),i.$set(h)},i(f){r||(ue(i.$$.fragment,f),r=!0)},o(f){ke(i.$$.fragment,f),r=!1},d(f){f&&N(t),a&&a.d(),Gi(i)}}}function dl(e,t,n){let i,s=st,r=()=>(s(),s=Qt(y,A=>n(15,i=A)),y),a,l=st,u=()=>(l(),l=Qt(g,A=>n(16,a=A)),g),f,c=st,h=()=>(c(),c=Qt(_,A=>n(17,f=A)),_);e.$$.on_destroy.push(()=>s()),e.$$.on_destroy.push(()=>l()),e.$$.on_destroy.push(()=>c());let{min:m=0,max:p=100,id:v,description:k}=t,{change:g=dt({})}=t;u();let{stop:_=dt({})}=t;h();let{drag:y=dt({})}=t;r();let{interactions:b={change:g,stop:_,drag:y}}=t;ar("dims");let w=[m,p];[...w];function M(A){console.log("Slider.render",A),A&&ht(Array,A)&&kt(A.filter(V=>V===void 0))&&(n(6,w=[+A[0].min,+A[0].max]),n(0,[m,p]=w,m,n(1,p)),console.log("Slider.render.to",w)),w&&w.length>=2&&T()}function B(A,V){console.log("Slider.load",A,V),!(!Ne("left")(A)||!Ne("right")(A))&&(A=A??{left:m,right:p},n(6,w=[A.left??m,A.right??p]))}function T(){g.isActive&&Nt(g,a={left:w[0],right:w[1]},a),y.isActive&&Nt(y,i={left:w[0],right:w[1]},i)}function F(){y.isActive&&Nt(y,i={left:w[0],right:w[1]},i)}function K(){_.isActive&&Nt(_,f={left:w[0],right:w[1]},f),g.isActive&&Nt(g,a={left:w[0],right:w[1]},a),y.isActive&&Nt(y,i={left:w[0],right:w[1]},i)}function S(A){w=A,n(6,w)}return e.$$set=A=>{"min"in A&&n(0,m=A.min),"max"in A&&n(1,p=A.max),"id"in A&&n(10,v=A.id),"description"in A&&n(2,k=A.description),"change"in A&&u(n(3,g=A.change)),"stop"in A&&h(n(4,_=A.stop)),"drag"in A&&r(n(5,y=A.drag)),"interactions"in A&&n(11,b=A.interactions)},[m,p,k,g,_,y,w,T,F,K,v,b,M,B,S]}class ru extends Ct{constructor(t){super(),Mt(this,t,dl,_l,Dt,{min:0,max:1,id:10,description:2,change:3,stop:4,drag:5,interactions:11,render:12,load:13})}get min(){return this.$$.ctx[0]}set min(t){this.$$set({min:t}),D()}get max(){return this.$$.ctx[1]}set max(t){this.$$set({max:t}),D()}get id(){return this.$$.ctx[10]}set id(t){this.$$set({id:t}),D()}get description(){return this.$$.ctx[2]}set description(t){this.$$set({description:t}),D()}get change(){return this.$$.ctx[3]}set change(t){this.$$set({change:t}),D()}get stop(){return this.$$.ctx[4]}set stop(t){this.$$set({stop:t}),D()}get drag(){return this.$$.ctx[5]}set drag(t){this.$$set({drag:t}),D()}get interactions(){return this.$$.ctx[11]}set interactions(t){this.$$set({interactions:t}),D()}get render(){return this.$$.ctx[12]}get load(){return this.$$.ctx[13]}}function ml(e){let t,n;return{c(){t=j("div"),n=j("div"),this.h()},l(i){t=L(i,"DIV",{id:!0});var s=R(t);n=L(s,"DIV",{}),R(n).forEach(N),s.forEach(N),this.h()},h(){x(t,"id",e[0])},m(i,s){U(i,t,s),z(t,n),e[18](n)},p(i,[s]){s&1&&x(t,"id",i[0])},i:st,o:st,d(i){i&&N(t),e[18](null)}}}function gl(e,t,n){let{id:i,name:s,groupNames:r=[],title:a="",xAttr:l,yAttr:u="val",yMax:f,magic:c,xDomainMin:h=null,xDomainMax:m=null,theplot:p=null}=t,v={},{brushX:k=dt({}),interactions:g={brushX:k}}=t,_,y=null,b=[],w=[{},{}];function M(S,A){return A!="overlay"?!1:(v=S,!0)}function B(S,A){return A!="badyear"?!1:(S.forEach((V,C)=>{V.rank=C+1,V[l]=Number(V[l])}),w=S,!0)}function T(S,A){!S||S.length===0||typeof A=="object"||(B(S,A)||M(S,A)?console.debug("overlay or badyear"):(b=$o(S,{include:r}),b.forEach(V=>V[l]=Number(V[l]))),F())}function F(){n(2,h=+h),n(3,m=+m);let S=pn({x:{type:"linear",domain:[h-1,m]}}),A=C=>(w.length-C.rank)*(.3/w.length)+.7,V={x:S,color:{domain:r,range:Jr,legend:!0,style:{"font-size":10,"margin-left":"2em"}},height:200,marginBottom:50,marks:[Ue({ticks:Sr(C=>C+h,m-h),tickRotate:-90,fontSize:10,tickFormat:C=>(C+"").slice(-2)}),Mn({fontSize:10,label:"Payout"}),os([0]),as([S.domain[0]]),Sn(w,{x1:C=>C[l]-.5,x2:C=>C[l]+.5,y:A,stroke:"black",opacity:.8,strokeWidth:1}),Qo(w,{x1:C=>C[l]-.5,x2:C=>C[l]+.5,y1:0,y2:A,fill:"gray",opacity:.1}),Pn(v,{x1:"left",x2:"right",y2:1,fill:"key",color:"key",opacity:.2}),qr(b,{filter:C=>C.key==r[3]&&C[l]>=h&&C[l]<=m&&+C[u]==0,x:C=>+C[l],y:0,stroke:"red",strokeWidth:1})]};r.forEach((C,H)=>{let E=(1+H)/r.length*.7;V.marks.push(Sn(b,{filter:X=>X.key==C&&X[l]>=h&&X[l]<=m,x:X=>+X[l]+E-.35,y1:0,y2:u,stroke:"key",strokeWidth:4}))}),n(4,p=We(V,y)),k.isActive&&(_=_??new jn({iact:k,magic:c}),_.init(p))}function K(S){ae[S?"unshift":"push"](()=>{y=S,n(1,y)})}return e.$$set=S=>{"id"in S&&n(5,i=S.id),"name"in S&&n(0,s=S.name),"groupNames"in S&&n(6,r=S.groupNames),"title"in S&&n(7,a=S.title),"xAttr"in S&&n(8,l=S.xAttr),"yAttr"in S&&n(9,u=S.yAttr),"yMax"in S&&n(10,f=S.yMax),"magic"in S&&n(11,c=S.magic),"xDomainMin"in S&&n(2,h=S.xDomainMin),"xDomainMax"in S&&n(3,m=S.xDomainMax),"theplot"in S&&n(4,p=S.theplot),"brushX"in S&&n(12,k=S.brushX),"interactions"in S&&n(13,g=S.interactions)},[s,y,h,m,p,i,r,a,l,u,f,c,k,g,M,B,T,F,K]}class au extends Ct{constructor(t){super(),Mt(this,t,gl,ml,Dt,{id:5,name:0,groupNames:6,title:7,xAttr:8,yAttr:9,yMax:10,magic:11,xDomainMin:2,xDomainMax:3,theplot:4,brushX:12,interactions:13,overlay:14,badyear:15,render:16,update:17})}get id(){return this.$$.ctx[5]}set id(t){this.$$set({id:t}),D()}get name(){return this.$$.ctx[0]}set name(t){this.$$set({name:t}),D()}get groupNames(){return this.$$.ctx[6]}set groupNames(t){this.$$set({groupNames:t}),D()}get title(){return this.$$.ctx[7]}set title(t){this.$$set({title:t}),D()}get xAttr(){return this.$$.ctx[8]}set xAttr(t){this.$$set({xAttr:t}),D()}get yAttr(){return this.$$.ctx[9]}set yAttr(t){this.$$set({yAttr:t}),D()}get yMax(){return this.$$.ctx[10]}set yMax(t){this.$$set({yMax:t}),D()}get magic(){return this.$$.ctx[11]}set magic(t){this.$$set({magic:t}),D()}get xDomainMin(){return this.$$.ctx[2]}set xDomainMin(t){this.$$set({xDomainMin:t}),D()}get xDomainMax(){return this.$$.ctx[3]}set xDomainMax(t){this.$$set({xDomainMax:t}),D()}get theplot(){return this.$$.ctx[4]}set theplot(t){this.$$set({theplot:t}),D()}get brushX(){return this.$$.ctx[12]}set brushX(t){this.$$set({brushX:t}),D()}get interactions(){return this.$$.ctx[13]}set interactions(t){this.$$set({interactions:t}),D()}get overlay(){return this.$$.ctx[14]}get badyear(){return this.$$.ctx[15]}get render(){return this.$$.ctx[16]}get update(){return this.$$.ctx[17]}}function pl(e){let t,n;return{c(){t=j("div"),n=j("div"),this.h()},l(i){t=L(i,"DIV",{id:!0});var s=R(t);n=L(s,"DIV",{}),R(n).forEach(N),s.forEach(N),this.h()},h(){x(t,"id",e[0])},m(i,s){U(i,t,s),z(t,n),e[11](n)},p(i,[s]){s&1&&x(t,"id",i[0])},i:st,o:st,d(i){i&&N(t),e[11](null)}}}function yl(e,t,n){let{id:i,name:s,xDomainMin:r,xDomainMax:a,magic:l}=t,{brushX:u=dt({})}=t,{interactions:f={brushX:u}}=t,c,h,m,p={},v=[];function k(b,w){return w!="overlay"?!1:(p=b,!0)}function g(b,w){!b||b.length===0||typeof w=="object"||(k(b,w)?console.debug("overlay"):v=b,_())}function _(){let b={x:{domain:[+r,+a],type:"linear"},y:{axis:null},marginBottom:50,height:300,fy:{label:null,tickRotate:-90,labelAnchor:"center"},color:{style:{"font-size":10,"margin-left":"2rem"},scheme:"Tableau10",legend:!0},marks:[Ue({ticks:36,fontSize:10}),Kr(),Sn(v,{x1:"start_time",x2:"end_time",y:"activity",strokeWidth:3,fy:"crop"}),ls(v,{x:w=>{let M=(w.end_time-w.start_time)/2+w.start_time;return console.log("yy",w,M),M},y:"activity",dy:3,lineAnchor:"top",fy:"crop",fontSize:10,color:"gray",text:"activity"}),Pn(p,{x1:"left",x2:"right",y2:1,fill:"key",color:"key",opacity:.2})]};c=We(b,h),u.isActive&&(m=m??new jn({iact:u,magic:l}),m.init(c))}function y(b){ae[b?"unshift":"push"](()=>{h=b,n(1,h)})}return e.$$set=b=>{"id"in b&&n(2,i=b.id),"name"in b&&n(0,s=b.name),"xDomainMin"in b&&n(3,r=b.xDomainMin),"xDomainMax"in b&&n(4,a=b.xDomainMax),"magic"in b&&n(5,l=b.magic),"brushX"in b&&n(6,u=b.brushX),"interactions"in b&&n(7,f=b.interactions)},[s,h,i,r,a,l,u,f,k,g,_,y]}class ou extends Ct{constructor(t){super(),Mt(this,t,yl,pl,Dt,{id:2,name:0,xDomainMin:3,xDomainMax:4,magic:5,brushX:6,interactions:7,overlay:8,render:9,update:10})}get id(){return this.$$.ctx[2]}set id(t){this.$$set({id:t}),D()}get name(){return this.$$.ctx[0]}set name(t){this.$$set({name:t}),D()}get xDomainMin(){return this.$$.ctx[3]}set xDomainMin(t){this.$$set({xDomainMin:t}),D()}get xDomainMax(){return this.$$.ctx[4]}set xDomainMax(t){this.$$set({xDomainMax:t}),D()}get magic(){return this.$$.ctx[5]}set magic(t){this.$$set({magic:t}),D()}get brushX(){return this.$$.ctx[6]}set brushX(t){this.$$set({brushX:t}),D()}get interactions(){return this.$$.ctx[7]}set interactions(t){this.$$set({interactions:t}),D()}get overlay(){return this.$$.ctx[8]}get render(){return this.$$.ctx[9]}get update(){return this.$$.ctx[10]}}function bl(e){let t,n;return{c(){t=j("div"),n=j("div"),this.h()},l(i){t=L(i,"DIV",{id:!0});var s=R(t);n=L(s,"DIV",{}),R(n).forEach(N),s.forEach(N),this.h()},h(){x(t,"id",e[0])},m(i,s){U(i,t,s),z(t,n),e[6](n)},p(i,[s]){s&1&&x(t,"id",i[0])},i:st,o:st,d(i){i&&N(t),e[6](null)}}}function vl(e,t,n){let{name:i,id:s,interactions:r={}}=t,a,l=[];function u(h,m){!h||h.length===0||(l=h,f())}function f(){let h=pn({color:{type:"linear",scheme:"greens"}}),m=pn({color:{type:"quantile",range:["#fff","#000"],domain:[0,60,100]}}),p=l.map(k=>m.apply(Wr(h.apply(+k.value)).l)),v={padding:0,marginLeft:150,height:300,color:h,marks:[Ue({fontSize:10,label:null}),Mn({fontSize:10,label:null}),qo(l,{x:"x",y:"y",fill:k=>+k.value,stroke:"white"}),ls(l,{x:"x",y:"y",text:k=>k.value,fill:p,fontSize:10,fontWeight:"bold",textAnchor:"middle"})]};We(v,a)}function c(h){ae[h?"unshift":"push"](()=>{a=h,n(1,a)})}return e.$$set=h=>{"name"in h&&n(0,i=h.name),"id"in h&&n(2,s=h.id),"interactions"in h&&n(3,r=h.interactions)},[i,a,s,r,u,f,c]}class lu extends Ct{constructor(t){super(),Mt(this,t,vl,bl,Dt,{name:0,id:2,interactions:3,render:4,update:5})}get name(){return this.$$.ctx[0]}set name(t){this.$$set({name:t}),D()}get id(){return this.$$.ctx[2]}set id(t){this.$$set({id:t}),D()}get interactions(){return this.$$.ctx[3]}set interactions(t){this.$$set({interactions:t}),D()}get render(){return this.$$.ctx[4]}get update(){return this.$$.ctx[5]}}const wl=dt({w:window.innerWidth*.8,h:window.innerHeight*.8,margin:il}),uu=dt([]),fu=dt({});function Xi(e,t,n){const i=e.slice();return i[15]=t[n],i[17]=n,i}function kl(e){let t,n=e[15][e[2]]+"",i;return{c(){t=j("option"),i=rt(n),this.h()},l(s){t=L(s,"OPTION",{});var r=R(t);i=at(r,n),r.forEach(N),this.h()},h(){t.__value=e[17],t.value=t.__value},m(s,r){U(s,t,r),z(t,i)},p(s,r){r&36&&n!==(n=s[15][s[2]]+"")&&ft(i,n)},d(s){s&&N(t)}}}function Sl(e){let t,n=e[15][e[2]]+"",i;return{c(){t=j("option"),i=rt(n),this.h()},l(s){t=L(s,"OPTION",{});var r=R(t);i=at(r,n),r.forEach(N),this.h()},h(){t.__value=e[17],t.value=t.__value,t.selected=!0},m(s,r){U(s,t,r),z(t,i)},p(s,r){r&36&&n!==(n=s[15][s[2]]+"")&&ft(i,n)},d(s){s&&N(t)}}}function Vi(e){let t;function n(r,a){return r[17]===r[1]?Sl:kl}let i=n(e),s=i(e);return{c(){s.c(),t=ne()},l(r){s.l(r),t=ne()},m(r,a){s.m(r,a),U(r,t,a)},p(r,a){i===(i=n(r))&&s?s.p(r,a):(s.d(1),s=i(r),s&&(s.c(),s.m(t.parentNode,t)))},d(r){s.d(r),r&&N(t)}}}function El(e){let t,n,i,s,r=e[5],a=[];for(let l=0;l<r.length;l+=1)a[l]=Vi(Xi(e,r,l));return{c(){t=j("div"),n=j("select");for(let l=0;l<a.length;l+=1)a[l].c();this.h()},l(l){t=L(l,"DIV",{class:!0,id:!0});var u=R(t);n=L(u,"SELECT",{class:!0});var f=R(n);for(let c=0;c<a.length;c+=1)a[c].l(f);f.forEach(N),u.forEach(N),this.h()},h(){x(n,"class","form-select appearance-none block w-full px-5 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding bg-no-repeat border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"),e[4]===void 0&&or(()=>e[10].call(n)),x(t,"class","px-[1%] py-[1%]"),x(t,"id",e[0])},m(l,u){U(l,t,u),z(t,n);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(n,null);Vn(n,e[4],!0),i||(s=[W(n,"change",e[10]),W(n,"change",e[6])],i=!0)},p(l,[u]){if(u&38){r=l[5];let f;for(f=0;f<r.length;f+=1){const c=Xi(l,r,f);a[f]?a[f].p(c,u):(a[f]=Vi(c),a[f].c(),a[f].m(n,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=r.length}u&16&&Vn(n,l[4]),u&1&&x(t,"id",l[0])},i:st,o:st,d(l){l&&N(t),xn(a,l),i=!1,Ht(s)}}}function Al(e,t,n){let i,s=st,r=()=>(s(),s=Qt(c,y=>n(11,i=y)),c),a;lr(e,wl,y=>n(12,a=y)),e.$$.on_destroy.push(()=>s());let{id:l,index:u,dropdown_key:f}=t,{change:c=dt({})}=t;r();let{interactions:h={change:c}}=t,m=null,p=[];a.margin;function v(y,b){n(5,p=y??p),n(4,m=m??u),console.log("Dropdown.render",p,m,b),g()}function k(y){console.log("Dropdown.load",y),n(4,m=y.idx),v()}function g(){c.isActive&&Nt(c,i={...p[m],idx:m},i)}function _(){m=ur(this),n(4,m)}return e.$$set=y=>{"id"in y&&n(0,l=y.id),"index"in y&&n(1,u=y.index),"dropdown_key"in y&&n(2,f=y.dropdown_key),"change"in y&&r(n(3,c=y.change)),"interactions"in y&&n(7,h=y.interactions)},[l,u,f,c,m,p,g,h,v,k,_]}class hu extends Ct{constructor(t){super(),Mt(this,t,Al,El,Dt,{id:0,index:1,dropdown_key:2,change:3,interactions:7,render:8,load:9})}get id(){return this.$$.ctx[0]}set id(t){this.$$set({id:t}),D()}get index(){return this.$$.ctx[1]}set index(t){this.$$set({index:t}),D()}get dropdown_key(){return this.$$.ctx[2]}set dropdown_key(t){this.$$set({dropdown_key:t}),D()}get change(){return this.$$.ctx[3]}set change(t){this.$$set({change:t}),D()}get interactions(){return this.$$.ctx[7]}set interactions(t){this.$$set({interactions:t}),D()}get render(){return this.$$.ctx[8]}get load(){return this.$$.ctx[9]}}function xl(e){let t,n,i,s,r,a,l,u,f,c,h,m,p,v;return{c(){t=j("form"),n=j("div"),i=j("input"),s=St(),r=j("button"),a=rt("Login"),l=St(),u=j("button"),f=rt("Save"),c=St(),h=j("button"),m=rt("Logout"),this.h()},l(k){t=L(k,"FORM",{class:!0});var g=R(t);n=L(g,"DIV",{class:!0});var _=R(n);i=L(_,"INPUT",{class:!0,type:!0,placeholder:!0,"aria-label":!0}),s=Et(_),r=L(_,"BUTTON",{class:!0,type:!0});var y=R(r);a=at(y,"Login"),y.forEach(N),l=Et(_),u=L(_,"BUTTON",{class:!0,type:!0});var b=R(u);f=at(b,"Save"),b.forEach(N),c=Et(_),h=L(_,"BUTTON",{class:!0,type:!0});var w=R(h);m=at(w,"Logout"),w.forEach(N),_.forEach(N),g.forEach(N),this.h()},h(){x(i,"class","appearance-none bg-transparent border-none w-full text-gray-700 mr-3 py-1 px-2 leading-tight focus:outline-none"),x(i,"type","text"),x(i,"placeholder","Login..."),x(i,"aria-label","username"),x(r,"class","flex-shrink-0 bg-slate-500 hover:bg-slate-700 border-slate-500 hover:border-slate-700 text-sm border-4 text-white py-1 px-2 rounded"),x(r,"type","button"),x(u,"class","flex-shrink-0 bg-slate-500 hover:bg-slate-900 border-slate-500 hover:border-slate-900 text-sm border-4 text-white py-1 px-2 rounded"),x(u,"type","button"),x(h,"class","flex-shrink-0 bg-slate-500 hover:bg-slate-900 border-slate-500 hover:border-slate-900 text-sm border-4 text-white py-1 px-2 rounded"),x(h,"type","button"),x(n,"class","flex items-center border-b border-slate-500 py-2 space-x-4"),x(t,"class","w-full max-w-sm mx-auto")},m(k,g){U(k,t,g),z(t,n),z(n,i),Un(i,e[1]),z(n,s),z(n,r),z(r,a),z(n,l),z(n,u),z(u,f),z(n,c),z(n,h),z(h,m),p||(v=[W(i,"input",e[11]),W(r,"click",e[2]),W(u,"click",e[3]),W(h,"click",e[4])],p=!0)},p(k,[g]){g&2&&i.value!==k[1]&&Un(i,k[1])},i:st,o:st,d(k){k&&N(t),p=!1,Ht(v)}}}function Bs(e,t){console.debug("login invoked",e,t)}function Nl(e,t,n){let i,s=st,r=()=>(s(),s=Qt(a,y=>n(13,i=y)),a);e.$$.on_destroy.push(()=>s());let{status:a=dt({}),interactions:l={status:a}}=t;r();let{id:u,magic:f,exportToConvex:c,importFromConvex:h}=t,m,p;const v=async()=>{console.debug("login user: ",m),p=f.exportState();const y=await h(m);if(!y){alert("there is no data for this user"),Nt(a,i={user:m,loggedin:!0},i);return}Nt(a,i={user:m,loggedin:!0},i),f.importState(y)},k=async()=>{await c(f.exportState(),m)},g=async()=>{f.importState(p),n(1,m=null)};function _(){m=this.value,n(1,m)}return e.$$set=y=>{"status"in y&&r(n(0,a=y.status)),"interactions"in y&&n(5,l=y.interactions),"id"in y&&n(6,u=y.id),"magic"in y&&n(7,f=y.magic),"exportToConvex"in y&&n(8,c=y.exportToConvex),"importFromConvex"in y&&n(9,h=y.importFromConvex)},[a,m,v,k,g,l,u,f,c,h,Bs,_]}class cu extends Ct{constructor(t){super(),Mt(this,t,Nl,xl,Dt,{status:0,interactions:5,id:6,magic:7,exportToConvex:8,importFromConvex:9,render:10})}get status(){return this.$$.ctx[0]}set status(t){this.$$set({status:t}),D()}get interactions(){return this.$$.ctx[5]}set interactions(t){this.$$set({interactions:t}),D()}get id(){return this.$$.ctx[6]}set id(t){this.$$set({id:t}),D()}get magic(){return this.$$.ctx[7]}set magic(t){this.$$set({magic:t}),D()}get exportToConvex(){return this.$$.ctx[8]}set exportToConvex(t){this.$$set({exportToConvex:t}),D()}get importFromConvex(){return this.$$.ctx[9]}set importFromConvex(t){this.$$set({importFromConvex:t}),D()}get render(){return Bs}}class Be{constructor(t){this.compPos=function(n){for(var i=[],s=0;s<this._array.length;s++){let r=+(this._array[s]>0&&n[s]>0);i.push(r)}return i},this.isNegative=function(n){return n===0||n===null},this.compZero=function(n){for(var i=[],s=0;s<this._array.length;s++){let r=+(this.isNegative(this._array[s])&&this.isNegative(n[s]));i.push(r)}return i},this.getPos=function(){for(var n=[],i=0;i<this._array.length;i++)+(this._array[i]>0),n.push(+(this._array[i]>0));return n},this.getZero=function(){for(var n=[],i=0;i<this._array.length;i++)+this.isNegative(this._array[i]),n.push(+(this._array[i]===0));return n},this._array=t}get array(){return this._array}}const Fs=function(e,t,n,i){let s=t.map(Number),r=i.map(Number),a=new Be(s),l=new Be(r),u=a.compPos(l.array),f=l.getPos(),c=u.filter(p=>p>0).length,h=f.filter(p=>p>0).length;return(c/h).toFixed(2)},Ps=function(e,t,n,i){let s=t.map(Number),r=i.map(Number),a=new Be(s),l=new Be(r),u=a.compZero(l.array),f=l.getZero(),c=u.filter(p=>p>0).length,h=f.filter(p=>p>0).length;return(c/h).toFixed(2)},Tl=function(e,t,n,i){return Fs(e,t,n,i)},Cl=function(e,t,n,i){return Ps(e,t,n,i)},Ml=function(e,t,n,i){let s=Number(Fs(e,t,n,i)),r=Number(Ps(e,t,n,i));return((s+r)/2).toFixed(2)};let _u=[{"true positive":Tl,"true negative":Cl,"average matching":Ml}];const Ui="0.6.0";var Fe=Fl,Pe=Ll,wt=[],_t=[],Dl=typeof Uint8Array<"u"?Uint8Array:Array,on="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Wt=0,Il=on.length;Wt<Il;++Wt)wt[Wt]=on[Wt],_t[on.charCodeAt(Wt)]=Wt;_t["-".charCodeAt(0)]=62;_t["_".charCodeAt(0)]=63;function Ol(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var i=n===t?0:4-n%4;return[n,i]}function Bl(e,t,n){return(t+n)*3/4-n}function Fl(e){var t,n=Ol(e),i=n[0],s=n[1],r=new Dl(Bl(e,i,s)),a=0,l=s>0?i-4:i,u;for(u=0;u<l;u+=4)t=_t[e.charCodeAt(u)]<<18|_t[e.charCodeAt(u+1)]<<12|_t[e.charCodeAt(u+2)]<<6|_t[e.charCodeAt(u+3)],r[a++]=t>>16&255,r[a++]=t>>8&255,r[a++]=t&255;return s===2&&(t=_t[e.charCodeAt(u)]<<2|_t[e.charCodeAt(u+1)]>>4,r[a++]=t&255),s===1&&(t=_t[e.charCodeAt(u)]<<10|_t[e.charCodeAt(u+1)]<<4|_t[e.charCodeAt(u+2)]>>2,r[a++]=t>>8&255,r[a++]=t&255),r}function Pl(e){return wt[e>>18&63]+wt[e>>12&63]+wt[e>>6&63]+wt[e&63]}function jl(e,t,n){for(var i,s=[],r=t;r<n;r+=3)i=(e[r]<<16&16711680)+(e[r+1]<<8&65280)+(e[r+2]&255),s.push(Pl(i));return s.join("")}function Ll(e){for(var t,n=e.length,i=n%3,s=[],r=16383,a=0,l=n-i;a<l;a+=r)s.push(jl(e,a,a+r>l?l:a+r));return i===1?(t=e[n-1],s.push(wt[t>>2]+wt[t<<4&63]+"==")):i===2&&(t=(e[n-2]<<8)+e[n-1],s.push(wt[t>>10]+wt[t>>4&63]+wt[t<<2&63]+"=")),s.join("")}const js=!0,re=BigInt("-9223372036854775808"),Ln=BigInt("9223372036854775807"),An=BigInt("0"),zl=BigInt("8"),Rl=BigInt("256");class de{constructor(t,n){this.tableName=t,this.id=n}equals(t){return t instanceof de?this.tableName===t.tableName&&this.id===t.id:!1}static fromJSON(t){if(typeof t.$id!="string")throw new Error(`Object ${JSON.stringify(t)} isn't a valid Id: $id isn't a string.`);const n=t.$id.split("|");if(n.length!==2)throw new Error(`Object ${JSON.stringify(t)} isn't a valid Id: Wrong number of parts.`);return new de(n[0],n[1])}toJSON(){return{$id:`${this.tableName}|${this.id}`}}toString(){return this.id}inspect(){return`Id('${this.tableName}', '${this.id}')`}}function Ls(e){return Number.isNaN(e)||!Number.isFinite(e)||Object.is(e,-0)}function Xl(e){e<An&&(e-=re+re);let t=e.toString(16);t.length%2==1&&(t="0"+t);const n=new Uint8Array(new ArrayBuffer(8));let i=0;for(const s of t.match(/.{2}/g).reverse())n.set([parseInt(s,16)],i++),e>>=zl;return Pe(n)}function Vl(e){const t=Fe(e);if(t.byteLength!==8)throw new Error(`Received ${t.byteLength} bytes, expected 8 for $integer`);let n=An,i=An;for(const s of t)n+=BigInt(s)*Rl**i,i++;return n>Ln&&(n+=re+re),n}function Ul(e){if(e<re||Ln<e)throw new Error(`BigInt ${e} does not fit into a 64-bit signed integer.`);const t=new ArrayBuffer(8);return new DataView(t).setBigInt64(0,e,!0),Pe(new Uint8Array(t))}function Hl(e){const t=Fe(e);if(t.byteLength!==8)throw new Error(`Received ${t.byteLength} bytes, expected 8 for $integer`);return new DataView(t.buffer).getBigInt64(0,!0)}const Jl=DataView.prototype.setBigInt64?Ul:Xl,ql=DataView.prototype.getBigInt64?Hl:Vl,Hi=64,Kl=/^_+$/,Wl=/^[a-zA-Z_][a-zA-Z0-9_]{0,63}$/;function zs(e){if(e.length===0)throw new Error("Empty field names are disallowed.");if(e.length>Hi)throw new Error(`Field name ${e} exceeds maximum field name length ${Hi}.`);if(e.startsWith("$"))throw new Error(`Field name ${e} starts with a '$', which is reserved.`);if(Kl.test(e))throw new Error(`Field name ${e} can't exclusively be underscores.`);if(!Wl.test(e))throw new Error(`Field name ${e} must only contain alphanumeric characters or underscores and can't start with a number.`)}function Gt(e){if(e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string")return e;if(e instanceof Array)return e.map(Gt);if(typeof e!="object")throw new Error(`Unexpected type of ${e}`);const t=Object.entries(e);if(t.length===1){const i=t[0][0];if(i==="$id"||i==="$weakRef"||i==="$strongRef")return de.fromJSON(e);if(i==="$bytes"){if(typeof e.$bytes!="string")throw new Error(`Malformed $bytes field on ${e}`);return Fe(e.$bytes).buffer}if(i==="$integer"){if(typeof e.$integer!="string")throw new Error(`Malformed $integer field on ${e}`);return ql(e.$integer)}if(i==="$float"){if(typeof e.$float!="string")throw new Error(`Malformed $float field on ${e}`);const s=Fe(e.$float);if(s.byteLength!==8)throw new Error(`Received ${s.byteLength} bytes, expected 8 for $float`);const a=new DataView(s.buffer).getFloat64(0,js);if(!Ls(a))throw new Error(`Float ${a} should be encoded as a number`);return a}if(i==="$set"){if(!(e.$set instanceof Array))throw new Error(`Malformed $set field on ${e}`);return new Set(e.$set.map(Gt))}if(i==="$map"){if(!(e.$map instanceof Array))throw new Error(`Malformed $map field on ${e}`);const s=new Map;for(const r of e.$map){if(!(r instanceof Array)||r.length!==2)throw new Error(`Malformed pair in $map ${e}`);const a=Gt(r[0]),l=Gt(r[1]);s.set(a,l)}return s}}const n={};for(const[i,s]of Object.entries(e))zs(i),n[i]=Gt(s);return n}function ln(e){return Gt(e)}function un(e){return JSON.stringify(e,(t,n)=>n===void 0?"undefined":n)}function Zt(e,t,n){if(e===void 0)throw new Error(`undefined is not a valid Convex value (present at path ${n} in original object ${un(t)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`);if(e===null)return e;if(e instanceof de)return e.toJSON();if(typeof e=="bigint"){if(e<re||Ln<e)throw new Error(`BigInt ${e} does not fit into a 64-bit signed integer.`);return{$integer:Jl(e)}}if(typeof e=="number")if(Ls(e)){const r=new ArrayBuffer(8);return new DataView(r).setFloat64(0,e,js),{$float:Pe(new Uint8Array(r))}}else return e;if(typeof e=="boolean"||typeof e=="string")return e;if(e instanceof ArrayBuffer)return{$bytes:Pe(new Uint8Array(e))};if(e instanceof Array)return e.map((r,a)=>Zt(r,t,n+`[${a}]`));if(e instanceof Set)return{$set:[...e].map((r,a)=>Zt(r,t,n+`.keys()[${a}]`))};if(e instanceof Map)return{$map:[...e].map(([r,a],l)=>{const u=Zt(r,t,n+`.keys()[${l}]`),f=Zt(a,t,n+`.values()[${l}]`);return[u,f]})};if(typeof e!="object")throw new Error(`${e} is not a supported Convex type (present at path ${n} in original object ${un(t)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`);const i=Object.getPrototypeOf(e);if(i!==null&&i!==Object.prototype)throw new Error(`${e} is not a supported Convex type (present at path ${n} in original object ${un(t)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`);const s={};for(const[r,a]of Object.entries(e))zs(r),s[r]=Zt(a,t,n+`.${r}`);return s}function fn(e){return Zt(e,e,"")}const Gl="color:rgb(0, 145, 255)";function Rs(e){switch(e){case"query":return"Q";case"mutation":return"M";case"action":return"A"}}function hn(e,t,n,i){const s=Rs(t);e=="info"?console.log(`%c[CONVEX ${s}(${n})] ${i}`,Gl):console.error(`[CONVEX ${s}(${n})] ${i}`)}function Ji(e,t,n){const i=Rs(e);return new Error(`[CONVEX ${i}(${t})] ${n}`)}const cn=560,Zl=typeof window<"u"&&typeof window.fetch<"u",_n=Zl?window.fetch:(...e)=>Gr(()=>import("./index.27f495c4.js"),["./index.27f495c4.js","./_commonjsHelpers.4c03ca81.js"],import.meta.url).then(({default:t})=>t(...e));class du{constructor(t){this.address=`${t.address}/api`,this.debug=!0}backendUrl(){return this.address}setAuth(t){this.auth=t}clearAuth(){this.auth=void 0}setDebug(t){this.debug=t}query(t){return async(...n)=>{const i=JSON.stringify(fn(n)),s=encodeURIComponent(i),r=`${this.address}/${Ui}/udf?path=${t}&args=${s}`,a=this.auth?{Authorization:`Bearer ${this.auth}`}:{},l=await _n(r,{credentials:"include",headers:a});if(!l.ok&&l.status!=cn)throw new Error(await l.text());const u=await l.json(),f=ln(u.value);for(const c of u.logs)hn("info","query",t,c);if(!u.success)throw Ji("query",t,f);return f}}mutation(t){return async(...n)=>{const i=JSON.stringify({path:t,args:fn(n),tokens:[]}),s={"Content-Type":"application/json"};this.auth&&(s.Authorization=`Bearer ${this.auth}`);const r=await _n(`${this.address}/${Ui}/udf`,{body:i,method:"POST",headers:s,credentials:"include"});if(!r.ok&&r.status!=cn)throw new Error(await r.text());const a=await r.json(),l=ln(a.value);for(const u of a.logs)hn("info","mutation",t,u);if(!a.success)throw Ji("mutation",t,l);return l}}action(t){return async(...n)=>{const i=JSON.stringify({path:t,args:fn(n),debug:this.debug}),s={"Content-Type":"application/json"};this.auth&&(s.Authorization=`Bearer ${this.auth}`);const r=await _n(`${this.address}/action`,{body:i,method:"POST",headers:s,credentials:"include"});if(!r.ok&&r.status!=cn)throw new Error(await r.text());const a=await r.json();for(const l of a.logLines??[])hn("info","action",t,l);switch(a.status){case"success":return ln(a.value),a.value;case"error":throw new Error(a.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(a)}`)}}}}export{au as B,du as C,hu as D,cu as L,iu as M,ru as S,su as a,ou as b,lu as c,_e as d,xa as e,_u as f,vn as g,cs as h,ti as i,Ne as j,Lt as m,fu as q,wa as r,uu as w};
