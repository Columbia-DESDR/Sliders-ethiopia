import{w as Co,b as Om}from"./paths.860aebba.js";import{B as Rm}from"./index.9400ea7e.js";function dt(e){return e!=null&&typeof e=="object"&&e["@@functional/placeholder"]===!0}function bt(e){return function t(n){return arguments.length===0||dt(n)?t:e.apply(this,arguments)}}function _t(e){return function t(n,i){switch(arguments.length){case 0:return t;case 1:return dt(n)?t:bt(function(r){return e(n,r)});default:return dt(n)&&dt(i)?t:dt(n)?bt(function(r){return e(r,i)}):dt(i)?bt(function(r){return e(n,r)}):e(n,i)}}}function Fm(e,t){e=e||[],t=t||[];var n,i=e.length,r=t.length,s=[];for(n=0;n<i;)s[s.length]=e[n],n+=1;for(n=0;n<r;)s[s.length]=t[n],n+=1;return s}function Bo(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(n){return t.apply(this,arguments)};case 2:return function(n,i){return t.apply(this,arguments)};case 3:return function(n,i,r){return t.apply(this,arguments)};case 4:return function(n,i,r,s){return t.apply(this,arguments)};case 5:return function(n,i,r,s,a){return t.apply(this,arguments)};case 6:return function(n,i,r,s,a,o){return t.apply(this,arguments)};case 7:return function(n,i,r,s,a,o,u){return t.apply(this,arguments)};case 8:return function(n,i,r,s,a,o,u,c){return t.apply(this,arguments)};case 9:return function(n,i,r,s,a,o,u,c,l){return t.apply(this,arguments)};case 10:return function(n,i,r,s,a,o,u,c,l,f){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function ta(e){return function t(n,i,r){switch(arguments.length){case 0:return t;case 1:return dt(n)?t:_t(function(s,a){return e(n,s,a)});case 2:return dt(n)&&dt(i)?t:dt(n)?_t(function(s,a){return e(s,i,a)}):dt(i)?_t(function(s,a){return e(n,s,a)}):bt(function(s){return e(n,i,s)});default:return dt(n)&&dt(i)&&dt(r)?t:dt(n)&&dt(i)?_t(function(s,a){return e(s,a,r)}):dt(n)&&dt(r)?_t(function(s,a){return e(s,i,a)}):dt(i)&&dt(r)?_t(function(s,a){return e(n,s,a)}):dt(n)?bt(function(s){return e(s,i,r)}):dt(i)?bt(function(s){return e(n,s,r)}):dt(r)?bt(function(s){return e(n,i,s)}):e(n,i,r)}}}const ea=Array.isArray||function(t){return t!=null&&t.length>=0&&Object.prototype.toString.call(t)==="[object Array]"};function Cm(e){return e!=null&&typeof e["@@transducer/step"]=="function"}function Bm(e,t,n){return function(){if(arguments.length===0)return n();var i=arguments[arguments.length-1];if(!ea(i)){for(var r=0;r<e.length;){if(typeof i[e[r]]=="function")return i[e[r]].apply(i,Array.prototype.slice.call(arguments,0,-1));r+=1}if(Cm(i)){var s=t.apply(null,Array.prototype.slice.call(arguments,0,-1));return s(i)}}return n.apply(this,arguments)}}const _c={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}};function Hl(e){return Object.prototype.toString.call(e)==="[object String]"}var Gl=bt(function(t){return ea(t)?!0:!t||typeof t!="object"||Hl(t)?!1:t.length===0?!0:t.length>0?t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1):!1}),Lm=function(){function e(t){this.f=t}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(t){return t},e.prototype["@@transducer/step"]=function(t,n){return this.f(t,n)},e}();function Dm(e){return new Lm(e)}var Mm=_t(function(t,n){return Bo(t.length,function(){return t.apply(n,arguments)})});function Pm(e,t,n){for(var i=0,r=n.length;i<r;){if(t=e["@@transducer/step"](t,n[i]),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}i+=1}return e["@@transducer/result"](t)}function bc(e,t,n){for(var i=n.next();!i.done;){if(t=e["@@transducer/step"](t,i.value),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}i=n.next()}return e["@@transducer/result"](t)}function vc(e,t,n,i){return e["@@transducer/result"](n[i](Mm(e["@@transducer/step"],e),t))}var wc=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function Kl(e,t,n){if(typeof e=="function"&&(e=Dm(e)),Gl(n))return Pm(e,t,n);if(typeof n["fantasy-land/reduce"]=="function")return vc(e,t,n,"fantasy-land/reduce");if(n[wc]!=null)return bc(e,t,n[wc]());if(typeof n.next=="function")return bc(e,t,n);if(typeof n.reduce=="function")return vc(e,t,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}function an(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var xc=Object.prototype.toString,Ql=function(){return xc.call(arguments)==="[object Arguments]"?function(t){return xc.call(t)==="[object Arguments]"}:function(t){return an("callee",t)}}(),Um=!{toString:null}.propertyIsEnumerable("toString"),Sc=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Ic=function(){return arguments.propertyIsEnumerable("length")}(),Vm=function(t,n){for(var i=0;i<t.length;){if(t[i]===n)return!0;i+=1}return!1},jm=bt(typeof Object.keys=="function"&&!Ic?function(t){return Object(t)!==t?[]:Object.keys(t)}:function(t){if(Object(t)!==t)return[];var n,i,r=[],s=Ic&&Ql(t);for(n in t)an(n,t)&&(!s||n!=="length")&&(r[r.length]=n);if(Um)for(i=Sc.length-1;i>=0;)n=Sc[i],an(n,t)&&!Vm(r,n)&&(r[r.length]=n),i-=1;return r});const pr=jm;var $m=ta(Kl);const zm=$m;var qm=bt(function(t){for(var n=pr(t),i=n.length,r=[],s=0;s<i;)r[s]=t[n[s]],s+=1;return r});const Jl=qm;var Wm=bt(function(t){return t==null});const hr=Wm;function Ym(e){return function t(n){for(var i,r,s,a=[],o=0,u=n.length;o<u;){if(Gl(n[o]))for(i=e?t(n[o]):n[o],s=0,r=i.length;s<r;)a[a.length]=i[s],s+=1;else a[a.length]=n[o];o+=1}return a}}function Hm(e){return new RegExp(e.source,(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":""))}var Za=bt(function(t){return t===null?"Null":t===void 0?"Undefined":Object.prototype.toString.call(t).slice(8,-1)});function Xl(e,t,n,i){var r=function(a){for(var o=t.length,u=0;u<o;){if(e===t[u])return n[u];u+=1}t[u]=e,n[u]=a;for(var c in e)e.hasOwnProperty(c)&&(a[c]=i?Xl(e[c],t,n,!0):e[c]);return a};switch(Za(e)){case"Object":return r(Object.create(Object.getPrototypeOf(e)));case"Array":return r([]);case"Date":return new Date(e.valueOf());case"RegExp":return Hm(e);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return e.slice();default:return e}}var Gm=bt(function(t){return t!=null&&typeof t.clone=="function"?t.clone():Xl(t,[],[],!0)});const ps=Gm;function Km(e,t){return function(){return t.call(this,e.apply(this,arguments))}}function Zl(e,t){return function(){var n=arguments.length;if(n===0)return t();var i=arguments[n-1];return ea(i)||typeof i[e]!="function"?t.apply(this,arguments):i[e].apply(i,Array.prototype.slice.call(arguments,0,n-1))}}var Qm=ta(Zl("slice",function(t,n,i){return Array.prototype.slice.call(i,t,n)})),Jm=bt(Zl("tail",Qm(1,1/0)));const Xm=Jm;function Zm(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return Bo(arguments[0].length,zm(Km,arguments[0],Xm(arguments)))}function ty(e){return e}var ey=bt(ty);const ny=ey;function Ec(e){for(var t=[],n;!(n=e.next()).done;)t.push(n.value);return t}function Ac(e,t,n){for(var i=0,r=n.length;i<r;){if(e(t,n[i]))return!0;i+=1}return!1}function iy(e){var t=String(e).match(/^function (\w*)/);return t==null?"":t[1]}function ry(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}const Aa=typeof Object.is=="function"?Object.is:ry;function Tc(e,t,n,i){var r=Ec(e),s=Ec(t);function a(o,u){return Lo(o,u,n.slice(),i.slice())}return!Ac(function(o,u){return!Ac(a,u,o)},s,r)}function Lo(e,t,n,i){if(Aa(e,t))return!0;var r=Za(e);if(r!==Za(t))return!1;if(typeof e["fantasy-land/equals"]=="function"||typeof t["fantasy-land/equals"]=="function")return typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](t)&&typeof t["fantasy-land/equals"]=="function"&&t["fantasy-land/equals"](e);if(typeof e.equals=="function"||typeof t.equals=="function")return typeof e.equals=="function"&&e.equals(t)&&typeof t.equals=="function"&&t.equals(e);switch(r){case"Arguments":case"Array":case"Object":if(typeof e.constructor=="function"&&iy(e.constructor)==="Promise")return e===t;break;case"Boolean":case"Number":case"String":if(!(typeof e==typeof t&&Aa(e.valueOf(),t.valueOf())))return!1;break;case"Date":if(!Aa(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(!(e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.sticky===t.sticky&&e.unicode===t.unicode))return!1;break}for(var s=n.length-1;s>=0;){if(n[s]===e)return i[s]===t;s-=1}switch(r){case"Map":return e.size!==t.size?!1:Tc(e.entries(),t.entries(),n.concat([e]),i.concat([t]));case"Set":return e.size!==t.size?!1:Tc(e.values(),t.values(),n.concat([e]),i.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var a=pr(e);if(a.length!==pr(t).length)return!1;var o=n.concat([e]),u=i.concat([t]);for(s=a.length-1;s>=0;){var c=a[s];if(!(an(c,t)&&Lo(t[c],e[c],o,u)))return!1;s-=1}return!0}var sy=_t(function(t,n){return Lo(t,n,[],[])});const th=sy;function ay(e,t,n){var i,r;if(typeof e.indexOf=="function")switch(typeof t){case"number":if(t===0){for(i=1/t;n<e.length;){if(r=e[n],r===0&&1/r===i)return n;n+=1}return-1}else if(t!==t){for(;n<e.length;){if(r=e[n],typeof r=="number"&&r!==r)return n;n+=1}return-1}return e.indexOf(t,n);case"string":case"boolean":case"function":case"undefined":return e.indexOf(t,n);case"object":if(t===null)return e.indexOf(t,n)}for(;n<e.length;){if(th(e[n],t))return n;n+=1}return-1}function to(e,t){return ay(t,e,0)>=0}function oy(e,t){for(var n=0,i=t.length,r=[];n<i;)e(t[n])&&(r[r.length]=t[n]),n+=1;return r}function ms(e){return Object.prototype.toString.call(e)==="[object Object]"}var uy=function(){function e(t,n){this.xf=n,this.f=t}return e.prototype["@@transducer/init"]=_c.init,e.prototype["@@transducer/result"]=_c.result,e.prototype["@@transducer/step"]=function(t,n){return this.f(n)?this.xf["@@transducer/step"](t,n):t},e}(),cy=_t(function(t,n){return new uy(t,n)}),ly=_t(Bm(["fantasy-land/filter","filter"],cy,function(e,t){return ms(t)?Kl(function(n,i){return e(t[i])&&(n[i]=t[i]),n},{},pr(t)):oy(e,t)}));const hy=ly;var fy=function(){function e(){this._nativeSet=typeof Set=="function"?new Set:null,this._items={}}return e.prototype.add=function(t){return!kc(t,!0,this)},e.prototype.has=function(t){return kc(t,!1,this)},e}();function kc(e,t,n){var i=typeof e,r,s;switch(i){case"string":case"number":return e===0&&1/e===-1/0?n._items["-0"]?!0:(t&&(n._items["-0"]=!0),!1):n._nativeSet!==null?t?(r=n._nativeSet.size,n._nativeSet.add(e),s=n._nativeSet.size,s===r):n._nativeSet.has(e):i in n._items?e in n._items[i]?!0:(t&&(n._items[i][e]=!0),!1):(t&&(n._items[i]={},n._items[i][e]=!0),!1);case"boolean":if(i in n._items){var a=e?1:0;return n._items[i][a]?!0:(t&&(n._items[i][a]=!0),!1)}else return t&&(n._items[i]=e?[!1,!0]:[!0,!1]),!1;case"function":return n._nativeSet!==null?t?(r=n._nativeSet.size,n._nativeSet.add(e),s=n._nativeSet.size,s===r):n._nativeSet.has(e):i in n._items?to(e,n._items[i])?!0:(t&&n._items[i].push(e),!1):(t&&(n._items[i]=[e]),!1);case"undefined":return n._items[i]?!0:(t&&(n._items[i]=!0),!1);case"object":if(e===null)return n._items.null?!0:(t&&(n._items.null=!0),!1);default:return i=Object.prototype.toString.call(e),i in n._items?to(e,n._items[i])?!0:(t&&n._items[i].push(e),!1):(t&&(n._items[i]=[e]),!1)}}var dy=_t(function(t,n){for(var i=[],r=0,s=t.length,a=n.length,o=new fy,u=0;u<a;u+=1)o.add(n[u]);for(;r<s;)o.add(t[r])&&(i[i.length]=t[r]),r+=1;return i});const py=dy;function my(e){var t=Object.prototype.toString.call(e);return t==="[object Uint8ClampedArray]"||t==="[object Int8Array]"||t==="[object Uint8Array]"||t==="[object Int16Array]"||t==="[object Uint16Array]"||t==="[object Int32Array]"||t==="[object Uint32Array]"||t==="[object Float32Array]"||t==="[object Float64Array]"||t==="[object BigInt64Array]"||t==="[object BigUint64Array]"}var yy=bt(function(t){return t!=null&&typeof t["fantasy-land/empty"]=="function"?t["fantasy-land/empty"]():t!=null&&t.constructor!=null&&typeof t.constructor["fantasy-land/empty"]=="function"?t.constructor["fantasy-land/empty"]():t!=null&&typeof t.empty=="function"?t.empty():t!=null&&t.constructor!=null&&typeof t.constructor.empty=="function"?t.constructor.empty():ea(t)?[]:Hl(t)?"":ms(t)?{}:Ql(t)?function(){return arguments}():my(t)?t.constructor.from(""):void 0}),gy=bt(Ym(!0));const _y=gy;var by=_t(function(t,n){for(var i=pr(n),r=0;r<i.length;){var s=i[r];t(n[s],s,n),r+=1}return n});const eh=by;var vy=bt(function(t){for(var n={},i=0;i<t.length;)n[t[i][0]]=t[i][1],i+=1;return n});const wy=vy;var xy=_t(function(t,n){return hr(n)?!1:t in n});const Sy=xy;var Iy=_t(to);const Ey=Iy;function Ay(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1,i=arguments.length;n<i;){var r=arguments[n];if(r!=null)for(var s in r)an(s,r)&&(t[s]=r[s]);n+=1}return t}const nh=typeof Object.assign=="function"?Object.assign:Ay;var Ty=_t(function(t,n){return n instanceof t||n!=null&&(n.constructor===t||t.name==="Object"&&typeof n=="object")});const Do=Ty;var ky=bt(function(t){return t!=null&&th(t,yy(t))});const Ny=ky;var Oy=ta(function(t,n,i){var r={},s;for(s in n)an(s,n)&&(r[s]=an(s,i)?t(s,n[s],i[s]):n[s]);for(s in i)an(s,i)&&!an(s,r)&&(r[s]=i[s]);return r}),Ry=ta(function e(t,n,i){return Oy(function(r,s,a){return ms(s)&&ms(a)?e(t,s,a):t(r,s,a)},n,i)}),Fy=_t(function(t,n){return Ry(function(i,r,s){return s},t,n)});const Cy=Fy;var By=_t(function(t,n){return nh({},n,t)});const Ly=By;var Dy=_t(function(t,n){return nh({},t,n)});const Mo=Dy;function My(e){return _t(function(t,n){return Bo(Math.max(0,t.length-n.length),function(){return t.apply(this,e(n,arguments))})})}var Py=My(Fm);const Uy=Py;var Vy=_t(function(t,n){var i=Number(n),r=0,s;if(i<0||isNaN(i))throw new RangeError("n must be a non-negative number");for(s=new Array(i);r<i;)s[r]=t(r),r+=1;return s});const jy=Vy;var $y=_t(function(t,n){for(var i=0,r=t.length,s,a=n.length,o=[];i<r;){for(s=0;s<a;)o[o.length]=[t[i],n[s]],s+=1;i+=1}return o});const zy=$y;var qy={value:()=>{}};function ih(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new es(n)}function es(e){this._=e}function Wy(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}es.prototype=ih.prototype={constructor:es,on:function(e,t){var n=this._,i=Wy(e+"",n),r,s=-1,a=i.length;if(arguments.length<2){for(;++s<a;)if((r=(e=i[s]).type)&&(r=Yy(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(r=(e=i[s]).type)n[r]=Nc(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Nc(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new es(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,r=s.length;i<r;++i)s[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)}};function Yy(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function Nc(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=qy,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var eo="http://www.w3.org/1999/xhtml";const Oc={svg:"http://www.w3.org/2000/svg",xhtml:eo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function na(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Oc.hasOwnProperty(t)?{space:Oc[t],local:e}:e}function Hy(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===eo&&t.documentElement.namespaceURI===eo?t.createElement(e):t.createElementNS(n,e)}}function Gy(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function rh(e){var t=na(e);return(t.local?Gy:Hy)(t)}function Ky(){}function Po(e){return e==null?Ky:function(){return this.querySelector(e)}}function Qy(e){typeof e!="function"&&(e=Po(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],a=s.length,o=i[r]=new Array(a),u,c,l=0;l<a;++l)(u=s[l])&&(c=e.call(u,u.__data__,l,s))&&("__data__"in u&&(c.__data__=u.__data__),o[l]=c);return new ve(i,this._parents)}function Jy(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Xy(){return[]}function sh(e){return e==null?Xy:function(){return this.querySelectorAll(e)}}function Zy(e){return function(){return Jy(e.apply(this,arguments))}}function t0(e){typeof e=="function"?e=Zy(e):e=sh(e);for(var t=this._groups,n=t.length,i=[],r=[],s=0;s<n;++s)for(var a=t[s],o=a.length,u,c=0;c<o;++c)(u=a[c])&&(i.push(e.call(u,u.__data__,c,a)),r.push(u));return new ve(i,r)}function ah(e){return function(){return this.matches(e)}}function oh(e){return function(t){return t.matches(e)}}var e0=Array.prototype.find;function n0(e){return function(){return e0.call(this.children,e)}}function i0(){return this.firstElementChild}function r0(e){return this.select(e==null?i0:n0(typeof e=="function"?e:oh(e)))}var s0=Array.prototype.filter;function a0(){return Array.from(this.children)}function o0(e){return function(){return s0.call(this.children,e)}}function u0(e){return this.selectAll(e==null?a0:o0(typeof e=="function"?e:oh(e)))}function c0(e){typeof e!="function"&&(e=ah(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],a=s.length,o=i[r]=[],u,c=0;c<a;++c)(u=s[c])&&e.call(u,u.__data__,c,s)&&o.push(u);return new ve(i,this._parents)}function uh(e){return new Array(e.length)}function l0(){return new ve(this._enter||this._groups.map(uh),this._parents)}function ys(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ys.prototype={constructor:ys,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function h0(e){return function(){return e}}function f0(e,t,n,i,r,s){for(var a=0,o,u=t.length,c=s.length;a<c;++a)(o=t[a])?(o.__data__=s[a],i[a]=o):n[a]=new ys(e,s[a]);for(;a<u;++a)(o=t[a])&&(r[a]=o)}function d0(e,t,n,i,r,s,a){var o,u,c=new Map,l=t.length,f=s.length,d=new Array(l),m;for(o=0;o<l;++o)(u=t[o])&&(d[o]=m=a.call(u,u.__data__,o,t)+"",c.has(m)?r[o]=u:c.set(m,u));for(o=0;o<f;++o)m=a.call(e,s[o],o,s)+"",(u=c.get(m))?(i[o]=u,u.__data__=s[o],c.delete(m)):n[o]=new ys(e,s[o]);for(o=0;o<l;++o)(u=t[o])&&c.get(d[o])===u&&(r[o]=u)}function p0(e){return e.__data__}function m0(e,t){if(!arguments.length)return Array.from(this,p0);var n=t?d0:f0,i=this._parents,r=this._groups;typeof e!="function"&&(e=h0(e));for(var s=r.length,a=new Array(s),o=new Array(s),u=new Array(s),c=0;c<s;++c){var l=i[c],f=r[c],d=f.length,m=y0(e.call(l,l&&l.__data__,c,i)),y=m.length,g=o[c]=new Array(y),_=a[c]=new Array(y),b=u[c]=new Array(d);n(l,f,g,_,b,m,t);for(var N=0,Z=0,w,ct;N<y;++N)if(w=g[N]){for(N>=Z&&(Z=N+1);!(ct=_[Z])&&++Z<y;);w._next=ct||null}}return a=new ve(a,i),a._enter=o,a._exit=u,a}function y0(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function g0(){return new ve(this._exit||this._groups.map(uh),this._parents)}function _0(e,t,n){var i=this.enter(),r=this,s=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function b0(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,s=i.length,a=Math.min(r,s),o=new Array(r),u=0;u<a;++u)for(var c=n[u],l=i[u],f=c.length,d=o[u]=new Array(f),m,y=0;y<f;++y)(m=c[y]||l[y])&&(d[y]=m);for(;u<r;++u)o[u]=n[u];return new ve(o,this._parents)}function v0(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,s=i[r],a;--r>=0;)(a=i[r])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function w0(e){e||(e=x0);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var a=n[s],o=a.length,u=r[s]=new Array(o),c,l=0;l<o;++l)(c=a[l])&&(u[l]=c);u.sort(t)}return new ve(r,this._parents).order()}function x0(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function S0(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function I0(){return Array.from(this)}function E0(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length;r<s;++r){var a=i[r];if(a)return a}return null}function A0(){let e=0;for(const t of this)++e;return e}function T0(){return!this.node()}function k0(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],s=0,a=r.length,o;s<a;++s)(o=r[s])&&e.call(o,o.__data__,s,r);return this}function N0(e){return function(){this.removeAttribute(e)}}function O0(e){return function(){this.removeAttributeNS(e.space,e.local)}}function R0(e,t){return function(){this.setAttribute(e,t)}}function F0(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function C0(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function B0(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function L0(e,t){var n=na(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?O0:N0:typeof t=="function"?n.local?B0:C0:n.local?F0:R0)(n,t))}function ch(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function D0(e){return function(){this.style.removeProperty(e)}}function M0(e,t,n){return function(){this.style.setProperty(e,t,n)}}function P0(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function U0(e,t,n){return arguments.length>1?this.each((t==null?D0:typeof t=="function"?P0:M0)(e,t,n??"")):Ai(this.node(),e)}function Ai(e,t){return e.style.getPropertyValue(t)||ch(e).getComputedStyle(e,null).getPropertyValue(t)}function V0(e){return function(){delete this[e]}}function j0(e,t){return function(){this[e]=t}}function $0(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function z0(e,t){return arguments.length>1?this.each((t==null?V0:typeof t=="function"?$0:j0)(e,t)):this.node()[e]}function lh(e){return e.trim().split(/^|\s+/)}function Uo(e){return e.classList||new hh(e)}function hh(e){this._node=e,this._names=lh(e.getAttribute("class")||"")}hh.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function fh(e,t){for(var n=Uo(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function dh(e,t){for(var n=Uo(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function q0(e){return function(){fh(this,e)}}function W0(e){return function(){dh(this,e)}}function Y0(e,t){return function(){(t.apply(this,arguments)?fh:dh)(this,e)}}function H0(e,t){var n=lh(e+"");if(arguments.length<2){for(var i=Uo(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Y0:t?q0:W0)(n,t))}function G0(){this.textContent=""}function K0(e){return function(){this.textContent=e}}function Q0(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function J0(e){return arguments.length?this.each(e==null?G0:(typeof e=="function"?Q0:K0)(e)):this.node().textContent}function X0(){this.innerHTML=""}function Z0(e){return function(){this.innerHTML=e}}function tg(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function eg(e){return arguments.length?this.each(e==null?X0:(typeof e=="function"?tg:Z0)(e)):this.node().innerHTML}function ng(){this.nextSibling&&this.parentNode.appendChild(this)}function ig(){return this.each(ng)}function rg(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function sg(){return this.each(rg)}function ag(e){var t=typeof e=="function"?e:rh(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function og(){return null}function ug(e,t){var n=typeof e=="function"?e:rh(e),i=t==null?og:typeof t=="function"?t:Po(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function cg(){var e=this.parentNode;e&&e.removeChild(this)}function lg(){return this.each(cg)}function hg(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function fg(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function dg(e){return this.select(e?fg:hg)}function pg(e){return arguments.length?this.property("__data__",e):this.node().__data__}function mg(e){return function(t){e.call(this,t,this.__data__)}}function yg(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function gg(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,r=t.length,s;n<r;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++i]=s;++i?t.length=i:delete this.__on}}}function _g(e,t,n){return function(){var i=this.__on,r,s=mg(t);if(i){for(var a=0,o=i.length;a<o;++a)if((r=i[a]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=t;return}}this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},i?i.push(r):this.__on=[r]}}function bg(e,t,n){var i=yg(e+""),r,s=i.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var u=0,c=o.length,l;u<c;++u)for(r=0,l=o[u];r<s;++r)if((a=i[r]).type===l.type&&a.name===l.name)return l.value}return}for(o=t?_g:gg,r=0;r<s;++r)this.each(o(i[r],t,n));return this}function ph(e,t,n){var i=ch(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function vg(e,t){return function(){return ph(this,e,t)}}function wg(e,t){return function(){return ph(this,e,t.apply(this,arguments))}}function xg(e,t){return this.each((typeof t=="function"?wg:vg)(e,t))}function*Sg(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length,a;r<s;++r)(a=i[r])&&(yield a)}var Ig=[null];function ve(e,t){this._groups=e,this._parents=t}function Rr(){return new ve([[document.documentElement]],Ig)}function Eg(){return this}ve.prototype=Rr.prototype={constructor:ve,select:Qy,selectAll:t0,selectChild:r0,selectChildren:u0,filter:c0,data:m0,enter:l0,exit:g0,join:_0,merge:b0,selection:Eg,order:v0,sort:w0,call:S0,nodes:I0,node:E0,size:A0,empty:T0,each:k0,attr:L0,style:U0,property:z0,classed:H0,text:J0,html:eg,raise:ig,lower:sg,append:ag,insert:ug,remove:lg,clone:dg,datum:pg,on:bg,dispatch:xg,[Symbol.iterator]:Sg};function Vo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function mh(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Fr(){}var mr=.7,gs=1/mr,vi="\\s*([+-]?\\d+)\\s*",yr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$e="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ag=/^#([0-9a-f]{3,8})$/,Tg=new RegExp(`^rgb\\(${vi},${vi},${vi}\\)$`),kg=new RegExp(`^rgb\\(${$e},${$e},${$e}\\)$`),Ng=new RegExp(`^rgba\\(${vi},${vi},${vi},${yr}\\)$`),Og=new RegExp(`^rgba\\(${$e},${$e},${$e},${yr}\\)$`),Rg=new RegExp(`^hsl\\(${yr},${$e},${$e}\\)$`),Fg=new RegExp(`^hsla\\(${yr},${$e},${$e},${yr}\\)$`),Rc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Vo(Fr,gr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Fc,formatHex:Fc,formatHex8:Cg,formatHsl:Bg,formatRgb:Cc,toString:Cc});function Fc(){return this.rgb().formatHex()}function Cg(){return this.rgb().formatHex8()}function Bg(){return yh(this).formatHsl()}function Cc(){return this.rgb().formatRgb()}function gr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Ag.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Bc(t):n===3?new $t(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Yr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Yr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Tg.exec(e))?new $t(t[1],t[2],t[3],1):(t=kg.exec(e))?new $t(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Ng.exec(e))?Yr(t[1],t[2],t[3],t[4]):(t=Og.exec(e))?Yr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Rg.exec(e))?Mc(t[1],t[2]/100,t[3]/100,1):(t=Fg.exec(e))?Mc(t[1],t[2]/100,t[3]/100,t[4]):Rc.hasOwnProperty(e)?Bc(Rc[e]):e==="transparent"?new $t(NaN,NaN,NaN,0):null}function Bc(e){return new $t(e>>16&255,e>>8&255,e&255,1)}function Yr(e,t,n,i){return i<=0&&(e=t=n=NaN),new $t(e,t,n,i)}function Lg(e){return e instanceof Fr||(e=gr(e)),e?(e=e.rgb(),new $t(e.r,e.g,e.b,e.opacity)):new $t}function _s(e,t,n,i){return arguments.length===1?Lg(e):new $t(e,t,n,i??1)}function $t(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Vo($t,_s,mh(Fr,{brighter(e){return e=e==null?gs:Math.pow(gs,e),new $t(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?mr:Math.pow(mr,e),new $t(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new $t(ti(this.r),ti(this.g),ti(this.b),bs(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Lc,formatHex:Lc,formatHex8:Dg,formatRgb:Dc,toString:Dc}));function Lc(){return`#${Wn(this.r)}${Wn(this.g)}${Wn(this.b)}`}function Dg(){return`#${Wn(this.r)}${Wn(this.g)}${Wn(this.b)}${Wn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Dc(){const e=bs(this.opacity);return`${e===1?"rgb(":"rgba("}${ti(this.r)}, ${ti(this.g)}, ${ti(this.b)}${e===1?")":`, ${e})`}`}function bs(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ti(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Wn(e){return e=ti(e),(e<16?"0":"")+e.toString(16)}function Mc(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ye(e,t,n,i)}function yh(e){if(e instanceof ye)return new ye(e.h,e.s,e.l,e.opacity);if(e instanceof Fr||(e=gr(e)),!e)return new ye;if(e instanceof ye)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),s=Math.max(t,n,i),a=NaN,o=s-r,u=(s+r)/2;return o?(t===s?a=(n-i)/o+(n<i)*6:n===s?a=(i-t)/o+2:a=(t-n)/o+4,o/=u<.5?s+r:2-s-r,a*=60):o=u>0&&u<1?0:a,new ye(a,o,u,e.opacity)}function Mg(e,t,n,i){return arguments.length===1?yh(e):new ye(e,t,n,i??1)}function ye(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Vo(ye,Mg,mh(Fr,{brighter(e){return e=e==null?gs:Math.pow(gs,e),new ye(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?mr:Math.pow(mr,e),new ye(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new $t(Ta(e>=240?e-240:e+120,r,i),Ta(e,r,i),Ta(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new ye(Pc(this.h),Hr(this.s),Hr(this.l),bs(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=bs(this.opacity);return`${e===1?"hsl(":"hsla("}${Pc(this.h)}, ${Hr(this.s)*100}%, ${Hr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Pc(e){return e=(e||0)%360,e<0?e+360:e}function Hr(e){return Math.max(0,Math.min(1,e||0))}function Ta(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function Pg(e,t,n,i,r){var s=e*e,a=s*e;return((1-3*e+3*s-a)*t+(4-6*s+3*a)*n+(1+3*e+3*s-3*a)*i+a*r)/6}function Ug(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],s=e[i+1],a=i>0?e[i-1]:2*r-s,o=i<t-1?e[i+2]:2*s-r;return Pg((n-i/t)*t,a,r,s,o)}}const jo=e=>()=>e;function gh(e,t){return function(n){return e+n*t}}function Vg(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function A2(e,t){var n=t-e;return n?gh(e,n>180||n<-180?n-360*Math.round(n/360):n):jo(isNaN(e)?t:e)}function jg(e){return(e=+e)==1?_h:function(t,n){return n-t?Vg(t,n,e):jo(isNaN(t)?n:t)}}function _h(e,t){var n=t-e;return n?gh(e,n):jo(isNaN(e)?t:e)}const Uc=function e(t){var n=jg(t);function i(r,s){var a=n((r=_s(r)).r,(s=_s(s)).r),o=n(r.g,s.g),u=n(r.b,s.b),c=_h(r.opacity,s.opacity);return function(l){return r.r=a(l),r.g=o(l),r.b=u(l),r.opacity=c(l),r+""}}return i.gamma=e,i}(1);function $g(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),s=new Array(n),a,o;for(a=0;a<n;++a)o=_s(t[a]),i[a]=o.r||0,r[a]=o.g||0,s[a]=o.b||0;return i=e(i),r=e(r),s=e(s),o.opacity=1,function(u){return o.r=i(u),o.g=r(u),o.b=s(u),o+""}}}var T2=$g(Ug);function Sn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var no=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ka=new RegExp(no.source,"g");function zg(e){return function(){return e}}function qg(e){return function(t){return e(t)+""}}function Wg(e,t){var n=no.lastIndex=ka.lastIndex=0,i,r,s,a=-1,o=[],u=[];for(e=e+"",t=t+"";(i=no.exec(e))&&(r=ka.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(i=i[0])===(r=r[0])?o[a]?o[a]+=r:o[++a]=r:(o[++a]=null,u.push({i:a,x:Sn(i,r)})),n=ka.lastIndex;return n<t.length&&(s=t.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?u[0]?qg(u[0].x):zg(t):(t=u.length,function(c){for(var l=0,f;l<t;++l)o[(f=u[l]).i]=f.x(c);return o.join("")})}var Vc=180/Math.PI,io={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function bh(e,t,n,i,r,s){var a,o,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*i)&&(n-=e*u,i-=t*u),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,u/=o),e*i<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*Vc,skewX:Math.atan(u)*Vc,scaleX:a,scaleY:o}}var Gr;function Yg(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?io:bh(t.a,t.b,t.c,t.d,t.e,t.f)}function Hg(e){return e==null||(Gr||(Gr=document.createElementNS("http://www.w3.org/2000/svg","g")),Gr.setAttribute("transform",e),!(e=Gr.transform.baseVal.consolidate()))?io:(e=e.matrix,bh(e.a,e.b,e.c,e.d,e.e,e.f))}function vh(e,t,n,i){function r(c){return c.length?c.pop()+" ":""}function s(c,l,f,d,m,y){if(c!==f||l!==d){var g=m.push("translate(",null,t,null,n);y.push({i:g-4,x:Sn(c,f)},{i:g-2,x:Sn(l,d)})}else(f||d)&&m.push("translate("+f+t+d+n)}function a(c,l,f,d){c!==l?(c-l>180?l+=360:l-c>180&&(c+=360),d.push({i:f.push(r(f)+"rotate(",null,i)-2,x:Sn(c,l)})):l&&f.push(r(f)+"rotate("+l+i)}function o(c,l,f,d){c!==l?d.push({i:f.push(r(f)+"skewX(",null,i)-2,x:Sn(c,l)}):l&&f.push(r(f)+"skewX("+l+i)}function u(c,l,f,d,m,y){if(c!==f||l!==d){var g=m.push(r(m)+"scale(",null,",",null,")");y.push({i:g-4,x:Sn(c,f)},{i:g-2,x:Sn(l,d)})}else(f!==1||d!==1)&&m.push(r(m)+"scale("+f+","+d+")")}return function(c,l){var f=[],d=[];return c=e(c),l=e(l),s(c.translateX,c.translateY,l.translateX,l.translateY,f,d),a(c.rotate,l.rotate,f,d),o(c.skewX,l.skewX,f,d),u(c.scaleX,c.scaleY,l.scaleX,l.scaleY,f,d),c=l=null,function(m){for(var y=-1,g=d.length,_;++y<g;)f[(_=d[y]).i]=_.x(m);return f.join("")}}}var Gg=vh(Yg,"px, ","px)","deg)"),Kg=vh(Hg,", ",")",")"),Ti=0,ar=0,tr=0,wh=1e3,vs,or,ws=0,ii=0,ia=0,_r=typeof performance=="object"&&performance.now?performance:Date,xh=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function $o(){return ii||(xh(Qg),ii=_r.now()+ia)}function Qg(){ii=0}function xs(){this._call=this._time=this._next=null}xs.prototype=Sh.prototype={constructor:xs,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?$o():+n)+(t==null?0:+t),!this._next&&or!==this&&(or?or._next=this:vs=this,or=this),this._call=e,this._time=n,ro()},stop:function(){this._call&&(this._call=null,this._time=1/0,ro())}};function Sh(e,t,n){var i=new xs;return i.restart(e,t,n),i}function Jg(){$o(),++Ti;for(var e=vs,t;e;)(t=ii-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ti}function jc(){ii=(ws=_r.now())+ia,Ti=ar=0;try{Jg()}finally{Ti=0,Zg(),ii=0}}function Xg(){var e=_r.now(),t=e-ws;t>wh&&(ia-=t,ws=e)}function Zg(){for(var e,t=vs,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:vs=n);or=e,ro(i)}function ro(e){if(!Ti){ar&&(ar=clearTimeout(ar));var t=e-ii;t>24?(e<1/0&&(ar=setTimeout(jc,e-_r.now()-ia)),tr&&(tr=clearInterval(tr))):(tr||(ws=_r.now(),tr=setInterval(Xg,wh)),Ti=1,xh(jc))}}function $c(e,t,n){var i=new xs;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var t_=ih("start","end","cancel","interrupt"),e_=[],Ih=0,zc=1,so=2,ns=3,qc=4,ao=5,is=6;function ra(e,t,n,i,r,s){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;n_(e,n,{name:t,index:i,group:r,on:t_,tween:e_,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Ih})}function zo(e,t){var n=Ie(e,t);if(n.state>Ih)throw new Error("too late; already scheduled");return n}function Ge(e,t){var n=Ie(e,t);if(n.state>ns)throw new Error("too late; already running");return n}function Ie(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function n_(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=Sh(s,0,n.time);function s(c){n.state=zc,n.timer.restart(a,n.delay,n.time),n.delay<=c&&a(c-n.delay)}function a(c){var l,f,d,m;if(n.state!==zc)return u();for(l in i)if(m=i[l],m.name===n.name){if(m.state===ns)return $c(a);m.state===qc?(m.state=is,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete i[l]):+l<t&&(m.state=is,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete i[l])}if($c(function(){n.state===ns&&(n.state=qc,n.timer.restart(o,n.delay,n.time),o(c))}),n.state=so,n.on.call("start",e,e.__data__,n.index,n.group),n.state===so){for(n.state=ns,r=new Array(d=n.tween.length),l=0,f=-1;l<d;++l)(m=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=m);r.length=f+1}}function o(c){for(var l=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=ao,1),f=-1,d=r.length;++f<d;)r[f].call(e,l);n.state===ao&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=is,n.timer.stop(),delete i[t];for(var c in i)return;delete e.__transition}}function i_(e,t){var n=e.__transition,i,r,s=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((i=n[a]).name!==t){s=!1;continue}r=i.state>so&&i.state<ao,i.state=is,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[a]}s&&delete e.__transition}}function r_(e){return this.each(function(){i_(this,e)})}function s_(e,t){var n,i;return function(){var r=Ge(this,e),s=r.tween;if(s!==n){i=n=s;for(var a=0,o=i.length;a<o;++a)if(i[a].name===t){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function a_(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=Ge(this,e),a=s.tween;if(a!==i){r=(i=a).slice();for(var o={name:t,value:n},u=0,c=r.length;u<c;++u)if(r[u].name===t){r[u]=o;break}u===c&&r.push(o)}s.tween=r}}function o_(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Ie(this.node(),n).tween,r=0,s=i.length,a;r<s;++r)if((a=i[r]).name===e)return a.value;return null}return this.each((t==null?s_:a_)(n,e,t))}function qo(e,t,n){var i=e._id;return e.each(function(){var r=Ge(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Ie(r,i).value[t]}}function Eh(e,t){var n;return(typeof t=="number"?Sn:t instanceof gr?Uc:(n=gr(t))?(t=n,Uc):Wg)(e,t)}function u_(e){return function(){this.removeAttribute(e)}}function c_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function l_(e,t,n){var i,r=n+"",s;return function(){var a=this.getAttribute(e);return a===r?null:a===i?s:s=t(i=a,n)}}function h_(e,t,n){var i,r=n+"",s;return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===i?s:s=t(i=a,n)}}function f_(e,t,n){var i,r,s;return function(){var a,o=n(this),u;return o==null?void this.removeAttribute(e):(a=this.getAttribute(e),u=o+"",a===u?null:a===i&&u===r?s:(r=u,s=t(i=a,o)))}}function d_(e,t,n){var i,r,s;return function(){var a,o=n(this),u;return o==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),u=o+"",a===u?null:a===i&&u===r?s:(r=u,s=t(i=a,o)))}}function p_(e,t){var n=na(e),i=n==="transform"?Kg:Eh;return this.attrTween(e,typeof t=="function"?(n.local?d_:f_)(n,i,qo(this,"attr."+e,t)):t==null?(n.local?c_:u_)(n):(n.local?h_:l_)(n,i,t))}function m_(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function y_(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function g_(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&y_(e,s)),n}return r._value=t,r}function __(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&m_(e,s)),n}return r._value=t,r}function b_(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=na(e);return this.tween(n,(i.local?g_:__)(i,t))}function v_(e,t){return function(){zo(this,e).delay=+t.apply(this,arguments)}}function w_(e,t){return t=+t,function(){zo(this,e).delay=t}}function x_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?v_:w_)(t,e)):Ie(this.node(),t).delay}function S_(e,t){return function(){Ge(this,e).duration=+t.apply(this,arguments)}}function I_(e,t){return t=+t,function(){Ge(this,e).duration=t}}function E_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?S_:I_)(t,e)):Ie(this.node(),t).duration}function A_(e,t){if(typeof t!="function")throw new Error;return function(){Ge(this,e).ease=t}}function T_(e){var t=this._id;return arguments.length?this.each(A_(t,e)):Ie(this.node(),t).ease}function k_(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ge(this,e).ease=n}}function N_(e){if(typeof e!="function")throw new Error;return this.each(k_(this._id,e))}function O_(e){typeof e!="function"&&(e=ah(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],a=s.length,o=i[r]=[],u,c=0;c<a;++c)(u=s[c])&&e.call(u,u.__data__,c,s)&&o.push(u);return new cn(i,this._parents,this._name,this._id)}function R_(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,s=Math.min(i,r),a=new Array(i),o=0;o<s;++o)for(var u=t[o],c=n[o],l=u.length,f=a[o]=new Array(l),d,m=0;m<l;++m)(d=u[m]||c[m])&&(f[m]=d);for(;o<i;++o)a[o]=t[o];return new cn(a,this._parents,this._name,this._id)}function F_(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function C_(e,t,n){var i,r,s=F_(t)?zo:Ge;return function(){var a=s(this,e),o=a.on;o!==i&&(r=(i=o).copy()).on(t,n),a.on=r}}function B_(e,t){var n=this._id;return arguments.length<2?Ie(this.node(),n).on.on(e):this.each(C_(n,e,t))}function L_(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function D_(){return this.on("end.remove",L_(this._id))}function M_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Po(e));for(var i=this._groups,r=i.length,s=new Array(r),a=0;a<r;++a)for(var o=i[a],u=o.length,c=s[a]=new Array(u),l,f,d=0;d<u;++d)(l=o[d])&&(f=e.call(l,l.__data__,d,o))&&("__data__"in l&&(f.__data__=l.__data__),c[d]=f,ra(c[d],t,n,d,c,Ie(l,n)));return new cn(s,this._parents,t,n)}function P_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=sh(e));for(var i=this._groups,r=i.length,s=[],a=[],o=0;o<r;++o)for(var u=i[o],c=u.length,l,f=0;f<c;++f)if(l=u[f]){for(var d=e.call(l,l.__data__,f,u),m,y=Ie(l,n),g=0,_=d.length;g<_;++g)(m=d[g])&&ra(m,t,n,g,d,y);s.push(d),a.push(l)}return new cn(s,a,t,n)}var U_=Rr.prototype.constructor;function V_(){return new U_(this._groups,this._parents)}function j_(e,t){var n,i,r;return function(){var s=Ai(this,e),a=(this.style.removeProperty(e),Ai(this,e));return s===a?null:s===n&&a===i?r:r=t(n=s,i=a)}}function Ah(e){return function(){this.style.removeProperty(e)}}function $_(e,t,n){var i,r=n+"",s;return function(){var a=Ai(this,e);return a===r?null:a===i?s:s=t(i=a,n)}}function z_(e,t,n){var i,r,s;return function(){var a=Ai(this,e),o=n(this),u=o+"";return o==null&&(u=o=(this.style.removeProperty(e),Ai(this,e))),a===u?null:a===i&&u===r?s:(r=u,s=t(i=a,o))}}function q_(e,t){var n,i,r,s="style."+t,a="end."+s,o;return function(){var u=Ge(this,e),c=u.on,l=u.value[s]==null?o||(o=Ah(t)):void 0;(c!==n||r!==l)&&(i=(n=c).copy()).on(a,r=l),u.on=i}}function W_(e,t,n){var i=(e+="")=="transform"?Gg:Eh;return t==null?this.styleTween(e,j_(e,i)).on("end.style."+e,Ah(e)):typeof t=="function"?this.styleTween(e,z_(e,i,qo(this,"style."+e,t))).each(q_(this._id,e)):this.styleTween(e,$_(e,i,t),n).on("end.style."+e,null)}function Y_(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function H_(e,t,n){var i,r;function s(){var a=t.apply(this,arguments);return a!==r&&(i=(r=a)&&Y_(e,a,n)),i}return s._value=t,s}function G_(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,H_(e,t,n??""))}function K_(e){return function(){this.textContent=e}}function Q_(e){return function(){var t=e(this);this.textContent=t??""}}function J_(e){return this.tween("text",typeof e=="function"?Q_(qo(this,"text",e)):K_(e==null?"":e+""))}function X_(e){return function(t){this.textContent=e.call(this,t)}}function Z_(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&X_(r)),t}return i._value=e,i}function tb(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Z_(e))}function eb(){for(var e=this._name,t=this._id,n=Th(),i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],o=a.length,u,c=0;c<o;++c)if(u=a[c]){var l=Ie(u,t);ra(u,e,n,c,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new cn(i,this._parents,e,n)}function nb(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(s,a){var o={value:a},u={value:function(){--r===0&&s()}};n.each(function(){var c=Ge(this,i),l=c.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(u)),c.on=t}),r===0&&s()})}var ib=0;function cn(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Th(){return++ib}var Je=Rr.prototype;cn.prototype={constructor:cn,select:M_,selectAll:P_,selectChild:Je.selectChild,selectChildren:Je.selectChildren,filter:O_,merge:R_,selection:V_,transition:eb,call:Je.call,nodes:Je.nodes,node:Je.node,size:Je.size,empty:Je.empty,each:Je.each,on:B_,attr:p_,attrTween:b_,style:W_,styleTween:G_,text:J_,textTween:tb,remove:D_,tween:o_,delay:x_,duration:E_,ease:T_,easeVarying:N_,end:nb,[Symbol.iterator]:Je[Symbol.iterator]};function rb(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var sb={time:null,delay:0,duration:250,ease:rb};function ab(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function ob(e){var t,n;e instanceof cn?(t=e._id,e=e._name):(t=Th(),(n=sb).time=$o(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],o=a.length,u,c=0;c<o;++c)(u=a[c])&&ra(u,e,t,c,a,n||ab(u,t));return new cn(i,this._parents,e,t)}Rr.prototype.interrupt=r_;Rr.prototype.transition=ob;var Wc={},Na={},Oa=34,er=10,Ra=13;function kh(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function ub(e,t){var n=kh(e);return function(i,r){return t(n(i),r,e)}}function Yc(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function Mt(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function cb(e){return e<0?"-"+Mt(-e,6):e>9999?"+"+Mt(e,6):Mt(e,4)}function lb(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":cb(e.getUTCFullYear())+"-"+Mt(e.getUTCMonth()+1,2)+"-"+Mt(e.getUTCDate(),2)+(r?"T"+Mt(t,2)+":"+Mt(n,2)+":"+Mt(i,2)+"."+Mt(r,3)+"Z":i?"T"+Mt(t,2)+":"+Mt(n,2)+":"+Mt(i,2)+"Z":n||t?"T"+Mt(t,2)+":"+Mt(n,2)+"Z":"")}function hb(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(f,d){var m,y,g=r(f,function(_,b){if(m)return m(_,b-1);y=_,m=d?ub(_,d):kh(_)});return g.columns=y||[],g}function r(f,d){var m=[],y=f.length,g=0,_=0,b,N=y<=0,Z=!1;f.charCodeAt(y-1)===er&&--y,f.charCodeAt(y-1)===Ra&&--y;function w(){if(N)return Na;if(Z)return Z=!1,Wc;var U,At=g,nt;if(f.charCodeAt(At)===Oa){for(;g++<y&&f.charCodeAt(g)!==Oa||f.charCodeAt(++g)===Oa;);return(U=g)>=y?N=!0:(nt=f.charCodeAt(g++))===er?Z=!0:nt===Ra&&(Z=!0,f.charCodeAt(g)===er&&++g),f.slice(At+1,U-1).replace(/""/g,'"')}for(;g<y;){if((nt=f.charCodeAt(U=g++))===er)Z=!0;else if(nt===Ra)Z=!0,f.charCodeAt(g)===er&&++g;else if(nt!==n)continue;return f.slice(At,U)}return N=!0,f.slice(At,y)}for(;(b=w())!==Na;){for(var ct=[];b!==Wc&&b!==Na;)ct.push(b),b=w();d&&(ct=d(ct,_++))==null||m.push(ct)}return m}function s(f,d){return f.map(function(m){return d.map(function(y){return l(m[y])}).join(e)})}function a(f,d){return d==null&&(d=Yc(f)),[d.map(l).join(e)].concat(s(f,d)).join(`
`)}function o(f,d){return d==null&&(d=Yc(f)),s(f,d).join(`
`)}function u(f){return f.map(c).join(`
`)}function c(f){return f.map(l).join(e)}function l(f){return f==null?"":f instanceof Date?lb(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:i,parseRows:r,format:a,formatBody:o,formatRows:u,formatRow:c,formatValue:l}}var fb=hb(","),db=fb.parse;function pb(e){for(var t in e){var n=e[t].trim(),i,r;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(i=+n))n=i;else if(r=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))mb&&r[4]&&!r[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;e[t]=n}return e}const mb=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function yb(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function gb(e,t){return fetch(e,t).then(yb)}function _b(e){return function(t,n,i){return arguments.length===2&&typeof n=="function"&&(i=n,n=void 0),gb(t,n).then(function(r){return e(r,i)})}}var bb=_b(db);function ur(e,t,n){this.k=e,this.x=t,this.y=n}ur.prototype={constructor:ur,scale:function(e){return e===1?this:new ur(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ur(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};ur.prototype;let vb=Co(null),k2=Co(null),N2=Co(null),wb=0;class xb{constructor(){this.listeners={}}on(t,n){let i=wb++;return this.listeners[t]=this.listeners[t]||{},this.listeners[t][i]=n,()=>{delete this.listeners[t][i]}}emit(t,...n){(Jl(this.listeners[t])??[]).forEach(r=>{r(...n)})}}Ly(void 0);class Ke extends xb{constructor(){super(),this.registeredViews=[],this.on("data",(t,...n)=>{this.registeredViews.forEach(({view:i,postprocessFuncs:r})=>{if(hr(i)||hr(i.render))return;let a=Zm(...r)(t);i.render(a,...n)})})}snapshot(){}restoreSnapshot(t){}async init(){}registerView(t,n){console.log("Backend.registerView",t,n),n=_y([n??ny]),this.registeredViews.push({view:t,postprocessFuncs:n})}addPostprocessing(t,n){this.registeredViews.forEach(({view:i,postprocessFuncs:r})=>{var s;((s=i.spec)==null?void 0:s.id)==t&&r.push(n)})}async execute(t,n){return hr(t)&&(t=[]),Do(Array,t)||(t=[t]),this._execute(t,n)}async _execute(t,n){}}class Sb extends Ke{constructor(t){super(),this.data=t.data||[]}async _execute(t,...n){this.emit("data",this.data,...n)}}class Ib extends Ke{constructor(t){super(),this.data=null,this.promise=null,this.promise=bb(t.url,pb)}async _execute(t,n){this.promise&&(this.data=await this.promise,this.promise=null),this.emit("data",this.data,n)}}function S(e,t,n,i){function r(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(l){try{c(i.next(l))}catch(f){a(f)}}function u(l){try{c(i.throw(l))}catch(f){a(f)}}function c(l){l.done?s(l.value):r(l.value).then(o,u)}c((i=i.apply(e,t||[])).next())})}function Hc(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function L(e){return this instanceof L?(this.v=e,this):new L(e)}function Ve(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),r,s=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(d){i[d]&&(r[d]=function(m){return new Promise(function(y,g){s.push([d,m,y,g])>1||o(d,m)})})}function o(d,m){try{u(i[d](m))}catch(y){f(s[0][3],y)}}function u(d){d.value instanceof L?Promise.resolve(d.value.v).then(c,l):f(s[0][2],d)}function c(d){o("next",d)}function l(d){o("throw",d)}function f(d,m){d(m),s.shift(),s.length&&o(s[0][0],s[0][1])}}function rs(e){var t,n;return t={},i("next"),i("throw",function(r){throw r}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(r,s){t[r]=e[r]?function(a){return(n=!n)?{value:L(e[r](a)),done:!1}:s?s(a):a}:s}}function ei(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Hc=="function"?Hc(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=e[s]&&function(a){return new Promise(function(o,u){a=e[s](a),r(o,u,a.done,a.value)})}}function r(s,a,o,u){Promise.resolve(u).then(function(c){s({value:c,done:o})},a)}}const Eb=new TextDecoder("utf-8"),oo=e=>Eb.decode(e),Ab=new TextEncoder,sa=e=>Ab.encode(e),[O2,Nh]=(()=>{const e=()=>{throw new Error("BigInt is not available in this environment")};function t(){throw e()}return t.asIntN=()=>{throw e()},t.asUintN=()=>{throw e()},typeof BigInt<"u"?[BigInt,!0]:[t,!1]})(),[oi,R2]=(()=>{const e=()=>{throw new Error("BigInt64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[t,!1]})(),[ui,F2]=(()=>{const e=()=>{throw new Error("BigUint64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[t,!1]})(),Tb=e=>typeof e=="number",Oh=e=>typeof e=="boolean",xt=e=>typeof e=="function",zt=e=>e!=null&&Object(e)===e,ri=e=>zt(e)&&xt(e.then),Cr=e=>zt(e)&&xt(e[Symbol.iterator]),zi=e=>zt(e)&&xt(e[Symbol.asyncIterator]),uo=e=>zt(e)&&zt(e.schema),Rh=e=>zt(e)&&"done"in e&&"value"in e,Fh=e=>zt(e)&&xt(e.stat)&&Tb(e.fd),Ch=e=>zt(e)&&Wo(e.body),aa=e=>"_getDOMStream"in e&&"_getNodeStream"in e,kb=e=>zt(e)&&xt(e.abort)&&xt(e.getWriter)&&!aa(e),Wo=e=>zt(e)&&xt(e.cancel)&&xt(e.getReader)&&!aa(e),Nb=e=>zt(e)&&xt(e.end)&&xt(e.write)&&Oh(e.writable)&&!aa(e),Bh=e=>zt(e)&&xt(e.read)&&xt(e.pipe)&&Oh(e.readable)&&!aa(e),Ob=e=>zt(e)&&xt(e.clear)&&xt(e.bytes)&&xt(e.position)&&xt(e.setPosition)&&xt(e.capacity)&&xt(e.getBufferIdentifier)&&xt(e.createLong),Yo=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function Rb(e){const t=e[0]?[e[0]]:[];let n,i,r,s;for(let a,o,u=0,c=0,l=e.length;++u<l;){if(a=t[c],o=e[u],!a||!o||a.buffer!==o.buffer||o.byteOffset<a.byteOffset){o&&(t[++c]=o);continue}if({byteOffset:n,byteLength:r}=a,{byteOffset:i,byteLength:s}=o,n+r<i||i+s<n){o&&(t[++c]=o);continue}t[c]=new Uint8Array(a.buffer,n,i-n+s)}return t}function Ss(e,t,n=0,i=t.byteLength){const r=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,r),a=new Uint8Array(t.buffer,t.byteOffset,Math.min(i,r));return s.set(a,n),e}function ze(e,t){const n=Rb(e),i=n.reduce((l,f)=>l+f.byteLength,0);let r,s,a,o=0,u=-1;const c=Math.min(t||Number.POSITIVE_INFINITY,i);for(const l=n.length;++u<l;){if(r=n[u],s=r.subarray(0,Math.min(r.length,c-o)),c<=o+s.length){s.length<r.length?n[u]=r.subarray(s.length):s.length===r.length&&u++,a?Ss(a,s,o):a=s;break}Ss(a||(a=new Uint8Array(c)),s,o),o+=s.length}return[a||new Uint8Array(0),n.slice(u),i-(a?a.byteLength:0)]}function at(e,t){let n=Rh(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=sa(n)),n instanceof ArrayBuffer?new e(n):n instanceof Yo?new e(n):Ob(n)?at(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const nr=e=>at(Int32Array,e),Q=e=>at(Uint8Array,e),co=e=>(e.next(),e);function*Fb(e,t){const n=function*(r){yield r},i=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Yo?n(t):Cr(t)?t:n(t);return yield*co(function*(r){let s=null;do s=r.next(yield at(e,s));while(!s.done)}(i[Symbol.iterator]())),new e}const Cb=e=>Fb(Uint8Array,e);function Lh(e,t){return Ve(this,arguments,function*(){if(ri(t))return yield L(yield L(yield*rs(ei(Lh(e,yield L(t))))));const i=function(a){return Ve(this,arguments,function*(){yield yield L(yield L(a))})},r=function(a){return Ve(this,arguments,function*(){yield L(yield*rs(ei(co(function*(o){let u=null;do u=o.next(yield u==null?void 0:u.value);while(!u.done)}(a[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Yo?i(t):Cr(t)?r(t):zi(t)?t:i(t);return yield L(yield*rs(ei(co(function(a){return Ve(this,arguments,function*(){let o=null;do o=yield L(a.next(yield yield L(at(e,o))));while(!o.done)})}(s[Symbol.asyncIterator]()))))),yield L(new e)})}const Bb=e=>Lh(Uint8Array,e);function Ho(e,t,n){if(e!==0){n=n.slice(0,t+1);for(let i=-1;++i<=t;)n[i]+=e}return n}function Lb(e,t){let n=0;const i=e.length;if(i!==t.length)return!1;if(i>0)do if(e[n]!==t[n])return!1;while(++n<i);return!0}const ae={fromIterable(e){return Kr(Db(e))},fromAsyncIterable(e){return Kr(Mb(e))},fromDOMStream(e){return Kr(Pb(e))},fromNodeStream(e){return Kr(Vb(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},Kr=e=>(e.next(),e);function*Db(e){let t,n=!1,i=[],r,s,a,o=0;function u(){return s==="peek"?ze(i,a)[0]:([r,i,o]=ze(i,a),r)}({cmd:s,size:a}=yield null);const c=Cb(e)[Symbol.iterator]();try{do if({done:t,value:r}=Number.isNaN(a-o)?c.next():c.next(a-o),!t&&r.byteLength>0&&(i.push(r),o+=r.byteLength),t||a<=o)do({cmd:s,size:a}=yield u());while(a<o);while(!t)}catch(l){(n=!0)&&typeof c.throw=="function"&&c.throw(l)}finally{n===!1&&typeof c.return=="function"&&c.return(null)}return null}function Mb(e){return Ve(this,arguments,function*(){let n,i=!1,r=[],s,a,o,u=0;function c(){return a==="peek"?ze(r,o)[0]:([s,r,u]=ze(r,o),s)}({cmd:a,size:o}=yield yield L(null));const l=Bb(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(o-u)?yield L(l.next()):yield L(l.next(o-u)),!n&&s.byteLength>0&&(r.push(s),u+=s.byteLength),n||o<=u)do({cmd:a,size:o}=yield yield L(c()));while(o<u);while(!n)}catch(f){(i=!0)&&typeof l.throw=="function"&&(yield L(l.throw(f)))}finally{i===!1&&typeof l.return=="function"&&(yield L(l.return(new Uint8Array(0))))}return yield L(null)})}function Pb(e){return Ve(this,arguments,function*(){let n=!1,i=!1,r=[],s,a,o,u=0;function c(){return a==="peek"?ze(r,o)[0]:([s,r,u]=ze(r,o),s)}({cmd:a,size:o}=yield yield L(null));const l=new Ub(e);try{do if({done:n,value:s}=Number.isNaN(o-u)?yield L(l.read()):yield L(l.read(o-u)),!n&&s.byteLength>0&&(r.push(Q(s)),u+=s.byteLength),n||o<=u)do({cmd:a,size:o}=yield yield L(c()));while(o<u);while(!n)}catch(f){(i=!0)&&(yield L(l.cancel(f)))}finally{i===!1?yield L(l.cancel()):e.locked&&l.releaseLock()}return yield L(null)})}class Ub{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return S(this,void 0,void 0,function*(){const{reader:n,source:i}=this;n&&(yield n.cancel(t).catch(()=>{})),i&&i.locked&&this.releaseLock()})}read(t){return S(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Q(n)),n})}}const Fa=(e,t)=>{const n=r=>i([t,r]);let i;return[t,n,new Promise(r=>(i=r)&&e.once(t,n))]};function Vb(e){return Ve(this,arguments,function*(){const n=[];let i="error",r=!1,s=null,a,o,u=0,c=[],l;function f(){return a==="peek"?ze(c,o)[0]:([l,c,u]=ze(c,o),l)}if({cmd:a,size:o}=yield yield L(null),e.isTTY)return yield yield L(new Uint8Array(0)),yield L(null);try{n[0]=Fa(e,"end"),n[1]=Fa(e,"error");do{if(n[2]=Fa(e,"readable"),[i,s]=yield L(Promise.race(n.map(m=>m[2]))),i==="error")break;if((r=i==="end")||(Number.isFinite(o-u)?(l=Q(e.read(o-u)),l.byteLength<o-u&&(l=Q(e.read()))):l=Q(e.read()),l.byteLength>0&&(c.push(l),u+=l.byteLength)),r||o<=u)do({cmd:a,size:o}=yield yield L(f()));while(o<u)}while(!r)}finally{yield L(d(n,i==="error"?s:null))}return yield L(null);function d(m,y){return l=c=null,new Promise((g,_)=>{for(const[b,N]of m)e.off(b,N);try{const b=e.destroy;b&&b.call(e,y),y=void 0}catch(b){y=b||y}finally{y!=null?_(y):g()}})}})}var Xt;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Xt||(Xt={}));var Zt;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Zt||(Zt={}));var Nt;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Nt||(Nt={}));var we;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(we||(we={}));var q;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(q||(q={}));var qe;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(qe||(qe={}));var tt;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(tt||(tt={}));var p;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"})(p||(p={}));var Ze;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(Ze||(Ze={}));const jb=void 0;function An(e){if(e===null)return"null";if(e===jb)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof oi||e instanceof ui?`[${[...e].map(t=>An(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const $b=Symbol.for("isArrowBigNum");function Ee(e,...t){return t.length===0?Object.setPrototypeOf(at(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Ee.prototype[$b]=!0;Ee.prototype.toJSON=function(){return`"${ni(this)}"`};Ee.prototype.valueOf=function(){return Dh(this)};Ee.prototype.toString=function(){return ni(this)};Ee.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return Dh(this);case"string":return ni(this);case"default":return lo(this)}return ni(this)};function wi(...e){return Ee.apply(this,e)}function xi(...e){return Ee.apply(this,e)}function br(...e){return Ee.apply(this,e)}Object.setPrototypeOf(wi.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(xi.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(br.prototype,Object.create(Uint32Array.prototype));Object.assign(wi.prototype,Ee.prototype,{constructor:wi,signed:!0,TypedArray:Int32Array,BigIntArray:oi});Object.assign(xi.prototype,Ee.prototype,{constructor:xi,signed:!1,TypedArray:Uint32Array,BigIntArray:ui});Object.assign(br.prototype,Ee.prototype,{constructor:br,signed:!0,TypedArray:Uint32Array,BigIntArray:ui});function Dh(e){const{buffer:t,byteOffset:n,length:i,signed:r}=e,s=new ui(t,n,i),a=r&&s[s.length-1]&BigInt(1)<<BigInt(63);let o=BigInt(a?1:0),u=BigInt(0);if(a){for(const c of s)o+=~c*(BigInt(1)<<BigInt(32)*u++);o*=BigInt(-1)}else for(const c of s)o+=c*(BigInt(1)<<BigInt(32)*u++);return o}let ni,lo;Nh?(lo=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:Ca(e),ni=e=>e.byteLength===8?`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`:Ca(e)):(ni=Ca,lo=ni);function Ca(e){let t="";const n=new Uint32Array(2);let i=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const r=new Uint32Array((i=new Uint16Array(i).reverse()).buffer);let s=-1;const a=i.length-1;do{for(n[0]=i[s=0];s<a;)i[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+i[s];i[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(r[0]||r[1]||r[2]||r[3]);return t??"0"}class Go{static new(t,n){switch(n){case!0:return new wi(t);case!1:return new xi(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case oi:return new wi(t)}return t.byteLength===16?new br(t):new xi(t)}static signed(t){return new wi(t)}static unsigned(t){return new xi(t)}static decimal(t){return new br(t)}constructor(t,n){return Go.new(t,n)}}var Mh,Ph,Uh,Vh,jh,$h,zh,qh,Wh,Yh,Hh,Gh,Kh,Qh,Jh,Xh,Zh,tf,ef;class I{static isNull(t){return(t==null?void 0:t.typeId)===p.Null}static isInt(t){return(t==null?void 0:t.typeId)===p.Int}static isFloat(t){return(t==null?void 0:t.typeId)===p.Float}static isBinary(t){return(t==null?void 0:t.typeId)===p.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===p.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===p.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===p.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===p.Date}static isTime(t){return(t==null?void 0:t.typeId)===p.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===p.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===p.Interval}static isList(t){return(t==null?void 0:t.typeId)===p.List}static isStruct(t){return(t==null?void 0:t.typeId)===p.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===p.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===p.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===p.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===p.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===p.Dictionary}static isDenseUnion(t){return I.isUnion(t)&&t.mode===Zt.Dense}static isSparseUnion(t){return I.isUnion(t)&&t.mode===Zt.Sparse}get typeId(){return p.NONE}}Mh=Symbol.toStringTag;I[Mh]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(I.prototype);let ln=class extends I{toString(){return"Null"}get typeId(){return p.Null}};Ph=Symbol.toStringTag;ln[Ph]=(e=>e[Symbol.toStringTag]="Null")(ln.prototype);class Ct extends I{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return p.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?oi:ui}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}Uh=Symbol.toStringTag;Ct[Uh]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Ct.prototype);class Ko extends Ct{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class Qo extends Ct{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class kn extends Ct{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}let Jo=class extends Ct{constructor(){super(!0,64)}get ArrayType(){return oi}};class Xo extends Ct{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class Zo extends Ct{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class tu extends Ct{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}let eu=class extends Ct{constructor(){super(!1,64)}get ArrayType(){return ui}};Object.defineProperty(Ko.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(Qo.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(kn.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(Jo.prototype,"ArrayType",{value:oi});Object.defineProperty(Xo.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(Zo.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(tu.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(eu.prototype,"ArrayType",{value:ui});class Nn extends I{constructor(t){super(),this.precision=t}get typeId(){return p.Float}get ArrayType(){switch(this.precision){case Nt.HALF:return Uint16Array;case Nt.SINGLE:return Float32Array;case Nt.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}Vh=Symbol.toStringTag;Nn[Vh]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(Nn.prototype);class nf extends Nn{constructor(){super(Nt.HALF)}}class nu extends Nn{constructor(){super(Nt.SINGLE)}}class iu extends Nn{constructor(){super(Nt.DOUBLE)}}Object.defineProperty(nf.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(nu.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(iu.prototype,"ArrayType",{value:Float64Array});let vr=class extends I{constructor(){super()}get typeId(){return p.Binary}toString(){return"Binary"}};jh=Symbol.toStringTag;vr[jh]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(vr.prototype);let ki=class extends I{constructor(){super()}get typeId(){return p.Utf8}toString(){return"Utf8"}};$h=Symbol.toStringTag;ki[$h]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(ki.prototype);let wr=class extends I{constructor(){super()}get typeId(){return p.Bool}toString(){return"Bool"}};zh=Symbol.toStringTag;wr[zh]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(wr.prototype);let Is=class extends I{constructor(t,n,i=128){super(),this.scale=t,this.precision=n,this.bitWidth=i}get typeId(){return p.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};qh=Symbol.toStringTag;Is[qh]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(Is.prototype);class Ni extends I{constructor(t){super(),this.unit=t}get typeId(){return p.Date}toString(){return`Date${(this.unit+1)*32}<${we[this.unit]}>`}}Wh=Symbol.toStringTag;Ni[Wh]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(Ni.prototype);class zb extends Ni{constructor(){super(we.DAY)}}class qb extends Ni{constructor(){super(we.MILLISECOND)}}class hn extends I{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return p.Time}toString(){return`Time${this.bitWidth}<${q[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return oi}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}Yh=Symbol.toStringTag;hn[Yh]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(hn.prototype);class Wb extends hn{constructor(){super(q.SECOND,32)}}class Yb extends hn{constructor(){super(q.MILLISECOND,32)}}class Hb extends hn{constructor(){super(q.MICROSECOND,64)}}class Gb extends hn{constructor(){super(q.NANOSECOND,64)}}class Es extends I{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return p.Timestamp}toString(){return`Timestamp<${q[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}Hh=Symbol.toStringTag;Es[Hh]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(Es.prototype);class Oi extends I{constructor(t){super(),this.unit=t}get typeId(){return p.Interval}toString(){return`Interval<${qe[this.unit]}>`}}Gh=Symbol.toStringTag;Oi[Gh]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(Oi.prototype);class Kb extends Oi{constructor(){super(qe.DAY_TIME)}}class Qb extends Oi{constructor(){super(qe.YEAR_MONTH)}}let Ri=class extends I{constructor(t){super(),this.children=[t]}get typeId(){return p.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};Kh=Symbol.toStringTag;Ri[Kh]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(Ri.prototype);class kt extends I{constructor(t){super(),this.children=t}get typeId(){return p.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}Qh=Symbol.toStringTag;kt[Qh]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(kt.prototype);class xr extends I{constructor(t,n,i){super(),this.mode=t,this.children=i,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((r,s,a)=>(r[s]=a)&&r||r,Object.create(null))}get typeId(){return p.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}Jh=Symbol.toStringTag;xr[Jh]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(xr.prototype);let As=class extends I{constructor(t){super(),this.byteWidth=t}get typeId(){return p.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};Xh=Symbol.toStringTag;As[Xh]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(As.prototype);let Fi=class extends I{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return p.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};Zh=Symbol.toStringTag;Fi[Zh]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(Fi.prototype);class Sr extends I{constructor(t,n=!1){super(),this.children=[t],this.keysSorted=n}get typeId(){return p.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}tf=Symbol.toStringTag;Sr[tf]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(Sr.prototype);const Jb=(e=>()=>++e)(-1);let On=class extends I{constructor(t,n,i,r){super(),this.indices=n,this.dictionary=t,this.isOrdered=r||!1,this.id=i==null?Jb():typeof i=="number"?i:i.low}get typeId(){return p.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}};ef=Symbol.toStringTag;On[ef]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(On.prototype);function Be(e){const t=e;switch(e.typeId){case p.Decimal:return e.bitWidth/32;case p.Timestamp:return 2;case p.Date:return 1+t.unit;case p.Interval:return 1+t.unit;case p.FixedSizeList:return t.listSize;case p.FixedSizeBinary:return t.byteWidth;default:return 1}}class j{visitMany(t,...n){return t.map((i,r)=>this.visit(i,...n.map(s=>s[r])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return Xb(this,t,n)}getVisitFnByTypeId(t,n=!0){return fi(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function Xb(e,t,n=!0){return typeof t=="number"?fi(e,t,n):typeof t=="string"&&t in p?fi(e,p[t],n):t&&t instanceof I?fi(e,Gc(t),n):t!=null&&t.type&&t.type instanceof I?fi(e,Gc(t.type),n):fi(e,p.NONE,n)}function fi(e,t,n=!0){let i=null;switch(t){case p.Null:i=e.visitNull;break;case p.Bool:i=e.visitBool;break;case p.Int:i=e.visitInt;break;case p.Int8:i=e.visitInt8||e.visitInt;break;case p.Int16:i=e.visitInt16||e.visitInt;break;case p.Int32:i=e.visitInt32||e.visitInt;break;case p.Int64:i=e.visitInt64||e.visitInt;break;case p.Uint8:i=e.visitUint8||e.visitInt;break;case p.Uint16:i=e.visitUint16||e.visitInt;break;case p.Uint32:i=e.visitUint32||e.visitInt;break;case p.Uint64:i=e.visitUint64||e.visitInt;break;case p.Float:i=e.visitFloat;break;case p.Float16:i=e.visitFloat16||e.visitFloat;break;case p.Float32:i=e.visitFloat32||e.visitFloat;break;case p.Float64:i=e.visitFloat64||e.visitFloat;break;case p.Utf8:i=e.visitUtf8;break;case p.Binary:i=e.visitBinary;break;case p.FixedSizeBinary:i=e.visitFixedSizeBinary;break;case p.Date:i=e.visitDate;break;case p.DateDay:i=e.visitDateDay||e.visitDate;break;case p.DateMillisecond:i=e.visitDateMillisecond||e.visitDate;break;case p.Timestamp:i=e.visitTimestamp;break;case p.TimestampSecond:i=e.visitTimestampSecond||e.visitTimestamp;break;case p.TimestampMillisecond:i=e.visitTimestampMillisecond||e.visitTimestamp;break;case p.TimestampMicrosecond:i=e.visitTimestampMicrosecond||e.visitTimestamp;break;case p.TimestampNanosecond:i=e.visitTimestampNanosecond||e.visitTimestamp;break;case p.Time:i=e.visitTime;break;case p.TimeSecond:i=e.visitTimeSecond||e.visitTime;break;case p.TimeMillisecond:i=e.visitTimeMillisecond||e.visitTime;break;case p.TimeMicrosecond:i=e.visitTimeMicrosecond||e.visitTime;break;case p.TimeNanosecond:i=e.visitTimeNanosecond||e.visitTime;break;case p.Decimal:i=e.visitDecimal;break;case p.List:i=e.visitList;break;case p.Struct:i=e.visitStruct;break;case p.Union:i=e.visitUnion;break;case p.DenseUnion:i=e.visitDenseUnion||e.visitUnion;break;case p.SparseUnion:i=e.visitSparseUnion||e.visitUnion;break;case p.Dictionary:i=e.visitDictionary;break;case p.Interval:i=e.visitInterval;break;case p.IntervalDayTime:i=e.visitIntervalDayTime||e.visitInterval;break;case p.IntervalYearMonth:i=e.visitIntervalYearMonth||e.visitInterval;break;case p.FixedSizeList:i=e.visitFixedSizeList;break;case p.Map:i=e.visitMap;break}if(typeof i=="function")return i;if(!n)return()=>null;throw new Error(`Unrecognized type '${p[t]}'`)}function Gc(e){switch(e.typeId){case p.Null:return p.Null;case p.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?p.Int8:p.Uint8;case 16:return n?p.Int16:p.Uint16;case 32:return n?p.Int32:p.Uint32;case 64:return n?p.Int64:p.Uint64}return p.Int}case p.Float:switch(e.precision){case Nt.HALF:return p.Float16;case Nt.SINGLE:return p.Float32;case Nt.DOUBLE:return p.Float64}return p.Float;case p.Binary:return p.Binary;case p.Utf8:return p.Utf8;case p.Bool:return p.Bool;case p.Decimal:return p.Decimal;case p.Time:switch(e.unit){case q.SECOND:return p.TimeSecond;case q.MILLISECOND:return p.TimeMillisecond;case q.MICROSECOND:return p.TimeMicrosecond;case q.NANOSECOND:return p.TimeNanosecond}return p.Time;case p.Timestamp:switch(e.unit){case q.SECOND:return p.TimestampSecond;case q.MILLISECOND:return p.TimestampMillisecond;case q.MICROSECOND:return p.TimestampMicrosecond;case q.NANOSECOND:return p.TimestampNanosecond}return p.Timestamp;case p.Date:switch(e.unit){case we.DAY:return p.DateDay;case we.MILLISECOND:return p.DateMillisecond}return p.Date;case p.Interval:switch(e.unit){case qe.DAY_TIME:return p.IntervalDayTime;case qe.YEAR_MONTH:return p.IntervalYearMonth}return p.Interval;case p.Map:return p.Map;case p.List:return p.List;case p.Struct:return p.Struct;case p.Union:switch(e.mode){case Zt.Dense:return p.DenseUnion;case Zt.Sparse:return p.SparseUnion}return p.Union;case p.FixedSizeBinary:return p.FixedSizeBinary;case p.FixedSizeList:return p.FixedSizeList;case p.Dictionary:return p.Dictionary}throw new Error(`Unrecognized type '${p[e.typeId]}'`)}j.prototype.visitInt8=null;j.prototype.visitInt16=null;j.prototype.visitInt32=null;j.prototype.visitInt64=null;j.prototype.visitUint8=null;j.prototype.visitUint16=null;j.prototype.visitUint32=null;j.prototype.visitUint64=null;j.prototype.visitFloat16=null;j.prototype.visitFloat32=null;j.prototype.visitFloat64=null;j.prototype.visitDateDay=null;j.prototype.visitDateMillisecond=null;j.prototype.visitTimestampSecond=null;j.prototype.visitTimestampMillisecond=null;j.prototype.visitTimestampMicrosecond=null;j.prototype.visitTimestampNanosecond=null;j.prototype.visitTimeSecond=null;j.prototype.visitTimeMillisecond=null;j.prototype.visitTimeMicrosecond=null;j.prototype.visitTimeNanosecond=null;j.prototype.visitDenseUnion=null;j.prototype.visitSparseUnion=null;j.prototype.visitIntervalDayTime=null;j.prototype.visitIntervalYearMonth=null;const rf=new Float64Array(1),hi=new Uint32Array(rf.buffer);function sf(e){const t=(e&31744)>>10,n=(e&1023)/1024,i=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return i*(n?Number.NaN:1/0);case 0:return i*(n?6103515625e-14*n:0)}return i*Math.pow(2,t-15)*(1+n)}function af(e){if(e!==e)return 32256;rf[0]=e;const t=(hi[1]&2147483648)>>16&65535;let n=hi[1]&2146435072,i=0;return n>=1089470464?hi[0]>0?n=31744:(n=(n&2080374784)>>16,i=(hi[1]&1048575)>>10):n<=1056964608?(i=1048576+(hi[1]&1048575),i=1048576+(i<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,i=(hi[1]&1048575)+512>>10),t|n|i&65535}class O extends j{}function B(e){return(t,n,i)=>{if(t.setValid(n,i!=null))return e(t,n,i)}}const Zb=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},ru=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},tv=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},ev=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},of=(e,t,n,i)=>{if(n+1<t.length){const{[n]:r,[n+1]:s}=t;e.set(i.subarray(0,s-r),r)}},nv=({offset:e,values:t},n,i)=>{const r=e+n;i?t[r>>3]|=1<<r%8:t[r>>3]&=~(1<<r%8)},yn=({values:e},t,n)=>{e[t]=n},su=({values:e},t,n)=>{e[t]=n},uf=({values:e},t,n)=>{e[t]=af(n)},iv=(e,t,n)=>{switch(e.type.precision){case Nt.HALF:return uf(e,t,n);case Nt.SINGLE:case Nt.DOUBLE:return su(e,t,n)}},au=({values:e},t,n)=>{Zb(e,t,n.valueOf())},ou=({values:e},t,n)=>{ru(e,t*2,n.valueOf())},cf=({stride:e,values:t},n,i)=>{t.set(i.subarray(0,e),e*n)},rv=({values:e,valueOffsets:t},n,i)=>of(e,t,n,i),sv=({values:e,valueOffsets:t},n,i)=>{of(e,t,n,sa(i))},lf=(e,t,n)=>{e.type.unit===we.DAY?au(e,t,n):ou(e,t,n)},uu=({values:e},t,n)=>ru(e,t*2,n/1e3),cu=({values:e},t,n)=>ru(e,t*2,n),lu=({values:e},t,n)=>tv(e,t*2,n),hu=({values:e},t,n)=>ev(e,t*2,n),hf=(e,t,n)=>{switch(e.type.unit){case q.SECOND:return uu(e,t,n);case q.MILLISECOND:return cu(e,t,n);case q.MICROSECOND:return lu(e,t,n);case q.NANOSECOND:return hu(e,t,n)}},fu=({values:e},t,n)=>{e[t]=n},du=({values:e},t,n)=>{e[t]=n},pu=({values:e},t,n)=>{e[t]=n},mu=({values:e},t,n)=>{e[t]=n},ff=(e,t,n)=>{switch(e.type.unit){case q.SECOND:return fu(e,t,n);case q.MILLISECOND:return du(e,t,n);case q.MICROSECOND:return pu(e,t,n);case q.NANOSECOND:return mu(e,t,n)}},df=({values:e,stride:t},n,i)=>{e.set(i.subarray(0,t),t*n)},av=(e,t,n)=>{const i=e.children[0],r=e.valueOffsets,s=he.getVisitFn(i);if(Array.isArray(n))for(let a=-1,o=r[t],u=r[t+1];o<u;)s(i,o++,n[++a]);else for(let a=-1,o=r[t],u=r[t+1];o<u;)s(i,o++,n.get(++a))},ov=(e,t,n)=>{const i=e.children[0],{valueOffsets:r}=e,s=he.getVisitFn(i);let{[t]:a,[t+1]:o}=r;const u=n instanceof Map?n.entries():Object.entries(n);for(const c of u)if(s(i,a,c),++a>=o)break},uv=(e,t)=>(n,i,r,s)=>i&&n(i,e,t[s]),cv=(e,t)=>(n,i,r,s)=>i&&n(i,e,t.get(s)),lv=(e,t)=>(n,i,r,s)=>i&&n(i,e,t.get(r.name)),hv=(e,t)=>(n,i,r,s)=>i&&n(i,e,t[r.name]),fv=(e,t,n)=>{const i=e.type.children.map(s=>he.getVisitFn(s.type)),r=n instanceof Map?lv(t,n):n instanceof H?cv(t,n):Array.isArray(n)?uv(t,n):hv(t,n);e.type.children.forEach((s,a)=>r(i[a],e.children[a],s,a))},dv=(e,t,n)=>{e.type.mode===Zt.Dense?pf(e,t,n):mf(e,t,n)},pf=(e,t,n)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[i];he.visit(r,e.valueOffsets[t],n)},mf=(e,t,n)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[i];he.visit(r,t,n)},pv=(e,t,n)=>{var i;(i=e.dictionary)===null||i===void 0||i.set(e.values[t],n)},yf=(e,t,n)=>{e.type.unit===qe.DAY_TIME?yu(e,t,n):gu(e,t,n)},yu=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},gu=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},mv=(e,t,n)=>{const{stride:i}=e,r=e.children[0],s=he.getVisitFn(r);if(Array.isArray(n))for(let a=-1,o=t*i;++a<i;)s(r,o+a,n[a]);else for(let a=-1,o=t*i;++a<i;)s(r,o+a,n.get(a))};O.prototype.visitBool=B(nv);O.prototype.visitInt=B(yn);O.prototype.visitInt8=B(yn);O.prototype.visitInt16=B(yn);O.prototype.visitInt32=B(yn);O.prototype.visitInt64=B(yn);O.prototype.visitUint8=B(yn);O.prototype.visitUint16=B(yn);O.prototype.visitUint32=B(yn);O.prototype.visitUint64=B(yn);O.prototype.visitFloat=B(iv);O.prototype.visitFloat16=B(uf);O.prototype.visitFloat32=B(su);O.prototype.visitFloat64=B(su);O.prototype.visitUtf8=B(sv);O.prototype.visitBinary=B(rv);O.prototype.visitFixedSizeBinary=B(cf);O.prototype.visitDate=B(lf);O.prototype.visitDateDay=B(au);O.prototype.visitDateMillisecond=B(ou);O.prototype.visitTimestamp=B(hf);O.prototype.visitTimestampSecond=B(uu);O.prototype.visitTimestampMillisecond=B(cu);O.prototype.visitTimestampMicrosecond=B(lu);O.prototype.visitTimestampNanosecond=B(hu);O.prototype.visitTime=B(ff);O.prototype.visitTimeSecond=B(fu);O.prototype.visitTimeMillisecond=B(du);O.prototype.visitTimeMicrosecond=B(pu);O.prototype.visitTimeNanosecond=B(mu);O.prototype.visitDecimal=B(df);O.prototype.visitList=B(av);O.prototype.visitStruct=B(fv);O.prototype.visitUnion=B(dv);O.prototype.visitDenseUnion=B(pf);O.prototype.visitSparseUnion=B(mf);O.prototype.visitDictionary=B(pv);O.prototype.visitInterval=B(yf);O.prototype.visitIntervalDayTime=B(yu);O.prototype.visitIntervalYearMonth=B(gu);O.prototype.visitFixedSizeList=B(mv);O.prototype.visitMap=B(ov);const he=new O,me=Symbol.for("parent"),Si=Symbol.for("rowIndex");class _u{constructor(t,n){return this[me]=t,this[Si]=n,new Proxy(this,new gv)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Si],n=this[me],i=n.type.children,r={};for(let s=-1,a=i.length;++s<a;)r[i[s].name]=qt.visit(n.children[s],t);return r}toString(){return`{${[...this].map(([t,n])=>`${An(t)}: ${An(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new yv(this[me],this[Si])}}class yv{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,qt.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(_u.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[me]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Si]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class gv{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[me].type.children.map(n=>n.name)}has(t,n){return t[me].type.children.findIndex(i=>i.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[me].type.children.findIndex(i=>i.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const i=t[me].type.children.findIndex(r=>r.name===n);if(i!==-1){const r=qt.visit(t[me].children[i],t[Si]);return Reflect.set(t,n,r),r}}set(t,n,i){const r=t[me].type.children.findIndex(s=>s.name===n);return r!==-1?(he.visit(t[me].children[r],t[Si],i),Reflect.set(t,n,i)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,i):!1}}class E extends j{}function R(e){return(t,n)=>t.getValid(n)?e(t,n):null}const _v=(e,t)=>864e5*e[t],bu=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),bv=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,vv=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,gf=e=>new Date(e),wv=(e,t)=>gf(_v(e,t)),xv=(e,t)=>gf(bu(e,t)),Sv=(e,t)=>null,_f=(e,t,n)=>{if(n+1>=t.length)return null;const i=t[n],r=t[n+1];return e.subarray(i,r)},Iv=({offset:e,values:t},n)=>{const i=e+n;return(t[i>>3]&1<<i%8)!==0},bf=({values:e},t)=>wv(e,t),vf=({values:e},t)=>xv(e,t*2),Dn=({stride:e,values:t},n)=>t[e*n],Ev=({stride:e,values:t},n)=>sf(t[e*n]),wf=({values:e},t)=>e[t],Av=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),Tv=({values:e,valueOffsets:t},n)=>_f(e,t,n),kv=({values:e,valueOffsets:t},n)=>{const i=_f(e,t,n);return i!==null?oo(i):null},Nv=({values:e},t)=>e[t],Ov=({type:e,values:t},n)=>e.precision!==Nt.HALF?t[n]:sf(t[n]),Rv=(e,t)=>e.type.unit===we.DAY?bf(e,t):vf(e,t),xf=({values:e},t)=>1e3*bu(e,t*2),Sf=({values:e},t)=>bu(e,t*2),If=({values:e},t)=>bv(e,t*2),Ef=({values:e},t)=>vv(e,t*2),Fv=(e,t)=>{switch(e.type.unit){case q.SECOND:return xf(e,t);case q.MILLISECOND:return Sf(e,t);case q.MICROSECOND:return If(e,t);case q.NANOSECOND:return Ef(e,t)}},Af=({values:e},t)=>e[t],Tf=({values:e},t)=>e[t],kf=({values:e},t)=>e[t],Nf=({values:e},t)=>e[t],Cv=(e,t)=>{switch(e.type.unit){case q.SECOND:return Af(e,t);case q.MILLISECOND:return Tf(e,t);case q.MICROSECOND:return kf(e,t);case q.NANOSECOND:return Nf(e,t)}},Bv=({values:e,stride:t},n)=>Go.decimal(e.subarray(t*n,t*(n+1))),Lv=(e,t)=>{const{valueOffsets:n,stride:i,children:r}=e,{[t*i]:s,[t*i+1]:a}=n,u=r[0].slice(s,a-s);return new H([u])},Dv=(e,t)=>{const{valueOffsets:n,children:i}=e,{[t]:r,[t+1]:s}=n,a=i[0];return new oa(a.slice(r,s-r))},Mv=(e,t)=>new _u(e,t),Pv=(e,t)=>e.type.mode===Zt.Dense?Of(e,t):Rf(e,t),Of=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[n];return qt.visit(i,e.valueOffsets[t])},Rf=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[n];return qt.visit(i,t)},Uv=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},Vv=(e,t)=>e.type.unit===qe.DAY_TIME?Ff(e,t):Cf(e,t),Ff=({values:e},t)=>e.subarray(2*t,2*(t+1)),Cf=({values:e},t)=>{const n=e[t],i=new Int32Array(2);return i[0]=Math.trunc(n/12),i[1]=Math.trunc(n%12),i},jv=(e,t)=>{const{stride:n,children:i}=e,s=i[0].slice(t*n,n);return new H([s])};E.prototype.visitNull=R(Sv);E.prototype.visitBool=R(Iv);E.prototype.visitInt=R(Nv);E.prototype.visitInt8=R(Dn);E.prototype.visitInt16=R(Dn);E.prototype.visitInt32=R(Dn);E.prototype.visitInt64=R(wf);E.prototype.visitUint8=R(Dn);E.prototype.visitUint16=R(Dn);E.prototype.visitUint32=R(Dn);E.prototype.visitUint64=R(wf);E.prototype.visitFloat=R(Ov);E.prototype.visitFloat16=R(Ev);E.prototype.visitFloat32=R(Dn);E.prototype.visitFloat64=R(Dn);E.prototype.visitUtf8=R(kv);E.prototype.visitBinary=R(Tv);E.prototype.visitFixedSizeBinary=R(Av);E.prototype.visitDate=R(Rv);E.prototype.visitDateDay=R(bf);E.prototype.visitDateMillisecond=R(vf);E.prototype.visitTimestamp=R(Fv);E.prototype.visitTimestampSecond=R(xf);E.prototype.visitTimestampMillisecond=R(Sf);E.prototype.visitTimestampMicrosecond=R(If);E.prototype.visitTimestampNanosecond=R(Ef);E.prototype.visitTime=R(Cv);E.prototype.visitTimeSecond=R(Af);E.prototype.visitTimeMillisecond=R(Tf);E.prototype.visitTimeMicrosecond=R(kf);E.prototype.visitTimeNanosecond=R(Nf);E.prototype.visitDecimal=R(Bv);E.prototype.visitList=R(Lv);E.prototype.visitStruct=R(Mv);E.prototype.visitUnion=R(Pv);E.prototype.visitDenseUnion=R(Of);E.prototype.visitSparseUnion=R(Rf);E.prototype.visitDictionary=R(Uv);E.prototype.visitInterval=R(Vv);E.prototype.visitIntervalDayTime=R(Ff);E.prototype.visitIntervalYearMonth=R(Cf);E.prototype.visitFixedSizeList=R(jv);E.prototype.visitMap=R(Dv);const qt=new E,ge=Symbol.for("keys"),Ii=Symbol.for("vals");class oa{constructor(t){return this[ge]=new H([t.children[0]]).memoize(),this[Ii]=t.children[1],new Proxy(this,new zv)}[Symbol.iterator](){return new $v(this[ge],this[Ii])}get size(){return this[ge].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[ge],n=this[Ii],i={};for(let r=-1,s=t.length;++r<s;)i[t.get(r)]=qt.visit(n,r);return i}toString(){return`{${[...this].map(([t,n])=>`${An(t)}: ${An(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class $v{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),qt.visit(this.vals,t)]})}}class zv{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[ge].toArray().map(String)}has(t,n){return t[ge].includes(n)}getOwnPropertyDescriptor(t,n){if(t[ge].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const i=t[ge].indexOf(n);if(i!==-1){const r=qt.visit(Reflect.get(t,Ii),i);return Reflect.set(t,n,r),r}}set(t,n,i){const r=t[ge].indexOf(n);return r!==-1?(he.visit(Reflect.get(t,Ii),r,i),Reflect.set(t,n,i)):Reflect.has(t,n)?Reflect.set(t,n,i):!1}}Object.defineProperties(oa.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[ge]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Ii]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Kc;function Bf(e,t,n,i){const{length:r=0}=e;let s=typeof t!="number"?0:t,a=typeof n!="number"?r:n;return s<0&&(s=(s%r+r)%r),a<0&&(a=(a%r+r)%r),a<s&&(Kc=s,s=a,a=Kc),a>r&&(a=r),i?i(e,s,a):[s,a]}const Qc=e=>e!==e;function qi(e){if(typeof e!=="object"||e===null)return Qc(e)?Qc:n=>n===e;if(e instanceof Date){const n=e.valueOf();return i=>i instanceof Date?i.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?Lb(e,n):!1:e instanceof Map?Wv(e):Array.isArray(e)?qv(e):e instanceof H?Yv(e):Hv(e,!0)}function qv(e){const t=[];for(let n=-1,i=e.length;++n<i;)t[n]=qi(e[n]);return ua(t)}function Wv(e){let t=-1;const n=[];for(const i of e.values())n[++t]=qi(i);return ua(n)}function Yv(e){const t=[];for(let n=-1,i=e.length;++n<i;)t[n]=qi(e.get(n));return ua(t)}function Hv(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const i=[];for(let r=-1,s=n.length;++r<s;)i[r]=qi(e[n[r]]);return ua(i,n)}function ua(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return Gv(e,n);case Map:return Jc(e,n,n.keys());case oa:case _u:case Object:case void 0:return Jc(e,n,t||Object.keys(n))}return n instanceof H?Kv(e,n):!1}}function Gv(e,t){const n=e.length;if(t.length!==n)return!1;for(let i=-1;++i<n;)if(!e[i](t[i]))return!1;return!0}function Kv(e,t){const n=e.length;if(t.length!==n)return!1;for(let i=-1;++i<n;)if(!e[i](t.get(i)))return!1;return!0}function Jc(e,t,n){const i=n[Symbol.iterator](),r=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let a=0;const o=e.length;let u=s.next(),c=i.next(),l=r.next();for(;a<o&&!c.done&&!l.done&&!u.done&&!(c.value!==l.value||!e[a](u.value));++a,c=i.next(),l=r.next(),u=s.next());return a===o&&c.done&&l.done&&u.done?!0:(i.return&&i.return(),r.return&&r.return(),s.return&&s.return(),!1)}function Lf(e,t,n,i){return(n&1<<i)!==0}function Qv(e,t,n,i){return(n&1<<i)>>i}function vu(e,t,n){const i=n.byteLength+7&-8;if(e>0||n.byteLength<i){const r=new Uint8Array(i);return r.set(e%8===0?n.subarray(e>>3):Ts(new wu(n,e,t,null,Lf)).subarray(0,i)),r}return n}function Ts(e){const t=[];let n=0,i=0,r=0;for(const a of e)a&&(r|=1<<i),++i===8&&(t[n++]=r,r=i=0);(n===0||i>0)&&(t[n++]=r);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class wu{constructor(t,n,i,r,s){this.bytes=t,this.length=i,this.context=r,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function ho(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const a of new wu(e,t,n-t,e,Qv))s+=a;return s}const i=n>>3<<3,r=t+(t%8===0?0:8-t%8);return ho(e,t,r)+ho(e,i,n)+Jv(e,r>>3,i-r>>3)}function Jv(e,t,n){let i=0,r=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),a=n===void 0?e.byteLength:r+n;for(;a-r>=4;)i+=Ba(s.getUint32(r)),r+=4;for(;a-r>=2;)i+=Ba(s.getUint16(r)),r+=2;for(;a-r>=1;)i+=Ba(s.getUint8(r)),r+=1;return i}function Ba(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const Xv=-1;class st{constructor(t,n,i,r,s,a=[],o){this.type=t,this.children=a,this.dictionary=o,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(i||0,0)),this._nullCount=Math.floor(Math.max(r||0,-1));let u;s instanceof st?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Be(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:n,values:i,nullBitmap:r,typeIds:s}=this;return n&&(t+=n.byteLength),i&&(t+=i.byteLength),r&&(t+=r.byteLength),s&&(t+=s.byteLength),this.children.reduce((a,o)=>a+o.byteLength,t)}get nullCount(){let t=this._nullCount,n;return t<=Xv&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-ho(n,this.offset,this.offset+this.length)),t}getValid(t){if(this.nullable&&this.nullCount>0){const n=this.offset+t;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(t,n){if(!this.nullable)return n;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:u}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:u,_nullCount:0})}const{nullBitmap:i,offset:r}=this,s=r+t>>3,a=(r+t)%8,o=i[s]>>a&1;return n?o===0&&(i[s]|=1<<a,this._nullCount=this.nullCount+1):o===1&&(i[s]&=~(1<<a),this._nullCount=this.nullCount-1),n}clone(t=this.type,n=this.offset,i=this.length,r=this._nullCount,s=this,a=this.children){return new st(t,n,i,r,s,a,this.dictionary)}slice(t,n){const{stride:i,typeId:r,children:s}=this,a=+(this._nullCount===0)-1,o=r===16?i:1,u=this._sliceBuffers(t,n,i,r);return this.clone(this.type,this.offset+t,n,a,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,o*t,o*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===p.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:i}=this,r=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);r[n>>3]=(1<<n-(n&-8))-1,i>0&&r.set(vu(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[Ze.VALIDITY]=r,this.clone(this.type,0,t,i+(t-n),s)}_sliceBuffers(t,n,i,r){let s;const{buffers:a}=this;return(s=a[Ze.TYPE])&&(a[Ze.TYPE]=s.subarray(t,t+n)),(s=a[Ze.OFFSET])&&(a[Ze.OFFSET]=s.subarray(t,t+n+1))||(s=a[Ze.DATA])&&(a[Ze.DATA]=r===6?s:s.subarray(i*t,i*(t+n))),a}_sliceChildren(t,n,i){return t.map(r=>r.slice(n,i))}}st.prototype.children=Object.freeze([]);class fr extends j{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:i=0,["length"]:r=0}=t;return new st(n,i,r,0)}visitBool(t){const{["type"]:n,["offset"]:i=0}=t,r=Q(t.nullBitmap),s=at(n.ArrayType,t.data),{["length"]:a=s.length>>3,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new st(n,i,a,o,[void 0,s,r])}visitInt(t){const{["type"]:n,["offset"]:i=0}=t,r=Q(t.nullBitmap),s=at(n.ArrayType,t.data),{["length"]:a=s.length,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new st(n,i,a,o,[void 0,s,r])}visitFloat(t){const{["type"]:n,["offset"]:i=0}=t,r=Q(t.nullBitmap),s=at(n.ArrayType,t.data),{["length"]:a=s.length,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new st(n,i,a,o,[void 0,s,r])}visitUtf8(t){const{["type"]:n,["offset"]:i=0}=t,r=Q(t.data),s=Q(t.nullBitmap),a=nr(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new st(n,i,o,u,[a,r,s])}visitBinary(t){const{["type"]:n,["offset"]:i=0}=t,r=Q(t.data),s=Q(t.nullBitmap),a=nr(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new st(n,i,o,u,[a,r,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:i=0}=t,r=Q(t.nullBitmap),s=at(n.ArrayType,t.data),{["length"]:a=s.length/Be(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new st(n,i,a,o,[void 0,s,r])}visitDate(t){const{["type"]:n,["offset"]:i=0}=t,r=Q(t.nullBitmap),s=at(n.ArrayType,t.data),{["length"]:a=s.length/Be(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new st(n,i,a,o,[void 0,s,r])}visitTimestamp(t){const{["type"]:n,["offset"]:i=0}=t,r=Q(t.nullBitmap),s=at(n.ArrayType,t.data),{["length"]:a=s.length/Be(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new st(n,i,a,o,[void 0,s,r])}visitTime(t){const{["type"]:n,["offset"]:i=0}=t,r=Q(t.nullBitmap),s=at(n.ArrayType,t.data),{["length"]:a=s.length/Be(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new st(n,i,a,o,[void 0,s,r])}visitDecimal(t){const{["type"]:n,["offset"]:i=0}=t,r=Q(t.nullBitmap),s=at(n.ArrayType,t.data),{["length"]:a=s.length/Be(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new st(n,i,a,o,[void 0,s,r])}visitList(t){const{["type"]:n,["offset"]:i=0,["child"]:r}=t,s=Q(t.nullBitmap),a=nr(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new st(n,i,o,u,[a,void 0,s],[r])}visitStruct(t){const{["type"]:n,["offset"]:i=0,["children"]:r=[]}=t,s=Q(t.nullBitmap),{length:a=r.reduce((u,{length:c})=>Math.max(u,c),0),nullCount:o=t.nullBitmap?-1:0}=t;return new st(n,i,a,o,[void 0,void 0,s],r)}visitUnion(t){const{["type"]:n,["offset"]:i=0,["children"]:r=[]}=t,s=Q(t.nullBitmap),a=at(n.ArrayType,t.typeIds),{["length"]:o=a.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;if(I.isSparseUnion(n))return new st(n,i,o,u,[void 0,void 0,s,a],r);const c=nr(t.valueOffsets);return new st(n,i,o,u,[c,void 0,s,a],r)}visitDictionary(t){const{["type"]:n,["offset"]:i=0}=t,r=Q(t.nullBitmap),s=at(n.indices.ArrayType,t.data),{["dictionary"]:a=new H([new fr().visit({type:n.dictionary})])}=t,{["length"]:o=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new st(n,i,o,u,[void 0,s,r],[],a)}visitInterval(t){const{["type"]:n,["offset"]:i=0}=t,r=Q(t.nullBitmap),s=at(n.ArrayType,t.data),{["length"]:a=s.length/Be(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new st(n,i,a,o,[void 0,s,r])}visitFixedSizeList(t){const{["type"]:n,["offset"]:i=0,["child"]:r=new fr().visit({type:n.valueType})}=t,s=Q(t.nullBitmap),{["length"]:a=r.length/Be(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new st(n,i,a,o,[void 0,void 0,s],[r])}visitMap(t){const{["type"]:n,["offset"]:i=0,["child"]:r=new fr().visit({type:n.childType})}=t,s=Q(t.nullBitmap),a=nr(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new st(n,i,o,u,[a,void 0,s],[r])}}function V(e){return new fr().visit(e)}class Xc{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function Df(e){return e.reduce((t,n)=>t+n.nullCount,0)}function Mf(e){return e.reduce((t,n,i)=>(t[i+1]=t[i]+n.length,t),new Uint32Array(e.length+1))}function Pf(e,t,n,i){const r=[];for(let s=-1,a=e.length;++s<a;){const o=e[s],u=t[s],{length:c}=o;if(u>=i)break;if(n>=u+c)continue;if(u>=n&&u+c<=i){r.push(o);continue}const l=Math.max(0,n-u),f=Math.min(i-u,c);r.push(o.slice(l,f-l))}return r.length===0&&r.push(e[0].slice(0,0)),r}function xu(e,t,n,i){let r=0,s=0,a=t.length-1;do{if(r>=a-1)return n<t[a]?i(e,r,n-t[r]):null;s=r+Math.trunc((a-r)*.5),n<t[s]?a=s:r=s}while(r<a)}function Su(e,t){return e.getValid(t)}function Ei(e){function t(n,i,r){return e(n[i],r)}return function(n){const i=this.data;return xu(i,this._offsets,n,t)}}function Uf(e){let t;function n(i,r,s){return e(i[r],s,t)}return function(i,r){const s=this.data;t=r;const a=xu(s,this._offsets,i,n);return t=void 0,a}}function Vf(e){let t;function n(i,r,s){let a=s,o=0,u=0;for(let c=r-1,l=i.length;++c<l;){const f=i[c];if(~(o=e(f,t,a)))return u+o;a=0,u+=f.length}return-1}return function(i,r){t=i;const s=this.data,a=typeof r!="number"?n(s,0,0):xu(s,this._offsets,r,n);return t=void 0,a}}class A extends j{}function Zv(e,t){return t===null&&e.length>0?0:-1}function tw(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let i=0;for(const r of new wu(n,e.offset+(t||0),e.length,n,Lf)){if(!r)return i;++i}return-1}function M(e,t,n){if(t===void 0)return-1;if(t===null)return tw(e,n);const i=qt.getVisitFn(e),r=qi(t);for(let s=(n||0)-1,a=e.length;++s<a;)if(r(i(e,s)))return s;return-1}function jf(e,t,n){const i=qt.getVisitFn(e),r=qi(t);for(let s=(n||0)-1,a=e.length;++s<a;)if(r(i(e,s)))return s;return-1}A.prototype.visitNull=Zv;A.prototype.visitBool=M;A.prototype.visitInt=M;A.prototype.visitInt8=M;A.prototype.visitInt16=M;A.prototype.visitInt32=M;A.prototype.visitInt64=M;A.prototype.visitUint8=M;A.prototype.visitUint16=M;A.prototype.visitUint32=M;A.prototype.visitUint64=M;A.prototype.visitFloat=M;A.prototype.visitFloat16=M;A.prototype.visitFloat32=M;A.prototype.visitFloat64=M;A.prototype.visitUtf8=M;A.prototype.visitBinary=M;A.prototype.visitFixedSizeBinary=M;A.prototype.visitDate=M;A.prototype.visitDateDay=M;A.prototype.visitDateMillisecond=M;A.prototype.visitTimestamp=M;A.prototype.visitTimestampSecond=M;A.prototype.visitTimestampMillisecond=M;A.prototype.visitTimestampMicrosecond=M;A.prototype.visitTimestampNanosecond=M;A.prototype.visitTime=M;A.prototype.visitTimeSecond=M;A.prototype.visitTimeMillisecond=M;A.prototype.visitTimeMicrosecond=M;A.prototype.visitTimeNanosecond=M;A.prototype.visitDecimal=M;A.prototype.visitList=M;A.prototype.visitStruct=M;A.prototype.visitUnion=M;A.prototype.visitDenseUnion=jf;A.prototype.visitSparseUnion=jf;A.prototype.visitDictionary=M;A.prototype.visitInterval=M;A.prototype.visitIntervalDayTime=M;A.prototype.visitIntervalYearMonth=M;A.prototype.visitFixedSizeList=M;A.prototype.visitMap=M;const ks=new A;class T extends j{}function F(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===p.Timestamp||t instanceof Ct&&t.bitWidth!==64||t instanceof hn&&t.bitWidth!==64||t instanceof Nn&&t.precision!==Nt.HALF))return new Xc(e.data.length,i=>{const r=e.data[i];return r.values.subarray(0,r.length)[Symbol.iterator]()});let n=0;return new Xc(e.data.length,i=>{const s=e.data[i].length,a=e.slice(n,n+s);return n+=s,new ew(a)})}class ew{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}T.prototype.visitNull=F;T.prototype.visitBool=F;T.prototype.visitInt=F;T.prototype.visitInt8=F;T.prototype.visitInt16=F;T.prototype.visitInt32=F;T.prototype.visitInt64=F;T.prototype.visitUint8=F;T.prototype.visitUint16=F;T.prototype.visitUint32=F;T.prototype.visitUint64=F;T.prototype.visitFloat=F;T.prototype.visitFloat16=F;T.prototype.visitFloat32=F;T.prototype.visitFloat64=F;T.prototype.visitUtf8=F;T.prototype.visitBinary=F;T.prototype.visitFixedSizeBinary=F;T.prototype.visitDate=F;T.prototype.visitDateDay=F;T.prototype.visitDateMillisecond=F;T.prototype.visitTimestamp=F;T.prototype.visitTimestampSecond=F;T.prototype.visitTimestampMillisecond=F;T.prototype.visitTimestampMicrosecond=F;T.prototype.visitTimestampNanosecond=F;T.prototype.visitTime=F;T.prototype.visitTimeSecond=F;T.prototype.visitTimeMillisecond=F;T.prototype.visitTimeMicrosecond=F;T.prototype.visitTimeNanosecond=F;T.prototype.visitDecimal=F;T.prototype.visitList=F;T.prototype.visitStruct=F;T.prototype.visitUnion=F;T.prototype.visitDenseUnion=F;T.prototype.visitSparseUnion=F;T.prototype.visitDictionary=F;T.prototype.visitInterval=F;T.prototype.visitIntervalDayTime=F;T.prototype.visitIntervalYearMonth=F;T.prototype.visitFixedSizeList=F;T.prototype.visitMap=F;const Iu=new T,nw=(e,t)=>e+t;class Mn extends j{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===q.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitStruct(t,n){return t.children.reduce((i,r)=>i+We.visit(r,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((i,r)=>i+We.visit(r,n),0)}visitDictionary(t,n){var i;return t.type.indices.bitWidth/8+(((i=t.dictionary)===null||i===void 0?void 0:i.getByteLength(t.values[n]))||0)}}const iw=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),rw=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),sw=({valueOffsets:e,stride:t,children:n},i)=>{const r=n[0],{[i*t]:s}=e,{[i*t+1]:a}=e,o=We.getVisitFn(r.type),u=r.slice(s,a-s);let c=8;for(let l=-1,f=a-s;++l<f;)c+=o(u,l);return c},aw=({stride:e,children:t},n)=>{const i=t[0],r=i.slice(n*e,e),s=We.getVisitFn(i.type);let a=0;for(let o=-1,u=r.length;++o<u;)a+=s(r,o);return a},ow=(e,t)=>e.type.mode===Zt.Dense?$f(e,t):zf(e,t),$f=({type:e,children:t,typeIds:n,valueOffsets:i},r)=>{const s=e.typeIdToChildIndex[n[r]];return 8+We.visit(t[s],i[r])},zf=({children:e},t)=>4+We.visitMany(e,e.map(()=>t)).reduce(nw,0);Mn.prototype.visitUtf8=iw;Mn.prototype.visitBinary=rw;Mn.prototype.visitList=sw;Mn.prototype.visitFixedSizeList=aw;Mn.prototype.visitUnion=ow;Mn.prototype.visitDenseUnion=$f;Mn.prototype.visitSparseUnion=zf;const We=new Mn;var qf;const Wf={},Yf={};class H{constructor(t){var n,i,r;const s=t[0]instanceof H?t.flatMap(o=>o.data):t;if(s.length===0||s.some(o=>!(o instanceof st)))throw new TypeError("Vector constructor expects an Array of Data instances.");const a=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:o,set:u,indexOf:c,byteLength:l}=Wf[a.typeId],f=s[0];this.isValid=d=>Su(f,d),this.get=d=>o(f,d),this.set=(d,m)=>u(f,d,m),this.indexOf=d=>c(f,d),this.getByteLength=d=>l(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,Yf[a.typeId]),this._offsets=Mf(s);break}this.data=s,this.type=a,this.stride=Be(a),this.numChildren=(r=(i=a.children)===null||i===void 0?void 0:i.length)!==null&&r!==void 0?r:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((t,n)=>t+n.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=Df(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${p[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>0}getByteLength(t){return 0}[Symbol.iterator](){return Iu.visit(this)}concat(...t){return new H(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new H(Bf(this,t,n,({data:i,_offsets:r},s,a)=>Pf(i,r,s,a)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:i,stride:r,ArrayType:s}=this;switch(t.typeId){case p.Int:case p.Float:case p.Decimal:case p.Time:case p.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,i*r);default:return n.reduce((a,{values:o,length:u})=>(a.array.set(o.subarray(0,u*r),a.offset),a.offset+=u*r,a),{array:new s(i*r),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(i=>i.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new H(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return I.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(I.isDictionary(this.type)){const t=new Ns(this.data[0].dictionary),n=this.data.map(i=>{const r=i.clone();return r.dictionary=t,r});return new H(n)}return new Ns(this)}unmemoize(){if(I.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(i=>{const r=i.clone();return r.dictionary=t,r});return new H(n)}return this}}qf=Symbol.toStringTag;H[qf]=(e=>{e.type=I.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._nullCount=-1,e._byteLength=-1,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(p).map(n=>p[n]).filter(n=>typeof n=="number"&&n!==p.NONE);for(const n of t){const i=qt.getVisitFnByTypeId(n),r=he.getVisitFnByTypeId(n),s=ks.getVisitFnByTypeId(n),a=We.getVisitFnByTypeId(n);Wf[n]={get:i,set:r,indexOf:s,byteLength:a},Yf[n]=Object.create(e,{isValid:{value:Ei(Su)},get:{value:Ei(qt.getVisitFnByTypeId(n))},set:{value:Uf(he.getVisitFnByTypeId(n))},indexOf:{value:Vf(ks.getVisitFnByTypeId(n))},getByteLength:{value:Ei(We.getVisitFnByTypeId(n))}})}return"Vector"})(H.prototype);class Ns extends H{constructor(t){super(t.data);const n=this.get,i=this.set,r=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(a){const o=s[a];if(o!==void 0)return o;const u=n.call(this,a);return s[a]=u,u}}),Object.defineProperty(this,"set",{value(a,o){i.call(this,a,o),s[a]=o}}),Object.defineProperty(this,"slice",{value:(a,o)=>new Ns(r.call(this,a,o))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new H(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function uw(e){if(!e||e.length<=0)return function(r){return!0};let t="";const n=e.filter(i=>i===i);return n.length>0&&(t=`
    switch (x) {${n.map(i=>`
        case ${cw(i)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function cw(e){return typeof e!="bigint"?An(e):Nh?`${An(e)}n`:`"${An(e)}"`}const La=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,lw=(e,t=0)=>e.length>=t?e.subarray(0,t):Ss(new e.constructor(t),e,0);class ca{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,i=this.length*n,r=this.buffer.length;i>=r&&this._resize(r===0?La(i*1,this.BYTES_PER_ELEMENT):La(i*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=La(t*this.stride,this.BYTES_PER_ELEMENT);const n=lw(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=Ss(new this.ArrayType(t),this.buffer)}}ca.prototype.offset=0;class Br extends ca{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class Hf extends Br{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:i}=this.reserve(t-this.length+1),r=t>>3,s=t%8,a=i[r]>>s&1;return n?a===0&&(i[r]|=1<<s,++this.numValid):a===1&&(i[r]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class Gf extends Br{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const i=this.length-1,r=this.reserve(t-i+1).buffer;return i<t++&&r.fill(r[i],i,t),r[t]=r[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let Ht=class{constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=Be(t),this._nulls=new Hf,n&&n.length>0&&(this._isValid=uw(n))}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}toVector(){return new H([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:i,_nulls:r,_typeIds:s,children:a}=this;return n&&(t+=n.byteLength),i&&(t+=i.byteLength),r&&(t+=r.byteLength),s&&(t+=s.byteLength),a.reduce((o,u)=>o+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,i)=>n+i.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,i,r;const{type:s,length:a,nullCount:o,_typeIds:u,_offsets:c,_values:l,_nulls:f}=this;(n=u==null?void 0:u.flush(a))?r=c==null?void 0:c.flush(a):(r=c==null?void 0:c.flush(a))?t=l==null?void 0:l.flush(c.last()):t=l==null?void 0:l.flush(a),o>0&&(i=f==null?void 0:f.flush(a));const d=this.children.map(m=>m.flush());return this.clear(),V({type:s,length:a,nullCount:o,children:d,child:d[0],data:t,typeIds:n,nullBitmap:i,valueOffsets:r})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,i,r;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(i=this._offsets)===null||i===void 0||i.clear(),(r=this._typeIds)===null||r===void 0||r.clear();for(const s of this.children)s.clear();return this}};Ht.prototype.length=1;Ht.prototype.stride=1;Ht.prototype.children=null;Ht.prototype.finished=!1;Ht.prototype.nullValues=null;Ht.prototype._isValid=()=>!0;class Pn extends Ht{constructor(t){super(t),this._values=new Br(new this.ArrayType(0),this.stride)}setValue(t,n){const i=this._values;return i.reserve(t-i.length+1),super.setValue(t,n)}}class la extends Ht{constructor(t){super(t),this._pendingLength=0,this._offsets=new Gf}setValue(t,n){const i=this._pending||(this._pending=new Map),r=i.get(t);r&&(this._pendingLength-=r.length),this._pendingLength+=n instanceof oa?n[ge].length:n.length,i.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class fo{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,i,r){return t.prep(8,24),t.writeInt64(r),t.pad(4),t.writeInt32(i),t.writeInt64(n),t.offset()}}const Da=2,Le=4,nn=4,ot=4,In=new Int32Array(2),Zc=new Float32Array(In.buffer),tl=new Float64Array(In.buffer),Qr=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;let on=class po{constructor(t,n){this.low=t|0,this.high=n|0}static create(t,n){return t==0&&n==0?po.ZERO:new po(t,n)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(t){return this.low==t.low&&this.high==t.high}};on.ZERO=new on(0,0);var mo;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(mo||(mo={}));let Ci=class Kf{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new Kf(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new on(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new on(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return In[0]=this.readInt32(t),Zc[0]}readFloat64(t){return In[Qr?0:1]=this.readInt32(t),In[Qr?1:0]=this.readInt32(t+4),tl[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,n.low),this.writeInt32(t+4,n.high)}writeUint64(t,n){this.writeUint32(t,n.low),this.writeUint32(t+4,n.high)}writeFloat32(t,n){Zc[0]=n,this.writeInt32(t,In[0])}writeFloat64(t,n){tl[0]=n,this.writeInt32(t,In[Qr?0:1]),this.writeInt32(t+4,In[Qr?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Le+nn)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<nn;n++)t+=String.fromCharCode(this.readInt8(this.position_+Le+n));return t}__offset(t,n){const i=t-this.readInt32(t);return n<this.readInt16(i)?this.readInt16(i+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const i=this.readInt32(t);let r="",s=0;if(t+=Le,n===mo.UTF8_BYTES)return this.bytes_.subarray(t,t+i);for(;s<i;){let a;const o=this.readUint8(t+s++);if(o<192)a=o;else{const u=this.readUint8(t+s++);if(o<224)a=(o&31)<<6|u&63;else{const c=this.readUint8(t+s++);if(o<240)a=(o&15)<<12|(u&63)<<6|c&63;else{const l=this.readUint8(t+s++);a=(o&7)<<18|(u&63)<<12|(c&63)<<6|l&63}}}a<65536?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode((a>>10)+55296,(a&1024-1)+56320))}return r}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Le}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=nn)throw new Error("FlatBuffers: file identifier must be length "+nn);for(let n=0;n<nn;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Le+n))return!1;return!0}createLong(t,n){return on.create(t,n)}createScalarList(t,n){const i=[];for(let r=0;r<n;++r)t(r)!==null&&i.push(t(r));return i}createObjList(t,n){const i=[];for(let r=0;r<n;++r){const s=t(r);s!==null&&i.push(s.unpack())}return i}},Qf=class Jf{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let n;t?n=t:n=1024,this.bb=Ci.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const i=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<i+t+n;){const r=this.bb.capacity();this.bb=Jf.growByteBuffer(this.bb),this.space+=this.bb.capacity()-r}this.pad(i)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,i){(this.force_defaults||n!=i)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,i){(this.force_defaults||n!=i)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,i){(this.force_defaults||n!=i)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,i){(this.force_defaults||!n.equals(i))&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,i){(this.force_defaults||n!=i)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,i){(this.force_defaults||n!=i)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,i){(this.force_defaults||n!=i)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,i){n!=i&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const i=n<<1,r=Ci.allocate(i);return r.setPosition(i-n),r.bytes().set(t.bytes(),i-n),r}addOffset(t){this.prep(Le,0),this.writeInt32(this.offset()-t+Le)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const i=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const r=2;this.addInt16(t-this.object_start);const s=(i+r)*Da;this.addInt16(s);let a=0;const o=this.space;t:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let c=Da;c<s;c+=Da)if(this.bb.readInt16(o+c)!=this.bb.readInt16(u+c))continue t;a=this.vtables[n];break}}return a?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,a-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,i){const r=i?ot:0;if(n){const s=n;if(this.prep(this.minalign,Le+nn+r),s.length!=nn)throw new Error("FlatBuffers: file identifier must be length "+nn);for(let a=nn-1;a>=0;a--)this.writeInt8(s.charCodeAt(a))}this.prep(this.minalign,Le+r),this.addOffset(t),r&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const i=this.bb.capacity()-t,r=i-this.bb.readInt32(i);if(!(this.bb.readInt16(r+n)!=0))throw new Error("FlatBuffers: field "+n+" must be set")}startVector(t,n,i){this.notNested(),this.vector_num_elems=n,this.prep(Le,t*n),this.prep(i,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(!t)return 0;let n;if(t instanceof Uint8Array)n=t;else{n=[];let i=0;for(;i<t.length;){let r;const s=t.charCodeAt(i++);if(s<55296||s>=56320)r=s;else{const a=t.charCodeAt(i++);r=(s<<10)+a+(65536-56623104-56320)}r<128?n.push(r):(r<2048?n.push(r>>6&31|192):(r<65536?n.push(r>>12&15|224):n.push(r>>18&7|240,r>>12&63|128),n.push(r>>6&63|128)),n.push(r&63|128))}}this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let i=0,r=this.space,s=this.bb.bytes();i<n.length;i++)s[r++]=n[i];return this.endVector()}createLong(t,n){return on.create(t,n)}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let i=0;i<t.length;++i){const r=t[i];if(r!==null)n.push(this.createObjectOffset(r));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t),this.endVector()}};class St{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new St).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+ot),(n||new St).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,i){return St.startKeyValue(t),St.addKey(t,n),St.addValue(t,i),St.endKeyValue(t)}}var Bi;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Bi||(Bi={}));var Li;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(Li||(Li={}));var Os;(function(e){e[e.DenseArray=0]="DenseArray"})(Os||(Os={}));class Jt{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new Jt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+ot),(n||new Jt).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,i){return Jt.startInt(t),Jt.addBitWidth(t,n),Jt.addIsSigned(t,i),Jt.endInt(t)}}class rn{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new rn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+ot),(n||new rn).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Jt).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):Os.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,Os.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class Yn{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new Yn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+ot),(n||new Yn).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return Yn.startBinary(t),Yn.endBinary(t)}}class Hn{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new Hn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+ot),(n||new Hn).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Hn.startBool(t),Hn.endBool(t)}}var Rs;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Rs||(Rs={}));let ss=class di{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new di).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+ot),(n||new di).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Rs.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Rs.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return di.startDate(t),di.addUnit(t,n),di.endDate(t)}};class Ut{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new Ut).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+ot),(n||new Ut).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,i,r){return Ut.startDecimal(t),Ut.addPrecision(t,n),Ut.addScale(t,i),Ut.addBitWidth(t,r),Ut.endDecimal(t)}}var Di;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Di||(Di={}));class De{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new De).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+ot),(n||new De).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return De.startFixedSizeBinary(t),De.addByteWidth(t,n),De.endFixedSizeBinary(t)}}class Me{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Me).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+ot),(n||new Me).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Me.startFixedSizeList(t),Me.addListSize(t,n),Me.endFixedSizeList(t)}}var Fs;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Fs||(Fs={}));class Pe{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new Pe).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+ot),(n||new Pe).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Fs.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,Fs.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return Pe.startFloatingPoint(t),Pe.addPrecision(t,n),Pe.endFloatingPoint(t)}}var Cs;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Cs||(Cs={}));class Ue{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Ue).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+ot),(n||new Ue).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Cs.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Cs.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Ue.startInterval(t),Ue.addUnit(t,n),Ue.endInterval(t)}}class Gn{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new Gn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+ot),(n||new Gn).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return Gn.startList(t),Gn.endList(t)}}let as=class pi{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new pi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+ot),(n||new pi).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return pi.startMap(t),pi.addKeysSorted(t,n),pi.endMap(t)}};class Kn{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new Kn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+ot),(n||new Kn).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Kn.startNull(t),Kn.endNull(t)}}class Qn{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new Qn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+ot),(n||new Qn).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Qn.startStruct_(t),Qn.endStruct_(t)}}class oe{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new oe).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+ot),(n||new oe).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Di.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Di.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,i){return oe.startTime(t),oe.addUnit(t,n),oe.addBitWidth(t,i),oe.endTime(t)}}class ue{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new ue).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+ot),(n||new ue).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Di.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Di.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,i){return ue.startTimestamp(t),ue.addUnit(t,n),ue.addTimezone(t,i),ue.endTimestamp(t)}}var Bs;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Bs||(Bs={}));class Vt{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new Vt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+ot),(n||new Vt).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Bs.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,Bs.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addInt32(n[i]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,i){return Vt.startUnion(t),Vt.addMode(t,n),Vt.addTypeIds(t,i),Vt.endUnion(t)}}class Jn{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new Jn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+ot),(n||new Jn).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Jn.startUtf8(t),Jn.endUtf8(t)}}var ft;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList"})(ft||(ft={}));let re=class os{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new os).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+ot),(n||new os).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):ft.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new rn).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const i=this.bb.__offset(this.bb_pos,14);return i?(n||new os).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,16);return i?(n||new St).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,ft.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Oe=class Xe{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Xe).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+ot),(n||new Xe).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Li.Little}fields(t,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new re).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new St).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,Li.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let i=n.length-1;i>=0;i--)t.addInt64(n[i]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,i,r,s){return Xe.startSchema(t),Xe.addEndianness(t,n),Xe.addFields(t,i),Xe.addCustomMetadata(t,r),Xe.addFeatures(t,s),Xe.endSchema(t)}};class Qt{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new Qt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+ot),(n||new Qt).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Bi.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Oe).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new fo).__init(this.bb.__vector(this.bb_pos+i)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const i=this.bb.__offset(this.bb_pos,10);return i?(n||new fo).__init(this.bb.__vector(this.bb_pos+i)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new St).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Bi.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class et{constructor(t=[],n,i){this.fields=t||[],this.metadata=n||new Map,i||(i=yo(t)),this.dictionaries=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),i=this.fields.filter(r=>n.has(r.name));return new et(i,this.metadata)}selectAt(t){const n=t.map(i=>this.fields[i]).filter(Boolean);return new et(n,this.metadata)}assign(...t){const n=t[0]instanceof et?t[0]:Array.isArray(t[0])?new et(t[0]):new et(t),i=[...this.fields],r=Jr(Jr(new Map,this.metadata),n.metadata),s=n.fields.filter(o=>{const u=i.findIndex(c=>c.name===o.name);return~u?(i[u]=o.clone({metadata:Jr(Jr(new Map,i[u].metadata),o.metadata)}))&&!1:!0}),a=yo(s,new Map);return new et([...i,...s],r,new Map([...this.dictionaries,...a]))}}et.prototype.fields=null;et.prototype.metadata=null;et.prototype.dictionaries=null;class X{constructor(t,n,i=!1,r){this.name=t,this.type=n,this.nullable=i,this.metadata=r||new Map}static new(...t){let[n,i,r,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],i===void 0&&(i=t[0].type),r===void 0&&(r=t[0].nullable),s===void 0&&(s=t[0].metadata)),new X(`${n}`,i,r,s)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,i,r,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,i=this.type,r=this.nullable,s=this.metadata]=t:{name:n=this.name,type:i=this.type,nullable:r=this.nullable,metadata:s=this.metadata}=t[0],X.new(n,i,r,s)}}X.prototype.type=null;X.prototype.name=null;X.prototype.nullable=null;X.prototype.metadata=null;function Jr(e,t){return new Map([...e||new Map,...t||new Map])}function yo(e,t=new Map){for(let n=-1,i=e.length;++n<i;){const s=e[n].type;if(I.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&yo(s.children,t)}return t}var el=on,hw=Qf,fw=Ci;class Ir{constructor(t,n=Xt.V4,i,r){this.schema=t,this.version=n,i&&(this._recordBatches=i),r&&(this._dictionaryBatches=r)}static decode(t){t=new fw(Q(t));const n=Qt.getRootAsFooter(t),i=et.decode(n.schema());return new dw(i,n)}static encode(t){const n=new hw,i=et.encode(n,t.schema);Qt.startRecordBatchesVector(n,t.numRecordBatches);for(const a of[...t.recordBatches()].slice().reverse())Rn.encode(n,a);const r=n.endVector();Qt.startDictionariesVector(n,t.numDictionaries);for(const a of[...t.dictionaryBatches()].slice().reverse())Rn.encode(n,a);const s=n.endVector();return Qt.startFooter(n),Qt.addSchema(n,i),Qt.addVersion(n,Xt.V4),Qt.addRecordBatches(n,r),Qt.addDictionaries(n,s),Qt.finishFooterBuffer(n,Qt.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,n=-1,i=this.numRecordBatches;++n<i;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,i=this.numDictionaries;++n<i;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class dw extends Ir{constructor(t,n){super(t,n.version()),this._footer=n}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return Rn.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return Rn.decode(n)}return null}}class Rn{constructor(t,n,i){this.metaDataLength=t,this.offset=typeof i=="number"?i:i.low,this.bodyLength=typeof n=="number"?n:n.low}static decode(t){return new Rn(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:i}=n,r=new el(n.offset,0),s=new el(n.bodyLength,0);return fo.createBlock(t,r,i,s)}}const pt=Object.freeze({done:!0,value:void 0});class nl{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class Eu{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class pw extends Eu{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return S(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(pt);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return ae.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return ae.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return S(this,void 0,void 0,function*(){return yield this.abort(t),pt})}return(t){return S(this,void 0,void 0,function*(){return yield this.close(),pt})}read(t){return S(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return S(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,i)=>{this.resolvers.push({resolve:n,reject:i})}):Promise.resolve(pt)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class us extends pw{write(t){if((t=Q(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?oo(this.toUint8Array(!0)):this.toUint8Array(!1).then(oo)}toUint8Array(t=!1){return t?ze(this._values)[0]:(()=>S(this,void 0,void 0,function*(){var n,i;const r=[];let s=0;try{for(var a=ei(this),o;o=yield a.next(),!o.done;){const u=o.value;r.push(u),s+=u.byteLength}}catch(u){n={error:u}}finally{try{o&&!o.done&&(i=a.return)&&(yield i.call(a))}finally{if(n)throw n.error}}return ze(r,s)[0]}))()}}class Ls{constructor(t){t&&(this.source=new mw(ae.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Mi{constructor(t){t instanceof Mi?this.source=t.source:t instanceof us?this.source=new $n(ae.fromAsyncIterable(t)):Bh(t)?this.source=new $n(ae.fromNodeStream(t)):Wo(t)?this.source=new $n(ae.fromDOMStream(t)):Ch(t)?this.source=new $n(ae.fromDOMStream(t.body)):Cr(t)?this.source=new $n(ae.fromIterable(t)):ri(t)?this.source=new $n(ae.fromAsyncIterable(t)):zi(t)&&(this.source=new $n(ae.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class mw{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,n="read"){return this.source.next({cmd:n,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||pt)}return(t){return Object.create(this.source.return&&this.source.return(t)||pt)}}class $n{constructor(t){this.source=t,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(t){return S(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return S(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return S(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t,n="read"){return S(this,void 0,void 0,function*(){return yield this.source.next({cmd:n,size:t})})}throw(t){return S(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(t))||pt;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(t){return S(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(t))||pt;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}}class il extends Ls{constructor(t,n){super(),this.position=0,this.buffer=Q(t),this.size=typeof n>"u"?this.buffer.byteLength:n}readInt32(t){const{buffer:n,byteOffset:i}=this.readAt(t,4);return new DataView(n,i).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:n,size:i,position:r}=this;return n&&r<i?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(i,r+Math.min(i-r,t)),n.subarray(r,this.position)):null}readAt(t,n){const i=this.buffer,r=Math.min(this.size,t+n);return i?i.subarray(t,r):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class Ds extends Mi{constructor(t,n){super(),this.position=0,this._handle=t,typeof n=="number"?this.size=n:this._pending=(()=>S(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending}))()}readInt32(t){return S(this,void 0,void 0,function*(){const{buffer:n,byteOffset:i}=yield this.readAt(t,4);return new DataView(n,i).getInt32(0,!0)})}seek(t){return S(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return S(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:i,position:r}=this;if(n&&r<i){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let s=r,a=0,o=0;const u=Math.min(i,s+Math.min(i-s,t)),c=new Uint8Array(Math.max(0,(this.position=u)-s));for(;(s+=o)<u&&(a+=o)<c.byteLength;)({bytesRead:o}=yield n.read(c,a,c.byteLength-a,s));return c}return null})}readAt(t,n){return S(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:i,size:r}=this;if(i&&t+n<r){const s=Math.min(r,t+n),a=new Uint8Array(s-t);return(yield i.read(a,0,n,t)).buffer}return new Uint8Array(n)})}close(){return S(this,void 0,void 0,function*(){const t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return S(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return S(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}}const yw=65536;function yi(e){return e<0&&(e=4294967295+e+1),`0x${e.toString(16)}`}const Pi=8,Au=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class Xf{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),i=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]);let r=n[3]*i[3];this.buffer[0]=r&65535;let s=r>>>16;return r=n[2]*i[3],s+=r,r=n[3]*i[2]>>>0,s+=r,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<r?yw:0,this.buffer[1]+=s>>>16,this.buffer[1]+=n[1]*i[3]+n[2]*i[2]+n[3]*i[1],this.buffer[1]+=n[0]*i[3]+n[1]*i[2]+n[2]*i[1]+n[3]*i[0]<<16,this}_plus(t){const n=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${yi(this.buffer[1])} ${yi(this.buffer[0])}`}}class it extends Xf{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,n=new Uint32Array(2)){return it.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return it.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const i=t.length,r=new it(n);for(let s=0;s<i;){const a=Pi<i-s?Pi:i-s,o=new it(new Uint32Array([Number.parseInt(t.slice(s,s+a),10),0])),u=new it(new Uint32Array([Au[a],0]));r.times(u),r.plus(o),s+=a}return r}static convertArray(t){const n=new Uint32Array(t.length*2);for(let i=-1,r=t.length;++i<r;)it.from(t[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(t,n){return new it(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new it(new Uint32Array(t.buffer)).plus(n)}}class Pt extends Xf{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const n=this.buffer[1]<<0,i=t.buffer[1]<<0;return n<i||n===i&&this.buffer[0]<t.buffer[0]}static from(t,n=new Uint32Array(2)){return Pt.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return Pt.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const i=t.startsWith("-"),r=t.length,s=new Pt(n);for(let a=i?1:0;a<r;){const o=Pi<r-a?Pi:r-a,u=new Pt(new Uint32Array([Number.parseInt(t.slice(a,a+o),10),0])),c=new Pt(new Uint32Array([Au[o],0]));s.times(c),s.plus(u),a+=o}return i?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*2);for(let i=-1,r=t.length;++i<r;)Pt.from(t[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(t,n){return new Pt(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new Pt(new Uint32Array(t.buffer)).plus(n)}}class Re{constructor(t){this.buffer=t}high(){return new Pt(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new Pt(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){const n=new it(new Uint32Array([this.buffer[3],0])),i=new it(new Uint32Array([this.buffer[2],0])),r=new it(new Uint32Array([this.buffer[1],0])),s=new it(new Uint32Array([this.buffer[0],0])),a=new it(new Uint32Array([t.buffer[3],0])),o=new it(new Uint32Array([t.buffer[2],0])),u=new it(new Uint32Array([t.buffer[1],0])),c=new it(new Uint32Array([t.buffer[0],0]));let l=it.multiply(s,c);this.buffer[0]=l.low();const f=new it(new Uint32Array([l.high(),0]));return l=it.multiply(r,c),f.plus(l),l=it.multiply(s,u),f.plus(l),this.buffer[1]=f.low(),this.buffer[3]=f.lessThan(l)?1:0,this.buffer[2]=f.high(),new it(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(it.multiply(i,c)).plus(it.multiply(r,u)).plus(it.multiply(s,o)),this.buffer[3]+=it.multiply(n,c).plus(it.multiply(i,u)).plus(it.multiply(r,o)).plus(it.multiply(s,a)).low(),this}plus(t){const n=new Uint32Array(4);return n[3]=this.buffer[3]+t.buffer[3]>>>0,n[2]=this.buffer[2]+t.buffer[2]>>>0,n[1]=this.buffer[1]+t.buffer[1]>>>0,n[0]=this.buffer[0]+t.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${yi(this.buffer[3])} ${yi(this.buffer[2])} ${yi(this.buffer[1])} ${yi(this.buffer[0])}`}static multiply(t,n){return new Re(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new Re(new Uint32Array(t.buffer)).plus(n)}static from(t,n=new Uint32Array(4)){return Re.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(4)){return Re.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(4)){const i=t.startsWith("-"),r=t.length,s=new Re(n);for(let a=i?1:0;a<r;){const o=Pi<r-a?Pi:r-a,u=new Re(new Uint32Array([Number.parseInt(t.slice(a,a+o),10),0,0,0])),c=new Re(new Uint32Array([Au[o],0,0,0]));s.times(c),s.plus(u),a+=o}return i?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*4);for(let i=-1,r=t.length;++i<r;)Re.from(t[i],new Uint32Array(n.buffer,n.byteOffset+4*4*i,4));return n}}class Zf extends j{constructor(t,n,i,r){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=n,this.buffers=i,this.dictionaries=r}visit(t){return super.visit(t instanceof X?t.type:t)}visitNull(t,{length:n}=this.nextFieldNode()){return V({type:t,length:n})}visitBool(t,{length:n,nullCount:i}=this.nextFieldNode()){return V({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitInt(t,{length:n,nullCount:i}=this.nextFieldNode()){return V({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitFloat(t,{length:n,nullCount:i}=this.nextFieldNode()){return V({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitUtf8(t,{length:n,nullCount:i}=this.nextFieldNode()){return V({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:n,nullCount:i}=this.nextFieldNode()){return V({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:n,nullCount:i}=this.nextFieldNode()){return V({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitDate(t,{length:n,nullCount:i}=this.nextFieldNode()){return V({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitTimestamp(t,{length:n,nullCount:i}=this.nextFieldNode()){return V({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitTime(t,{length:n,nullCount:i}=this.nextFieldNode()){return V({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitDecimal(t,{length:n,nullCount:i}=this.nextFieldNode()){return V({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitList(t,{length:n,nullCount:i}=this.nextFieldNode()){return V({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:n,nullCount:i}=this.nextFieldNode()){return V({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),children:this.visitMany(t.children)})}visitUnion(t){return t.mode===Zt.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t,{length:n,nullCount:i}=this.nextFieldNode()){return V({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:n,nullCount:i}=this.nextFieldNode()){return V({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:n,nullCount:i}=this.nextFieldNode()){return V({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:n,nullCount:i}=this.nextFieldNode()){return V({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitFixedSizeList(t,{length:n,nullCount:i}=this.nextFieldNode()){return V({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),child:this.visit(t.children[0])})}visitMap(t,{length:n,nullCount:i}=this.nextFieldNode()){return V({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,n,i=this.nextBufferRange()){return n>0&&this.readData(t,i)||new Uint8Array(0)}readOffsets(t,n){return this.readData(t,n)}readTypeIds(t,n){return this.readData(t,n)}readData(t,{length:n,offset:i}=this.nextBufferRange()){return this.bytes.subarray(i,i+n)}readDictionary(t){return this.dictionaries.get(t.id)}}class gw extends Zf{constructor(t,n,i,r){super(new Uint8Array(0),n,i,r),this.sources=t}readNullBitmap(t,n,{offset:i}=this.nextBufferRange()){return n<=0?new Uint8Array(0):Ts(this.sources[i])}readOffsets(t,{offset:n}=this.nextBufferRange()){return at(Uint8Array,at(Int32Array,this.sources[n]))}readTypeIds(t,{offset:n}=this.nextBufferRange()){return at(Uint8Array,at(t.ArrayType,this.sources[n]))}readData(t,{offset:n}=this.nextBufferRange()){const{sources:i}=this;return I.isTimestamp(t)||(I.isInt(t)||I.isTime(t))&&t.bitWidth===64||I.isDate(t)&&t.unit===we.MILLISECOND?at(Uint8Array,Pt.convertArray(i[n])):I.isDecimal(t)?at(Uint8Array,Re.convertArray(i[n])):I.isBinary(t)||I.isFixedSizeBinary(t)?_w(i[n]):I.isBool(t)?Ts(i[n]):I.isUtf8(t)?sa(i[n].join("")):at(Uint8Array,at(t.ArrayType,i[n].map(r=>+r)))}}function _w(e){const t=e.join(""),n=new Uint8Array(t.length/2);for(let i=0;i<t.length;i+=2)n[i>>1]=Number.parseInt(t.slice(i,i+2),16);return n}class td extends la{constructor(t){super(t),this._values=new ca(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Q(n))}_flushPending(t,n){const i=this._offsets,r=this._values.reserve(n).buffer;let s=0;for(const[a,o]of t)if(o===void 0)i.set(a,0);else{const u=o.length;r.set(o,s),i.set(a,u),s+=u}}}class bw extends Ht{constructor(t){super(t),this._values=new Hf}setValue(t,n){this._values.set(t,+n)}}class ha extends Pn{}ha.prototype._setValue=lf;class ed extends ha{}ed.prototype._setValue=au;class nd extends ha{}nd.prototype._setValue=ou;class id extends Pn{}id.prototype._setValue=df;class vw extends Ht{constructor({type:t,nullValues:n,dictionaryHashFunction:i}){super({type:new On(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=Ms({type:this.type.indices,nullValues:n}),this.dictionary=Ms({type:this.type.dictionary,nullValues:null}),typeof i=="function"&&(this.valueToKey=i)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const i=this.indices;return n=i.setValid(t,n),this.length=i.length,n}setValue(t,n){const i=this._keysToIndices,r=this.valueToKey(n);let s=i[r];return s===void 0&&(i[r]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,i=this.dictionary.toVector(),r=this.indices.flush().clone(t);return r.dictionary=n?n.concat(i):i,this.finished||(this._dictionaryOffset+=i.length),this._dictionary=r.dictionary,this.clear(),r}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class rd extends Pn{}rd.prototype._setValue=cf;class ww extends Ht{setValue(t,n){const[i]=this.children,r=t*this.stride;for(let s=-1,a=n.length;++s<a;)i.set(r+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const i=this.children.push(t);return this.type=new Fi(this.type.listSize,new X(n,t.type,!0)),i}}class fa extends Pn{setValue(t,n){this._values.set(t,n)}}class xw extends fa{setValue(t,n){super.setValue(t,af(n))}}class Sw extends fa{}class Iw extends fa{}class da extends Pn{}da.prototype._setValue=yf;class sd extends da{}sd.prototype._setValue=yu;class ad extends da{}ad.prototype._setValue=gu;class gn extends Pn{setValue(t,n){this._values.set(t,n)}}class Ew extends gn{}class Aw extends gn{}class Tw extends gn{}class kw extends gn{}class Nw extends gn{}class Ow extends gn{}class Rw extends gn{}class Fw extends gn{}class Cw extends la{constructor(t){super(t),this._offsets=new Gf}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new Ri(new X(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[i]=this.children;for(const[r,s]of t)if(typeof s>"u")n.set(r,0);else{const a=s.length,o=n.set(r,a).buffer[r];for(let u=-1;++u<a;)i.set(o+u,s[u])}}}class Bw extends la{set(t,n){return super.set(t,n)}setValue(t,n){const i=n instanceof Map?n:new Map(Object.entries(n)),r=this._pending||(this._pending=new Map),s=r.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=i.size,r.set(t,i)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new Sr(new X(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[i]=this.children;for(const[r,s]of t)if(s===void 0)n.set(r,0);else{let{[r]:a,[r+1]:o}=n.set(r,s.size).buffer;for(const u of s.entries())if(i.set(a,u),++a>=o)break}}}class Lw extends Ht{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class Dw extends Ht{setValue(t,n){const{children:i,type:r}=this;switch(Array.isArray(n)||n.constructor){case!0:return r.children.forEach((s,a)=>i[a].set(t,n[a]));case Map:return r.children.forEach((s,a)=>i[a].set(t,n.get(s.name)));default:return r.children.forEach((s,a)=>i[a].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(i=>i.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const i=this.children.push(t);return this.type=new kt([...this.type.children,new X(n,t.type,!0)]),i}}class Wi extends Pn{}Wi.prototype._setValue=hf;class od extends Wi{}od.prototype._setValue=uu;class ud extends Wi{}ud.prototype._setValue=cu;class cd extends Wi{}cd.prototype._setValue=lu;class ld extends Wi{}ld.prototype._setValue=hu;class Yi extends Pn{}Yi.prototype._setValue=ff;class hd extends Yi{}hd.prototype._setValue=fu;class fd extends Yi{}fd.prototype._setValue=du;class dd extends Yi{}dd.prototype._setValue=pu;class pd extends Yi{}pd.prototype._setValue=mu;class Tu extends Ht{constructor(t){super(t),this._typeIds=new Br(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,i){return i===void 0&&(i=this._valueToChildTypeId(this,n,t)),this.setValid(t,this.isValid(n))&&this.setValue(t,n,i),this}setValue(t,n,i){this._typeIds.set(t,i);const r=this.type.typeIdToChildIndex[i],s=this.children[r];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const i=this.children.push(t),{type:{children:r,mode:s,typeIds:a}}=this,o=[...r,new X(n,t.type)];return this.type=new xr(s,[...a,i],o),i}_valueToChildTypeId(t,n,i){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class Mw extends Tu{}class Pw extends Tu{constructor(t){super(t),this._offsets=new Br(new Int32Array(0))}setValue(t,n,i){const r=this._typeIds.set(t,i).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[r]),a=this._offsets.set(t,s.length).buffer[t];s==null||s.set(a,n)}}class md extends la{constructor(t){super(t),this._values=new ca(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,sa(n))}_flushPending(t,n){}}md.prototype._flushPending=td.prototype._flushPending;class Uw extends j{visitNull(){return Lw}visitBool(){return bw}visitInt(){return gn}visitInt8(){return Ew}visitInt16(){return Aw}visitInt32(){return Tw}visitInt64(){return kw}visitUint8(){return Nw}visitUint16(){return Ow}visitUint32(){return Rw}visitUint64(){return Fw}visitFloat(){return fa}visitFloat16(){return xw}visitFloat32(){return Sw}visitFloat64(){return Iw}visitUtf8(){return md}visitBinary(){return td}visitFixedSizeBinary(){return rd}visitDate(){return ha}visitDateDay(){return ed}visitDateMillisecond(){return nd}visitTimestamp(){return Wi}visitTimestampSecond(){return od}visitTimestampMillisecond(){return ud}visitTimestampMicrosecond(){return cd}visitTimestampNanosecond(){return ld}visitTime(){return Yi}visitTimeSecond(){return hd}visitTimeMillisecond(){return fd}visitTimeMicrosecond(){return dd}visitTimeNanosecond(){return pd}visitDecimal(){return id}visitList(){return Cw}visitStruct(){return Dw}visitUnion(){return Tu}visitDenseUnion(){return Pw}visitSparseUnion(){return Mw}visitDictionary(){return vw}visitInterval(){return da}visitIntervalDayTime(){return sd}visitIntervalYearMonth(){return ad}visitFixedSizeList(){return ww}visitMap(){return Bw}}const Vw=new Uw;class k extends j{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((i,r)=>this.compareFields(i,n[r]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function Gt(e,t){return t instanceof e.constructor}function Lr(e,t){return e===t||Gt(e,t)}function _n(e,t){return e===t||Gt(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function pa(e,t){return e===t||Gt(e,t)&&e.precision===t.precision}function jw(e,t){return e===t||Gt(e,t)&&e.byteWidth===t.byteWidth}function ku(e,t){return e===t||Gt(e,t)&&e.unit===t.unit}function Dr(e,t){return e===t||Gt(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function Mr(e,t){return e===t||Gt(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function $w(e,t){return e===t||Gt(e,t)&&e.children.length===t.children.length&&Fn.compareManyFields(e.children,t.children)}function zw(e,t){return e===t||Gt(e,t)&&e.children.length===t.children.length&&Fn.compareManyFields(e.children,t.children)}function Nu(e,t){return e===t||Gt(e,t)&&e.mode===t.mode&&e.typeIds.every((n,i)=>n===t.typeIds[i])&&Fn.compareManyFields(e.children,t.children)}function qw(e,t){return e===t||Gt(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Fn.visit(e.indices,t.indices)&&Fn.visit(e.dictionary,t.dictionary)}function Ou(e,t){return e===t||Gt(e,t)&&e.unit===t.unit}function Ww(e,t){return e===t||Gt(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Fn.compareManyFields(e.children,t.children)}function Yw(e,t){return e===t||Gt(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Fn.compareManyFields(e.children,t.children)}k.prototype.visitNull=Lr;k.prototype.visitBool=Lr;k.prototype.visitInt=_n;k.prototype.visitInt8=_n;k.prototype.visitInt16=_n;k.prototype.visitInt32=_n;k.prototype.visitInt64=_n;k.prototype.visitUint8=_n;k.prototype.visitUint16=_n;k.prototype.visitUint32=_n;k.prototype.visitUint64=_n;k.prototype.visitFloat=pa;k.prototype.visitFloat16=pa;k.prototype.visitFloat32=pa;k.prototype.visitFloat64=pa;k.prototype.visitUtf8=Lr;k.prototype.visitBinary=Lr;k.prototype.visitFixedSizeBinary=jw;k.prototype.visitDate=ku;k.prototype.visitDateDay=ku;k.prototype.visitDateMillisecond=ku;k.prototype.visitTimestamp=Dr;k.prototype.visitTimestampSecond=Dr;k.prototype.visitTimestampMillisecond=Dr;k.prototype.visitTimestampMicrosecond=Dr;k.prototype.visitTimestampNanosecond=Dr;k.prototype.visitTime=Mr;k.prototype.visitTimeSecond=Mr;k.prototype.visitTimeMillisecond=Mr;k.prototype.visitTimeMicrosecond=Mr;k.prototype.visitTimeNanosecond=Mr;k.prototype.visitDecimal=Lr;k.prototype.visitList=$w;k.prototype.visitStruct=zw;k.prototype.visitUnion=Nu;k.prototype.visitDenseUnion=Nu;k.prototype.visitSparseUnion=Nu;k.prototype.visitDictionary=qw;k.prototype.visitInterval=Ou;k.prototype.visitIntervalDayTime=Ou;k.prototype.visitIntervalYearMonth=Ou;k.prototype.visitFixedSizeList=Ww;k.prototype.visitMap=Yw;const Fn=new k;function go(e,t){return Fn.compareSchemas(e,t)}function Ms(e){const t=e.type,n=new(Vw.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const i=e.children||[],r={nullValues:e.nullValues},s=Array.isArray(i)?(a,o)=>i[o]||r:({name:a})=>i[a]||r;for(const[a,o]of t.children.entries()){const{type:u}=o,c=s(o,a);n.children.push(Ms(Object.assign(Object.assign({},c),{type:u})))}}return n}function Ma(e,t){return Hw(e,t.map(n=>n.data.concat()))}function Hw(e,t){const n=[...e.fields],i=[],r={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,a=0,o=-1;const u=t.length;let c,l=[];for(;r.numBatches-- >0;){for(a=Number.POSITIVE_INFINITY,o=-1;++o<u;)l[o]=c=t[o].shift(),a=Math.min(a,c?c.length:a);Number.isFinite(a)&&(l=Gw(n,a,l,t,r),a>0&&(i[s++]=V({type:new kt(n),length:a,nullCount:0,children:l.slice()})))}return[e=e.assign(n),i.map(f=>new jt(e,f))]}function Gw(e,t,n,i,r){var s;const a=(t+63&-64)>>3;for(let o=-1,u=i.length;++o<u;){const c=n[o],l=c==null?void 0:c.length;if(l>=t)l===t?n[o]=c:(n[o]=c.slice(0,t),r.numBatches=Math.max(r.numBatches,i[o].unshift(c.slice(t,l-t))));else{const f=e[o];e[o]=f.clone({nullable:!0}),n[o]=(s=c==null?void 0:c._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:V({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(a)})}}return n}var yd;let fn=class zn{constructor(...t){var n,i;if(t.length===0)return this.batches=[],this.schema=new et([]),this._offsets=[0],this;let r,s;t[0]instanceof et&&(r=t.shift()),t[t.length-1]instanceof Uint32Array&&(s=t.pop());const a=u=>{if(u){if(u instanceof jt)return[u];if(u instanceof zn)return u.batches;if(u instanceof st){if(u.type instanceof kt)return[new jt(new et(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(c=>a(c));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(c=>a(c));if(typeof u=="object"){const c=Object.keys(u),l=c.map(m=>new H([u[m]])),f=new et(c.map((m,y)=>new X(String(m),l[y].type))),[,d]=Ma(f,l);return d.length===0?[new jt(u)]:d}}}return[]},o=t.flatMap(u=>a(u));if(r=(i=r??((n=o[0])===null||n===void 0?void 0:n.schema))!==null&&i!==void 0?i:new et([]),!(r instanceof et))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of o){if(!(u instanceof jt))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!go(r,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=r,this.batches=o,this._offsets=s??Mf(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=Df(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?Iu.visit(new H(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,i=this.data.concat(t.flatMap(({data:r})=>r));return new zn(n,i.map(r=>new jt(n,r)))}slice(t,n){const i=this.schema;[t,n]=Bf({length:this.numRows},t,n);const r=Pf(this.data,this._offsets,t,n);return new zn(i,r.map(s=>new jt(i,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(i=>i.children[t]);if(n.length===0){const{type:i}=this.schema.fields[t],r=V({type:i,length:0,nullCount:0});n.push(r._changeLengthAndBackfillNullBitmap(this.numRows))}return new H(n)}return null}setChild(t,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(r=>r.name===t),n)}setChildAt(t,n){let i=this.schema,r=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new H([V({type:new ln,length:this.numRows})]));const s=i.fields.slice(),a=s[t].clone({type:n.type}),o=this.schema.fields.map((u,c)=>this.getChildAt(c));[s[t],o[t]]=[a,n],[i,r]=Ma(i,o)}return new zn(i,r)}select(t){const n=this.schema.fields.reduce((i,r,s)=>i.set(r.name,s),new Map);return this.selectAt(t.map(i=>n.get(i)).filter(i=>i>-1))}selectAt(t){const n=this.schema.selectAt(t),i=this.batches.map(r=>r.selectAt(t));return new zn(n,i)}assign(t){const n=this.schema.fields,[i,r]=t.schema.fields.reduce((o,u,c)=>{const[l,f]=o,d=n.findIndex(m=>m.name===u.name);return~d?f[d]=c:l.push(c),o},[[],[]]),s=this.schema.assign(t.schema),a=[...n.map((o,u)=>[u,r[u]]).map(([o,u])=>u===void 0?this.getChildAt(o):t.getChildAt(u)),...i.map(o=>t.getChildAt(o))].filter(Boolean);return new zn(...Ma(s,a))}};yd=Symbol.toStringTag;fn[yd]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Ei(Su),e.get=Ei(qt.getVisitFn(p.Struct)),e.set=Uf(he.getVisitFn(p.Struct)),e.indexOf=Vf(ks.getVisitFn(p.Struct)),e.getByteLength=Ei(We.getVisitFn(p.Struct)),"Table"))(fn.prototype);var gd;let jt=class cr{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof et))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=V({nullCount:0,type:new kt(this.schema.fields),children:this.schema.fields.map(n=>V({type:n.type,nullCount:0}))})]=t,!(this.data instanceof st))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=rl(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:i,children:r,length:s}=Object.keys(n).reduce((u,c,l)=>(u.children[l]=n[c],u.length=Math.max(u.length,n[c].length),u.fields[l]=X.new({name:c,type:n[c].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),a=new et(i),o=V({type:new kt(i),length:s,children:r,nullCount:0});[this.schema,this.data]=rl(a,o.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=_d(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return qt.visit(this.data,t)}set(t,n){return he.visit(this.data,t,n)}indexOf(t,n){return ks.visit(this.data,t,n)}getByteLength(t){return We.visit(this.data,t)}[Symbol.iterator](){return Iu.visit(new H([this.data]))}toArray(){return[...this]}concat(...t){return new fn(this.schema,[this,...t])}slice(t,n){const[i]=new H([this.data]).slice(t,n).data;return new cr(this.schema,i)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(i=>i.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new H([this.data.children[t]]):null}setChild(t,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(r=>r.name===t),n)}setChildAt(t,n){let i=this.schema,r=this.data;if(t>-1&&t<this.numCols){n||(n=new H([V({type:new ln,length:this.numRows})]));const s=i.fields.slice(),a=r.children.slice(),o=s[t].clone({type:n.type});[s[t],a[t]]=[o,n.data[0]],i=new et(s,new Map(this.schema.metadata)),r=V({type:new kt(s),children:a})}return new cr(i,r)}select(t){const n=this.schema.select(t),i=new kt(n.fields),r=[];for(const s of t){const a=this.schema.fields.findIndex(o=>o.name===s);~a&&(r[a]=this.data.children[a])}return new cr(n,V({type:i,length:this.numRows,children:r}))}selectAt(t){const n=this.schema.selectAt(t),i=t.map(s=>this.data.children[s]).filter(Boolean),r=V({type:new kt(n.fields),length:this.numRows,children:i});return new cr(n,r)}};gd=Symbol.toStringTag;jt[gd]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(jt.prototype);function rl(e,t,n=t.reduce((i,r)=>Math.max(i,r.length),0)){var i;const r=[...e.fields],s=[...t],a=(n+63&-64)>>3;for(const[o,u]of e.fields.entries()){const c=t[o];(!c||c.length!==n)&&(r[o]=u.clone({nullable:!0}),s[o]=(i=c==null?void 0:c._changeLengthAndBackfillNullBitmap(n))!==null&&i!==void 0?i:V({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(a)}))}return[e.assign(r),V({type:new kt(r),length:n,children:s})]}function _d(e,t,n=new Map){for(let i=-1,r=e.length;++i<r;){const a=e[i].type,o=t[i];if(I.isDictionary(a)){if(!n.has(a.id))o.dictionary&&n.set(a.id,o.dictionary);else if(n.get(a.id)!==o.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}a.children&&a.children.length>0&&_d(a.children,o.children,n)}return n}class Ru extends jt{constructor(t){const n=t.fields.map(r=>V({type:r.type})),i=V({type:new kt(t.fields),nullCount:0,children:n});super(t,i)}}var Ps;(function(e){e[e.BUFFER=0]="BUFFER"})(Ps||(Ps={}));var Us;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(Us||(Us={}));class En{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new En).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+ot),(n||new En).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):Us.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):Ps.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,Us.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,Ps.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,i){return En.startBodyCompression(t),En.addCodec(t,n),En.addMethod(t,i),En.endBodyCompression(t)}}class bd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,i){return t.prep(8,16),t.writeInt64(i),t.writeInt64(n),t.offset()}}let vd=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,i){return t.prep(8,16),t.writeInt64(i),t.writeInt64(n),t.offset()}},tn=class _o{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new _o).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+ot),(n||new _o).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new vd).__init(this.bb.__vector(this.bb_pos+i)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new bd).__init(this.bb.__vector(this.bb_pos+i)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new En).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},mi=class bo{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new bo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+ot),(n||new bo).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new tn).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var Vs;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Vs||(Vs={}));let vn=class Ne{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new Ne).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+ot),(n||new Ne).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Bi.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Vs.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new St).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Bi.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,Vs.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,t.createLong(0,0))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,i,r,s,a){return Ne.startMessage(t),Ne.addVersion(t,n),Ne.addHeaderType(t,i),Ne.addHeader(t,r),Ne.addBodyLength(t,s),Ne.addCustomMetadata(t,a),Ne.endMessage(t)}};var Kw=on;class Qw extends j{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return Kn.startNull(n),Kn.endNull(n)}visitInt(t,n){return Jt.startInt(n),Jt.addBitWidth(n,t.bitWidth),Jt.addIsSigned(n,t.isSigned),Jt.endInt(n)}visitFloat(t,n){return Pe.startFloatingPoint(n),Pe.addPrecision(n,t.precision),Pe.endFloatingPoint(n)}visitBinary(t,n){return Yn.startBinary(n),Yn.endBinary(n)}visitBool(t,n){return Hn.startBool(n),Hn.endBool(n)}visitUtf8(t,n){return Jn.startUtf8(n),Jn.endUtf8(n)}visitDecimal(t,n){return Ut.startDecimal(n),Ut.addScale(n,t.scale),Ut.addPrecision(n,t.precision),Ut.addBitWidth(n,t.bitWidth),Ut.endDecimal(n)}visitDate(t,n){return ss.startDate(n),ss.addUnit(n,t.unit),ss.endDate(n)}visitTime(t,n){return oe.startTime(n),oe.addUnit(n,t.unit),oe.addBitWidth(n,t.bitWidth),oe.endTime(n)}visitTimestamp(t,n){const i=t.timezone&&n.createString(t.timezone)||void 0;return ue.startTimestamp(n),ue.addUnit(n,t.unit),i!==void 0&&ue.addTimezone(n,i),ue.endTimestamp(n)}visitInterval(t,n){return Ue.startInterval(n),Ue.addUnit(n,t.unit),Ue.endInterval(n)}visitList(t,n){return Gn.startList(n),Gn.endList(n)}visitStruct(t,n){return Qn.startStruct_(n),Qn.endStruct_(n)}visitUnion(t,n){Vt.startTypeIdsVector(n,t.typeIds.length);const i=Vt.createTypeIdsVector(n,t.typeIds);return Vt.startUnion(n),Vt.addMode(n,t.mode),Vt.addTypeIds(n,i),Vt.endUnion(n)}visitDictionary(t,n){const i=this.visit(t.indices,n);return rn.startDictionaryEncoding(n),rn.addId(n,new Kw(t.id,0)),rn.addIsOrdered(n,t.isOrdered),i!==void 0&&rn.addIndexType(n,i),rn.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return De.startFixedSizeBinary(n),De.addByteWidth(n,t.byteWidth),De.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Me.startFixedSizeList(n),Me.addListSize(n,t.listSize),Me.endFixedSizeList(n)}visitMap(t,n){return as.startMap(n),as.addKeysSorted(n,t.keysSorted),as.endMap(n)}}const Pa=new Qw;function Jw(e,t=new Map){return new et(Zw(e,t),cs(e.customMetadata),t)}function wd(e){return new te(e.count,xd(e.columns),Sd(e.columns))}function Xw(e){return new Ye(wd(e.data),e.id,e.isDelta)}function Zw(e,t){return(e.fields||[]).filter(Boolean).map(n=>X.fromJSON(n,t))}function sl(e,t){return(e.children||[]).filter(Boolean).map(n=>X.fromJSON(n,t))}function xd(e){return(e||[]).reduce((t,n)=>[...t,new ci(n.count,t1(n.VALIDITY)),...xd(n.children)],[])}function Sd(e,t=[]){for(let n=-1,i=(e||[]).length;++n<i;){const r=e[n];r.VALIDITY&&t.push(new je(t.length,r.VALIDITY.length)),r.TYPE&&t.push(new je(t.length,r.TYPE.length)),r.OFFSET&&t.push(new je(t.length,r.OFFSET.length)),r.DATA&&t.push(new je(t.length,r.DATA.length)),t=Sd(r.children,t)}return t}function t1(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function e1(e,t){let n,i,r,s,a,o;return!t||!(s=e.dictionary)?(a=ol(e,sl(e,t)),r=new X(e.name,a,e.nullable,cs(e.customMetadata))):t.has(n=s.id)?(i=(i=s.indexType)?al(i):new kn,o=new On(t.get(n),i,n,s.isOrdered),r=new X(e.name,o,e.nullable,cs(e.customMetadata))):(i=(i=s.indexType)?al(i):new kn,t.set(n,a=ol(e,sl(e,t))),o=new On(a,i,n,s.isOrdered),r=new X(e.name,o,e.nullable,cs(e.customMetadata))),r||null}function cs(e){return new Map(Object.entries(e||{}))}function al(e){return new Ct(e.isSigned,e.bitWidth)}function ol(e,t){const n=e.type.name;switch(n){case"NONE":return new ln;case"null":return new ln;case"binary":return new vr;case"utf8":return new ki;case"bool":return new wr;case"list":return new Ri((t||[])[0]);case"struct":return new kt(t||[]);case"struct_":return new kt(t||[])}switch(n){case"int":{const i=e.type;return new Ct(i.isSigned,i.bitWidth)}case"floatingpoint":{const i=e.type;return new Nn(Nt[i.precision])}case"decimal":{const i=e.type;return new Is(i.scale,i.precision,i.bitWidth)}case"date":{const i=e.type;return new Ni(we[i.unit])}case"time":{const i=e.type;return new hn(q[i.unit],i.bitWidth)}case"timestamp":{const i=e.type;return new Es(q[i.unit],i.timezone)}case"interval":{const i=e.type;return new Oi(qe[i.unit])}case"union":{const i=e.type;return new xr(Zt[i.mode],i.typeIds||[],t||[])}case"fixedsizebinary":{const i=e.type;return new As(i.byteWidth)}case"fixedsizelist":{const i=e.type;return new Fi(i.listSize,(t||[])[0])}case"map":{const i=e.type;return new Sr((t||[])[0],i.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var si=on,n1=Qf,i1=Ci;class Ft{constructor(t,n,i,r){this._version=n,this._headerType=i,this.body=new Uint8Array(0),r&&(this._createHeader=()=>r),this._bodyLength=typeof t=="number"?t:t.low}static fromJSON(t,n){const i=new Ft(0,Xt.V4,n);return i._createHeader=r1(t,n),i}static decode(t){t=new i1(Q(t));const n=vn.getRootAsMessage(t),i=n.bodyLength(),r=n.version(),s=n.headerType(),a=new Ft(i,r,s);return a._createHeader=s1(n,s),a}static encode(t){const n=new n1;let i=-1;return t.isSchema()?i=et.encode(n,t.header()):t.isRecordBatch()?i=te.encode(n,t.header()):t.isDictionaryBatch()&&(i=Ye.encode(n,t.header())),vn.startMessage(n),vn.addVersion(n,Xt.V4),vn.addHeader(n,i),vn.addHeaderType(n,t.headerType),vn.addBodyLength(n,new si(t.bodyLength,0)),vn.finishMessageBuffer(n,vn.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof et)return new Ft(0,Xt.V4,tt.Schema,t);if(t instanceof te)return new Ft(n,Xt.V4,tt.RecordBatch,t);if(t instanceof Ye)return new Ft(n,Xt.V4,tt.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===tt.Schema}isRecordBatch(){return this.headerType===tt.RecordBatch}isDictionaryBatch(){return this.headerType===tt.DictionaryBatch}}class te{constructor(t,n,i){this._nodes=n,this._buffers=i,this._length=typeof t=="number"?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class Ye{constructor(t,n,i=!1){this._data=t,this._isDelta=i,this._id=typeof n=="number"?n:n.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class je{constructor(t,n){this.offset=typeof t=="number"?t:t.low,this.length=typeof n=="number"?n:n.low}}class ci{constructor(t,n){this.length=typeof t=="number"?t:t.low,this.nullCount=typeof n=="number"?n:n.low}}function r1(e,t){return()=>{switch(t){case tt.Schema:return et.fromJSON(e);case tt.RecordBatch:return te.fromJSON(e);case tt.DictionaryBatch:return Ye.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${tt[t]}, type: ${t} }`)}}function s1(e,t){return()=>{switch(t){case tt.Schema:return et.decode(e.header(new Oe));case tt.RecordBatch:return te.decode(e.header(new tn),e.version());case tt.DictionaryBatch:return Ye.decode(e.header(new mi),e.version())}throw new Error(`Unrecognized Message type: { name: ${tt[t]}, type: ${t} }`)}}X.encode=y1;X.decode=p1;X.fromJSON=e1;et.encode=m1;et.decode=a1;et.fromJSON=Jw;te.encode=g1;te.decode=o1;te.fromJSON=wd;Ye.encode=_1;Ye.decode=u1;Ye.fromJSON=Xw;ci.encode=b1;ci.decode=l1;je.encode=v1;je.decode=c1;function a1(e,t=new Map){const n=d1(e,t);return new et(n,ls(e),t)}function o1(e,t=Xt.V4){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new te(e.length(),h1(e),f1(e,t))}function u1(e,t=Xt.V4){return new Ye(te.decode(e.data(),t),e.id(),e.isDelta())}function c1(e){return new je(e.offset(),e.length())}function l1(e){return new ci(e.length(),e.nullCount())}function h1(e){const t=[];for(let n,i=-1,r=-1,s=e.nodesLength();++i<s;)(n=e.nodes(i))&&(t[++r]=ci.decode(n));return t}function f1(e,t){const n=[];for(let i,r=-1,s=-1,a=e.buffersLength();++r<a;)(i=e.buffers(r))&&(t<Xt.V4&&(i.bb_pos+=8*(r+1)),n[++s]=je.decode(i));return n}function d1(e,t){const n=[];for(let i,r=-1,s=-1,a=e.fieldsLength();++r<a;)(i=e.fields(r))&&(n[++s]=X.decode(i,t));return n}function ul(e,t){const n=[];for(let i,r=-1,s=-1,a=e.childrenLength();++r<a;)(i=e.children(r))&&(n[++s]=X.decode(i,t));return n}function p1(e,t){let n,i,r,s,a,o;return!t||!(o=e.dictionary())?(r=ll(e,ul(e,t)),i=new X(e.name(),r,e.nullable(),ls(e))):t.has(n=o.id().low)?(s=(s=o.indexType())?cl(s):new kn,a=new On(t.get(n),s,n,o.isOrdered()),i=new X(e.name(),a,e.nullable(),ls(e))):(s=(s=o.indexType())?cl(s):new kn,t.set(n,r=ll(e,ul(e,t))),a=new On(r,s,n,o.isOrdered()),i=new X(e.name(),a,e.nullable(),ls(e))),i||null}function ls(e){const t=new Map;if(e)for(let n,i,r=-1,s=Math.trunc(e.customMetadataLength());++r<s;)(n=e.customMetadata(r))&&(i=n.key())!=null&&t.set(i,n.value());return t}function cl(e){return new Ct(e.isSigned(),e.bitWidth())}function ll(e,t){const n=e.typeType();switch(n){case ft.NONE:return new ln;case ft.Null:return new ln;case ft.Binary:return new vr;case ft.Utf8:return new ki;case ft.Bool:return new wr;case ft.List:return new Ri((t||[])[0]);case ft.Struct_:return new kt(t||[])}switch(n){case ft.Int:{const i=e.type(new Jt);return new Ct(i.isSigned(),i.bitWidth())}case ft.FloatingPoint:{const i=e.type(new Pe);return new Nn(i.precision())}case ft.Decimal:{const i=e.type(new Ut);return new Is(i.scale(),i.precision(),i.bitWidth())}case ft.Date:{const i=e.type(new ss);return new Ni(i.unit())}case ft.Time:{const i=e.type(new oe);return new hn(i.unit(),i.bitWidth())}case ft.Timestamp:{const i=e.type(new ue);return new Es(i.unit(),i.timezone())}case ft.Interval:{const i=e.type(new Ue);return new Oi(i.unit())}case ft.Union:{const i=e.type(new Vt);return new xr(i.mode(),i.typeIdsArray()||[],t||[])}case ft.FixedSizeBinary:{const i=e.type(new De);return new As(i.byteWidth())}case ft.FixedSizeList:{const i=e.type(new Me);return new Fi(i.listSize(),(t||[])[0])}case ft.Map:{const i=e.type(new as);return new Sr((t||[])[0],i.keysSorted())}}throw new Error(`Unrecognized type: "${ft[n]}" (${n})`)}function m1(e,t){const n=t.fields.map(s=>X.encode(e,s));Oe.startFieldsVector(e,n.length);const i=Oe.createFieldsVector(e,n),r=t.metadata&&t.metadata.size>0?Oe.createCustomMetadataVector(e,[...t.metadata].map(([s,a])=>{const o=e.createString(`${s}`),u=e.createString(`${a}`);return St.startKeyValue(e),St.addKey(e,o),St.addValue(e,u),St.endKeyValue(e)})):-1;return Oe.startSchema(e),Oe.addFields(e,i),Oe.addEndianness(e,w1?Li.Little:Li.Big),r!==-1&&Oe.addCustomMetadata(e,r),Oe.endSchema(e)}function y1(e,t){let n=-1,i=-1,r=-1;const s=t.type;let a=t.typeId;I.isDictionary(s)?(a=s.dictionary.typeId,r=Pa.visit(s,e),i=Pa.visit(s.dictionary,e)):i=Pa.visit(s,e);const o=(s.children||[]).map(l=>X.encode(e,l)),u=re.createChildrenVector(e,o),c=t.metadata&&t.metadata.size>0?re.createCustomMetadataVector(e,[...t.metadata].map(([l,f])=>{const d=e.createString(`${l}`),m=e.createString(`${f}`);return St.startKeyValue(e),St.addKey(e,d),St.addValue(e,m),St.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),re.startField(e),re.addType(e,i),re.addTypeType(e,a),re.addChildren(e,u),re.addNullable(e,!!t.nullable),n!==-1&&re.addName(e,n),r!==-1&&re.addDictionary(e,r),c!==-1&&re.addCustomMetadata(e,c),re.endField(e)}function g1(e,t){const n=t.nodes||[],i=t.buffers||[];tn.startNodesVector(e,n.length);for(const a of n.slice().reverse())ci.encode(e,a);const r=e.endVector();tn.startBuffersVector(e,i.length);for(const a of i.slice().reverse())je.encode(e,a);const s=e.endVector();return tn.startRecordBatch(e),tn.addLength(e,new si(t.length,0)),tn.addNodes(e,r),tn.addBuffers(e,s),tn.endRecordBatch(e)}function _1(e,t){const n=te.encode(e,t.data);return mi.startDictionaryBatch(e),mi.addId(e,new si(t.id,0)),mi.addIsDelta(e,t.isDelta),mi.addData(e,n),mi.endDictionaryBatch(e)}function b1(e,t){return vd.createFieldNode(e,new si(t.length,0),new si(t.nullCount,0))}function v1(e,t){return bd.createBuffer(e,new si(t.offset,0),new si(t.length,0))}const w1=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),Fu=e=>`Expected ${tt[e]} Message in stream, but was null or length 0.`,Cu=e=>`Header pointer of flatbuffer-encoded ${tt[e]} Message is null or length 0.`,Id=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,Ed=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`;class Ad{constructor(t){this.source=t instanceof Ls?t:new Ls(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||t.value===-1&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?pt:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(Fu(t));return n.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const n=Q(this.source.read(t));if(n.byteLength<t)throw new Error(Ed(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(t=!1){const n=tt.Schema,i=this.readMessage(n),r=i==null?void 0:i.header();if(t&&!r)throw new Error(Cu(n));return r}readMetadataLength(){const t=this.source.read(ma),n=t&&new Ci(t),i=(n==null?void 0:n.readInt32(0))||0;return{done:i===0,value:i}}readMetadata(t){const n=this.source.read(t);if(!n)return pt;if(n.byteLength<t)throw new Error(Id(t,n.byteLength));return{done:!1,value:Ft.decode(n)}}}class x1{constructor(t,n){this.source=t instanceof Mi?t:Fh(t)?new Ds(t,n):new Mi(t)}[Symbol.asyncIterator](){return this}next(){return S(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done||t.value===-1&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?pt:t})}throw(t){return S(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return S(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return S(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(Fu(t));return n.value})}readMessageBody(t){return S(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);const n=Q(yield this.source.read(t));if(n.byteLength<t)throw new Error(Ed(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(t=!1){return S(this,void 0,void 0,function*(){const n=tt.Schema,i=yield this.readMessage(n),r=i==null?void 0:i.header();if(t&&!r)throw new Error(Cu(n));return r})}readMetadataLength(){return S(this,void 0,void 0,function*(){const t=yield this.source.read(ma),n=t&&new Ci(t),i=(n==null?void 0:n.readInt32(0))||0;return{done:i===0,value:i}})}readMetadata(t){return S(this,void 0,void 0,function*(){const n=yield this.source.read(t);if(!n)return pt;if(n.byteLength<t)throw new Error(Id(t,n.byteLength));return{done:!1,value:Ft.decode(n)}})}}class S1 extends Ad{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof nl?t:new nl(t)}next(){const{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:Ft.fromJSON(t.schema,tt.Schema)};if(this._dictionaryIndex<t.dictionaries.length){const n=t.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:Ft.fromJSON(n,tt.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const n=t.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:Ft.fromJSON(n,tt.RecordBatch)}}return this._body=[],pt}readMessageBody(t){return n(this._body);function n(i){return(i||[]).reduce((r,s)=>[...r,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE&&[s.TYPE]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...n(s.children)],[])}}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(Fu(t));return n.value}readSchema(){const t=tt.Schema,n=this.readMessage(t),i=n==null?void 0:n.header();if(!n||!i)throw new Error(Cu(t));return i}}const ma=4,vo="ARROW1",Er=new Uint8Array(vo.length);for(let e=0;e<vo.length;e+=1)Er[e]=vo.codePointAt(e);function Bu(e,t=0){for(let n=-1,i=Er.length;++n<i;)if(Er[n]!==e[t+n])return!1;return!0}const Pr=Er.length,Td=Pr+ma,I1=Pr*2+ma;class le extends Eu{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const n=this._impl.open(t);return ri(n)?n.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return ae.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return ae.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof le?t:uo(t)?k1(t):Fh(t)?R1(t):ri(t)?(()=>S(this,void 0,void 0,function*(){return yield le.from(yield t)}))():Ch(t)||Wo(t)||Bh(t)||zi(t)?O1(new Mi(t)):N1(new Ls(t))}static readAll(t){return t instanceof le?t.isSync()?hl(t):fl(t):uo(t)||ArrayBuffer.isView(t)||Cr(t)||Rh(t)?hl(t):fl(t)}}class js extends le{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return Ve(this,arguments,function*(){yield L(yield*rs(ei(this[Symbol.iterator]())))})}}class $s extends le{constructor(t){super(t),this._impl=t}readAll(){var t,n;return S(this,void 0,void 0,function*(){const i=new Array;try{for(var r=ei(this),s;s=yield r.next(),!s.done;){const a=s.value;i.push(a)}}catch(a){t={error:a}}finally{try{s&&!s.done&&(n=r.return)&&(yield n.call(r))}finally{if(t)throw t.error}}return i})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class kd extends js{constructor(t){super(t),this._impl=t}}class E1 extends $s{constructor(t){super(t),this._impl=t}}class Nd{constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,n){const i=this._loadVectors(t,n,this.schema.fields),r=V({type:new kt(this.schema.fields),length:t.length,children:i});return new jt(this.schema,r)}_loadDictionaryBatch(t,n){const{id:i,isDelta:r}=t,{dictionaries:s,schema:a}=this,o=s.get(i);if(r||!o){const u=a.dictionaries.get(i),c=this._loadVectors(t.data,n,[u]);return(o&&r?o.concat(new H(c)):new H(c)).memoize()}return o.memoize()}_loadVectors(t,n,i){return new Zf(n,t.nodes,t.buffers,this.dictionaries).visitMany(i)}}class zs extends Nd{constructor(t,n){super(n),this._reader=uo(t)?new S1(this._handle=t):new Ad(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=Rd(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):pt}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):pt}next(){if(this.closed)return pt;let t;const{_reader:n}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const i=t.header(),r=n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(i,r)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const i=t.header(),r=n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(i,r);this.dictionaries.set(i.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new Ru(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class qs extends Nd{constructor(t,n){super(n),this._reader=new x1(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return S(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return S(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=Rd(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return S(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):pt})}return(t){return S(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):pt})}next(){return S(this,void 0,void 0,function*(){if(this.closed)return pt;let t;const{_reader:n}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const i=t.header(),r=yield n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(i,r)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const i=t.header(),r=yield n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(i,r);this.dictionaries.set(i.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new Ru(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return S(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}}class Od extends zs{constructor(t,n){super(t instanceof il?t:new il(t),n)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var n;if(this.closed)return null;this._footer||this.open();const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(i&&this._handle.seek(i.offset)){const r=this._reader.readMessage(tt.RecordBatch);if(r!=null&&r.isRecordBatch()){const s=r.header(),a=this._reader.readMessageBody(r.bodyLength);return this._loadRecordBatch(s,a)}}return null}_readDictionaryBatch(t){var n;const i=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(i&&this._handle.seek(i.offset)){const r=this._reader.readMessage(tt.DictionaryBatch);if(r!=null&&r.isDictionaryBatch()){const s=r.header(),a=this._reader.readMessageBody(r.bodyLength),o=this._loadDictionaryBatch(s,a);this.dictionaries.set(s.id,o)}}}_readFooter(){const{_handle:t}=this,n=t.size-Td,i=t.readInt32(n),r=t.readAt(n-i,i);return Ir.decode(r)}_readNextMessageAndValidate(t){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(i&&this._handle.seek(i.offset))return this._reader.readMessage(t)}return null}}class A1 extends qs{constructor(t,...n){const i=typeof n[0]!="number"?n.shift():void 0,r=n[0]instanceof Map?n.shift():void 0;super(t instanceof Ds?t:new Ds(t,i),r)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(t){const n=Object.create(null,{open:{get:()=>super.open}});return S(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const i of this._footer.dictionaryBatches())i&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,t)})}readRecordBatch(t){var n;return S(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(i&&(yield this._handle.seek(i.offset))){const r=yield this._reader.readMessage(tt.RecordBatch);if(r!=null&&r.isRecordBatch()){const s=r.header(),a=yield this._reader.readMessageBody(r.bodyLength);return this._loadRecordBatch(s,a)}}return null})}_readDictionaryBatch(t){var n;return S(this,void 0,void 0,function*(){const i=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(i&&(yield this._handle.seek(i.offset))){const r=yield this._reader.readMessage(tt.DictionaryBatch);if(r!=null&&r.isDictionaryBatch()){const s=r.header(),a=yield this._reader.readMessageBody(r.bodyLength),o=this._loadDictionaryBatch(s,a);this.dictionaries.set(s.id,o)}}})}_readFooter(){return S(this,void 0,void 0,function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const n=t.size-Td,i=yield t.readInt32(n),r=yield t.readAt(n-i,i);return Ir.decode(r)})}_readNextMessageAndValidate(t){return S(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(t)}return null})}}class T1 extends zs{constructor(t,n){super(t,n)}_loadVectors(t,n,i){return new gw(n,t.nodes,t.buffers,this.dictionaries).visitMany(i)}}function Rd(e,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:e.autoDestroy}function*hl(e){const t=le.from(e);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function fl(e){return Ve(this,arguments,function*(){const n=yield L(le.from(e));try{if(!(yield L(n.open({autoDestroy:!1}))).closed)do yield yield L(n);while(!(yield L(n.reset().open())).closed)}finally{yield L(n.cancel())}})}function k1(e){return new js(new T1(e))}function N1(e){const t=e.peek(Pr+7&-8);return t&&t.byteLength>=4?Bu(t)?new kd(new Od(e.read())):new js(new zs(e)):new js(new zs(function*(){}()))}function O1(e){return S(this,void 0,void 0,function*(){const t=yield e.peek(Pr+7&-8);return t&&t.byteLength>=4?Bu(t)?new kd(new Od(yield e.read())):new $s(new qs(e)):new $s(new qs(function(){return Ve(this,arguments,function*(){})}()))})}function R1(e){return S(this,void 0,void 0,function*(){const{size:t}=yield e.stat(),n=new Ds(e,t);return t>=I1&&Bu(yield n.readAt(0,Pr+7&-8))?new E1(new A1(n)):new $s(new qs(n))})}class vt extends j{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...t){const n=r=>r.flatMap(s=>Array.isArray(s)?n(s):s instanceof jt?s.data.children:s.data),i=new vt;return i.visitMany(n(t)),i}visit(t){if(t instanceof H)return this.visitMany(t.data),this;const{type:n}=t;if(!I.isDictionary(n)){const{length:i,nullCount:r}=t;if(i>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");I.isNull(n)||be.call(this,r<=0?new Uint8Array(0):vu(t.offset,i,t.nullBitmap)),this.nodes.push(new ci(i,r))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function be(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new je(this._byteLength,t)),this._byteLength+=t,this}function F1(e){const{type:t,length:n,typeIds:i,valueOffsets:r}=e;if(be.call(this,i),t.mode===Zt.Sparse)return wo.call(this,e);if(t.mode===Zt.Dense){if(e.offset<=0)return be.call(this,r),wo.call(this,e);{const s=i.reduce((l,f)=>Math.max(l,f),i[0]),a=new Int32Array(s+1),o=new Int32Array(s+1).fill(-1),u=new Int32Array(n),c=Ho(-r[0],n,r);for(let l,f,d=-1;++d<n;)(f=o[l=i[d]])===-1&&(f=o[l]=c[l]),u[d]=c[d]-f,++a[l];be.call(this,u);for(let l,f=-1,d=t.children.length;++f<d;)if(l=e.children[f]){const m=t.typeIds[f],y=Math.min(n,a[m]);this.visit(l.slice(o[m],y))}}}return this}function C1(e){let t;return e.nullCount>=e.length?be.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?be.call(this,vu(e.offset,e.length,t)):be.call(this,Ts(e.values))}function Un(e){return be.call(this,e.values.subarray(0,e.length*e.stride))}function Fd(e){const{length:t,values:n,valueOffsets:i}=e,r=i[0],s=i[t],a=Math.min(s-r,n.byteLength-r);return be.call(this,Ho(-i[0],t,i)),be.call(this,n.subarray(r,r+a)),this}function Lu(e){const{length:t,valueOffsets:n}=e;return n&&be.call(this,Ho(n[0],t,n)),this.visit(e.children[0])}function wo(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}vt.prototype.visitBool=C1;vt.prototype.visitInt=Un;vt.prototype.visitFloat=Un;vt.prototype.visitUtf8=Fd;vt.prototype.visitBinary=Fd;vt.prototype.visitFixedSizeBinary=Un;vt.prototype.visitDate=Un;vt.prototype.visitTimestamp=Un;vt.prototype.visitTime=Un;vt.prototype.visitDecimal=Un;vt.prototype.visitList=Lu;vt.prototype.visitStruct=wo;vt.prototype.visitUnion=F1;vt.prototype.visitInterval=Un;vt.prototype.visitFixedSizeList=Lu;vt.prototype.visitMap=Lu;class Cd extends Eu{constructor(t){super(),this._position=0,this._started=!1,this._sink=new us,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,zt(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return ri(t)?t.then(n=>this.writeAll(n)):zi(t)?Uu(this,t):Pu(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof us?this._sink=t:(this._sink=new us,t&&kb(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&Nb(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!go(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof fn&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof jt&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!go(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof jt?t instanceof Ru||this._writeRecordBatch(t):t instanceof fn?this.writeAll(t.batches):Cr(t)&&this.writeAll(t)}_writeMessage(t,n=8){const i=n-1,r=Ft.encode(t),s=r.byteLength,a=this._writeLegacyIpcFormat?4:8,o=s+a+i&~i,u=o-s-a;return t.headerType===tt.RecordBatch?this._recordBatchBlocks.push(new Rn(o,t.bodyLength,this._position)):t.headerType===tt.DictionaryBatch&&this._dictionaryBlocks.push(new Rn(o,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(o-a)),s>0&&this._write(r),this._writePadding(u)}_write(t){if(this._started){const n=Q(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(Ft.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Er)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:i,bufferRegions:r,buffers:s}=vt.assemble(t),a=new te(t.numRows,i,r),o=Ft.from(a,n);return this._writeDictionaries(t)._writeMessage(o)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,i=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:r,nodes:s,bufferRegions:a,buffers:o}=vt.assemble(new H([t])),u=new te(t.length,s,a),c=new Ye(u,n,i),l=Ft.from(c,r);return this._writeMessage(l)._writeBodyBuffers(o)}_writeBodyBuffers(t){let n,i,r;for(let s=-1,a=t.length;++s<a;)(n=t[s])&&(i=n.byteLength)>0&&(this._write(n),(r=(i+7&-8)-i)>0&&this._writePadding(r));return this}_writeDictionaries(t){for(let[n,i]of t.dictionaries){let r=this._dictionaryDeltaOffsets.get(n)||0;if(r===0||(i=i==null?void 0:i.slice(r)).length>0)for(const s of i.data)this._writeDictionaryBatch(s,n,r>0),r+=s.length}return this}}class Du extends Cd{static writeAll(t,n){const i=new Du(n);return ri(t)?t.then(r=>i.writeAll(r)):zi(t)?Uu(i,t):Pu(i,t)}}class Mu extends Cd{static writeAll(t){const n=new Mu;return ri(t)?t.then(i=>n.writeAll(i)):zi(t)?Uu(n,t):Pu(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=Ir.encode(new Ir(t,Xt.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function Pu(e,t){let n=t;t instanceof fn&&(n=t.batches,e.reset(void 0,t.schema));for(const i of n)e.write(i);return e.finish()}function Uu(e,t){var n,i,r,s;return S(this,void 0,void 0,function*(){try{for(n=ei(t);i=yield n.next(),!i.done;){const a=i.value;e.write(a)}}catch(a){r={error:a}}finally{try{i&&!i.done&&(s=n.return)&&(yield s.call(n))}finally{if(r)throw r.error}}return e.finish()})}function Bd(e,t="stream"){return(t==="stream"?Du:Mu).writeAll(e).toUint8Array(!0)}var B1=Object.create,Ld=Object.defineProperty,L1=Object.getOwnPropertyDescriptor,D1=Object.getOwnPropertyNames,M1=Object.getPrototypeOf,P1=Object.prototype.hasOwnProperty,U1=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),V1=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of D1(t))!P1.call(e,r)&&r!==n&&Ld(e,r,{get:()=>t[r],enumerable:!(i=L1(t,r))||i.enumerable});return e},j1=(e,t,n)=>(n=e!=null?B1(M1(e)):{},V1(t||!e||!e.__esModule?Ld(n,"default",{value:e,enumerable:!0}):n,e)),$1=U1((e,t)=>{t.exports=Worker}),z1=(e=>(e[e.UNDEFINED=0]="UNDEFINED",e[e.AUTOMATIC=1]="AUTOMATIC",e[e.READ_ONLY=2]="READ_ONLY",e[e.READ_WRITE=3]="READ_WRITE",e))(z1||{}),q1=(e=>(e[e.NONE=0]="NONE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARNING=3]="WARNING",e[e.ERROR=4]="ERROR",e))(q1||{}),W1=(e=>(e[e.NONE=0]="NONE",e[e.CONNECT=1]="CONNECT",e[e.DISCONNECT=2]="DISCONNECT",e[e.OPEN=3]="OPEN",e[e.QUERY=4]="QUERY",e[e.INSTANTIATE=5]="INSTANTIATE",e))(W1||{}),Y1=(e=>(e[e.NONE=0]="NONE",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR",e[e.START=3]="START",e[e.RUN=4]="RUN",e[e.CAPTURE=5]="CAPTURE",e))(Y1||{}),H1=(e=>(e[e.NONE=0]="NONE",e[e.WEB_WORKER=1]="WEB_WORKER",e[e.NODE_WORKER=2]="NODE_WORKER",e[e.BINDINGS=3]="BINDINGS",e[e.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",e))(H1||{}),G1=class{constructor(e=2){this.level=e}log(e){e.level>=this.level&&console.log(e)}},K1=(e=>(e[e.SUCCESS=0]="SUCCESS",e))(K1||{}),Q1=class{constructor(e,t){this._bindings=e,this._conn=t}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(e){return e(this._bindings,this._conn)}async query(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.runQuery(this._conn,e),n=le.from(t);return console.assert(n.isSync(),"Reader is not sync"),console.assert(n.isFile(),"Reader is not file"),new fn(n)}async send(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.startPendingQuery(this._conn,e);for(;t==null;)t=await this._bindings.pollPendingQuery(this._conn);let n=new Dd(this._bindings,this._conn,t),i=await le.from(n);return console.assert(i.isAsync()),console.assert(i.isStream()),i}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(e){return await this._bindings.getTableNames(this._conn,e)}async prepare(e){let t=await this._bindings.createPrepared(this._conn,e);return new J1(this._bindings,this._conn,t)}async insertArrowTable(e,t){let n=Bd(e,"stream");await this.insertArrowFromIPCStream(n,t)}async insertArrowFromIPCStream(e,t){await this._bindings.insertArrowFromIPCStream(this._conn,e,t)}async insertCSVFromPath(e,t){await this._bindings.insertCSVFromPath(this._conn,e,t)}async insertJSONFromPath(e,t){await this._bindings.insertJSONFromPath(this._conn,e,t)}},Dd=class{constructor(e,t,n){this.db=e,this.conn=t,this.header=n,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let e;return this._inFlight!=null?(e=await this._inFlight,this._inFlight=null):e=await this.db.fetchQueryResults(this.conn),this._depleted=e.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:e}}[Symbol.asyncIterator](){return this}},J1=class{constructor(e,t,n){this.bindings=e,this.connectionId=t,this.statementId=n}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...e){let t=await this.bindings.runPrepared(this.connectionId,this.statementId,e),n=le.from(t);return console.assert(n.isSync()),console.assert(n.isFile()),new fn(n)}async send(...e){let t=await this.bindings.sendPrepared(this.connectionId,this.statementId,e),n=new Dd(this.bindings,this.connectionId,t),i=await le.from(n);return console.assert(i.isAsync()),console.assert(i.isStream()),i}},X1=(e=>(e.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",e.CLOSE_PREPARED="CLOSE_PREPARED",e.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",e.CONNECT="CONNECT",e.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",e.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",e.CREATE_PREPARED="CREATE_PREPARED",e.DISCONNECT="DISCONNECT",e.DROP_FILE="DROP_FILE",e.DROP_FILES="DROP_FILES",e.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",e.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",e.FLUSH_FILES="FLUSH_FILES",e.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",e.GET_TABLE_NAMES="GET_TABLE_NAMES",e.GET_VERSION="GET_VERSION",e.GLOB_FILE_INFOS="GLOB_FILE_INFOS",e.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",e.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",e.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",e.INSTANTIATE="INSTANTIATE",e.OPEN="OPEN",e.PING="PING",e.POLL_PENDING_QUERY="POLL_PENDING_QUERY",e.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",e.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",e.REGISTER_FILE_URL="REGISTER_FILE_URL",e.RESET="RESET",e.RUN_PREPARED="RUN_PREPARED",e.RUN_QUERY="RUN_QUERY",e.SEND_PREPARED="SEND_PREPARED",e.START_PENDING_QUERY="START_PENDING_QUERY",e.TOKENIZE="TOKENIZE",e))(X1||{}),Z1=(e=>(e.CONNECTION_INFO="CONNECTION_INFO",e.ERROR="ERROR",e.FEATURE_FLAGS="FEATURE_FLAGS",e.FILE_BUFFER="FILE_BUFFER",e.FILE_INFOS="FILE_INFOS",e.FILE_SIZE="FILE_SIZE",e.FILE_STATISTICS="FILE_STATISTICS",e.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",e.LOG="LOG",e.OK="OK",e.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",e.QUERY_PLAN="QUERY_PLAN",e.QUERY_RESULT="QUERY_RESULT",e.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",e.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",e.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",e.REGISTERED_FILE="REGISTERED_FILE",e.SCRIPT_TOKENS="SCRIPT_TOKENS",e.SUCCESS="SUCCESS",e.TABLE_NAMES="TABLE_NAMES",e.VERSION_STRING="VERSION_STRING",e))(Z1||{}),W=class{constructor(t,n){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=t,this.data=n,this.promise=new Promise((i,r)=>{this.promiseResolver=i,this.promiseRejecter=r})}};function hs(e){switch(e.typeId){case p.Binary:return{sqlType:"binary"};case p.Bool:return{sqlType:"bool"};case p.Date:return{sqlType:"date"};case p.DateDay:return{sqlType:"date32[d]"};case p.DateMillisecond:return{sqlType:"date64[ms]"};case p.Decimal:{let t=e;return{sqlType:"decimal",precision:t.precision,scale:t.scale}}case p.Float:return{sqlType:"float"};case p.Float16:return{sqlType:"float16"};case p.Float32:return{sqlType:"float32"};case p.Float64:return{sqlType:"float64"};case p.Int:return{sqlType:"int32"};case p.Int16:return{sqlType:"int16"};case p.Int32:return{sqlType:"int32"};case p.Int64:return{sqlType:"int64"};case p.Uint16:return{sqlType:"uint16"};case p.Uint32:return{sqlType:"uint32"};case p.Uint64:return{sqlType:"uint64"};case p.Uint8:return{sqlType:"uint8"};case p.IntervalDayTime:return{sqlType:"interval[dt]"};case p.IntervalYearMonth:return{sqlType:"interval[m]"};case p.List:return{sqlType:"list",valueType:hs(e.valueType)};case p.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:e.byteWidth};case p.Null:return{sqlType:"null"};case p.Utf8:return{sqlType:"utf8"};case p.Struct:return{sqlType:"struct",fields:e.children.map(t=>xo(t.name,t.type))};case p.Map:{let t=e;return{sqlType:"map",keyType:hs(t.keyType),valueType:hs(t.valueType)}}case p.Time:return{sqlType:"time[s]"};case p.TimeMicrosecond:return{sqlType:"time[us]"};case p.TimeMillisecond:return{sqlType:"time[ms]"};case p.TimeNanosecond:return{sqlType:"time[ns]"};case p.TimeSecond:return{sqlType:"time[s]"};case p.Timestamp:return{sqlType:"timestamp",timezone:e.timezone||void 0};case p.TimestampSecond:return{sqlType:"timestamp[s]",timezone:e.timezone||void 0};case p.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:e.timezone||void 0};case p.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:e.timezone||void 0};case p.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:e.timezone||void 0}}throw new Error(`unsupported arrow type: ${e.toString()}`)}function xo(e,t){let n=hs(t);return n.name=e,n}var tx=new TextEncoder,ex=class{constructor(e,t=null){this._onInstantiationProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=e,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),t!=null&&this.attach(t)}get logger(){return this._logger}attach(e){this._worker=e,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((t,n)=>{this._workerShutdownResolver=t})}detach(){!this._worker||(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){!this._worker||(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(e,t=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let n=this._nextMessageId++;return this._pendingRequests.set(n,e),this._worker.postMessage({messageId:n,type:e.type,data:e.data},t),await e.promise}onMessage(e){let t=e.data;switch(t.type){case"LOG":{this._logger.log(t.data);return}case"INSTANTIATE_PROGRESS":{for(let i of this._onInstantiationProgress)i(t.data);return}}let n=this._pendingRequests.get(t.requestId);if(!n){console.warn(`unassociated response: [${t.requestId}, ${t.type.toString()}]`);return}if(this._pendingRequests.delete(t.requestId),t.type=="ERROR"){let i=new Error(t.data.message);i.name=t.data.name,i.stack=t.data.stack,n.promiseRejecter(i);return}switch(n.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(t.type=="OK"){n.promiseResolver(t.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],t.type=="OK"){n.promiseResolver(t.data);return}break;case"GLOB_FILE_INFOS":if(t.type=="FILE_INFOS"){n.promiseResolver(t.data);return}break;case"GET_VERSION":if(t.type=="VERSION_STRING"){n.promiseResolver(t.data);return}break;case"GET_FEATURE_FLAGS":if(t.type=="FEATURE_FLAGS"){n.promiseResolver(t.data);return}break;case"GET_TABLE_NAMES":if(t.type=="TABLE_NAMES"){n.promiseResolver(t.data);return}break;case"TOKENIZE":if(t.type=="SCRIPT_TOKENS"){n.promiseResolver(t.data);return}break;case"COPY_FILE_TO_BUFFER":if(t.type=="FILE_BUFFER"){n.promiseResolver(t.data);return}break;case"EXPORT_FILE_STATISTICS":if(t.type=="FILE_STATISTICS"){n.promiseResolver(t.data);return}break;case"CONNECT":if(t.type=="CONNECTION_INFO"){n.promiseResolver(t.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(t.type=="QUERY_RESULT"){n.promiseResolver(t.data);return}break;case"SEND_PREPARED":if(t.type=="QUERY_RESULT_HEADER"){n.promiseResolver(t.data);return}break;case"START_PENDING_QUERY":if(t.type=="QUERY_RESULT_HEADER_OR_NULL"){n.promiseResolver(t.data);return}break;case"POLL_PENDING_QUERY":if(t.type=="QUERY_RESULT_HEADER_OR_NULL"){n.promiseResolver(t.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],t.type=="SUCCESS"){n.promiseResolver(t.data);return}break;case"FETCH_QUERY_RESULTS":if(t.type=="QUERY_RESULT_CHUNK"){n.promiseResolver(t.data);return}break;case"CREATE_PREPARED":if(t.type=="PREPARED_STATEMENT_ID"){n.promiseResolver(t.data);return}break}n.promiseRejecter(new Error(`unexpected response type: ${t.type.toString()}`))}onError(e){console.error(e),console.error(`error in duckdb worker: ${e.message}`),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn(`worker terminated with ${this._pendingRequests.size} pending requests`);return}this._pendingRequests.clear()}async reset(){let e=new W("RESET",null);return await this.postTask(e)}async ping(){let e=new W("PING",null);await this.postTask(e)}async dropFile(e){let t=new W("DROP_FILE",e);return await this.postTask(t)}async dropFiles(){let e=new W("DROP_FILES",null);return await this.postTask(e)}async flushFiles(){let e=new W("FLUSH_FILES",null);return await this.postTask(e)}async instantiate(e,t=null,n=i=>{}){this._onInstantiationProgress.push(n);let i=new W("INSTANTIATE",[e,t]);return await this.postTask(i)}async getVersion(){let e=new W("GET_VERSION",null);return await this.postTask(e)}async getFeatureFlags(){let e=new W("GET_FEATURE_FLAGS",null);return await this.postTask(e)}async open(e){let t=new W("OPEN",e);await this.postTask(t)}async tokenize(e){let t=new W("TOKENIZE",e);return await this.postTask(t)}async connectInternal(){let e=new W("CONNECT",null);return await this.postTask(e)}async connect(){let e=await this.connectInternal();return new Q1(this,e)}async disconnect(e){let t=new W("DISCONNECT",e);await this.postTask(t)}async runQuery(e,t){let n=new W("RUN_QUERY",[e,t]);return await this.postTask(n)}async startPendingQuery(e,t){let n=new W("START_PENDING_QUERY",[e,t]);return await this.postTask(n)}async pollPendingQuery(e){let t=new W("POLL_PENDING_QUERY",e);return await this.postTask(t)}async cancelPendingQuery(e){let t=new W("CANCEL_PENDING_QUERY",e);return await this.postTask(t)}async fetchQueryResults(e){let t=new W("FETCH_QUERY_RESULTS",e);return await this.postTask(t)}async getTableNames(e,t){let n=new W("GET_TABLE_NAMES",[e,t]);return await this.postTask(n)}async createPrepared(e,t){let n=new W("CREATE_PREPARED",[e,t]);return await this.postTask(n)}async closePrepared(e,t){let n=new W("CLOSE_PREPARED",[e,t]);await this.postTask(n)}async runPrepared(e,t,n){let i=new W("RUN_PREPARED",[e,t,n]);return await this.postTask(i)}async sendPrepared(e,t,n){let i=new W("SEND_PREPARED",[e,t,n]);return await this.postTask(i)}async globFiles(e){let t=new W("GLOB_FILE_INFOS",e);return await this.postTask(t)}async registerFileText(e,t){let n=tx.encode(t);await this.registerFileBuffer(e,n)}async registerFileURL(e,t,n,i){t===void 0&&(t=e);let r=new W("REGISTER_FILE_URL",[e,t,n,i]);await this.postTask(r)}async registerEmptyFileBuffer(e){let t=new W("REGISTER_FILE_BUFFER",[e,new Uint8Array]);await this.postTask(t)}async registerFileBuffer(e,t){let n=new W("REGISTER_FILE_BUFFER",[e,t]);await this.postTask(n,[t.buffer])}async registerFileHandle(e,t,n,i){let r=new W("REGISTER_FILE_HANDLE",[e,t,n,i]);await this.postTask(r,[])}async collectFileStatistics(e,t){let n=new W("COLLECT_FILE_STATISTICS",[e,t]);await this.postTask(n,[])}async exportFileStatistics(e){let t=new W("EXPORT_FILE_STATISTICS",e);return await this.postTask(t,[])}async copyFileToBuffer(e){let t=new W("COPY_FILE_TO_BUFFER",e);return await this.postTask(t)}async copyFileToPath(e,t){let n=new W("COPY_FILE_TO_PATH",[e,t]);await this.postTask(n)}async insertArrowFromIPCStream(e,t,n){if(t.length==0)return;let i=new W("INSERT_ARROW_FROM_IPC_STREAM",[e,t,n]);await this.postTask(i,[t.buffer])}async insertCSVFromPath(e,t,n){if(n.columns!==void 0){let r=[];for(let s in n.columns){let a=n.columns[s];r.push(xo(s,a))}n.columnsFlat=r,delete n.columns}let i=new W("IMPORT_CSV_FROM_PATH",[e,t,n]);await this.postTask(i)}async insertJSONFromPath(e,t,n){if(n.columns!==void 0){let r=[];for(let s in n.columns){let a=n.columns[s];r.push(xo(s,a))}n.columnsFlat=r,delete n.columns}let i=new W("IMPORT_JSON_FROM_PATH",[e,t,n]);await this.postTask(i)}},nx=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),ix=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),rx=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),sx=()=>(async e=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),ax={name:"@duckdb/duckdb-wasm",version:"1.26.0",description:"DuckDB powered by WebAssembly",license:"MIT",repository:{type:"git",url:"https://github.com/duckdb/duckdb-wasm.git"},keywords:["sql","duckdb","relational","database","data","query","wasm","analytics","olap","arrow","parquet","json","csv"],dependencies:{"apache-arrow":"^11.0.0"},devDependencies:{"@types/emscripten":"^1.39.6","@types/jasmine":"^4.3.1","@typescript-eslint/eslint-plugin":"^5.53.0","@typescript-eslint/parser":"^5.49.0",esbuild:"^0.15.12",eslint:"^8.35.0","eslint-plugin-jasmine":"^4.1.3","eslint-plugin-react":"^7.32.2","fast-glob":"^3.2.12",jasmine:"^4.5.0","jasmine-core":"^5.0.0","jasmine-spec-reporter":"^7.0.0","js-sha256":"^0.9.0",karma:"^6.4.2","karma-chrome-launcher":"^3.1.1","karma-coverage":"^2.2.0","karma-firefox-launcher":"^2.1.2","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.0.0","karma-sourcemap-loader":"^0.3.8","karma-spec-reporter":"^0.0.36","make-dir":"^3.1.0",nyc:"^15.1.0",prettier:"^2.8.4",puppeteer:"^19.10.0",rimraf:"^4.3.0",s3rver:"^3.7.1",typedoc:"^0.23.27",typescript:"^4.8.4","wasm-feature-detect":"^1.5.1","web-worker":"^1.2.0"},scripts:{"build:debug":"node bundle.mjs debug && tsc --emitDeclarationOnly","build:release":"node bundle.mjs release && tsc --emitDeclarationOnly",docs:"typedoc",report:"node ./coverage.mjs","test:node":"node --enable-source-maps --experimental-wasm-eh ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:debug":"node --inspect-brk --enable-source-maps --experimental-wasm-eh ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:coverage":"nyc -r json --report-dir ./coverage/node node --experimental-wasm-eh ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:firefox":"karma start ./karma/tests-firefox.cjs","test:chrome":"karma start ./karma/tests-chrome.cjs","test:chrome:eh":"karma start ./karma/tests-chrome-eh.cjs","test:chrome:coverage":"karma start ./karma/tests-chrome-coverage.cjs","test:browser":"karma start ./karma/tests-all.cjs","test:browser:debug":"karma start ./karma/tests-debug.cjs",test:"npm run test:chrome && npm run test:node","test:coverage":"npm run test:chrome:coverage && npm run test:node:coverage && npm run report",lint:"eslint src test"},files:["dist","!dist/types/test"],main:"dist/duckdb-browser.cjs",module:"dist/duckdb-browser.mjs",types:"dist/duckdb-browser.d.ts",jsdelivr:"dist/duckdb-browser.cjs",unpkg:"dist/duckdb-browser.mjs",sideEffects:!1,browser:{fs:!1,path:!1,perf_hooks:!1,os:!1,worker_threads:!1},exports:{"./dist/duckdb-mvp.wasm":"./dist/duckdb-mvp.wasm","./dist/duckdb-eh.wasm":"./dist/duckdb-eh.wasm","./dist/duckdb-coi.wasm":"./dist/duckdb-coi.wasm","./dist/duckdb-browser":"./dist/duckdb-browser.mjs","./dist/duckdb-browser.cjs":"./dist/duckdb-browser.cjs","./dist/duckdb-browser.mjs":"./dist/duckdb-browser.mjs","./dist/duckdb-browser-blocking":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.mjs":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.cjs":"./dist/duckdb-browser-blocking.cjs","./dist/duckdb-browser-coi.pthread.worker.js":"./dist/duckdb-browser-coi.pthread.worker.js","./dist/duckdb-browser-coi.worker.js":"./dist/duckdb-browser-coi.worker.js","./dist/duckdb-browser-eh.worker.js":"./dist/duckdb-browser-eh.worker.js","./dist/duckdb-browser-mvp.worker.js":"./dist/duckdb-browser-mvp.worker.js","./dist/duckdb-node":"./dist/duckdb-node.cjs","./dist/duckdb-node.cjs":"./dist/duckdb-node.cjs","./dist/duckdb-node-blocking":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-blocking.cjs":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-eh.worker.cjs":"./dist/duckdb-node-eh.worker.cjs","./dist/duckdb-node-mvp.worker.cjs":"./dist/duckdb-node-mvp.worker.cjs","./blocking":{browser:{types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},node:{types:"./dist/duckdb-node-blocking.d.ts",require:"./dist/duckdb-node-blocking.cjs",import:"./dist/duckdb-node-blocking.cjs"},types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},".":{browser:{types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"},node:{types:"./dist/duckdb-node.d.ts",import:"./dist/duckdb-node.cjs",require:"./dist/duckdb-node.cjs"},types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"}}},Vu=ax.version.split(".");Vu[0];Vu[1];Vu[2];var ox=()=>typeof navigator>"u",Ua=null,Va=null,ja=null,$a=null,za=null;async function ux(){return Ua==null&&(Ua=typeof BigInt64Array<"u"),Va==null&&(Va=await ix()),ja==null&&(ja=await sx()),$a==null&&($a=await rx()),za==null&&(za=await nx()),{bigInt64Array:Ua,crossOriginIsolated:ox()||globalThis.crossOriginIsolated||!1,wasmExceptions:Va,wasmSIMD:$a,wasmThreads:ja,wasmBulkMemory:za}}async function cx(e){let t=await ux();if(t.wasmExceptions){if(t.wasmSIMD&&t.wasmThreads&&t.crossOriginIsolated&&e.coi)return{mainModule:e.coi.mainModule,mainWorker:e.coi.mainWorker,pthreadWorker:e.coi.pthreadWorker};if(e.eh)return{mainModule:e.eh.mainModule,mainWorker:e.eh.mainWorker,pthreadWorker:null}}return{mainModule:e.mvp.mainModule,mainWorker:e.mvp.mainWorker,pthreadWorker:null}}j1($1());function lx(){let e=new TextDecoder;return t=>(typeof SharedArrayBuffer<"u"&&t.buffer instanceof SharedArrayBuffer&&(t=new Uint8Array(t)),e.decode(t))}lx();var hx=(e=>(e[e.BUFFER=0]="BUFFER",e[e.NODE_FS=1]="NODE_FS",e[e.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",e[e.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",e[e.HTTP=4]="HTTP",e[e.S3=5]="S3",e))(hx||{});const fx=""+new URL("../assets/duckdb-mvp.a4aa3c03.wasm",import.meta.url).href,dx=""+new URL("../assets/duckdb-browser-mvp.worker.91331f4b.js",import.meta.url).href,px=""+new URL("../assets/duckdb-eh.13ec0755.wasm",import.meta.url).href,mx=""+new URL("../assets/duckdb-browser-eh.worker.80bdeff3.js",import.meta.url).href;class yx extends Ke{constructor(t){super(),this.sources=[],this.db=null,this.conn=null,t.sources?this.sources.push.apply(this.sources,t.sources):t.name&&this.sources.push(t)}register(t){this.sources.push(t)}async query(t){return await this.conn.query(t)}async init(){const n=await cx({mvp:{mainModule:fx,mainWorker:dx},eh:{mainModule:px,mainWorker:mx}}),i=new Worker(n.mainWorker),r=new G1;this.db=new ex(r,i),await this.db.instantiate(n.mainModule,n.pthreadWorker),this.conn=await this.db.connect();for(let s of this.sources)await this.load(s)}async load(t){let n=t.name;if(t.csv)await this.db.registerFileText(n,t.csv),await this.conn.insertCSVFromPath(n,{name:n,schema:"main",detect:!0,header:!0});else if(t.url){let r=await(await fetch(t.url)).arrayBuffer();const s=new Uint8Array(r);await this.db.registerFileBuffer(n,s),await this.conn.insertCSVFromPath(n,{name:n,schema:"main",detect:!0,header:!0})}else if(t.parquet){const i=`${Om}/${t.parquet}`;console.log("parquet_name and registration path:",t.parquet,i),await this.db.registerFileURL(t.parquet,i,4,!1);const r=`CREATE TABLE ${t.name} AS SELECT * FROM parquet_scan(${t.parquet})`;console.log("parquet loading query:",r),await this.query(r);const a=(await this.conn.query("SHOW ALL TABLES")).toArray().map(Object.fromEntries);console.log("database DIAGNOSTIC: ",a)}return this}async _execute(t,...n){for(const i of t){const r=i.q;let s=await this.conn.query(r),a=s.toArray().map(Object.fromEntries);return a.columns=s.schema.fields.map(o=>o.name),console.debug("duckdb.execute",r,a,...n),this.emit("data",a,...n),this.emit("debug",a),a}}}var wn=(e=>(e.LITERAL="literal",e.AST="ast",e.LIST="list",e.ANY="any",e.OPT="opt",e.FIXEDMULTI="fixedmulti",e.MULTI="multi",e))(wn||{});let dl=hy(e=>e.length>0);class gx{constructor(t){this.binding={},this.spec={},this.spec=t}update(t){return this.binding=Mo(this.binding,t),this}snapshot(){return this.binding}restoreSnapshot(t){this.binding=t}toSQL(){return So(this.binding,this.spec)}}function So(e,t){let n=t.children??[],i=Uy(So,[e]),r=[],s;switch(t==null?void 0:t.type){case wn.LITERAL:return t.value;case wn.AST:return r=n.map(i),dl(r).join("");case wn.LIST:return r=n.map(i),dl(r).join(t.delim);case wn.ANY:if(s=e[t.id]??t.default??0,s=="inf")return"9e999";if(s=="-inf")return"-9e999";let a=+s;return Number.isNaN(a)?`'${s}'`:s<0||s>=n.length?a:i(n[a]);case wn.OPT:return s=e[t.id]??t.default??0,Ey(s,[1,"selected"])?i(n[0]):"";case wn.FIXEDMULTI:case wn.MULTI:let o=e[t.id]??t.default??[];return Do(Array,o)||(o=[o]),o.map(u=>So(u,n[0])).join(t.delim??"");default:return""}}class _x extends Ke{constructor(t){super(),this.spec={},this.dt=null,this.backend=null,this.bindings={},this.spec=t,this.dt=new gx(t.difftree),this.backend=Do(String,t.backend)?Rm(vb)[t.backend]:t.backend,this.backend&&this.backend.on("data",n=>{this.emit("data",n)})}snapshot(){return this.dt.snapshot()}async _execute(t,n){let i=t[0]??{};const r=this.dt.update(i).toSQL();if(console.log("ClientDT.execute",r,i),this.emit("debug",r),this.backend)return this.backend.execute(r,n)}}class bx extends Ke{constructor(t){super(),this.q=[],this.q=t.data??[]}async execute(t,n){this.emit("data",t??this.q,n)}}class vx extends Ke{constructor(t){super();let n=t.attrs??[];this.gen=i=>{let r=n.map(s=>[s,Math.ceil(Math.random()*100)]);return r.push(["id",i]),wy(r)}}async _execute(t,...n){this.emit("data",jy(this.gen,10),...n)}}class wx extends Ke{constructor(t){super(),this.backend=t.backend,this.query=t.query,this.name=t.name,this.params=t.defaults??{}}snapshot(){return ps(this.params)}restoreSnapshot(t){this.params=t}prepareQuery(t,n){let i=t;return eh((r,s)=>{i=i.replaceAll(`var(${s})`,r)},n),i}async _execute(t){t=Array.isArray(t)?t:[t],t.forEach(r=>{this.params=Mo(this.params,r)});let n=this.prepareQuery(this.query,this.params),i=await this.backend._execute([{q:n}],this.name);return this.emit("data",i,this.name),i}}const J=Array.isArray;function Wt(e){return e!=null?J(e)?e:[e]:[]}function xx(e=0,t=1/0){return`${pl(e)} < row_number() && row_number() <= ${pl(t)}`}function pl(e){return e<0?`count() + ${e}`:e}class Md{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(xx(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Wt(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,i){return this.__pivot(this,t,n,i)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...i){return this.__lookup(this,t,n,i.flat())}join(t,n,i,r){return this.__join(this,t,n,i,r)}join_left(t,n,i,r){const s={...r,left:!0,right:!1};return this.__join(this,t,n,i,s)}join_right(t,n,i,r){const s={...r,left:!1,right:!0};return this.__join(this,t,n,i,s)}join_full(t,n,i,r){const s={...r,left:!0,right:!0};return this.__join(this,t,n,i,s)}cross(t,n,i){return this.__cross(this,t,n,i)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function D(e){throw Error(e)}function Bt(e){return typeof e=="number"}function lt(e){return typeof e=="function"}function ya(e,t){const n=Array(e);if(lt(t))for(let i=0;i<e;++i)n[i]=t(i);else n.fill(t);return n}class Sx extends Md{constructor(t,n,i,r,s,a,o){super(o),this._names=Object.freeze(t),this._data=i,this._total=n,this._nrows=r?r.count():n,this._mask=n!==this._nrows&&r||null,this._group=s||null,this._order=a||null}create(t){D("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){D("Not implemented")}*values(t){const n=this.getter(t),i=this.numRows();for(let r=0;r<i;++r)yield n(r)}get(t,n=0){D("Not implemented")}getter(t){D("Not implemented")}objects(t){D("Not implemented")}object(t){D("Not implemented")}[Symbol.iterator](){D("Not implemented")}print(t={}){Bt(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),i=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(i),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),i=new Uint32Array(n),r=this.isOrdered(),s=this.mask();let a=-1;if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))i[++a]=o;else for(let o=0;o<n;++o)i[++a]=o;if(t&&r){const o=this._order,u=this._data;i.sort((c,l)=>o(c,l,u))}return(t||!r)&&(this._index=i),i}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:i}=this._group,r=ya(i,()=>[]),s=this._index,a=this.mask(),o=this.numRows();if(s&&this.isOrdered())for(let u=0,c;u<o;++u)c=s[u],r[n[c]].push(c);else if(a)for(let u=a.next(0);u>=0;u=a.next(u+1))r[n[u]].push(u);else for(let u=0;u<o;++u)r[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,c=this._data;for(let l=0;l<i;++l)r[l].sort((f,d)=>u(f,d,c))}return(t||!this.isOrdered())&&(this._partitions=r),r}scan(t,n,i=1/0,r=0){const s=this._mask,a=this._nrows,o=this._data;let u=r||0;if(u>a)return;const c=Math.min(a,u+i),l=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<c;++u)t(f[u],d,l)}else if(s){let f=c-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,o,l)}else for(;u<c;++u)t(u,o,l)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const i=[],r=this.numRows();return t=Math.max(0,t+(t<0?r:0)),n=Math.min(r,Math.max(0,n+(n<0?r:0))),this.scan(s=>i.push(s),!0,n-t,t),this.reify(i)}reduce(t){return this.__reduce(this,t)}}let Ix=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},Ex=function(e){return e&&lt(e.get)?e:new Ix(e)};function dn(e){return e instanceof Date}function Rt(e){return e===Object(e)}function Ws(e){return e instanceof RegExp}function Ot(e){return typeof e=="string"}function Ax(e,t){const n=i=>D(`Illegal argument type: ${i||typeof e}`);return e instanceof Map?ml(e.entries(),t):dn(e)?n("Date"):Ws(e)?n("RegExp"):Ot(e)?n():J(e)?Tx(e,t):lt(e[Symbol.iterator])?kx(e,t):Rt(e)?ml(Object.entries(e),t):n()}function ml(e,t=["key","value"]){const n=[],i=[];for(const[s,a]of e)n.push(s),i.push(a);const r={};return t[0]&&(r[t[0]]=n),t[1]&&(r[t[1]]=i),r}function Tx(e,t){const n=e.length,i={},r=s=>i[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(r),a=s.length;for(let o=0;o<n;++o){const u=e[o];for(let c=0;c<a;++c)s[c][o]=u[t[c]]}}else t&&t.forEach(r);return i}function kx(e,t){const n={},i=a=>n[a]=[];let r,s;for(const a of e){r||(t=t||Object.keys(a),r=t.map(i),s=r.length);for(let o=0;o<s;++o)r[o].push(a[t[o]])}return!r&&t&&t.forEach(i),n}const{hasOwnProperty:Nx}=Object.prototype;function xe(e,t){return Nx.call(e,t)}function ee(e){return e?new yl({...e.data()},e.columnNames()):new yl}class yl{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return xe(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const K=void 0,Ox=Object.getPrototypeOf(Int8Array);function Ur(e){return e instanceof Ox}function Xn(e){return J(e)||Ur(e)}function _e(e){return e!=null&&e===e}const ir=e=>Xn(e)||Ot(e),Rx={compact:e=>Xn(e)?e.filter(t=>_e(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>ir(e)?e.includes(t,n):!1,indexof:(e,t)=>ir(e)?e.indexOf(t):-1,join:(e,t)=>Xn(e)?e.join(t):K,lastindexof:(e,t)=>ir(e)?e.lastIndexOf(t):-1,length:e=>ir(e)?e.length:0,pluck:(e,t)=>Xn(e)?e.map(n=>_e(n)?n[t]:K):K,reverse:e=>Xn(e)?e.slice().reverse():Ot(e)?e.split("").reverse().join(""):K,slice:(e,t,n)=>ir(e)?e.slice(t,n):K};function Fx(e,t,n,i,r){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+i*Math.floor(1e-14+(e-t)/i+(r||0)))}function fs(e,t,n="0"){const i=e+"",r=i.length;return r<t?Array(t-r+1).join(n)+i:i}const ke=e=>(e<10?"0":"")+e,Cx=e=>e<0?"-"+fs(-e,6):e>9999?"+"+fs(e,6):fs(e,4);function Pd(e,t,n,i,r,s,a,o,u){const c=o?"Z":"";return Cx(e)+"-"+ke(t+1)+"-"+ke(n)+(!u||a?"T"+ke(i)+":"+ke(r)+":"+ke(s)+"."+fs(a,3)+c:s?"T"+ke(i)+":"+ke(r)+":"+ke(s)+c:r||i||!o?"T"+ke(i)+":"+ke(r)+c:"")}function Ud(e,t){return isNaN(e)?"Invalid Date":Pd(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function ga(e,t){return isNaN(e)?"Invalid Date":Pd(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const Bx=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function Lx(e){return e.match(Bx)}function Dx(e,t=Date.parse){return Lx(e)?t(e):e}const Vd=6e4,jd=864e5,$d=6048e5,mt=new Date,yt=new Date,gt=e=>(mt.setTime(typeof e=="string"?Dx(e):e),mt);function Mx(e,t,n,i,r,s,a){return arguments.length?new Date(e,t||0,n??1,i||0,r||0,s||0,a||0):new Date(Date.now())}function Px(e,t,n,i,r,s,a){return arguments.length?new Date(Date.UTC(e,t||0,n??1,i||0,r||0,s||0,a||0)):new Date(Date.now())}function Ux(e){yt.setTime(+e),yt.setHours(0,0,0,0),mt.setTime(+yt),mt.setMonth(0),mt.setDate(1);const t=(yt.getTimezoneOffset()-mt.getTimezoneOffset())*Vd;return Math.floor(1+(yt-mt-t)/jd)}function Vx(e){yt.setTime(+e),yt.setUTCHours(0,0,0,0);const t=Date.UTC(yt.getUTCFullYear(),0,1);return Math.floor(1+(yt-t)/jd)}function jx(e,t){const n=t||0;yt.setTime(+e),yt.setDate(yt.getDate()-(yt.getDay()+7-n)%7),yt.setHours(0,0,0,0),mt.setTime(+e),mt.setMonth(0),mt.setDate(1),mt.setDate(1-(mt.getDay()+7-n)%7),mt.setHours(0,0,0,0);const i=(yt.getTimezoneOffset()-mt.getTimezoneOffset())*Vd;return Math.floor((1+(yt-mt)-i)/$d)}function $x(e,t){const n=t||0;return yt.setTime(+e),yt.setUTCDate(yt.getUTCDate()-(yt.getUTCDay()+7-n)%7),yt.setUTCHours(0,0,0,0),mt.setTime(+e),mt.setUTCMonth(0),mt.setUTCDate(1),mt.setUTCDate(1-(mt.getUTCDay()+7-n)%7),mt.setUTCHours(0,0,0,0),Math.floor((1+(yt-mt))/$d)}const zx={format_date:(e,t)=>Ud(gt(e),!t),format_utcdate:(e,t)=>ga(gt(e),!t),timestamp:e=>+gt(e),year:e=>gt(e).getFullYear(),quarter:e=>Math.floor(gt(e).getMonth()/3),month:e=>gt(e).getMonth(),date:e=>gt(e).getDate(),dayofweek:e=>gt(e).getDay(),hours:e=>gt(e).getHours(),minutes:e=>gt(e).getMinutes(),seconds:e=>gt(e).getSeconds(),milliseconds:e=>gt(e).getMilliseconds(),utcyear:e=>gt(e).getUTCFullYear(),utcquarter:e=>Math.floor(gt(e).getUTCMonth()/3),utcmonth:e=>gt(e).getUTCMonth(),utcdate:e=>gt(e).getUTCDate(),utcdayofweek:e=>gt(e).getUTCDay(),utchours:e=>gt(e).getUTCHours(),utcminutes:e=>gt(e).getUTCMinutes(),utcseconds:e=>gt(e).getUTCSeconds(),utcmilliseconds:e=>gt(e).getUTCMilliseconds(),datetime:Mx,dayofyear:Ux,week:jx,utcdatetime:Px,utcdayofyear:Vx,utcweek:$x,now:Date.now};function ju(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:dn(e)||dn(t)?+e==+t:Ws(e)&&Ws(t)?e+""==t+"":Rt(e)&&Rt(t)?qx(e,t):!1}function qx(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return gl(e,t);const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length||(n.sort(),i.sort(),!gl(n,i,(s,a)=>s===a)))return!1;const r=n.length;for(let s=0;s<r;++s){const a=n[s];if(!ju(e[a],t[a]))return!1}return!0}function gl(e,t,n=ju){const i=e.length;if(i!==t.length)return!1;for(let r=0;r<i;++r)if(!n(e[r],t[r]))return!1;return!0}const Wx={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let Yx=Math.random;function Hi(){return Yx()}const Hx={random:Hi,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function $u(e){return e instanceof Map}function Gx(e){return e instanceof Set}function ds(e){return $u(e)||Gx(e)}function qa(e){return Array.from(e)}const Kx={has:(e,t)=>ds(e)?e.has(t):e!=null?xe(e,t):!1,keys:e=>$u(e)?qa(e.keys()):e!=null?Object.keys(e):[],values:e=>ds(e)?qa(e.values()):e!=null?Object.values(e):[],entries:e=>ds(e)?qa(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):K};function Qx(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(xe(t,e))return t[e];return n!==void 0?n:e}function Jx(e,t,n){let i=arguments.length;e=+e,t=+t,n=i<2?(t=e,e=0,1):i<3?1:+n,i=Math.max(0,Math.ceil((t-e)/n))|0;const r=new Array(i);for(let s=0;s<i;++s)r[s]=e+s*n;return r}const Xx={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const i=e==null?e:String(e).match(t);return n==null||i==null?i:typeof n=="number"?i[n]:i.groups?i.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},gi={bin:Fx,equal:ju,recode:Qx,sequence:Jx,...Rx,...zx,...Wx,...Hx,...Kx,...Xx};function Ar(e){return typeof e=="bigint"}function He(e){return e===void 0?e+"":Ar(e)?e+"n":JSON.stringify(e)}function C(e,t=[],n=[]){return new Zx(e,Wt(t),Wt(n))}let Zx=class{constructor(t,n,i){this.name=t,this.fields=n,this.params=i}toString(){const t=[...this.fields.map(n=>`d[${He(n)}]`),...this.params.map(He)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const zd=e=>C("any",e),qd=()=>C("count"),Wd=e=>C("array_agg",e),Yd=e=>C("array_agg_distinct",e),Hd=(e,t)=>C("map_agg",[e,t]),Gd=(e,t)=>C("object_agg",[e,t]),Kd=(e,t)=>C("entries_agg",[e,t]);({...gi});function tS(e,t){e=ds(e)?e:new Set(e);let n=t,i=0;for(;e.has(n);)n=t+ ++i;return n}function eS(e,t){if(!e||!t)return e;const{keys:n,rows:i,size:r}=e,s=new Int32Array(r);t.scan(l=>s[n[l]]=1);const a=s.reduce((l,f)=>l+f,0);if(a===r)return e;const o=Array(a);let u=0;for(let l=0;l<r;++l)s[l]&&(o[s[l]=u++]=i[l]);const c=new Uint32Array(n.length);return t.scan(l=>c[l]=s[n[l]]),{...e,keys:c,rows:o,size:u}}function nS(e,t,n,i){const{keys:r,rows:s,size:a}=e;let o=s,u=a,c=null;if(n){c=new Int32Array(a),t(y=>c[r[y]]=1);const m=c.reduce((y,g)=>y+g,0);if(m!==a){o=Array(m),u=0;for(let y=0;y<a;++y)c[y]&&(o[c[y]=u++]=s[y])}}let l=-1;const f=new Uint32Array(i);return t(u!==a?m=>f[++l]=c[r[m]]:m=>f[++l]=r[m]),{...e,keys:f,rows:o,size:u}}function iS(e,t,n,i){const r=i==="map"||i===!0?Hd:i==="entries"?Kd:i==="object"?Gd:D('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),a=tS(e.columnNames(),"_");let o=e.select().reify(t).create({data:{[a]:n}}).rollup({[a]:Wd(a)});for(let u=s.length;--u>=0;)o=o.groupby(s.slice(0,u)).rollup({[a]:r(s[u],a)});return o.get(a)}const rS="ArrayPattern",sS="ArrowFunctionExpression",aS="FunctionExpression",Tn="Identifier",Gi="Literal",Qd="MemberExpression",oS="ObjectExpression",Jd="ObjectPattern",Xd="Property",Vr="Column",uS="Constant",cS="Dictionary",lS="Function",hS="Parameter",Zd="Op",ut=(e,t)=>{const n=fS[e.type];return n?n(e,t):D(`Unsupported expression construct: ${e.type}`)},Wa=(e,t)=>"("+ut(e.left,t)+" "+e.operator+" "+ut(e.right,t)+")",Ya=(e,t)=>"("+Fe(e.params,t)+")=>"+ut(e.body,t),_l=(e,t)=>ut(e.callee,t)+"("+Fe(e.arguments,t)+")",Fe=(e,t,n=",")=>e.map(i=>ut(i,t)).join(n),tp=e=>e.computed?`[${He(e.name)}]`:`.${e.name}`,bl=(e,t,n)=>{const i=e.table||"";return`data${i}${tp(e)}.${n}(${t.index}${i})`},fS={Constant:e=>e.raw,Column:(e,t)=>bl(e,t,"get"),Dictionary:(e,t)=>bl(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${tp(e)}`,Op:(e,t)=>`op(${He(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:i}=e,r=i.length;let s=n[0].value.raw;for(let a=0;a<r;)s+="${"+ut(i[a],t)+"}"+n[++a].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,i=ut(e.object,t),r=ut(e.property,t);return i+(n?"."+r:"["+r+"]")},CallExpression:_l,NewExpression:(e,t)=>"new "+_l(e,t),ArrayExpression:(e,t)=>"["+Fe(e.elements,t)+"]",AssignmentExpression:Wa,BinaryExpression:Wa,LogicalExpression:Wa,UnaryExpression:(e,t)=>"("+e.operator+ut(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+ut(e.test,t)+"?"+ut(e.consequent,t)+":"+ut(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Fe(e.properties,t)+"})",Property:(e,t)=>{const n=ut(e.key,t);return(e.computed?`[${n}]`:n)+":"+ut(e.value,t)},ArrowFunctionExpression:Ya,FunctionExpression:Ya,FunctionDeclaration:Ya,ArrayPattern:(e,t)=>"["+Fe(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Fe(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Fe(e.declarations,t,","),VariableDeclarator:(e,t)=>ut(e.id,t)+"="+ut(e.init,t),SpreadElement:(e,t)=>"..."+ut(e.argument,t),BlockStatement:(e,t)=>"{"+Fe(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>ut(e.expression,t),IfStatement:(e,t)=>"if ("+ut(e.test,t)+")"+ut(e.consequent,t)+(e.alternate?" else "+ut(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+ut(e.discriminant,t)+") {"+Fe(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+ut(e.test,t):"default")+": "+Fe(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+ut(e.argument,t),Program:(e,t)=>ut(e.body[0],t)};function Ys(e,t={index:"row"}){return ut(e,t)}function dS(e,t,n=15,i=!0,r=0,s){const o=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/o),c=t-e||Math.abs(e)||1,l=[5,2];for(s=Math.max(r,Math.pow(10,Math.round(Math.log(c)/o)-u));Math.ceil(c/s)>n;)s*=10;const f=l.length;for(let d=0;d<f;++d){const m=s/l[d];m>=r&&c/m<=n&&(s=m)}}if(i){let u=Math.log(s);const c=u>=0?0:~~(-u/o)+1,l=Math.pow(10,-c-1);u=Math.floor(e/s+l)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function Ui(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:dn(e)?+e:J(e)||Ur(e)?`[${e.map(Ui)}]`:Ws(e)?e+"":pS(e)}function pS(e){let t="{",n=-1;for(const i in e)++n>0&&(t+=","),t+=`"${i}":${Ui(e[i])}`;return t+="}",t}function Hs(e,t){const n=e.length;return n===1?(i,r)=>Ui(e[0](i,r)):(i,r)=>{let s="";for(let a=0;a<n;++a){a>0&&(s+="|");const o=e[a](i,r);if(t&&(o==null||o!==o))return null;s+=Ui(o)}return s}}function mS(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=Ui(t),i=e.get(n);i?++i.n:e.set(n,{v:t,n:1})},decrement(t){const n=Ui(t),i=e.get(n);i.n===1?e.delete(n):--i.n},forEach(t){e.forEach(({v:n,n:i})=>t(n,i))}}}function en(){}function yS(e,t=0,n=e.length){let i=e[t++];for(let r=t;r<n;++r)i*=e[r];return i}function wt(e){return e.init=e.init||en,e.add=e.add||en,e.rem=e.rem||en,e}function vl(e,t){return e.product_v=!1,e.product=t}const ep={count:{create:()=>wt({value:e=>e.count}),param:[]},array_agg:{create:()=>wt({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>wt({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>wt({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>wt({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>wt({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:K}),param:[1]},valid:{create:()=>wt({value:e=>e.valid}),param:[1]},invalid:{create:()=>wt({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=mS(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>wt({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>wt({value:e=>{let t=K,n=0;return e.distinct.forEach((i,r)=>{r>n&&(n=r,t=i)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:K,add:(e,t)=>Ar(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>vl(e,1),value:e=>e.valid?e.product_v?vl(e,yS(e.list.values())):e.product:void 0,add:(e,t)=>Ar(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:K,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>wt({value:e=>e.valid?e.mean:K}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):K,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>wt({value:e=>e.valid>1?e.dev/e.valid:K}),param:[1],req:["variance"]},stdev:{create:()=>wt({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):K}),param:[1],req:["variance"]},stdevp:{create:()=>wt({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):K}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=K,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===K)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=K,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===K)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>wt({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>wt({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):K,add:(e,t,n)=>{const i=t-e.mean_x,r=n-e.mean_y;e.mean_x+=i/e.valid,e.mean_y+=r/e.valid;const s=n-e.mean_y;e.dev_x+=i*(t-e.mean_x),e.dev_y+=r*s,e.cov+=i*s},rem:(e,t,n)=>{const i=t-e.mean_x,r=n-e.mean_y;e.mean_x-=e.valid?i/e.valid:e.mean_x,e.mean_y-=e.valid?r/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=i*(t-e.mean_x),e.dev_y-=r*s,e.cov-=i*s}}),param:[2]},covariancep:{create:()=>wt({value:e=>e.valid>1?e.cov/e.valid:K}),param:[2],req:["covariance"]},corr:{create:()=>wt({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):K}),param:[2],req:["covariance"]},bins:{create:(e,t,n,i)=>wt({value:r=>dS(r.min,r.max,e,t,n,i)}),param:[1,4],req:["min","max"]}},wl={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},xl={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:i,size:r}=t;let s=n;if(e<s){for(;s+1<r&&i(s+1);)++s;e=s}return(1+e)/r}}},param:[]},np={row_number:{create(){return{init:en,value:e=>e.index+1}},param:[]},rank:wl,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const i=n.index;if(i>=e){for(t=e=i+1;n.peer(e);t+=++e);t/=e-i}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=wl.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:xl,ntile:{create(e){e=+e,e>0||D("ntile num must be greater than zero.");const{init:t,value:n}=xl.create();return{init:t,value:i=>Math.ceil(e*n(i))}},param:[0,1]},lag:{create(e,t=K){return e=+e||1,{init:en,value:(n,i)=>{const r=n.index-e;return r>=0?n.value(r,i):t}}},param:[1,2]},lead:{create(e,t=K){return e=+e||1,{init:en,value:(n,i)=>{const r=n.index+e;return r<n.size?n.value(r,i):t}}},param:[1,2]},first_value:{create(){return{init:en,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:en,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||D("nth_value nth must be greater than zero."),{init:en,value:(t,n)=>{const i=t.i0+(e-1);return i<t.i1?t.value(i,n):K}}},param:[1,1]},fill_down:{create(e=K){let t;return{init:()=>t=e,value:(n,i)=>{const r=n.value(n.index,i);return _e(r)?t=r:t}}},param:[1,1]},fill_up:{create(e=K){let t,n;return{init:()=>(t=e,n=-1),value:(i,r)=>i.index<=n?t:(n=gS(i,r,i.index))>=0?t=i.value(n,r):(n=i.size,t=e)}},param:[1,1]}};function gS(e,t,n){for(const i=e.size;n<i;++n)if(_e(e.value(n,t)))return n;return-1}function zu(e){return xe(ep,e)}function qu(e){return xe(np,e)}function ip(e){return xe(gi,e)||e==="row_object"}function rp(e){return zu(e)&&ep[e]}function sp(e){return qu(e)&&np[e]}function rr(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const Wu={escape:(e,t,n)=>rr(e,t,n),expr:(e,t)=>rr(`(row,data,op)=>${e}`,gi,t),expr2:(e,t)=>rr(`(row0,data0,row,data)=>${e}`,gi,t),join:(e,t)=>rr(`(row1,data1,row2,data2)=>${e}`,gi,t),param:(e,t)=>rr(e,gi,t)},_S={"==":1,"!=":1,"===":1,"!==":1};function ap(e,t,n=0,i,r){if(e.type=Vr,e.name=t,e.table=n,r&&i&&lt(i.keyFor)){const s=_S[r.operator]?r.left===e?r.right:r.left:r.callee&&r.callee.name==="equal"?r.arguments[r.arguments[0]===e?1:0]:null;s&&s.type===Gi&&bS(r,e,s,i.keyFor(s.value))}return e}function bS(e,t,n,i){return i<0?(e.type=Gi,e.value=!1,e.raw="false"):(t.type=cS,n.value=i,n.raw=i+""),!0}function _a(e){return J(e)?e:$u(e)?e.entries():e?Object.entries(e):[]}const op="row_object";function up(e,t){e.type=oS;const n=e.properties=[];for(const i of _a(t)){const[r,s]=J(i)?i:[i,i];n.push({type:Xd,key:{type:Gi,raw:He(s)},value:ap({computed:!0},r)})}return e}function cp(e){return Ys(up({},e))}function lp(e){return Wu.expr(cp(e))}function Yu(e,t=1){return(e*t+63&-64||64)/t}function Cn(e,t,n=e.BYTES_PER_ELEMENT){return new e(Yu(t,n))}function Hu(e){return e instanceof st?e:new st(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function vS(e){return new H([Hu(e)])}const Gu=new TextEncoder;function wS(e,t,n){const i=Gu.encode(n);return e.set(i,t),i.length}function xS(e,t,n){return Gu.encodeInto(n,e.subarray(t)).written}const SS=Gu.encodeInto?xS:wS;function Sl(e,t){const n=Cn(e.ArrayType,t);return{set(i,r){n[r]=i},data:()=>({type:e,length:t,buffers:[null,n]})}}function IS(e,t){const n=Cn(e.ArrayType,t/8);return{set(i,r){i&&(n[r>>3]|=1<<r%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function ES(e,t){const n=Cn(e.ArrayType,t);return{set(i,r){n[r]=i/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function AS(e,t){const n=Cn(e.ArrayType,t<<1);return{set(i,r){const s=r<<1;n[s]=i%4294967296|0,n[s+1]=i/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function TS(e){const t=Ms({type:e,nullValues:[null,void 0]});return{set(n,i){t.set(i,n)},data:()=>t.finish().flush()}}function kS(e,t,n){const i=Cn(Int32Array,t+1),r=Cn(Uint8Array,3*n);let s=0;return{set(a,o){s+=SS(r,s,a),i[o+1]=s},data:()=>{const a=Yu(s),o=r.length>a?r.subarray(0,a):r;return{type:e,length:t,buffers:[i,o]}}}}function NS(e,t){const n=[],i=Cn(e.indices.ArrayType,t),r=Object.create(null);let s=-1,a=0;return{set(o,u){const c=String(o);let l=r[c];l===void 0&&(a+=c.length,r[c]=l=++s,n.push(c)),i[u]=l},data:()=>({type:e,length:t,buffers:[null,i],dict:OS(e.dictionary,n,a)})}}function OS(e,t,n){const i=kS(e,t.length,n);return t.forEach(i.set),vS(i.data())}function RS(e,t){const n=Cn(Uint8Array,t/8);let i=0;return{set(r,s){r==null?++i:(e.set(r,s),n[s>>3]|=1<<s%8)},data:()=>{const r=e.data();return i&&(r.nulls=i,r.buffers[2]=n),r}}}function FS(e,t,n=!0){let i;switch(e.typeId){case p.Int:i=e.bitWidth<64?Sl:null;break;case p.Float:i=e.precision>0?Sl:null;break;case p.Dictionary:i=e.dictionary.typeId===p.Utf8&&e.indices.typeId===p.Int&&e.indices.bitWidth<64?NS:null;break;case p.Bool:i=IS;break;case p.Date:i=e.unit?AS:ES;break}return i==null?TS(e):n?RS(i(e,t),t):i(e,t)}function CS(e,t){const n=e.length,i=Yu(n,e.BYTES_PER_ELEMENT);let r=e;return n!==i&&(r=new e.constructor(i),r.set(e)),Hu({type:t,length:n,buffers:[null,r]})}function hp(e,t,n,i,r=!0){const s=FS(i,e,r);return t(n,s.set),Hu(s.data())}function Ku(e){if(e instanceof I||e==null)return e;switch(e){case p.Binary:return new vr;case p.Bool:return new wr;case p.DateDay:return new zb;case p.DateMillisecond:case p.Date:return new qb;case p.Dictionary:return new On(new ki,new kn);case p.Float16:return new nf;case p.Float32:return new nu;case p.Float64:case p.Float:return new iu;case p.Int8:return new Ko;case p.Int16:return new Qo;case p.Int32:case p.Int:return new kn;case p.Int64:return new Jo;case p.IntervalDayTime:return new Kb;case p.Interval:case p.IntervalYearMonth:return new Qb;case p.Null:return new ln;case p.TimeMicrosecond:return new Hb;case p.TimeMillisecond:case p.Time:return new Yb;case p.TimeNanosecond:return new Gb;case p.TimeSecond:return new Wb;case p.Uint8:return new Xo;case p.Uint16:return new Zo;case p.Uint32:return new tu;case p.Uint64:return new eu;case p.Utf8:return new ki;default:D(`Unsupported type code: ${He(e)}. Use a data type constructor instead?`)}}function BS(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function fp(e,t){const n=Io();return e(t,n.add),n}function Io(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(dn(t))++e.dates,BS(t)&&++e.utcdays;else if(Xn(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const i=e.array_prof||(e.array_prof=Io());t.forEach(i.add)}else{++e.structs;const i=e.struct_prof||(e.struct_prof={});for(const r in t)(i[r]||(i[r]=Io())).add(t[r])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return Ku(LS(e))}};return e}function LS(e){const t=e.count-e.nulls;if(t===0)return p.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?p.Float64:n<128?p.Int8:n<32768?p.Int16:p.Int32:n>=2**32?p.Float64:n<256?p.Uint8:n<65536?p.Uint16:p.Uint32}else{if(e.nums===t)return p.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?p.Int64:D(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?p.Uint64:D(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return p.Bool;if(e.utcdays===t)return p.DateDay;if(e.dates===t)return p.DateMillisecond;if(e.arrays===t){const n=X.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new Fi(e.minlen,n):new Ri(n)}else if(e.structs===t){const n=e.struct_prof;return new kt(Object.keys(n).map(i=>X.new(i,n[i].type(),!0)))}else{if(e.strings>0)return p.Dictionary;D("Type inference failure")}}}}function DS(e,t,n,i,r,s=!0){if(r=Ku(r),!r){const a=fp(i,t);s=a.nulls>0,r=a.type()}return hp(n,i,t,r,s)}function MS(e,t,n,i,r,s=!0){r=Ku(r);const a=e.column(t),o=!(e.isFiltered()||e.isOrdered()),u=PS(a);if(u&&o&&Il(u.type,r))return u;const c=a.data;if(Ur(c)){const l=US(c);if(o&&l&&Il(l,r))return CS(c,l);r=r||l,s=!1}if(!r){const l=fp(i,a);s=l.nulls>0,r=l.type()}return hp(n,i,a,r,s)}function PS(e){return e instanceof H?e:e.vector instanceof H?e.vector:null}function US(e){const n={Float32Array:nu,Float64Array:iu,Int8Array:Ko,Int16Array:Qo,Int32Array:kn,Uint8Array:Xo,Uint16Array:Zo,Uint32Array:tu,BigInt64Array:Jo,BigUint64Array:eu}[e.constructor.name];return n?new n:null}function Il(e,t){return!e||!t?!0:e.compareTo(t)}function VS(e,t,n){const i=Math.min(e.length,n+t);return(r,s)=>{for(let a=n;a<i;++a)s(e[a][r],a)}}function jS(e,t,n){const i=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(r,s)=>{let a=-1;i&&Xn(r.data)?r.data.forEach(s):e.scan(o=>s(r.get(o),++a),!0,t,n)}}const $S=()=>D("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function zS(){try{return fn}catch{$S()}}function dp(e,t={}){const{types:n={}}=t,{dataFrom:i,names:r,nrows:s,scan:a}=qS(e,t),o={};r.forEach(c=>{const l=i(e,c,s,a,n[c]);l.length!==s&&D("Column length mismatch"),o[c]=l});const u=zS();return new u(o)}function qS(e,t){const{columns:n,limit:i=1/0,offset:r=0}=t,s=lt(n)?n(e):J(n)?n:null;if(J(e))return{dataFrom:DS,names:s||Object.keys(e[0]),nrows:Math.min(i,e.length-r),scan:VS(e,i,r)};if(WS(e))return{dataFrom:MS,names:s||e.columnNames(),nrows:Math.min(i,e.numRows()-r),scan:jS(e,i,r)};D("Unsupported input data type")}function WS(e){return e&&lt(e.reify)}function YS(e,t={}){const{format:n,...i}=t,r=n||"stream";if(!["stream","file"].includes(r))throw Error("Unrecognised output format");return Bd(dp(e,i),n)}function HS(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function GS(e,t={}){let n=0,i=0,r=0,s=0,a=0,o=0;return e(u=>{if(++n,u==null){++i;return}const c=typeof u;if(c==="object"&&dn(u))++r,HS(u)&&++s;else if(c==="number"&&(++a,u===u&&(u|0)!==u)){const l=u+"",f=l.indexOf(".");if(f>=0){const d=l.indexOf("e"),m=d>0?d:l.length;o=Math.max(o,m-f-1)}}}),{align:(i+a+r)/n>.5?"r":"l",format:{utc:r===s,digits:Math.min(o,t.maxdigits||6)}}}function ba(e,t){return lt(t)?t(e):t||e.columnNames()}function pp(e,t,n){const i=n.format||{},r=n.align||{},s={},a={};return t.forEach(o=>{const u=GS(KS(e,o),n);a[o]=r[o]||u.align,s[o]=i[o]||u.format}),{align:a,format:s}}function KS(e,t){const n=e.column(t);return i=>e.scan(r=>i(n.get(r)))}function Qu(e,t,n=100,i,r){const s=e.data(),a=t.length;e.scan(o=>{r.row(o);for(let u=0;u<a;++u){const c=t[u];r.cell(s[t[u]].get(o),c,u)}},!0,n,i)}function QS(e,t={}){const n=ba(e,t.columns),i=t.format||{},r=t.delimiter||",",s=new RegExp(`["${r}
\r]`),a=c=>c==null?"":dn(c)?ga(c,!0):s.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c,o=n.map(a);let u="";return Qu(e,n,t.limit||1/0,t.offset,{row(){u+=o.join(r)+`
`},cell(c,l,f){o[f]=a(i[l]?i[l](c):c)}}),u+o.join(r)}function mp(e,t={}){if(lt(t))return t(e)+"";const n=typeof e;if(n==="object"){if(dn(e))return t.utc?ga(e):Ud(e);{const i=JSON.stringify(e,(s,a)=>Ur(a)?Array.from(a):a),r=t.maxlen||30;return i.length>r?i.slice(0,28)+""+(i[0]==="["?"]":"}"):i}}else if(n==="number"){const i=t.digits||0;let r;return e!==0&&((r=Math.abs(e))>=1e18||r<Math.pow(10,-i))?e.toExponential(i):e.toFixed(i)}else return e+""}function va(e,t,n={}){for(const i in e)n[i]=t(e[i],i);return n}function JS(e,t={}){const n=ba(e,t.columns),{align:i,format:r}=pp(e,n,t),s=XS(t),a=t.null,o=g=>g==="c"?"center":g==="r"?"right":"left",u=g=>g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),c=(g,_)=>u(mp(g,_)),l=a?(g,_)=>g==null?a(g):c(g,_):c;let f=-1,d=-1;const m=(g,_,b)=>{const N=b?o(i[_]):"",Z=s[g]&&s[g](_,d,f)||"",w=(N?`text-align: ${N};`+(Z?" ":""):"")+Z;return`<${g}${w?` style="${w}"`:""}>`};let y=m("table")+m("thead")+m("tr",f)+n.map(g=>`${m("th",g,1)}${g}</th>`).join("")+"</tr></thead>"+m("tbody");return Qu(e,n,t.limit,t.offset,{row(g){f=g,y+=(++d?"</tr>":"")+m("tr")},cell(g,_){y+=m("td",_,1)+l(g,r[_])+"</td>"}}),y+"</tr></tbody></table>"}function XS(e){return va(e.style,t=>lt(t)?t:()=>t)}function ZS(e,t=!0,n=!1){return e===void 0||e?t:n}const tI=e=>dn(e)?ga(e,!0):e;function eI(e,t={}){const n=ZS(t.schema),i=t.format||{},r=ba(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(r.map(a=>({name:a})))+'},"data":{'),r.forEach((a,o)=>{s+=(o?",":"")+JSON.stringify(a)+":[";const u=e.column(a),c=i[a]||tI;let l=-1;e.scan(f=>{const d=u.get(f);s+=(++l?",":"")+JSON.stringify(c(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function nI(e,t={}){const n=ba(e,t.columns),{align:i,format:r}=pp(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",a=u=>u.replace(/\|/g,"\\|");let o="|"+n.map(a).join("|")+`|
|`+n.map(u=>s(i[u])).join("|")+"|";return Qu(e,n,t.limit,t.offset,{row(){o+=`
|`},cell(u,c){o+=a(mp(u,r[c]))+"|"}}),o+`
`}function yp(e,t){for(const[n,i]of _a(t))e.set(n,i);return e}function iI(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function pn(e,t,n=new Map){return t=Bt(t)?e.columnName(t):t,Ot(t)?n.set(t,t):J(t)?t.forEach(i=>pn(e,i,n)):lt(t)?pn(e,t(e),n):Rt(t)?yp(n,t):D(`Invalid column selection: ${He(t)}`),n}function wa(e,t){return e.toObject=t,e}function gp(e){return J(e)?e.map(gp):e&&e.toObject?e.toObject():e}function Vi(){return wa(e=>e.columnNames(),()=>({all:[]}))}function _p(...e){return e=e.flat(),wa(t=>{const n=pn(t,e);return t.columnNames(i=>!n.has(i))},()=>({not:gp(e)}))}function rI(e,t){return wa(n=>{let i=Bt(e)?e:n.columnIndex(e),r=Bt(t)?t:n.columnIndex(t);if(r<i){const s=r;r=i,i=s}return n.columnNames().slice(i,r+1)},()=>({range:[e,t]}))}function sI(e){return Ot(e)&&(e=RegExp(iI(e))),wa(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function aI(e){return Ur(e.data)?e.data.constructor:Array}class sn extends Sx{static from(t,n){return new sn(Ax(t,n),n)}static new(t,n){if(t instanceof sn)return t;const i={},r=[];for(const[s,a]of _a(t))i[s]=a,r.push(s);return new sn(i,n||r)}constructor(t,n,i,r,s,a){va(t,Ex,t),n=n||Object.keys(t);const o=n.length?t[n[0]].length:0;super(n,o,t,i,r,s,a)}create({data:t,names:n,filter:i,groups:r,order:s}){const a=i!==void 0?i:this.mask();return new sn(t||this._data,n||(t?null:this._names),a,r!==void 0?r:eS(this._group,i&&a),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),i=this.reify(),r=ee(i).groupby(i.groups());return t.forEach(s=>{s=sn.new(s),s.numRows()!==n&&D("Assign row counts do not match"),s=s.reify(),s.columnNames(a=>r.add(a,s.column(a)))}),this.create(r.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const i=this.column(t),r=new n(this.numRows());let s=-1;return this.scan(a=>r[++s]=i.get(a),!0),r}get(t,n=0){const i=this.column(t);return this.isFiltered()||this.isOrdered()?i.get(this.indices()[n]):i.get(n)}getter(t){const n=this.column(t),i=this.isFiltered()||this.isOrdered()?this.indices():null;return i?r=>n.get(i[r]):n?r=>n.get(r):D(`Unrecognized column: ${t}`)}object(t=0){return El(this)(t)}objects(t={}){const{grouped:n,limit:i,offset:r}=t,s=pn(this,t.columns||Vi()),a=lp(s),o=[];if(this.scan((u,c)=>o.push(a(u,c)),!0,i,r),n&&this.isGrouped()){const u=[];return this.scan(c=>u.push(c),!0,i,r),iS(this,u,o,n)}return o}*[Symbol.iterator](){const t=El(this),n=this.numRows();for(let i=0;i<n;++i)yield t(i)}reify(t){const n=t?t.length:this.numRows(),i=this._names;let r,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(r=this.data());else return this;if(!r){const a=t?u=>t.forEach(u):u=>this.scan(u,!0),o=i.length;r={};for(let u=0;u<o;++u){const c=i[u],l=this.column(c),f=r[c]=new(aI(l))(n);let d=-1;a(m=>f[++d]=l.get(m))}this.isGrouped()&&(s=nS(this.groups(),a,!!t,n))}return this.create({data:r,names:i,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,i)=>i(n),this)}toArrow(t){return dp(this,t)}toArrowBuffer(t){return YS(this,t)}toCSV(t){return QS(this,t)}toHTML(t){return JS(this,t)}toJSON(t){return eI(this,t)}toMarkdown(t){return nI(this,t)}}function El(e){let t=e._builder;if(!t){const n=lp(e.columnNames()),i=e.data();if(e.isOrdered()||e.isFiltered()){const r=e.indices();t=s=>n(r[s],i)}else t=r=>n(r,i);e._builder=t}return t}class oI{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function Y(e,t,n,i){const r=n[e.type]||n.Default;if(r&&r(e,t,i)===!1)return;const s=uI[e.type];s&&s(e,t,n)}const Xr=(e,t,n)=>{Y(e.argument,t,n,e)},Ha=(e,t,n)=>{Y(e.left,t,n,e),Y(e.right,t,n,e)},Al=(e,t,n)=>{Y(e.test,t,n,e),Y(e.consequent,t,n,e),e.alternate&&Y(e.alternate,t,n,e)},Ga=(e,t,n)=>{Ce(e.params,t,n,e),Y(e.body,t,n,e)},Tl=(e,t,n)=>{Y(e.callee,t,n,e),Ce(e.arguments,t,n,e)},Ce=(e,t,n,i)=>{e.forEach(r=>Y(r,t,n,i))},uI={TemplateLiteral:(e,t,n)=>{Ce(e.expressions,t,n,e),Ce(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{Y(e.object,t,n,e),Y(e.property,t,n,e)},CallExpression:Tl,NewExpression:Tl,ArrayExpression:(e,t,n)=>{Ce(e.elements,t,n,e)},AssignmentExpression:Ha,AwaitExpression:Xr,BinaryExpression:Ha,LogicalExpression:Ha,UnaryExpression:Xr,UpdateExpression:Xr,ConditionalExpression:Al,ObjectExpression:(e,t,n)=>{Ce(e.properties,t,n,e)},Property:(e,t,n)=>{Y(e.key,t,n,e),Y(e.value,t,n,e)},ArrowFunctionExpression:Ga,FunctionExpression:Ga,FunctionDeclaration:Ga,VariableDeclaration:(e,t,n)=>{Ce(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{Y(e.id,t,n,e),Y(e.init,t,n,e)},SpreadElement:(e,t,n)=>{Y(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{Ce(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{Y(e.expression,t,n,e)},IfStatement:Al,ForStatement:(e,t,n)=>{Y(e.init,t,n,e),Y(e.test,t,n,e),Y(e.update,t,n,e),Y(e.body,t,n,e)},WhileStatement:(e,t,n)=>{Y(e.test,t,n,e),Y(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{Y(e.body,t,n,e),Y(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{Y(e.discriminant,t,n,e),Ce(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&Y(e.test,t,n,e),Ce(e.consequent,t,n,e)},ReturnStatement:Xr,Program:(e,t,n)=>{Y(e.body[0],t,n,e)}};function bp(e){delete e.start,delete e.end,delete e.optional}function kl(e){bp(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function cI(e){return Y(e,null,{Column:kl,Constant:kl,Default:bp}),e}function It(e,t){return t&&t.type===e}function lI(e){return It(aS,e)||It(sS,e)}function hI(e){return lt(e)?e:()=>e}const fI="Escaped functions are not valid as rollup or pivot values.";function dI(e,t,n){e.aggronly&&D(fI);const i="(row,data)=>fn("+cp(e.table.columnNames())+",$)";return{escape:Wu.escape(i,hI(t.expr),n)}}var pI=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],vp=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,3104,541,1507,4938,6,4191],mI="-----------------------------------------------------------------------------------------------------------------------------------------------------",wp="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",Ka={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},Qa="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",yI={5:Qa,"5module":Qa+" export import",6:Qa+" const class extends export import super"},gI=/^in(stanceof)?$/,_I=new RegExp("["+wp+"]"),bI=new RegExp("["+wp+mI+"]");function Eo(e,t){for(var n=65536,i=0;i<t.length;i+=2){if(n+=t[i],n>e)return!1;if(n+=t[i+1],n>=e)return!0}return!1}function mn(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&_I.test(String.fromCharCode(e)):t===!1?!1:Eo(e,vp)}function ji(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&bI.test(String.fromCharCode(e)):t===!1?!1:Eo(e,vp)||Eo(e,pI)}var G=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function ne(e,t){return new G(e,{beforeExpr:!0,binop:t})}var ie={beforeExpr:!0},Dt={startsExpr:!0},Ju={};function z(e,t){return t===void 0&&(t={}),t.keyword=e,Ju[e]=new G(e,t)}var h={num:new G("num",Dt),regexp:new G("regexp",Dt),string:new G("string",Dt),name:new G("name",Dt),privateId:new G("privateId",Dt),eof:new G("eof"),bracketL:new G("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new G("]"),braceL:new G("{",{beforeExpr:!0,startsExpr:!0}),braceR:new G("}"),parenL:new G("(",{beforeExpr:!0,startsExpr:!0}),parenR:new G(")"),comma:new G(",",ie),semi:new G(";",ie),colon:new G(":",ie),dot:new G("."),question:new G("?",ie),questionDot:new G("?."),arrow:new G("=>",ie),template:new G("template"),invalidTemplate:new G("invalidTemplate"),ellipsis:new G("...",ie),backQuote:new G("`",Dt),dollarBraceL:new G("${",{beforeExpr:!0,startsExpr:!0}),eq:new G("=",{beforeExpr:!0,isAssign:!0}),assign:new G("_=",{beforeExpr:!0,isAssign:!0}),incDec:new G("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new G("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:ne("||",1),logicalAND:ne("&&",2),bitwiseOR:ne("|",3),bitwiseXOR:ne("^",4),bitwiseAND:ne("&",5),equality:ne("==/!=/===/!==",6),relational:ne("</>/<=/>=",7),bitShift:ne("<</>>/>>>",8),plusMin:new G("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:ne("%",10),star:ne("*",10),slash:ne("/",10),starstar:new G("**",{beforeExpr:!0}),coalesce:ne("??",1),_break:z("break"),_case:z("case",ie),_catch:z("catch"),_continue:z("continue"),_debugger:z("debugger"),_default:z("default",ie),_do:z("do",{isLoop:!0,beforeExpr:!0}),_else:z("else",ie),_finally:z("finally"),_for:z("for",{isLoop:!0}),_function:z("function",Dt),_if:z("if"),_return:z("return",ie),_switch:z("switch"),_throw:z("throw",ie),_try:z("try"),_var:z("var"),_const:z("const"),_while:z("while",{isLoop:!0}),_with:z("with"),_new:z("new",{beforeExpr:!0,startsExpr:!0}),_this:z("this",Dt),_super:z("super",Dt),_class:z("class",Dt),_extends:z("extends",ie),_export:z("export"),_import:z("import",Dt),_null:z("null",Dt),_true:z("true",Dt),_false:z("false",Dt),_in:z("in",{beforeExpr:!0,binop:7}),_instanceof:z("instanceof",{beforeExpr:!0,binop:7}),_typeof:z("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:z("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:z("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},fe=/\r\n?|\n|\u2028|\u2029/,vI=new RegExp(fe.source,"g");function Ki(e){return e===10||e===13||e===8232||e===8233}function xp(e,t,n){n===void 0&&(n=e.length);for(var i=t;i<n;i++){var r=e.charCodeAt(i);if(Ki(r))return i<n-1&&r===13&&e.charCodeAt(i+1)===10?i+2:i+1}return-1}var Sp=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,ce=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,Ip=Object.prototype,wI=Ip.hasOwnProperty,xI=Ip.toString,jr=Object.hasOwn||function(e,t){return wI.call(e,t)},Nl=Array.isArray||function(e){return xI.call(e)==="[object Array]"};function Zn(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}function Bn(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var SI=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Tr=function(t,n){this.line=t,this.column=n};Tr.prototype.offset=function(t){return new Tr(this.line,this.column+t)};var xa=function(t,n,i){this.start=n,this.end=i,t.sourceFile!==null&&(this.source=t.sourceFile)};function Ep(e,t){for(var n=1,i=0;;){var r=xp(e,i,t);if(r<0)return new Tr(n,t-i);++n,i=r}}var Ao={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Ol=!1;function II(e){var t={};for(var n in Ao)t[n]=e&&jr(e,n)?e[n]:Ao[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!Ol&&typeof console=="object"&&console.warn&&(Ol=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),Nl(t.onToken)){var i=t.onToken;t.onToken=function(r){return i.push(r)}}return Nl(t.onComment)&&(t.onComment=EI(t,t.onComment)),t}function EI(e,t){return function(n,i,r,s,a,o){var u={type:n?"Block":"Line",value:i,start:r,end:s};e.locations&&(u.loc=new xa(this,a,o)),e.ranges&&(u.range=[r,s]),t.push(u)}}var kr=1,Qi=2,Xu=4,Ap=8,Tp=16,kp=32,Zu=64,Np=128,$r=256,tc=kr|Qi|$r;function ec(e,t){return Qi|(e?Xu:0)|(t?Ap:0)}var Gs=0,nc=1,un=2,Op=3,Rp=4,Fp=5,Et=function(t,n,i){this.options=t=II(t),this.sourceFile=t.sourceFile,this.keywords=Zn(yI[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var r="";t.allowReserved!==!0&&(r=Ka[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(r+=" await")),this.reservedWords=Zn(r);var s=(r?r+" ":"")+Ka.strict;this.reservedWordsStrict=Zn(s),this.reservedWordsStrictBind=Zn(s+" "+Ka.strictBind),this.input=String(n),this.containsEsc=!1,i?(this.pos=i,this.lineStart=this.input.lastIndexOf(`
`,i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(fe).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=h.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(kr),this.regexpState=null,this.privateNameStack=[]},Qe={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Et.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};Qe.inFunction.get=function(){return(this.currentVarScope().flags&Qi)>0};Qe.inGenerator.get=function(){return(this.currentVarScope().flags&Ap)>0&&!this.currentVarScope().inClassFieldInit};Qe.inAsync.get=function(){return(this.currentVarScope().flags&Xu)>0&&!this.currentVarScope().inClassFieldInit};Qe.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&$r)return!1;if(t.flags&Qi)return(t.flags&Xu)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};Qe.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&Zu)>0||n||this.options.allowSuperOutsideMethod};Qe.allowDirectSuper.get=function(){return(this.currentThisScope().flags&Np)>0};Qe.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Qe.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(Qi|$r))>0||n};Qe.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&$r)>0};Et.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var i=this,r=0;r<t.length;r++)i=t[r](i);return i};Et.parse=function(t,n){return new this(n,t).parse()};Et.parseExpressionAt=function(t,n,i){var r=new this(i,t,n);return r.nextToken(),r.parseExpression()};Et.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Et.prototype,Qe);var Lt=Et.prototype,AI=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Lt.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){ce.lastIndex=e,e+=ce.exec(this.input)[0].length;var t=AI.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){ce.lastIndex=e+t[0].length;var n=ce.exec(this.input),i=n.index+n[0].length,r=this.input.charAt(i);return r===";"||r==="}"||fe.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(r)||r==="!"&&this.input.charAt(i+1)==="=")}e+=t[0].length,ce.lastIndex=e,e+=ce.exec(this.input)[0].length,this.input[e]===";"&&e++}};Lt.eat=function(e){return this.type===e?(this.next(),!0):!1};Lt.isContextual=function(e){return this.type===h.name&&this.value===e&&!this.containsEsc};Lt.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};Lt.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};Lt.canInsertSemicolon=function(){return this.type===h.eof||this.type===h.braceR||fe.test(this.input.slice(this.lastTokEnd,this.start))};Lt.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};Lt.semicolon=function(){!this.eat(h.semi)&&!this.insertSemicolon()&&this.unexpected()};Lt.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};Lt.expect=function(e){this.eat(e)||this.unexpected()};Lt.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var Sa=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Lt.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};Lt.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,i=e.doubleProto;if(!t)return n>=0||i>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),i>=0&&this.raiseRecoverable(i,"Redefinition of __proto__ property")};Lt.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Lt.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var x=Et.prototype;x.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==h.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var i=0,r=Object.keys(this.undefinedExports);i<r.length;i+=1){var s=r[i];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var ic={kind:"loop"},TI={kind:"switch"};x.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;ce.lastIndex=this.pos;var t=ce.exec(this.input),n=this.pos+t[0].length,i=this.input.charCodeAt(n);if(i===91||i===92)return!0;if(e)return!1;if(i===123||i>55295&&i<56320)return!0;if(mn(i,!0)){for(var r=n+1;ji(i=this.input.charCodeAt(r),!0);)++r;if(i===92||i>55295&&i<56320)return!0;var s=this.input.slice(n,r);if(!gI.test(s))return!0}return!1};x.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;ce.lastIndex=this.pos;var e=ce.exec(this.input),t=this.pos+e[0].length,n;return!fe.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(ji(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};x.parseStatement=function(e,t,n){var i=this.type,r=this.startNode(),s;switch(this.isLet(e)&&(i=h._var,s="let"),i){case h._break:case h._continue:return this.parseBreakContinueStatement(r,i.keyword);case h._debugger:return this.parseDebuggerStatement(r);case h._do:return this.parseDoStatement(r);case h._for:return this.parseForStatement(r);case h._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(r,!1,!e);case h._class:return e&&this.unexpected(),this.parseClass(r,!0);case h._if:return this.parseIfStatement(r);case h._return:return this.parseReturnStatement(r);case h._switch:return this.parseSwitchStatement(r);case h._throw:return this.parseThrowStatement(r);case h._try:return this.parseTryStatement(r);case h._const:case h._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(r,s);case h._while:return this.parseWhileStatement(r);case h._with:return this.parseWithStatement(r);case h.braceL:return this.parseBlock(!0,r);case h.semi:return this.parseEmptyStatement(r);case h._export:case h._import:if(this.options.ecmaVersion>10&&i===h._import){ce.lastIndex=this.pos;var a=ce.exec(this.input),o=this.pos+a[0].length,u=this.input.charCodeAt(o);if(u===40||u===46)return this.parseExpressionStatement(r,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===h._import?this.parseImport(r):this.parseExport(r,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(r,!0,!e);var c=this.value,l=this.parseExpression();return i===h.name&&l.type==="Identifier"&&this.eat(h.colon)?this.parseLabeledStatement(r,c,l,e):this.parseExpressionStatement(r,l)}};x.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(h.semi)||this.insertSemicolon()?e.label=null:this.type!==h.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var i=0;i<this.labels.length;++i){var r=this.labels[i];if((e.label==null||r.name===e.label.name)&&(r.kind!=null&&(n||r.kind==="loop")||e.label&&n))break}return i===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};x.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};x.parseDoStatement=function(e){return this.next(),this.labels.push(ic),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(h._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(h.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};x.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(ic),this.enterScope(0),this.expect(h.parenL),this.type===h.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===h._var||this.type===h._const||n){var i=this.startNode(),r=n?"let":this.value;return this.next(),this.parseVar(i,!0,r),this.finishNode(i,"VariableDeclaration"),(this.type===h._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&i.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===h._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,i)):(t>-1&&this.unexpected(t),this.parseFor(e,i))}var s=this.isContextual("let"),a=!1,o=new Sa,u=this.parseExpression(t>-1?"await":!0,o);return this.type===h._in||(a=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===h._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&a&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,o),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(o,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};x.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,dr|(n?0:To),!1,t)};x.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(h._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};x.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(h.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};x.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(h.braceL),this.labels.push(TI),this.enterScope(0);for(var t,n=!1;this.type!==h.braceR;)if(this.type===h._case||this.type===h._default){var i=this.type===h._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),i?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(h.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};x.parseThrowStatement=function(e){return this.next(),fe.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var kI=[];x.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===h._catch){var t=this.startNode();if(this.next(),this.eat(h.parenL)){t.param=this.parseBindingAtom();var n=t.param.type==="Identifier";this.enterScope(n?kp:0),this.checkLValPattern(t.param,n?Rp:un),this.expect(h.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0);t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(h._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};x.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")};x.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(ic),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};x.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};x.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};x.parseLabeledStatement=function(e,t,n,i){for(var r=0,s=this.labels;r<s.length;r+=1){var a=s[r];a.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var o=this.type.isLoop?"loop":this.type===h._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var c=this.labels[u];if(c.statementStart===e.start)c.statementStart=this.start,c.kind=o;else break}return this.labels.push({name:t,kind:o,statementStart:this.start}),e.body=this.parseStatement(i?i.indexOf("label")===-1?i+"label":i:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};x.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};x.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(h.braceL),e&&this.enterScope(0);this.type!==h.braceR;){var i=this.parseStatement(null);t.body.push(i)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};x.parseFor=function(e,t){return e.init=t,this.expect(h.semi),e.test=this.type===h.semi?null:this.parseExpression(),this.expect(h.semi),e.update=this.type===h.parenR?null:this.parseExpression(),this.expect(h.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};x.parseForIn=function(e,t){var n=this.type===h._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(h.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};x.parseVar=function(e,t,n){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(h.eq)?i.init=this.parseMaybeAssign(t):n==="const"&&!(this.type===h._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():i.id.type!=="Identifier"&&!(t&&(this.type===h._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(h.comma))break}return e};x.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?nc:un,!1)};var dr=1,To=2,Cp=4;x.parseFunction=function(e,t,n,i,r){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!i)&&(this.type===h.star&&t&To&&this.unexpected(),e.generator=this.eat(h.star)),this.options.ecmaVersion>=8&&(e.async=!!i),t&dr&&(e.id=t&Cp&&this.type!==h.name?null:this.parseIdent(),e.id&&!(t&To)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?nc:un:Op));var s=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(ec(e.async,e.generator)),t&dr||(e.id=this.type===h.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,r),this.yieldPos=s,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(e,t&dr?"FunctionDeclaration":"FunctionExpression")};x.parseFunctionParams=function(e){this.expect(h.parenL),e.params=this.parseBindingList(h.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};x.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var i=this.enterClassBody(),r=this.startNode(),s=!1;for(r.body=[],this.expect(h.braceL);this.type!==h.braceR;){var a=this.parseClassElement(e.superClass!==null);a&&(r.body.push(a),a.type==="MethodDefinition"&&a.kind==="constructor"?(s&&this.raise(a.start,"Duplicate constructor in the same class"),s=!0):a.key&&a.key.type==="PrivateIdentifier"&&NI(i,a)&&this.raiseRecoverable(a.key.start,"Identifier '#"+a.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(r,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};x.parseClassElement=function(e){if(this.eat(h.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),i="",r=!1,s=!1,a="method",o=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(h.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===h.star?o=!0:i="static"}if(n.static=o,!i&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===h.star)&&!this.canInsertSemicolon()?s=!0:i="async"),!i&&(t>=9||!s)&&this.eat(h.star)&&(r=!0),!i&&!s&&!r){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=u:i=u)}if(i?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=i,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===h.parenL||a!=="method"||r||s){var c=!n.static&&Ks(n,"constructor"),l=c&&e;c&&a!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=c?"constructor":a,this.parseClassMethod(n,r,s,l)}else this.parseClassField(n);return n};x.isClassElementNameStart=function(){return this.type===h.name||this.type===h.privateId||this.type===h.num||this.type===h.string||this.type===h.bracketL||this.type.keyword};x.parseClassElementName=function(e){this.type===h.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};x.parseClassMethod=function(e,t,n,i){var r=e.key;e.kind==="constructor"?(t&&this.raise(r.start,"Constructor can't be a generator"),n&&this.raise(r.start,"Constructor can't be an async method")):e.static&&Ks(e,"prototype")&&this.raise(r.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,i);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};x.parseClassField=function(e){if(Ks(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&Ks(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(h.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};x.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope($r|Zu);this.type!==h.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};x.parseClassId=function(e,t){this.type===h.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,un,!1)):(t===!0&&this.unexpected(),e.id=null)};x.parseClassSuper=function(e){e.superClass=this.eat(h._extends)?this.parseExprSubscripts(null,!1):null};x.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};x.exitClassBody=function(){for(var e=this.privateNameStack.pop(),t=e.declared,n=e.used,i=this.privateNameStack.length,r=i===0?null:this.privateNameStack[i-1],s=0;s<n.length;++s){var a=n[s];jr(t,a.name)||(r?r.used.push(a):this.raiseRecoverable(a.start,"Private field '#"+a.name+"' must be declared in an enclosing class"))}};function NI(e,t){var n=t.key.name,i=e[n],r="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(r=(t.static?"s":"i")+t.kind),i==="iget"&&r==="iset"||i==="iset"&&r==="iget"||i==="sget"&&r==="sset"||i==="sset"&&r==="sget"?(e[n]="true",!1):i?!0:(e[n]=r,!1)}function Ks(e,t){var n=e.computed,i=e.key;return!n&&(i.type==="Identifier"&&i.name===t||i.type==="Literal"&&i.value===t)}x.parseExport=function(e,t){if(this.next(),this.eat(h.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==h.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(h._default)){this.checkExport(t,"default",this.lastTokStart);var n;if(this.type===h._function||(n=this.isAsyncFunction())){var i=this.startNode();this.next(),n&&this.next(),e.declaration=this.parseFunction(i,dr|Cp,!1,n)}else if(this.type===h._class){var r=this.startNode();e.declaration=this.parseClass(r,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(null),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==h.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var s=0,a=e.specifiers;s<a.length;s+=1){var o=a[s];this.checkUnreserved(o.local),this.checkLocalExport(o.local),o.local.type==="Literal"&&this.raise(o.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};x.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),jr(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};x.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var i=0,r=t.properties;i<r.length;i+=1){var s=r[i];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var a=0,o=t.elements;a<o.length;a+=1){var u=o[a];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"?this.checkPatternExport(e,t.argument):n==="ParenthesizedExpression"&&this.checkPatternExport(e,t.expression)};x.checkVariableExport=function(e,t){if(e)for(var n=0,i=t;n<i.length;n+=1){var r=i[n];this.checkPatternExport(e,r.id)}};x.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};x.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(h.braceL);!this.eat(h.braceR);){if(n)n=!1;else if(this.expect(h.comma),this.afterTrailingComma(h.braceR))break;var i=this.startNode();i.local=this.parseModuleExportName(),i.exported=this.eatContextual("as")?this.parseModuleExportName():i.local,this.checkExport(e,i.exported,i.exported.start),t.push(this.finishNode(i,"ExportSpecifier"))}return t};x.parseImport=function(e){return this.next(),this.type===h.string?(e.specifiers=kI,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===h.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};x.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===h.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLValSimple(n.local,un),e.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(h.comma))return e}if(this.type===h.star){var i=this.startNode();return this.next(),this.expectContextual("as"),i.local=this.parseIdent(),this.checkLValSimple(i.local,un),e.push(this.finishNode(i,"ImportNamespaceSpecifier")),e}for(this.expect(h.braceL);!this.eat(h.braceR);){if(t)t=!1;else if(this.expect(h.comma),this.afterTrailingComma(h.braceR))break;var r=this.startNode();r.imported=this.parseModuleExportName(),this.eatContextual("as")?r.local=this.parseIdent():(this.checkUnreserved(r.imported),r.local=r.imported),this.checkLValSimple(r.local,un),e.push(this.finishNode(r,"ImportSpecifier"))}return e};x.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===h.string){var e=this.parseLiteral(this.value);return SI.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};x.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};x.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var Ae=Et.prototype;Ae.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var i=0,r=e.properties;i<r.length;i+=1){var s=r[i];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};Ae.toAssignableList=function(e,t){for(var n=e.length,i=0;i<n;i++){var r=e[i];r&&this.toAssignable(r,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};Ae.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};Ae.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==h.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};Ae.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case h.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(h.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case h.braceL:return this.parseObj(!0)}return this.parseIdent()};Ae.parseBindingList=function(e,t,n){for(var i=[],r=!0;!this.eat(e);)if(r?r=!1:this.expect(h.comma),t&&this.type===h.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===h.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),i.push(s),this.type===h.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else{var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),i.push(a)}}return i};Ae.parseBindingListItem=function(e){return e};Ae.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(h.eq))return n;var i=this.startNodeAt(e,t);return i.left=n,i.right=this.parseMaybeAssign(),this.finishNode(i,"AssignmentPattern")};Ae.checkLValSimple=function(e,t,n){t===void 0&&(t=Gs);var i=t!==Gs;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(i?"Binding ":"Assigning to ")+e.name+" in strict mode"),i&&(t===un&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(jr(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==Fp&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":i&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return i&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(i?"Binding":"Assigning to")+" rvalue")}};Ae.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=Gs),e.type){case"ObjectPattern":for(var i=0,r=e.properties;i<r.length;i+=1){var s=r[i];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var a=0,o=e.elements;a<o.length;a+=1){var u=o[a];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};Ae.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=Gs),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var de=function(t,n,i,r,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!i,this.override=r,this.generator=!!s},ht={b_stat:new de("{",!1),b_expr:new de("{",!0),b_tmpl:new de("${",!1),p_stat:new de("(",!1),p_expr:new de("(",!0),q_tmpl:new de("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new de("function",!1),f_expr:new de("function",!0),f_expr_gen:new de("function",!0,!1,null,!0),f_gen:new de("function",!1,!1,null,!0)},Ji=Et.prototype;Ji.initialContext=function(){return[ht.b_stat]};Ji.curContext=function(){return this.context[this.context.length-1]};Ji.braceIsBlock=function(e){var t=this.curContext();return t===ht.f_expr||t===ht.f_stat?!0:e===h.colon&&(t===ht.b_stat||t===ht.b_expr)?!t.isExpr:e===h._return||e===h.name&&this.exprAllowed?fe.test(this.input.slice(this.lastTokEnd,this.start)):e===h._else||e===h.semi||e===h.eof||e===h.parenR||e===h.arrow?!0:e===h.braceL?t===ht.b_stat:e===h._var||e===h._const||e===h.name?!1:!this.exprAllowed};Ji.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};Ji.updateContext=function(e){var t,n=this.type;n.keyword&&e===h.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};Ji.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};h.parenR.updateContext=h.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===ht.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};h.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?ht.b_stat:ht.b_expr),this.exprAllowed=!0};h.dollarBraceL.updateContext=function(){this.context.push(ht.b_tmpl),this.exprAllowed=!0};h.parenL.updateContext=function(e){var t=e===h._if||e===h._for||e===h._with||e===h._while;this.context.push(t?ht.p_stat:ht.p_expr),this.exprAllowed=!0};h.incDec.updateContext=function(){};h._function.updateContext=h._class.updateContext=function(e){e.beforeExpr&&e!==h._else&&!(e===h.semi&&this.curContext()!==ht.p_stat)&&!(e===h._return&&fe.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===h.colon||e===h.braceL)&&this.curContext()===ht.b_stat)?this.context.push(ht.f_expr):this.context.push(ht.f_stat),this.exprAllowed=!1};h.backQuote.updateContext=function(){this.curContext()===ht.q_tmpl?this.context.pop():this.context.push(ht.q_tmpl),this.exprAllowed=!1};h.star.updateContext=function(e){if(e===h._function){var t=this.context.length-1;this.context[t]===ht.f_expr?this.context[t]=ht.f_expr_gen:this.context[t]=ht.f_gen}this.exprAllowed=!0};h.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==h.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var P=Et.prototype;P.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var i=e.key,r;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){r==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=i.start):this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0);return}r="$"+r;var a=t[r];if(a){var o;s==="init"?o=this.strict&&a.init||a.get||a.set:o=a.init||a[s],o&&this.raiseRecoverable(i.start,"Redefinition of property")}else a=t[r]={init:!1,get:!1,set:!1};a[s]=!0}};P.parseExpression=function(e,t){var n=this.start,i=this.startLoc,r=this.parseMaybeAssign(e,t);if(this.type===h.comma){var s=this.startNodeAt(n,i);for(s.expressions=[r];this.eat(h.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return r};P.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var i=!1,r=-1,s=-1,a=-1;t?(r=t.parenthesizedAssign,s=t.trailingComma,a=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new Sa,i=!0);var o=this.start,u=this.startLoc;(this.type===h.parenL||this.type===h.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var c=this.parseMaybeConditional(e,t);if(n&&(c=n.call(this,c,o,u)),this.type.isAssign){var l=this.startNodeAt(o,u);return l.operator=this.value,this.type===h.eq&&(c=this.toAssignable(c,!1,t)),i||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=c.start&&(t.shorthandAssign=-1),this.type===h.eq?this.checkLValPattern(c):this.checkLValSimple(c),l.left=c,this.next(),l.right=this.parseMaybeAssign(e),a>-1&&(t.doubleProto=a),this.finishNode(l,"AssignmentExpression")}else i&&this.checkExpressionErrors(t,!0);return r>-1&&(t.parenthesizedAssign=r),s>-1&&(t.trailingComma=s),c};P.parseMaybeConditional=function(e,t){var n=this.start,i=this.startLoc,r=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return r;if(this.eat(h.question)){var s=this.startNodeAt(n,i);return s.test=r,s.consequent=this.parseMaybeAssign(),this.expect(h.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return r};P.parseExprOps=function(e,t){var n=this.start,i=this.startLoc,r=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||r.start===n&&r.type==="ArrowFunctionExpression"?r:this.parseExprOp(r,n,i,-1,e)};P.parseExprOp=function(e,t,n,i,r){var s=this.type.binop;if(s!=null&&(!r||this.type!==h._in)&&s>i){var a=this.type===h.logicalOR||this.type===h.logicalAND,o=this.type===h.coalesce;o&&(s=h.logicalAND.binop);var u=this.value;this.next();var c=this.start,l=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,r),c,l,s,r),d=this.buildBinary(t,n,e,f,u,a||o);return(a&&this.type===h.coalesce||o&&(this.type===h.logicalOR||this.type===h.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,i,r)}return e};P.buildBinary=function(e,t,n,i,r,s){i.type==="PrivateIdentifier"&&this.raise(i.start,"Private identifier can only be left side of binary expression");var a=this.startNodeAt(e,t);return a.left=n,a.operator=r,a.right=i,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")};P.parseMaybeUnary=function(e,t,n,i){var r=this.start,s=this.startLoc,a;if(this.isContextual("await")&&this.canAwait)a=this.parseAwait(i),t=!0;else if(this.type.prefix){var o=this.startNode(),u=this.type===h.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0,u,i),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(o.argument):this.strict&&o.operator==="delete"&&o.argument.type==="Identifier"?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):o.operator==="delete"&&Bp(o.argument)?this.raiseRecoverable(o.start,"Private fields can not be deleted"):t=!0,a=this.finishNode(o,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===h.privateId)(i||this.privateNameStack.length===0)&&this.unexpected(),a=this.parsePrivateIdent(),this.type!==h._in&&this.unexpected();else{if(a=this.parseExprSubscripts(e,i),this.checkExpressionErrors(e))return a;for(;this.type.postfix&&!this.canInsertSemicolon();){var c=this.startNodeAt(r,s);c.operator=this.value,c.prefix=!1,c.argument=a,this.checkLValSimple(a),this.next(),a=this.finishNode(c,"UpdateExpression")}}if(!n&&this.eat(h.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(r,s,a,this.parseMaybeUnary(null,!1,!1,i),"**",!1);else return a};function Bp(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&Bp(e.expression)}P.parseExprSubscripts=function(e,t){var n=this.start,i=this.startLoc,r=this.parseExprAtom(e,t);if(r.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return r;var s=this.parseSubscripts(r,n,i,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};P.parseSubscripts=function(e,t,n,i,r){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,a=!1;;){var o=this.parseSubscript(e,t,n,i,s,a,r);if(o.optional&&(a=!0),o===e||o.type==="ArrowFunctionExpression"){if(a){var u=this.startNodeAt(t,n);u.expression=o,o=this.finishNode(u,"ChainExpression")}return o}e=o}};P.parseSubscript=function(e,t,n,i,r,s,a){var o=this.options.ecmaVersion>=11,u=o&&this.eat(h.questionDot);i&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var c=this.eat(h.bracketL);if(c||u&&this.type!==h.parenL&&this.type!==h.backQuote||this.eat(h.dot)){var l=this.startNodeAt(t,n);l.object=e,c?(l.property=this.parseExpression(),this.expect(h.bracketR)):this.type===h.privateId&&e.type!=="Super"?l.property=this.parsePrivateIdent():l.property=this.parseIdent(this.options.allowReserved!=="never"),l.computed=!!c,o&&(l.optional=u),e=this.finishNode(l,"MemberExpression")}else if(!i&&this.eat(h.parenL)){var f=new Sa,d=this.yieldPos,m=this.awaitPos,y=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var g=this.parseExprList(h.parenR,this.options.ecmaVersion>=8,!1,f);if(r&&!u&&!this.canInsertSemicolon()&&this.eat(h.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=m,this.awaitIdentPos=y,this.parseArrowExpression(this.startNodeAt(t,n),g,!0,a);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=m||this.awaitPos,this.awaitIdentPos=y||this.awaitIdentPos;var _=this.startNodeAt(t,n);_.callee=e,_.arguments=g,o&&(_.optional=u),e=this.finishNode(_,"CallExpression")}else if(this.type===h.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var b=this.startNodeAt(t,n);b.tag=e,b.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(b,"TaggedTemplateExpression")}return e};P.parseExprAtom=function(e,t){this.type===h.slash&&this.readRegexp();var n,i=this.potentialArrowAt===this.start;switch(this.type){case h._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),n=this.startNode(),this.next(),this.type===h.parenL&&!this.allowDirectSuper&&this.raise(n.start,"super() call outside constructor of a subclass"),this.type!==h.dot&&this.type!==h.bracketL&&this.type!==h.parenL&&this.unexpected(),this.finishNode(n,"Super");case h._this:return n=this.startNode(),this.next(),this.finishNode(n,"ThisExpression");case h.name:var r=this.start,s=this.startLoc,a=this.containsEsc,o=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&o.name==="async"&&!this.canInsertSemicolon()&&this.eat(h._function))return this.overrideContext(ht.f_expr),this.parseFunction(this.startNodeAt(r,s),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(h.arrow))return this.parseArrowExpression(this.startNodeAt(r,s),[o],!1,t);if(this.options.ecmaVersion>=8&&o.name==="async"&&this.type===h.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return o=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(h.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,s),[o],!0,t)}return o;case h.regexp:var u=this.value;return n=this.parseLiteral(u.value),n.regex={pattern:u.pattern,flags:u.flags},n;case h.num:case h.string:return this.parseLiteral(this.value);case h._null:case h._true:case h._false:return n=this.startNode(),n.value=this.type===h._null?null:this.type===h._true,n.raw=this.type.keyword,this.next(),this.finishNode(n,"Literal");case h.parenL:var c=this.start,l=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(l)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),l;case h.bracketL:return n=this.startNode(),this.next(),n.elements=this.parseExprList(h.bracketR,!0,!0,e),this.finishNode(n,"ArrayExpression");case h.braceL:return this.overrideContext(ht.b_expr),this.parseObj(!1,e);case h._function:return n=this.startNode(),this.next(),this.parseFunction(n,0);case h._class:return this.parseClass(this.startNode(),!1);case h._new:return this.parseNew();case h.backQuote:return this.parseTemplate();case h._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}};P.parseExprImport=function(){var e=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var t=this.parseIdent(!0);switch(this.type){case h.parenL:return this.parseDynamicImport(e);case h.dot:return e.meta=t,this.parseImportMeta(e);default:this.unexpected()}};P.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(h.parenR)){var t=this.start;this.eat(h.comma)&&this.eat(h.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};P.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};P.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};P.parseParenExpression=function(){this.expect(h.parenL);var e=this.parseExpression();return this.expect(h.parenR),e};P.parseParenAndDistinguishExpression=function(e,t){var n=this.start,i=this.startLoc,r,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a=this.start,o=this.startLoc,u=[],c=!0,l=!1,f=new Sa,d=this.yieldPos,m=this.awaitPos,y;for(this.yieldPos=0,this.awaitPos=0;this.type!==h.parenR;)if(c?c=!1:this.expect(h.comma),s&&this.afterTrailingComma(h.parenR,!0)){l=!0;break}else if(this.type===h.ellipsis){y=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===h.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var g=this.lastTokEnd,_=this.lastTokEndLoc;if(this.expect(h.parenR),e&&!this.canInsertSemicolon()&&this.eat(h.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=m,this.parseParenArrowList(n,i,u,t);(!u.length||l)&&this.unexpected(this.lastTokStart),y&&this.unexpected(y),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=m||this.awaitPos,u.length>1?(r=this.startNodeAt(a,o),r.expressions=u,this.finishNodeAt(r,"SequenceExpression",g,_)):r=u[0]}else r=this.parseParenExpression();if(this.options.preserveParens){var b=this.startNodeAt(n,i);return b.expression=r,this.finishNode(b,"ParenthesizedExpression")}else return r};P.parseParenItem=function(e){return e};P.parseParenArrowList=function(e,t,n,i){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,i)};var OI=[];P.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(h.dot)){e.meta=t;var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var i=this.start,r=this.startLoc,s=this.type===h._import;return e.callee=this.parseSubscripts(this.parseExprAtom(),i,r,!0,!1),s&&e.callee.type==="ImportExpression"&&this.raise(i,"Cannot use new with import()"),this.eat(h.parenL)?e.arguments=this.parseExprList(h.parenR,this.options.ecmaVersion>=8,!1):e.arguments=OI,this.finishNode(e,"NewExpression")};P.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===h.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===h.backQuote,this.finishNode(n,"TemplateElement")};P.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var i=this.parseTemplateElement({isTagged:t});for(n.quasis=[i];!i.tail;)this.type===h.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(h.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(h.braceR),n.quasis.push(i=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};P.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===h.name||this.type===h.num||this.type===h.string||this.type===h.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===h.star)&&!fe.test(this.input.slice(this.lastTokEnd,this.start))};P.parseObj=function(e,t){var n=this.startNode(),i=!0,r={};for(n.properties=[],this.next();!this.eat(h.braceR);){if(i)i=!1;else if(this.expect(h.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(h.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,r,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};P.parseProperty=function(e,t){var n=this.startNode(),i,r,s,a;if(this.options.ecmaVersion>=9&&this.eat(h.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===h.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===h.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,a=this.startLoc),e||(i=this.eat(h.star)));var o=this.containsEsc;return this.parsePropertyName(n),!e&&!o&&this.options.ecmaVersion>=8&&!i&&this.isAsyncProp(n)?(r=!0,i=this.options.ecmaVersion>=9&&this.eat(h.star),this.parsePropertyName(n)):r=!1,this.parsePropertyValue(n,e,i,r,s,a,t,o),this.finishNode(n,"Property")};P.parsePropertyValue=function(e,t,n,i,r,s,a,o){if((n||i)&&this.type===h.colon&&this.unexpected(),this.eat(h.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===h.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,i);else if(!t&&!o&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==h.comma&&this.type!==h.braceR&&this.type!==h.eq){(n||i)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var u=e.kind==="get"?0:1;if(e.value.params.length!==u){var c=e.value.start;e.kind==="get"?this.raiseRecoverable(c,"getter should have no params"):this.raiseRecoverable(c,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}else this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||i)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=r),e.kind="init",t?e.value=this.parseMaybeDefault(r,s,this.copyNode(e.key)):this.type===h.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(r,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};P.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(h.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(h.bracketR),e.key;e.computed=!1}return e.key=this.type===h.num||this.type===h.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};P.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};P.parseMethod=function(e,t,n){var i=this.startNode(),r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(i),this.options.ecmaVersion>=6&&(i.generator=e),this.options.ecmaVersion>=8&&(i.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(ec(t,i.generator)|Zu|(n?Np:0)),this.expect(h.parenL),i.params=this.parseBindingList(h.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(i,!1,!0,!1),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(i,"FunctionExpression")};P.parseArrowExpression=function(e,t,n,i){var r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(ec(n,!1)|Tp),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,i),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(e,"ArrowFunctionExpression")};P.parseFunctionBody=function(e,t,n,i){var r=t&&this.type!==h.braceL,s=this.strict,a=!1;if(r)e.body=this.parseMaybeAssign(i),e.expression=!0,this.checkParams(e,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||o)&&(a=this.strictDirective(this.end),a&&o&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(e,!s&&!a&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,Fp),e.body=this.parseBlock(!1,void 0,a&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};P.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var i=n[t];if(i.type!=="Identifier")return!1}return!0};P.checkParams=function(e,t){for(var n=Object.create(null),i=0,r=e.params;i<r.length;i+=1){var s=r[i];this.checkLValInnerPattern(s,nc,t?null:n)}};P.parseExprList=function(e,t,n,i){for(var r=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(h.comma),t&&this.afterTrailingComma(e))break;var a=void 0;n&&this.type===h.comma?a=null:this.type===h.ellipsis?(a=this.parseSpread(i),i&&this.type===h.comma&&i.trailingComma<0&&(i.trailingComma=this.start)):a=this.parseMaybeAssign(!1,i),r.push(a)}return r};P.checkUnreserved=function(e){var t=e.start,n=e.end,i=e.name;if(this.inGenerator&&i==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&i==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&i==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(i==="arguments"||i==="await")&&this.raise(t,"Cannot use "+i+" in class static initialization block"),this.keywords.test(i)&&this.raise(t,"Unexpected keyword '"+i+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var r=this.strict?this.reservedWordsStrict:this.reservedWords;r.test(i)&&(!this.inAsync&&i==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+i+"' is reserved"))}};P.parseIdent=function(e){var t=this.startNode();return this.type===h.name?t.name=this.value:this.type.keyword?(t.name=this.type.keyword,(t.name==="class"||t.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop()):this.unexpected(),this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};P.parsePrivateIdent=function(){var e=this.startNode();return this.type===h.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e),e};P.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===h.semi||this.canInsertSemicolon()||this.type!==h.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(h.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};P.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var Qs=Et.prototype;Qs.raise=function(e,t){var n=Ep(this.input,e);t+=" ("+n.line+":"+n.column+")";var i=new SyntaxError(t);throw i.pos=e,i.loc=n,i.raisedAt=this.pos,i};Qs.raiseRecoverable=Qs.raise;Qs.curPosition=function(){if(this.options.locations)return new Tr(this.curLine,this.pos-this.lineStart)};var Vn=Et.prototype,RI=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Vn.enterScope=function(e){this.scopeStack.push(new RI(e))};Vn.exitScope=function(){this.scopeStack.pop()};Vn.treatFunctionsAsVarInScope=function(e){return e.flags&Qi||!this.inModule&&e.flags&kr};Vn.declareName=function(e,t,n){var i=!1;if(t===un){var r=this.currentScope();i=r.lexical.indexOf(e)>-1||r.functions.indexOf(e)>-1||r.var.indexOf(e)>-1,r.lexical.push(e),this.inModule&&r.flags&kr&&delete this.undefinedExports[e]}else if(t===Rp){var s=this.currentScope();s.lexical.push(e)}else if(t===Op){var a=this.currentScope();this.treatFunctionsAsVar?i=a.lexical.indexOf(e)>-1:i=a.lexical.indexOf(e)>-1||a.var.indexOf(e)>-1,a.functions.push(e)}else for(var o=this.scopeStack.length-1;o>=0;--o){var u=this.scopeStack[o];if(u.lexical.indexOf(e)>-1&&!(u.flags&kp&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){i=!0;break}if(u.var.push(e),this.inModule&&u.flags&kr&&delete this.undefinedExports[e],u.flags&tc)break}i&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};Vn.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};Vn.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Vn.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&tc)return t}};Vn.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&tc&&!(t.flags&Tp))return t}};var Ia=function(t,n,i){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new xa(t,i)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},zr=Et.prototype;zr.startNode=function(){return new Ia(this,this.start,this.startLoc)};zr.startNodeAt=function(e,t){return new Ia(this,e,t)};function Lp(e,t,n,i){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=i),this.options.ranges&&(e.range[1]=n),e}zr.finishNode=function(e,t){return Lp.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};zr.finishNodeAt=function(e,t,n,i){return Lp.call(this,e,t,n,i)};zr.copyNode=function(e){var t=new Ia(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var Dp="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Mp=Dp+" Extended_Pictographic",Pp=Mp,Up=Pp+" EBase EComp EMod EPres ExtPict",Vp=Up,FI=Vp,CI={9:Dp,10:Mp,11:Pp,12:Up,13:Vp,14:FI},Rl="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",jp="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",$p=jp+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",zp=$p+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",qp=zp+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Wp=qp+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",BI=Wp+" Kawi Nag_Mundari Nagm",LI={9:jp,10:$p,11:zp,12:qp,13:Wp,14:BI},Yp={};function DI(e){var t=Yp[e]={binary:Zn(CI[e]+" "+Rl),nonBinary:{General_Category:Zn(Rl),Script:Zn(LI[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var Ja=0,Fl=[9,10,11,12,13,14];Ja<Fl.length;Ja+=1){var MI=Fl[Ja];DI(MI)}var v=Et.prototype,bn=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":""),this.unicodeProperties=Yp[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};bn.prototype.reset=function(t,n,i){var r=i.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=i,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9};bn.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};bn.prototype.at=function(t,n){n===void 0&&(n=!1);var i=this.source,r=i.length;if(t>=r)return-1;var s=i.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=r)return s;var a=i.charCodeAt(t+1);return a>=56320&&a<=57343?(s<<10)+a-56613888:s};bn.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var i=this.source,r=i.length;if(t>=r)return r;var s=i.charCodeAt(t),a;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=r||(a=i.charCodeAt(t+1))<56320||a>57343?t+1:t+2};bn.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};bn.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};bn.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};bn.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};v.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,i=0;i<n.length;i++){var r=n.charAt(i);t.indexOf(r)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(r,i+1)>-1&&this.raise(e.start,"Duplicate regular expression flag")}};v.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};v.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var i=n[t];e.groupNames.indexOf(i)===-1&&e.raise("Invalid named capture referenced")}};v.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};v.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};v.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};v.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};v.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};v.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};v.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var i=0,r=-1;if(this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue),e.eat(125)))return r!==-1&&r<i&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};v.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};v.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};v.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};v.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};v.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};v.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};v.regexp_eatSyntaxCharacter=function(e){var t=e.current();return Hp(t)?(e.lastIntValue=t,e.advance(),!0):!1};function Hp(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}v.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!Hp(n);)e.advance();return e.pos!==t};v.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};v.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};v.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};v.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=Bn(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=Bn(e.lastIntValue);return!0}return!1};v.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,i=e.current(n);return e.advance(n),i===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(i=e.lastIntValue),PI(i)?(e.lastIntValue=i,!0):(e.pos=t,!1)};function PI(e){return mn(e,!0)||e===36||e===95}v.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,i=e.current(n);return e.advance(n),i===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(i=e.lastIntValue),UI(i)?(e.lastIntValue=i,!0):(e.pos=t,!1)};function UI(e){return ji(e,!0)||e===36||e===95||e===8204||e===8205}v.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};v.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};v.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};v.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};v.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};v.regexp_eatZero=function(e){return e.current()===48&&!Ea(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};v.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};v.regexp_eatControlLetter=function(e){var t=e.current();return Gp(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function Gp(e){return e>=65&&e<=90||e>=97&&e<=122}v.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,i=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var r=e.lastIntValue;if(i&&r>=55296&&r<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var a=e.lastIntValue;if(a>=56320&&a<=57343)return e.lastIntValue=(r-55296)*1024+(a-56320)+65536,!0}e.pos=s,e.lastIntValue=r}return!0}if(i&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&VI(e.lastIntValue))return!0;i&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function VI(e){return e>=0&&e<=1114111}v.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};v.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};v.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(jI(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(t===80||t===112)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1};function jI(e){return e===100||e===68||e===115||e===83||e===119||e===87}v.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,i),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,r),!0}return!1};v.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){jr(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};v.regexp_validateUnicodePropertyNameOrValue=function(e,t){e.unicodeProperties.binary.test(t)||e.raise("Invalid property name")};v.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";Kp(t=e.current());)e.lastStringValue+=Bn(t),e.advance();return e.lastStringValue!==""};function Kp(e){return Gp(e)||e===95}v.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";$I(t=e.current());)e.lastStringValue+=Bn(t),e.advance();return e.lastStringValue!==""};function $I(e){return Kp(e)||Ea(e)}v.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};v.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1};v.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};v.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||Xp(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var i=e.current();return i!==93?(e.lastIntValue=i,e.advance(),!0):!1};v.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};v.regexp_eatClassControlLetter=function(e){var t=e.current();return Ea(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};v.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};v.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;Ea(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function Ea(e){return e>=48&&e<=57}v.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;Qp(n=e.current());)e.lastIntValue=16*e.lastIntValue+Jp(n),e.advance();return e.pos!==t};function Qp(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function Jp(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}v.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};v.regexp_eatOctalDigit=function(e){var t=e.current();return Xp(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function Xp(e){return e>=48&&e<=55}v.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var i=0;i<t;++i){var r=e.current();if(!Qp(r))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+Jp(r),e.advance()}return!0};var rc=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new xa(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},$=Et.prototype;$.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new rc(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};$.getToken=function(){return this.next(),new rc(this)};typeof Symbol<"u"&&($[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===h.eof,value:t}}}});$.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(h.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};$.readToken=function(e){return mn(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};$.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};$.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var i=void 0,r=t;(i=xp(this.input,r,this.pos))>-1;)++this.curLine,r=this.lineStart=i;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};$.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),i=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!Ki(i);)i=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};$.skipSpace=function(){t:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(e>8&&e<14||e>=5760&&Sp.test(String.fromCharCode(e)))++this.pos;else break t}}};$.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};$.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(h.ellipsis)):(++this.pos,this.finishToken(h.dot))};$.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(h.assign,2):this.finishOp(h.slash,1)};$.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,i=e===42?h.star:h.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,i=h.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(h.assign,n+1):this.finishOp(i,n)};$.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(h.assign,3)}return this.finishOp(e===124?h.logicalOR:h.logicalAND,2)}return t===61?this.finishOp(h.assign,2):this.finishOp(e===124?h.bitwiseOR:h.bitwiseAND,1)};$.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(h.assign,2):this.finishOp(h.bitwiseXOR,1)};$.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||fe.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(h.incDec,2):t===61?this.finishOp(h.assign,2):this.finishOp(h.plusMin,1)};$.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(h.assign,n+1):this.finishOp(h.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(h.relational,n))};$.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(h.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(h.arrow)):this.finishOp(e===61?h.eq:h.prefix,1)};$.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(h.questionDot,2)}if(t===63){if(e>=12){var i=this.input.charCodeAt(this.pos+2);if(i===61)return this.finishOp(h.assign,3)}return this.finishOp(h.coalesce,2)}}return this.finishOp(h.question,1)};$.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),mn(t,!0)||t===92))return this.finishToken(h.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Bn(t)+"'")};$.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(h.parenL);case 41:return++this.pos,this.finishToken(h.parenR);case 59:return++this.pos,this.finishToken(h.semi);case 44:return++this.pos,this.finishToken(h.comma);case 91:return++this.pos,this.finishToken(h.bracketL);case 93:return++this.pos,this.finishToken(h.bracketR);case 123:return++this.pos,this.finishToken(h.braceL);case 125:return++this.pos,this.finishToken(h.braceR);case 58:return++this.pos,this.finishToken(h.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(h.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(h.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Bn(e)+"'")};$.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};$.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var i=this.input.charAt(this.pos);if(fe.test(i)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(i==="[")t=!0;else if(i==="]"&&t)t=!1;else if(i==="/"&&!t)break;e=i==="\\"}++this.pos}var r=this.input.slice(n,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var o=this.regexpState||(this.regexpState=new bn(this));o.reset(n,r,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var u=null;try{u=new RegExp(r,a)}catch{}return this.finishToken(h.regexp,{pattern:r,flags:a,value:u})};$.readInt=function(e,t,n){for(var i=this.options.ecmaVersion>=12&&t===void 0,r=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,a=0,o=0,u=0,c=t??1/0;u<c;++u,++this.pos){var l=this.input.charCodeAt(this.pos),f=void 0;if(i&&l===95){r&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),o===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),o=l;continue}if(l>=97?f=l-97+10:l>=65?f=l-65+10:l>=48&&l<=57?f=l-48:f=1/0,f>=e)break;o=l,a=a*e+f}return i&&o===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:a};function zI(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function Zp(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}$.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=Zp(this.input.slice(t,this.pos)),++this.pos):mn(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(h.num,n)};$.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var i=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&i===110){var r=Zp(this.input.slice(t,this.pos));return++this.pos,mn(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(h.num,r)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),i===46&&!n&&(++this.pos,this.readInt(10),i=this.input.charCodeAt(this.pos)),(i===69||i===101)&&!n&&(i=this.input.charCodeAt(++this.pos),(i===43||i===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),mn(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=zI(this.input.slice(t,this.pos),n);return this.finishToken(h.num,s)};$.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};$.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var i=this.input.charCodeAt(this.pos);if(i===e)break;i===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):i===8232||i===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Ki(i)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(h.string,t)};var tm={};$.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===tm)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};$.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw tm;this.raise(e,t)};$.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===h.template||this.type===h.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(h.dollarBraceL)):(++this.pos,this.finishToken(h.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(h.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(Ki(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};$.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(h.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};$.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Bn(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var i=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(i,8);return r>255&&(i=i.slice(0,-1),r=parseInt(i,8)),this.pos+=i.length-1,t=this.input.charCodeAt(this.pos),(i!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-i.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return Ki(t)?"":String.fromCharCode(t)}};$.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};$.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,i=this.options.ecmaVersion>=6;this.pos<this.input.length;){var r=this.fullCharCodeAtPos();if(ji(r,i))this.pos+=r<=65535?1:2;else if(r===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(t?mn:ji)(a,i)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=Bn(a),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};$.readWord=function(){var e=this.readWord1(),t=h.name;return this.keywords.test(e)&&(t=Ju[e]),this.finishToken(t,e)};var qI="8.8.2";Et.acorn={Parser:Et,version:qI,defaultOptions:Ao,Position:Tr,SourceLocation:xa,getLineInfo:Ep,Node:Ia,TokenType:G,tokTypes:h,keywordTypes:Ju,TokContext:de,tokContexts:ht,isIdentifierChar:ji,isIdentifierStart:mn,Token:rc,isNewLine:Ki,lineBreak:fe,lineBreakG:vI,nonASCIIwhitespace:Sp};function WI(e,t){return Et.parse(e,t)}const sc={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},YI={ecmaVersion:11},Cl="$",HI="d",GI="d1",KI="d2",Tt=e=>(t,n)=>n.error(t,e+" not allowed"),QI=Tt("Aggregate function"),JI=Tt("Window function"),XI="Invalid argument",ac="Invalid column reference",ZI=ac+" (must be input to an aggregate function)",em="Invalid function call",tE="Invalid member expression",eE="Invalid operator parameter",nE="Invalid param reference",iE="Invalid variable reference",rE="Variable not accessible in operator call",sE="Unsupported variable declaration",aE="Unsupported destructuring pattern",nm="Table expressions do not support closures",im="Use aq.escape(fn) to use a function as-is (including closures)",oE="use table.params({ name: value }) to define dynamic parameters",uE="use aq.addFunction(name, fn) to add new op functions",cE=`
Note: ${nm}. ${im}, or ${oE}.`,rm=`
Note: ${nm}. ${im}, or ${uE}.`,lE=`The ${op} method is not valid in multi-table expressions.`;function hE(e,t){const n=fE(t);let i=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,lI(i)?(pE(i,e),i=i.body):e.join?(e.scope.add(e.tuple1=GI),e.scope.add(e.tuple2=KI),e.scope.add(e.$param=Cl)):(e.scope.add(e.tuple=HI),e.scope.add(e.$param=Cl)),Y(i,e,oc),e.root}function fE(e){try{const t=e.field?dE(e):J(e)?He(e):e;return WI(`expr=(${t})`,YI).body[0].expression.right}catch{D(`Expression parse error: ${e+""}`)}}function dE(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const oc={FunctionDeclaration:Tt("Function definitions"),ForStatement:Tt("For loops"),ForOfStatement:Tt("For-of loops"),ForInStatement:Tt("For-in loops"),WhileStatement:Tt("While loops"),DoWhileStatement:Tt("Do-while loops"),AwaitExpression:Tt("Await expressions"),ArrowFunctionExpression:Tt("Function definitions"),AssignmentExpression:Tt("Assignments"),FunctionExpression:Tt("Function definitions"),NewExpression:Tt('Use of "new"'),UpdateExpression:Tt("Update expressions"),VariableDeclarator(e,t){Oo(e.id,t)},Identifier(e,t,n){om(e,t,n)&&!t.scope.has(e.name)&&t.error(e,iE,cE)},CallExpression(e,t){const n=sm(e.callee),i=rp(n)||sp(n);if(i){if((t.join||t.aggregate===!1)&&zu(n)&&QI(e,t),(t.join||t.window===!1)&&qu(n)&&JI(e,t),t.$op=1,t.ast)No(e,n,t),e.arguments.forEach(r=>Y(r,t,ko));else{const r=t.op(mE(t,i,n,e.arguments));Object.assign(e,{type:Zd,name:r.id})}return t.$op=0,!1}else ip(n)?No(e,n,t):t.error(e,em,rm)},MemberExpression(e,t,n){const{object:i,property:r}=e;if(!It(Tn,i))return;const{name:s}=i;if(am(e)&&It(Tn,r)&&xe(sc,r.name)){lm(e,r.name);return}const a=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(a>=0)return Bl(e,a,t,um,n);if(s===t.$param)return Bl(e,a,t,gE);t.paramsRef.has(s)?Nr(e,t.paramsRef.get(s)):t.columnRef.has(s)?cm(i,s,t,e):xe(t.params,s)&&Nr(i,s)}};function Bl(e,t,n,i,r){const{property:s,computed:a}=e;let o;if(!a)o=s.name;else if(It(Gi,s))o=s.value;else try{Y(s,n,oc,e),o=n.param(s)}catch{n.error(e,tE)}return i(e,o,t,n,r),!1}const ko={...oc,VariableDeclarator:Tt("Variable declaration in operator call"),Identifier(e,t,n){om(e,t,n)&&t.error(e,rE)},CallExpression(e,t){const n=sm(e.callee);ip(n)?No(e,n,t):t.error(e,em,rm)}};function pE(e,t){e.generator&&Tt("Generator functions")(e,t),e.async&&Tt("Async functions")(e,t);const{params:n}=e,i=n.length,r=a=>(o,u)=>t.columnRef.set(o,[u,a]),s=(a,o)=>t.paramsRef.set(a,o);i&&(t.join?(sr(t,n[0],"tuple1",r(1)),i>1&&sr(t,n[1],"tuple2",r(2)),i>2&&sr(t,n[2],"$param",s)):(sr(t,n[0],"tuple",r(0)),i>1&&sr(t,n[1],"$param",s))),t.root=e.body}function sr(e,t,n,i){It(Tn,t)?(e.scope.add(t.name),e[n]=t.name):It(Jd,t)&&t.properties.forEach(r=>{const s=It(Tn,r.key)?r.key.name:It(Gi,r.key)?r.key.value:e.error(r,XI);It(Tn,r.value)||e.error(r.value,aE),i(r.value.name,s)})}function mE(e,t,n,i){const r=[],s=[],a=t.param[0]||0,o=a+(t.param[1]||0);return i.forEach((u,c)=>{c<a?(Y(u,e,ko),r.push(e.field(u))):c<o?(Y(u,e,ko),s.push(e.param(u))):e.error(u,eE)}),{name:n,fields:r,params:s,...e.spec.window||{}}}function sm(e){return It(Tn,e)?e.name:It(Qd,e)?am(e)?yE(e.property.name):e.property.name:null}function am(e){return It(Tn,e.object)&&e.object.name==="Math"}function yE(e){return e==="max"?"greatest":e==="min"?"least":e}function om(e,t,n){const{name:i}=e;if(!(It(Qd,n)&&n.property===e)){if(!(It(Xd,n)&&n.key===e))if(t.paramsRef.has(i))Nr(e,t.paramsRef.get(i));else if(t.columnRef.has(i))cm(e,i,t,n);else if(xe(t.params,i))Nr(e,i);else if(xe(sc,i))lm(e,i);else return!0}}function um(e,t,n,i,r){const s=n===0?i.table:n>0?i.join[n-1]:null,a=s&&s.column(t);s&&!a&&i.error(e,ac),i.aggronly&&!i.$op&&i.error(e,ZI),ap(e,t,n,a,r)}function cm(e,t,n,i){const[r,s]=n.columnRef.get(t);um(e,r,s,n,i)}function gE(e,t,n,i){i.params&&!xe(i.params,t)&&i.error(e,nE),Nr(e,t)}function Nr(e,t){e.type=hS,e.name=t}function lm(e,t){e.type=uS,e.name=t,e.raw=sc[t]}function No(e,t,n){if(t===op){const i=n.table;i||n.error(e,lE),up(e,e.arguments.length?e.arguments.map(r=>{const s=n.param(r),a=Bt(s)?i.columnName(s):s;return i.column(a)||n.error(r,ac),a}):i.columnNames())}else e.callee={type:lS,name:t}}function Oo(e,t){It(Tn,e)?t.scope.add(e.name):It(rS,e)?e.elements.forEach(n=>Oo(n,t)):It(Jd,e)?e.properties.forEach(n=>Oo(n.value,t)):t.error(e.id,sE)}const _E={[Vr]:1,[Zd]:1};function Yt(e,t={}){const n=t.generate||Ys,i=t.compiler||Wu,r=vE(t),s={},a={},o=[],u=[];let c=0,l=-1;const f=t.join?i.join:t.index==1?i.expr2:i.expr,d={op(g){const _=bE(g);return a[_]||(g.id=++l,a[_]=g)},field(g){const _=n(g);return s[_]||(s[_]=++c)},param(g){return It(Gi,g)?g.value:i.param(n(g),r)},value(g,_){o.push(g);const b=_.escape||(t.ast?cI(_):f(n(_),r));u.push(b),_E[_.type]&&b!==_&&Rt(b)&&(b.field=_.name)},error(g,_,b=""){const N=g.start-6,Z=g.end-6,w=String(d.spec).slice(N,Z);D(`${_}: "${w}"${b}`)}};Object.assign(d,t,{params:r});for(const[g,_]of _a(e))d.value(g+"",_.escape?dI(d,_,r):hE(d,_));if(t.ast)return{names:o,exprs:u};const m=[];for(const g in s)m[s[g]]=i.expr(g,r);const y=Object.values(a);return y.forEach(g=>g.fields=g.fields.map(_=>m[_])),{names:o,exprs:u,ops:y}}function bE(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(i=>Number.isFinite(i)?Math.abs(i):-1);t+=`[${n},${!!e.peers}]`}return t}function vE(e){return(e.table?Xa(e.table):e.join?{...Xa(e.join[1]),...Xa(e.join[0])}:{})||{}}function Xa(e){return e&&lt(e.params)?e.params():{}}const hm="Expr",pe="ExprList",fm="ExprNumber",lr="ExprObject",_i="JoinKeys",Js="JoinValues",se="Options",uc="OrderKeys",xn="SelectionList",qn="TableRef",bi="TableRefList",wE="Descending",xE="Query",SE="Selection",IE="Verb",EE="Window";function cc(e,t){return e&&e.expr?new Ll({...e,...t}):new Ll(t,e)}class Ll{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...lt(this.expr)?{func:!0}:{}}}}function AE(e){return cc(e,{desc:!0})}function ai(e,t,n=0){const i=n?{field:!0,table:n}:{field:!0};return cc(e,t?{expr:t,...i}:i)}function TE(e,t,n){return cc(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function kE(e){const t=n=>n;return t.toString=()=>e,t}function Dl(e,t){return t=t&&lt(t.query)?t.query():t,t&&lt(t.evaluate)?t.evaluate(null,e):e(t)}function dm(e){return Rt(e)&&(J(e.all)||J(e.matches)||J(e.not)||J(e.range))}function Or(e){return e&&lt(e.toObject)?e.toObject():lt(e)?{expr:String(e),func:!0}:J(e)?e.map(Or):Rt(e)?va(e,t=>Or(t)):e}function lc(e){return J(e)?e.map(lc):Rt(e)?J(e.verbs)?qr.from(e):J(e.all)?Vi():J(e.range)?rI(...e.range):J(e.match)?sI(RegExp(...e.match)):J(e.not)?_p(e.not.map(Or)):NE(e):e}function NE(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=ai(n):e.func===!0&&(t=n=kE(n)),Rt(e.window)){const{frame:i,peers:r}=e.window;t=n=TE(n,i,r)}e.desc===!0&&(t=AE(n))}return e===t?va(e,i=>lc(i)):t}function OE(e){return J(e)?e.map(RE):e}function RE(e){const t=[];return Wt(e).forEach(n=>{Bt(n)?t.push(n):Ot(n)?t.push(ai(n,null)):Rt(n)&&n.expr||lt(n)?t.push(n):D(`Invalid key value: ${n+""}`)}),t}function FE(e){return J(e)?e.map(CE):e}function CE(e,t){return t<2?Wt(e):e}function BE(e){const t=[];return e.forEach(n=>{const i=n.expr!=null?n.expr:n;if(Rt(i)&&!lt(i))for(const r in i)t.push(i[r]);else n=Bt(i)?i:Ot(i)?ai(n):lt(i)?n:D(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const LE={[hm]:gm,[pe]:$i,[fm]:jE,[lr]:Ln,[_i]:$E,[Js]:zE,[uc]:$i,[xn]:UE};function DE(e,t,n){return t===qn?Ml(e):t===bi?e.map(Ml):pm(Or(e),t,n)}function pm(e,t,n){return t===se?e&&ME(e,n):LE[t](e)}function ME(e,t={}){const n={};for(const i in e){const r=e[i];n[i]=t[i]?pm(r,t[i]):r}return n}function PE(e,t){return Yt({expr:e},{...t,ast:!0}).exprs[0]}function hc(e){return{type:Vr,name:e}}function mm(e){return{type:Vr,index:e}}function Ln(e,t){if(Ot(e))return PE(e,t);if(e.expr){let n;if(e.field===!0?n=hc(e.expr):e.func===!0&&(n=Ln(e.expr,t)),n)return e.desc&&(n={type:wE,expr:n}),e.window&&(n={type:EE,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...Ln(e[n],t),as:n}))}function ym(e){const t=SE;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:$i(e.not)}:e.range?{type:t,operator:"range",arguments:$i(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:D("Invalid input")}function UE(e){return Wt(e).map(VE).flat()}function VE(e){return dm(e)?ym(e):Bt(e)?mm(e):Ot(e)?hc(e):Rt(e)?Object.keys(e).map(t=>({type:Vr,name:t,as:e[t]})):D("Invalid input")}function gm(e){return dm(e)?ym(e):Bt(e)?mm(e):Ot(e)?hc(e):Rt(e)?Ln(e):D("Invalid input")}function $i(e){return Wt(e).map(gm).flat()}function jE(e){return Bt(e)?e:Ln(e)}function $E(e){return J(e)?e.map($i):Ln(e,{join:!0})}function zE(e){return J(e)?e.map((t,n)=>n<2?$i(t):Ln(t,{join:!0})):Ln(e,{join:!0})}function Ml(e){return e&&lt(e.toAST)?e.toAST():e}class _m{constructor(t,n=[],i=[]){this.verb=t,this.schema=n,n.forEach((r,s)=>{const a=r.type,o=i[s],u=a===_i?OE(o):a===Js?FE(o):a===uc?BE(o):o;this[r.name]=u!==void 0?u:r.default})}static from(t){const n=Ro[t.verb],i=(n.schema||[]).map(({name:r})=>lc(t[r]));return n(...i)}evaluate(t,n){const i=this.schema.map(({name:r,type:s})=>{const a=this[r];return s===qn?Dl(n,a):s===bi?a.map(o=>Dl(n,o)):a});return t[this.verb](...i)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=Or(this[n])}),t}toAST(){const t={type:IE,verb:this.verb};return this.schema.forEach(({name:n,type:i,props:r})=>{t[n]=DE(this[n],i,r)}),t}}function rt(e,t){return Object.assign((...n)=>new _m(e,t,n),{schema:t})}const Ro={count:rt("count",[{name:"options",type:se}]),derive:rt("derive",[{name:"values",type:lr},{name:"options",type:se,props:{before:xn,after:xn}}]),filter:rt("filter",[{name:"criteria",type:lr}]),groupby:rt("groupby",[{name:"keys",type:pe}]),orderby:rt("orderby",[{name:"keys",type:uc}]),relocate:rt("relocate",[{name:"columns",type:xn},{name:"options",type:se,props:{before:xn,after:xn}}]),rename:rt("rename",[{name:"columns",type:xn}]),rollup:rt("rollup",[{name:"values",type:lr}]),sample:rt("sample",[{name:"size",type:fm},{name:"options",type:se,props:{weight:hm}}]),select:rt("select",[{name:"columns",type:xn}]),ungroup:rt("ungroup"),unorder:rt("unorder"),reify:rt("reify"),dedupe:rt("dedupe",[{name:"keys",type:pe,default:[]}]),impute:rt("impute",[{name:"values",type:lr},{name:"options",type:se,props:{expand:pe}}]),fold:rt("fold",[{name:"values",type:pe},{name:"options",type:se}]),pivot:rt("pivot",[{name:"keys",type:pe},{name:"values",type:pe},{name:"options",type:se}]),spread:rt("spread",[{name:"values",type:pe},{name:"options",type:se}]),unroll:rt("unroll",[{name:"values",type:pe},{name:"options",type:se,props:{drop:pe}}]),lookup:rt("lookup",[{name:"table",type:qn},{name:"on",type:_i},{name:"values",type:pe}]),join:rt("join",[{name:"table",type:qn},{name:"on",type:_i},{name:"values",type:Js},{name:"options",type:se}]),cross:rt("cross",[{name:"table",type:qn},{name:"values",type:Js},{name:"options",type:se}]),semijoin:rt("semijoin",[{name:"table",type:qn},{name:"on",type:_i}]),antijoin:rt("antijoin",[{name:"table",type:qn},{name:"on",type:_i}]),concat:rt("concat",[{name:"tables",type:bi}]),union:rt("union",[{name:"tables",type:bi}]),intersect:rt("intersect",[{name:"tables",type:bi}]),except:rt("except",[{name:"tables",type:bi}])};class qr extends Md{constructor(t,n,i){super(n),this._verbs=t||[],this._table=i}static from({verbs:t,table:n,params:i}){return new qr(t.map(_m.from),i,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const i of this._verbs)t=i.evaluate(t.params(this._params),n);return t}toObject(){return Pl(this,"toObject")}toJSON(){return this.toObject()}toAST(){return Pl(this,"toAST",{type:xE})}}function Pl(e,t,n){return{...n,verbs:e._verbs.map(i=>i[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function qE(e,t){return new qr(e._verbs.concat(t),e._params,e._table)}for(const e in Ro){const t=Ro[e];qr.prototype["__"+e]=function(n,...i){return qE(n,t(...i))}}function Xi(e,t,...n){const i=["_","$"],r=i.slice(0,n.length);return r.push('"use strict"; const '+n.map((s,a)=>s.map((o,u)=>`${i[a]}${u} = ${i[a]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...r)(...n)}function WE(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function fc(e,t){const n=ee();return t.forEach((i,r)=>{const s=Ot(i)?i:r;if(s){const a=e.column(r)||D(`Unrecognized column: ${r}`);n.add(s,a)}}),e.create(n)}function bm(e,t,{before:n,after:i}={}){const r=n!=null,s=i!=null;r||s||D("relocate requires a before or after option."),r&&s&&D("relocate accepts only one of the before or after options."),t=pn(e,t);const a=[...pn(e,r?n:i).keys()],o=r?a[0]:a.pop(),u=new Map;return e.columnNames().forEach(c=>{const l=!t.has(c);if(c===o){s&&l&&u.set(c,c);for(const[f,d]of t)u.set(f,d);if(s)return}l&&u.set(c,c)}),fc(e,u)}function Wr(e,t=i=>i,n=""){const i=e.length;if(!i)return"";let r=t(e[0],0);for(let s=1;s<i;++s)r+=n+t(e[s],s);return r}function dc(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function YE(e,t=0,n=e.length){let i=n?e[t++]:K;for(let r=t;r<n;++r)i>e[r]&&(i=e[r]);return i}function HE(e,t=0,n=e.length){let i=n?e[t++]:K;for(let r=t;r<n;++r)i<e[r]&&(i=e[r]);return i}function Zr(e){return Ar(e)?e:+e}function GE(e,t){const n=e.length;if(!n)return K;if((t=+t)<=0||n<2)return Zr(e[0]);if(t>=1)return Zr(e[n-1]);const i=(n-1)*t,r=Math.floor(i),s=Zr(e[r]);return Ar(s)?s:s+(Zr(e[r+1])-s)*(i-r)}class KE{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:YE(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:HE(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(dc)),GE(this._sorted,t)}}const Xs=(e,t,n)=>Xi(t,"{"+Wr(e,(i,r)=>`_${r}.${n}(${t});`)+"}",e);function QE(e,t){const{ops:n,output:i}=JE(e,t),r=e[0].fields,s=r.length,a=s===0?pc:s===1?XE:s===2?ZE:D("Unsupported field count: "+s);return new a(r,n,i,t)}function JE(e,t){const n={},i=[];function r(a,o=[]){const u=a+":"+o;if(n[u])return n[u];const c=rp(a),l=c.create(...o);return t<0&&c.stream&&c.stream.forEach(f=>r(f,[])),c.req&&c.req.forEach(f=>r(f,[])),n[u]=l,i.push(l),l}const s=e.map(a=>{const o=r(a.name,a.params);return o.output=a.id,o});return{ops:i,output:s}}class pc extends oI{constructor(t,n,i,r){super(i),this._op=n,this._fields=t,this._stream=!!r}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new KE),t}write(t,n,i){const r=this._outputs,s=r.length;for(let a=0;a<s;++a)n[r[a].output][i]=r[a].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class XE extends pc{constructor(t,n,i,r){super(t,n,i,r);const s=["state","v1","v2"];this._add=Xs(n,s,"add"),this._rem=Xs(n,s,"rem")}add(t,n,i){const r=this._fields[0](n,i);++t.count,_e(r)&&(++t.valid,t.list&&t.list.add(r),this._add(t,r))}rem(t,n,i){const r=this._fields[0](n,i);--t.count,_e(r)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,r))}}class ZE extends pc{constructor(t,n,i,r){super(t,n,i,r);const s=["state","v1","v2"];this._add=Xs(n,s,"add"),this._rem=Xs(n,s,"rem")}add(t,n,i){const r=this._fields[0](n,i),s=this._fields[1](n,i);++t.count,_e(r)&&_e(s)&&(++t.valid,t.list&&t.list.add([r,s]),this._add(t,r,s))}rem(t,n,i){const r=this._fields[0](n,i),s=this._fields[1](n,i);--t.count,_e(r)&&_e(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,r,s))}}function li(e,t,n){if(t.length){const i=e.data(),{keys:r}=e.groups()||{},s=Zi(e,t),a=r?(o,u)=>s[o][r[u]]:o=>s[o][0];n=n.map(o=>u=>o(u,i,a))}return n}function Zi(e,t,n){if(!t.length)return n;const i=vm(t),r=e.groups(),s=r?r.size:1;return n=n||ya(t.length,()=>Array(s)),s>1?i.forEach(a=>{const o=xm(e,a,r);for(let u=0;u<s;++u)a.write(o[u],n,u)}):i.forEach(a=>{const o=wm(e,a);a.write(o,n,0)}),n}function vm(e,t){const n=[],i={};for(const r of e){const s=r.fields.map(a=>a+"").join(",");(i[s]||(i[s]=[])).push(r)}for(const r in i)n.push(QE(i[r],t));return n}function wm(e,t){const n=t.init(),i=e.totalRows(),r=e.data(),s=e.mask();if(e.isOrdered()){const a=e.indices();for(let o=0;o<i;++o)t.add(n,a[o],r)}else if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))t.add(n,a,r);else for(let a=0;a<i;++a)t.add(n,a,r);return n}function xm(e,t,n){const{keys:i,size:r}=n,s=ya(r,()=>t.init()),a=e.data();if(e.isOrdered()){const o=e.indices(),u=o.length;for(let c=0;c<u;++c){const l=o[c];t.add(s[i[l]],l,a)}}else if(e.isFiltered()){const o=e.mask();for(let u=o.next(0);u>=0;u=o.next(u+1))t.add(s[i[u]],u,a)}else{const o=e.totalRows();for(let u=0;u<o;++u)t.add(s[i[u]],u,a)}return s}function Sm(e,t){const{get:n,names:i,rows:r,size:s}=t,a=i.length;for(let o=0;o<a;++o){const u=e.add(i[o],Array(s)),c=n[o];for(let l=0;l<s;++l)u[l]=c(r[l])}}function Im(e){return{left(t,n,i,r){for(i==null&&(i=0),r==null&&(r=t.length);i<r;){const s=i+r>>>1;e(t[s],n)<0?i=s+1:r=s}return i},right(t,n,i,r){for(i==null&&(i=0),r==null&&(r=t.length);i<r;){const s=i+r>>>1;e(t[s],n)>0?r=s:i=s+1}return i}}}const Ul=Im(dc);function tA(e,t,n,i,r){let s,a,o,u,c;const l=g=>a[g-1]===a[g],f=i.length,d=r.length,m=i.length?Xi(["w","r","k"],"{"+Wr(i,(g,_)=>`r[_${_}.id][k]=_${_}.value(w,_${_}.get);`)+"}",i):()=>{},y={i0:0,i1:0,index:0,size:0,peer:l,init(g,_,b,N){y.index=y.i0=y.i1=0,y.size=_.length,s=g,a=_,u=b,c=N,o=r?r.map(Z=>Z.init()):null;for(let Z=0;Z<f;++Z)i[Z].init();return y},value(g,_){return _(s[g],e)},step(g){const[_,b]=t,N=y.size,Z=y.i0,w=y.i1;y.i0=_!=null?Math.max(0,g-Math.abs(_)):0,y.i1=b!=null?Math.min(N,g+Math.abs(b)+1):N,y.index=g,n&&(y.i0>0&&l(y.i0)&&(y.i0=Ul.left(a,a[y.i0])),y.i1<N&&l(y.i1)&&(y.i1=Ul.right(a,a[y.i1-1])));for(let ct=0;ct<d;++ct){const U=r[ct],At=o[ct];for(let nt=Z;nt<y.i0;++nt)U.rem(At,s[nt],e);for(let nt=w;nt<y.i1;++nt)U.add(At,s[nt],e);U.write(At,u,c)}return m(y,u,c),u}};return y}const eA=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),nA=e=>!!e.peers;function iA(e){const{id:t,name:n,fields:i=[],params:r=[]}=e,s=sp(n).create(...r);return i.length&&(s.get=i[0]),s.id=t,s}function rA(e,t,n,i={},r){const s=e.data(),a=sA(r,s),o=a.length,u=Xi(["r","d","op"],"{"+Wr(t,(c,l)=>`_${l}[r] = $${l}(r, d, op);`)+"}",t,n);e.partitions().forEach((c,l)=>{const f=c.length,d=aA(e,c);for(let y=0;y<o;++y)a[y].init(c,d,i,l);const m=y=>i[y][l];for(let y=0;y<f;++y){for(let g=0;g<o;++g)a[g].step(y);u(c[y],s,m)}})}function sA(e,t){const n={};return e.forEach(i=>{const r=eA(i),s=nA(i),a=`${r},${s}`,{aggOps:o,winOps:u}=n[a]||(n[a]={frame:r,peers:s,aggOps:[],winOps:[]});zu(i.name)?o.push(i):u.push(iA(i))}),Object.values(n).map(i=>tA(t,i.frame,i.peers,i.winOps,vm(i.aggOps,i.frame[0]!=null?-1:1)))}function aA(e,t){if(e.isOrdered()){const n=e.comparator(),i=e.data(),r=t.length,s=new Uint32Array(r);for(let a=1,o=0;a<r;++a)s[a]=n(t[a-1],t[a],i)?++o:o;return s}else return t}function oA(e){return qu(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function mc(e,{names:t,exprs:n,ops:i},r={}){const s=e.totalRows(),a=ee(r.drop?null:e),o=t.map(d=>a.add(d,Array(s))),[u,c]=uA(i),l=e.isGrouped()?e.groups().size:1,f=Zi(e,u,ya(i.length,()=>Array(l)));return c.length?rA(e,o,n,f,c):cA(e,o,n,f),e.create(a)}function uA(e){const t=[],n=[],i=e.length;for(let r=0;r<i;++r){const s=e[r];s.id=r,(oA(s)?n:t).push(s)}return[t,n]}function cA(e,t,n,i){const r=e.mask(),s=e.data(),{keys:a}=e.groups()||{},o=a?(c,l)=>i[c][a[l]]:c=>i[c][0],u=t.length;for(let c=0;c<u;++c){const l=n[c],f=t[c];if(r)for(let d=r.next(0);d>=0;d=r.next(d+1))f[d]=l(d,s,o);else{const d=e.totalRows();for(let m=0;m<d;++m)f[m]=l(m,s,o)}}}function lA(e,t,n={}){const i=mc(e,Yt(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?i:bm(i,Object.keys(t).filter(r=>!e.column(r)),n)}function hA(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((i,r)=>i.antijoin(r.select(n)),e).dedupe()}const ts=2147483648,fA=4294967295;class Em{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let i=0;i<t;++i)for(let r=this._bits[i];r;++n)r&=r-1;return n}get(t){return this._bits[t>>5]&ts>>>t}set(t){this._bits[t>>5]|=ts>>>t}clear(t){this._bits[t>>5]&=~(ts>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,i=n.length;let r=t>>5,s=n[r]&fA>>>t;for(;r<i;s=n[++r])if(s!==0)return(r<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let r=0;r<n;++r)t[r]=~t[r];const i=this._size%32;return i&&(t[n-1]&=ts>>i-1),this}and(t){if(t){const n=this._bits,i=t._bits,r=n.length;for(let s=0;s<r;++s)n[s]&=i[s]}return this}or(t){if(t){const n=this._bits,i=t._bits,r=n.length;for(let s=0;s<r;++s)n[s]|=i[s]}return this}}function dA(e,t){const n=e.totalRows(),i=e.mask(),r=e.data(),s=new Em(n);if(i)for(let a=i.next(0);a>=0;a=i.next(a+1))t(a,r)&&s.set(a);else for(let a=0;a<n;++a)t(a,r)&&s.set(a);return e.create({filter:s})}function pA(e,t){const n=Yt({p:t},{table:e});let i=n.exprs[0];if(n.ops.length){const{data:r}=mc(e,n,{drop:!0}).column("p");i=s=>r[s]}return dA(e,i)}function Am(e,{names:t=[],exprs:n=[],ops:i=[]},r={}){if(!t.length)return e;const s=r.limit>0?+r.limit:1/0,a=r.index?r.index===!0?"index":r.index+"":null,o=new Set(r.drop),u=li(e,i,n),c=ee(),l=new Set(t),f=[],d=[],m=[];e.columnNames().forEach(w=>{if(!o.has(w)){const ct=c.add(w,[]);l.has(w)||(f.push(e.column(w)),d.push(ct))}}),t.forEach(w=>{o.has(w)||(c.has(w)||c.add(w,[]),m.push(c.data[w]))});const y=a?c.add(a,[]):null;let g=0;const _=f.length,b=m.length,N=(w,ct)=>{for(let U=0;U<_;++U)d[U].length=g+ct,d[U].fill(f[U].get(w),g,g+ct)},Z=y?(w,ct)=>{for(let U=0;U<ct;++U)y[w+U]=U}:()=>{};if(b===1){const w=u[0],ct=m[0];e.scan((U,At)=>{const nt=Wt(w(U,At)),Kt=Math.min(nt.length,s);N(U,Kt);for(let Te=0;Te<Kt;++Te)ct[g+Te]=nt[Te];Z(g,Kt),g+=Kt})}else e.scan((w,ct)=>{let U=0;const At=u.map(nt=>{const Kt=Wt(nt(w,ct));return U=Math.min(Math.max(U,Kt.length),s),Kt});N(w,U);for(let nt=0;nt<b;++nt){const Kt=m[nt],Te=At[nt];for(let jn=0;jn<U;++jn)Kt[g+jn]=Te[jn]}Z(g,U),g+=U});return e.create(c.new())}function mA(e,{names:t=[],exprs:n=[],ops:i=[]},r={}){if(t.length===0)return e;const[s="key",a="value"]=r.as||[],o=li(e,i,n);return Am(e,{names:[s,a],exprs:[()=>t,(u,c)=>o.map(l=>l(u,c))]},{...r,drop:t})}function Se(e,t,n,i={window:!1}){const r=new Map,s=a=>{a=Bt(a)?t.columnName(a):a,Ot(a)?r.set(a,ai(a)):lt(a)?pn(t,a).forEach(s):Rt(a)?yp(r,a):D(`Invalid ${e} value: ${a+""}`)};return Wt(n).forEach(s),i.preparse&&i.preparse(r),Yt(r,{table:t,...i})}function yA(e,t,n){return mA(e,Se("fold",e,t),n)}function Vl(e,t,n,i){const r=n&&n.length;return gA(r?_A(e,n,i):e,t,r)}function gA(e,{names:t,exprs:n,ops:i},r){const s=li(e,i,n),a=r?null:ee(e),o=e.totalRows();return t.forEach((u,c)=>{const l=e.column(u),f=r?l.data:a.add(u,Array(o)),d=s[c];e.scan(m=>{const y=l.get(m);f[m]=_e(y)?y:d(m)})}),r?e:e.create(a)}function _A(e,t,n){const i=e.groups(),r=e.data(),s=(i?i.names:[]).concat(t),a=(i?i.get:[]).concat(t.map(y=>e.getter(y))),o=new Set,u=Hs(a);e.scan((y,g)=>o.add(u(y,g)));const c=e.columnNames(),l=ee(),f=c.map(y=>l.add(y,[]));c.forEach((y,g)=>{const _=r[y],b=f[g];e.scan(N=>b.push(_.get(N)))});const d=Hs(a.map((y,g)=>_=>_[g])),m=Xi("v","{"+f.map((y,g)=>`_${g}.push(v[$${g}]);`).join("")+"}",f,c.map(y=>s.indexOf(y)));if(i){let y=i.keys.length;const g=n.reduce((b,N)=>b*N.length,i.size),_=new Uint32Array(g+(y-o.size));_.set(i.keys),jl(i,n,(b,N)=>{o.has(d(b))||(m(b),_[y++]=N[0])}),l.groupby({...i,keys:_})}else jl(i,n,y=>{o.has(d(y))||m(y)});return e.create(l.new())}function jl(e,t,n){const i=e?e.get.length:0,r=e?1:0,s=r+t.length,a=new Int32Array(s),o=new Int32Array(s),u=[];if(e){const{get:l,rows:f,size:d}=e;a[0]=d,u.push((m,y)=>{const g=f[y];for(let _=0;_<i;++_)m[_]=l[_](g)})}t.forEach((l,f)=>{const d=f+i;a[f+r]=l.length,u.push((m,y)=>m[d]=l[y])});const c=Array(i+t.length);for(let l=0;l<s;++l)u[l](c,0);n(c,o);for(let l=s-1;l>=0;){const f=++o[l];f<a[l]?(u[l](c,f),n(c,o),l=s-1):(o[l]=0,u[l](c,0),--l)}}function yc(e,{names:t,exprs:n,ops:i}){const r=ee(),s=e.groups();return s&&Sm(r,s),bA(t,n,s,Zi(e,i),r),e.create(r.new())}function bA(e,t,n,i=[],r){if(!t.length)return;const s=n?n.size:1,a=(u,c)=>i[u][c],o=e.length;for(let u=0;u<o;++u){const c=t[u];if(c.field!=null)r.add(e[u],i[c.field]);else if(s>1){const l=r.add(e[u],Array(s));for(let f=0;f<s;++f)l[f]=c(f,null,a)}else r.add(e[u],[c(0,null,a)])}}function vA(e,t,n={}){if(t=Yt(t,{table:e}),t.names.forEach(i=>e.column(i)?0:D(`Invalid impute column ${He(i)}`)),n.expand){const i={preparse:wA,aggronly:!0},r=Se("impute",e,n.expand,i),s=yc(e.ungroup(),r);return Vl(e,t,r.names,r.names.map(a=>s.get(a,0)))}else return Vl(e,t)}function wA(e){e.forEach((t,n)=>t.field?e.set(n,Yd(t+"")):0)}function xA(e,t){const n=e.columnNames();return t.length?t.reduce((i,r)=>i.semijoin(r.select(n)),e).dedupe():e.reify([])}function Tm(e,t){const n=new Map;return e.scan((i,r)=>{const s=t(i,r);s!=null&&s===s&&n.set(s,i)}),n}function SA(e,t,n){const i=new Map,r=e.length;for(let s=0;s<r;++s){const a=e[s],o=n(a,t);o!=null&&o===o&&(i.has(o)?i.get(o).push(s):i.set(o,[s]))}return i}function IA(e,t){const n=["i","a","j","b"];return Xi(n,"{"+Wr(e,(i,r)=>`_${r}.push($${r}(${n}));`)+"}",e,t)}function EA(e,t,n,{names:i,exprs:r},s={}){const a=e.data(),o=e.indices(!1),u=o.length,c=new Int32Array(u),l=t.data(),f=t.indices(!1),d=f.length,m=new Int32Array(d),y=i.length,g=ee(),_=Array(y),b=Array(y);for(let w=0;w<i.length;++w)_[w]=g.add(i[w],[]),b[w]=r[w];const N=IA(_,b);if((J(n)?TA:AA)(N,n,a,l,o,f,c,m,u,d),s.left)for(let w=0;w<u;++w)c[w]||N(o[w],a,-1,l);if(s.right)for(let w=0;w<d;++w)m[w]||N(-1,a,f[w],l);return e.create(g.new())}function AA(e,t,n,i,r,s,a,o,u,c){for(let l=0;l<u;++l){const f=r[l];for(let d=0;d<c;++d){const m=s[d];t(f,n,m,i)&&(e(f,n,m,i),a[l]=1,o[d]=1)}}}function TA(e,[t,n],i,r,s,a,o,u,c,l){let f,d,m,y,g,_,b,N,Z=e;c>=l?(f=i,d=t,m=o,y=s,g=r,_=n,b=u,N=a):(f=r,d=n,m=u,y=a,g=i,_=t,b=o,N=s,Z=(U,At,nt,Kt)=>e(nt,Kt,U,At));const w=SA(N,g,_),ct=y.length;for(let U=0;U<ct;++U){const At=y[U],nt=w.get(d(At,f));if(nt){const Kt=nt.length;for(let Te=0;Te<Kt;++Te){const jn=nt[Te];Z(At,f,N[jn],g),b[jn]=1}m[U]=1}}}function Zs(e,t,n){const i=new Map;Wt(n).forEach((s,a)=>{s=Bt(s)?t.columnName(s):s,Ot(s)?i.set(a,ai(s)):lt(s)||Rt(s)&&s.expr?i.set(a,s):D(`Invalid ${e} key value: ${s+""}`)});const r=Yt(i,{table:t,aggregate:!1,window:!1});return Hs(r.exprs,!0)}function kA(e,t){const n=new Set(t);return e.filter(i=>n.has(i))}function gc(e,t,n){if(n)Ot(n)?n=[n,n]:J(n)&&n.length===1&&(n=[n[0],n[0]]);else{const i=kA(e.columnNames(),t.columnNames());i.length||D("Natural join requires shared column names."),n=[i,i]}return n}function km(e,t,n,i){return n.length!==i.length&&D("Mismatched number of join keys"),[Zs("join",e,n),Zs("join",t,i)]}const NA={aggregate:!1,window:!1},OA={...NA,index:1};function $l(e,t,n,i,r={}){n=gc(e,t,n);const s={join:[e,t]};let a;if(J(n)){const[o,u]=n.map(Wt);a=km(e,t,o,u),i||(i=RA(e,o,u,r))}else a=Yt({on:n},s).exprs[0],i||(i=[Vi(),Vi()]);return EA(e,t,a,FA(e,t,i,s,r&&r.suffix),r)}function RA(e,t,n,i){const r=[];t.forEach((a,o)=>Ot(a)&&a===n[o]?r.push(a):0);const s=_p(r);if(i.left&&i.right){const a=new Set(r);return[e.columnNames().map(o=>{const u=`[${He(o)}]`;return a.has(o)?{[o]:`(a, b) => a${u} == null ? b${u} : a${u}`}:o}),s]}return i.right?[s,Vi()]:[Vi(),s]}function FA(e,t,n,i,r=[]){if(J(n)){let s,a,o,u=n.length;s=a=o={names:[],exprs:[]},u--&&(s=Se("join",e,n[0],i)),u--&&(a=Se("join",t,n[1],OA)),u--&&(o=Yt(n[2],i));const c=new Set,l=new Set(s.names);return a.names.forEach(f=>{l.has(f)&&c.add(f)}),c.size&&(zl(s.names,c,r[0]||"_1"),zl(a.names,c,r[1]||"_2")),{names:s.names.concat(a.names,o.names),exprs:s.exprs.concat(a.exprs,o.exprs)}}else return Yt(n,i)}function zl(e,t,n){e.forEach((i,r)=>t.has(i)?e[r]=i+n:0)}function CA(e,t,n,i={}){const r=new Em(e.totalRows());return(J(n)?BA:LA)(r,e,t,n),i.anti&&r.not().and(e.mask()),e.create({filter:r})}function BA(e,t,n,[i,r]){const s=Tm(n,r);t.scan((a,o)=>{s.get(i(a,o))>=0&&e.set(a)})}function LA(e,t,n,i){const r=t.numRows(),s=n.numRows(),a=t.data(),o=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),c=n.indices(!1);for(let l=0;l<r;++l){const f=u[l];for(let d=0;d<s;++d)if(i(f,a,c[d],o)){e.set(f);break}}}else for(let u=0;u<r;++u)for(let c=0;c<s;++c)if(i(u,a,c,o)){e.set(u);break}}function ql(e,t,n,i){n=gc(e,t,n);const r=J(n)?km(e,t,...n.map(Wt)):Yt({on:n},{join:[e,t]}).exprs[0];return CA(e,t,r,i)}function DA(e,t,[n,i],{names:r,exprs:s,ops:a}){const o=ee(e),u=e.totalRows();r.forEach(d=>o.add(d,Array(u).fill(K)));const c=Tm(t,i),l=Xi(["lr","rr","data"],"{"+Wr(r,(d,m)=>`_[${m}][lr] = $[${m}](rr, data);`)+"}",r.map(d=>o.data[d]),li(t,a,s)),f=t.data();return e.scan((d,m)=>{const y=c.get(n(d,m));y>=0&&l(d,y,f)}),e.create(o)}function MA(e,t,n,i){return n=gc(e,t,n),DA(e,t,[Zs("lookup",e,n[0]),Zs("lookup",t,n[1])],Se("lookup",t,i))}const Fo=(e,t)=>e??t;function PA(e,t,n,i={}){const{keys:r,keyColumn:s}=UA(e,t,i),a=Fo(i.valueSeparator,"_"),o=n.names.length>1?(c,l)=>l+a+r[c]:c=>r[c],u=r.map(c=>Zi(e,n.ops.map(l=>{if(l.name==="count"){const d=m=>c===s[m]?1:NaN;return d.toString=()=>c+":1",{...l,name:"sum",fields:[d]}}const f=l.fields.map(d=>{const m=(y,g)=>c===s[y]?d(y,g):NaN;return m.toString=()=>c+":"+d,m});return{...l,fields:f}})));return e.create(VA(n,o,e.groups(),u))}function UA(e,t,n){const i=n.limit>0?+n.limit:1/0,r=Fo(n.sort,!0),s=Fo(n.keySeparator,"_"),a=li(e,t.ops,t.exprs),o=a.length===1?a[0]:(f,d)=>a.map(m=>m(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=o(f,d));const c=Zi(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],l=r?c.sort():c;return{keys:Number.isFinite(i)?l.slice(0,i):l,keyColumn:u}}function VA({names:e,exprs:t},n,i,r){const s=i?i.size:1,a=ee(),o=r.length,u=e.length;let c;const l=(f,d)=>c[f][d];i&&Sm(a,i);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let m=0;m<o;++m)a.add(n(m,e[f]),r[m][d.field]);else if(s>1)for(let m=0;m<o;++m){c=r[m];const y=a.add(n(m,e[f]),Array(s));for(let g=0;g<s;++g)y[g]=d(g,null,l)}else for(let m=0;m<o;++m)c=r[m],a.add(n(m,e[f]),[d(0,null,l)])}return a.new()}function jA(e,t,n,i){return PA(e,Se("fold",e,t),Se("fold",e,n,{preparse:$A,aggronly:!0}),i)}function $A(e){e.forEach((t,n)=>t.field?e.set(n,zd(t+"")):0)}function zA(e,t){const n=new Map;return e.columnNames(i=>(n.set(i,i),0)),fc(e,pn(e,t,n))}function Wl(e,t){return yc(e,Yt(t,{table:e,aggronly:!0,window:!1}))}function qA(e,t,n,i){return(t?i?YA:WA:i?GA:HA)(e.length,e,n,i)}function WA(e,t,n){const i=n.length;for(let r=0;r<e;++r)t[r]=n[i*Hi()|0];return t}function YA(e,t,n,i){const r=n.length,s=new Float64Array(r);let a=0;for(let u=0;u<r;++u)s[u]=a+=i(n[u]);const o=Im(dc).right;for(let u=0;u<e;++u)t[u]=n[o(s,a*Hi())];return t}function HA(e,t,n){const i=n.length;if(e>=i)return n;for(let r=0;r<e;++r)t[r]=n[r];for(let r=e;r<i;++r){const s=r*Hi();s<e&&(t[s|0]=n[r])}return t}function GA(e,t,n,i){const r=n.length;if(e>=r)return n;const s=new Float32Array(r),a=new Uint32Array(r);for(let o=0;o<r;++o)a[o]=o,s[o]=-Math.log(Hi())/i(n[o]);a.sort((o,u)=>s[o]-s[u]);for(let o=0;o<e;++o)t[o]=n[a[o]];return t}function KA(e,t=0,n=e.length){let i=n-(t=+t);for(;i;){const r=Hi()*i--|0,s=e[i+t];e[i+t]=e[r+t],e[r+t]=s}return e}function QA(e,t,n,i={}){const{replace:r,shuffle:s}=i,a=e.partitions(!1);let o=0;t=a.map((l,f)=>{let d=t(f);return o+=d=r?d:Math.min(l.length,d),d});const u=new Uint32Array(o);let c=0;return a.forEach((l,f)=>{const d=t[f],m=u.subarray(c,c+=d);!r&&d===l.length?m.set(l):qA(m,r,l,n)}),s!==!1&&(a.length>1||!r)&&KA(u),e.reify(u)}function JA(e,t,n={}){return QA(e,XA(e,t),ZA(e,n.weight),n)}const Nm=e=>t=>e.get(t)||0;function XA(e,t){return Bt(t)?()=>t:Nm(yc(e,Yt({size:t},{table:e,window:!1})).column("size"))}function ZA(e,t){return t==null?null:(t=Bt(t)?e.columnName(t):t,Nm(Ot(t)?e.column(t):mc(e,Yt({w:t},{table:e}),{drop:!0}).column("w")))}function t2(e,t){return fc(e,pn(e,t))}function e2(e,{names:t,exprs:n,ops:i=[]},r={}){if(t.length===0)return e;const s=t.length===1&&r.as||[],a=r.drop==null?!0:!!r.drop,o=r.limit==null?s.length||1/0:Math.max(1,+r.limit||1),u=li(e,i,n),c=ee(),l=t.reduce((d,m,y)=>d.set(m,y),new Map),f=(d,m)=>{const y=n2(e,u[d],o),g=y.length;for(let _=0;_<g;++_)c.add(s[_]||`${m}_${_+1}`,y[_])};return e.columnNames().forEach(d=>{l.has(d)?(a||c.add(d,e.column(d)),f(l.get(d),d),l.delete(d)):c.add(d,e.column(d))}),l.forEach(f),e.create(c)}function n2(e,t,n){const i=e.totalRows(),r=[];return e.scan((s,a)=>{const o=Wt(t(s,a)),u=Math.min(o.length,n);for(;r.length<u;)r.push(Array(i).fill(K));for(let c=0;c<u;++c)r[c][s]=o[c]}),r}function i2(e,t,n){return e2(e,Se("spread",e,t),n)}function r2(e,t){return e.concat(t).dedupe()}function s2(e,t,n){return Am(e,Se("unroll",e,t),n&&n.drop?{...n,drop:Se("unroll",e,n.drop).names}:n)}function a2(e,t){return e.create({groups:o2(e,t)})}function o2(e,{names:t=[],exprs:n=[],ops:i=[]}){const r=t.length;if(r===0)return null;if(r===1&&!e.isFiltered()&&n[0].field){const m=e.column(n[0].field);if(m.groups)return m.groups(t)}let s=li(e,i,n);const a=Hs(s),o=e.totalRows(),u=new Uint32Array(o),c={},l=[],f=e.data(),d=e.mask();if(d)for(let m=d.next(0);m>=0;m=d.next(m+1)){const y=a(m,f)+"",g=c[y];u[m]=g??(c[y]=l.push(m)-1)}else for(let m=0;m<o;++m){const y=a(m,f)+"",g=c[y];u[m]=g??(c[y]=l.push(m)-1)}return i.length||(s=s.map(m=>y=>m(y,f))),{keys:u,get:s,names:t,rows:l,size:l.length}}function u2(e,t){return a2(e,Se("groupby",e,t))}function c2(e,t){return e.create({order:t})}const l2=(e,t,n,i)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${i}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${i} : `;function h2(e,t){const n=[],i=[],r=[];let s=null,a="0",o="0";e.isGrouped()&&(s=e.groups().keys,a="ka",o="kb");const{ops:u}=Yt(t,{table:e,value:(m,y)=>{if(n.push(m),y.escape){const g=_=>`fn[${r.length}](${_}, data)`;i.push([g("a"),g("b")]),r.push(y.escape)}else i.push([Ys(y,{index:"a",op:a}),Ys(y,{index:"b",op:o})])},window:!1}),c=Zi(e,u),l=(m,y)=>c[m][y],f=n.length;let d="return (a, b) => {"+(l&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let m=0;m<f;++m){const y=t.get(n[m]).desc?-1:1,[g,_]=i[m];d+=l2(g,_,-y,y)}return d+="0;};",Function("op","keys","fn","data",d)(l,s,r,e.data())}function f2(e,t){return c2(e,d2(e,t))}function d2(e,t){let n=-1;const i=new Map,r=s=>i.set(++n+"",s);return t.forEach(s=>{const a=s.expr!=null?s.expr:s;if(Rt(a)&&!lt(a))for(const o in a)r(a[o]);else r(Bt(a)?ai(s,e.columnName(a)):Ot(a)?ai(s):lt(a)?s:D(`Invalid orderby field: ${s+""}`))}),h2(e,i)}function p2(e,t){const n=e.numRows(),i=n+t.reduce((a,o)=>a+o.numRows(),0);if(n===i)return e;const r=[e,...t],s=ee();return e.columnNames().forEach(a=>{const o=Array(i);let u=0;r.forEach(c=>{const l=c.column(a)||{get:()=>K};c.scan(f=>o[u++]=l.get(f))}),s.add(a,o)}),e.create(s.new())}function m2(e,t){const n=ee(),i=e.groups(),{get:r,names:s=[],rows:a,size:o=1}=i||{},u=new Uint32Array(o+1);s.forEach(d=>n.add(d,null));const c=i?xm(e,t,i):[wm(e,t)];t.outputs().map(d=>n.add(d,[]));const l=u.length-1;let f=0;for(let d=0;d<l;++d)f+=u[d+1]=t.write(c[d],n.data,u[d]);if(i){const d=e.data();s.forEach((m,y)=>{const g=n.data[m]=Array(f),_=r[y];for(let b=0,N=0;b<o;++b)g.fill(_(a[b],d),N,N+=u[b+1])})}return e.create(n.new())}function y2(e){return e.isGrouped()?e.create({groups:null}):e}function g2(e){return e.isOrdered()?e.create({order:null}):e}const _2={__antijoin:(e,t,n)=>ql(e,t,n,{anti:!0}),__count:(e,t={})=>Wl(e,{[t.as||"count"]:qd()}),__cross:(e,t,n,i)=>$l(e,t,()=>!0,n,{...i,left:!0,right:!0}),__concat:p2,__dedupe:WE,__derive:lA,__except:hA,__filter:pA,__fold:yA,__impute:vA,__intersect:xA,__join:$l,__lookup:MA,__pivot:jA,__relocate:bm,__rename:zA,__rollup:Wl,__sample:JA,__select:t2,__semijoin:ql,__spread:i2,__union:r2,__unroll:s2,__groupby:u2,__orderby:f2,__ungroup:y2,__unorder:g2,__reduce:m2};Object.assign(sn.prototype,_2);function b2(e,t){return sn.from(e,t)}sn.prototype;class v2 extends Ke{constructor(t){super(),this.function_store=t.matching,this.func_elected=t.default_func,this.ignore_cols=t.ignore_cols,this.backend=t.backend,this.params=t.defaults??{}}snapshot(){return{params:ps(this.params),func_elected:ps(this.func_elected)}}restoreSnapshot(t){this.params=t.params,this.func_elected=t.func_elected}async _execute(t=null){if(hr(t))return;t.length==1&&Sy("func_elected",t[0])?this.func_elected=t[0].func_elected:Ny(t)||t.forEach(u=>{this.params=Mo(this.params,u)});let n=await this.backend.execute(this.params),i=b2(n),r=i.columnNames();r=py(r,this.ignore_cols);let s=zy(r,r),a=this.function_store[0][this.func_elected],o=[];s.forEach(([u,c])=>{let l=a(u,i.array(u),c,i.array(c));o.push({x:u,y:c,value:l})}),this.emit("data",o,"matching_table")}}class w2 extends Ke{constructor(){super(),this.overlays={}}snapshot(){return ps(this.overlays)}restoreSnapshot(t){this.overlays=t}async _execute(t,n){t.forEach(r=>{this.overlays=Cy(this.overlays,r)});let i=[];eh(({left:r,right:s},a)=>{i.push({key:a,left:r,right:s})},this.overlays),this.emit("data",i,"overlay")}}class x2 extends Ke{constructor(t){super(),this.backend=t.backend,this.name=t.name,this.params=t.params}async execute(t){this.params=t??this.params;const n=await this.backend.execute(this.params);let i=[];for(const s of n){let a=JSON.parse(s.feature);i.push(a)}const r={type:"FeatureCollection",name:this.name,features:i};return this.emit("data",r,this.name),r}}let Yl={array:Sb,url:Ib,duckdb:yx,cdt:_x,identity:bx,random:vx,query:wx,matching:v2,overlay:w2,map:x2},S2=0;class K2 extends Map{get backends(){return Jl(this)}registerClass(t,n){Yl[t]=n}createBackends(t){for(const n of t)this.createBackend(n)}createBackend(t){t.id=t.id??`_backendid_${S2++}`;let n=Yl[t.type];if(!n)throw new Error(`Backend type ${t.type} not found`);let i=new n(t);return i.id=t.id,this[t.id]=i,console.info("createBackend",t.id,i),i}}export{Uc as $,to as A,K2 as B,an as C,ta as D,py as E,ih as F,i_ as G,Ke as H,th as I,ps as J,jy as K,Ig as L,v2 as M,Vo as N,w2 as O,mh as P,wx as Q,$t as R,ve as S,Fr as T,Lg as U,gs as V,mr as W,jo as X,Sn as Y,gr as Z,bt as _,N2 as a,Wg as a0,Mg as a1,_h as a2,A2 as a3,T2 as a4,_s as a5,rh as a6,Oc as a7,vb as b,_t as c,Ly as d,Do as e,b2 as f,Jl as g,eh as h,ny as i,hy as j,hr as k,Ny as l,Mo as m,dt as n,Bo as o,_c as p,Bm as q,Kl as r,pr as s,Hl as t,Fm as u,k2 as v,zm as w,ea as x,Gl as y,Ym as z};
