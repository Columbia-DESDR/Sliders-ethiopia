import{S as un,i as cn,s as ln,k as st,l as at,m as yt,h as B,n as D,b as Pt,g as ze,f as Qs,d as Sn,Z as fr,_ as Td,x as $a,a7 as za,y as ks,a as qe,z as kc,c as He,A as Ts,D as Z,v as Js,B as Ns,w as zi,C as jt,L as Xs,N as xn,a3 as v_,a4 as Rh,V as vn,a8 as b_,q as Ce,r as Re,u as vi,a5 as w_,a9 as S_,p as Os,a6 as qa,Y as Nd,o as Od,a2 as Cs,aa as x_,X as I_,$ as E_,e as Fh,M as A_}from"./index.18be492a.js";import{w as bi,b as k_}from"./paths.088b2208.js";function Dt(e){return e!=null&&typeof e=="object"&&e["@@functional/placeholder"]===!0}function Zt(e){return function t(n){return arguments.length===0||Dt(n)?t:e.apply(this,arguments)}}function Mt(e){return function t(n,i){switch(arguments.length){case 0:return t;case 1:return Dt(n)?t:Zt(function(r){return e(n,r)});default:return Dt(n)&&Dt(i)?t:Dt(n)?Zt(function(r){return e(r,i)}):Dt(i)?Zt(function(r){return e(n,r)}):e(n,i)}}}function T_(e,t){e=e||[],t=t||[];var n,i=e.length,r=t.length,s=[];for(n=0;n<i;)s[s.length]=e[n],n+=1;for(n=0;n<r;)s[s.length]=t[n],n+=1;return s}function Zs(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(n){return t.apply(this,arguments)};case 2:return function(n,i){return t.apply(this,arguments)};case 3:return function(n,i,r){return t.apply(this,arguments)};case 4:return function(n,i,r,s){return t.apply(this,arguments)};case 5:return function(n,i,r,s,a){return t.apply(this,arguments)};case 6:return function(n,i,r,s,a,o){return t.apply(this,arguments)};case 7:return function(n,i,r,s,a,o,u){return t.apply(this,arguments)};case 8:return function(n,i,r,s,a,o,u,c){return t.apply(this,arguments)};case 9:return function(n,i,r,s,a,o,u,c,l){return t.apply(this,arguments)};case 10:return function(n,i,r,s,a,o,u,c,l,h){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function Cd(e,t,n){return function(){for(var i=[],r=0,s=e,a=0;a<t.length||r<arguments.length;){var o;a<t.length&&(!Dt(t[a])||r>=arguments.length)?o=t[a]:(o=arguments[r],r+=1),i[a]=o,Dt(o)||(s-=1),a+=1}return s<=0?n.apply(this,i):Zs(s,Cd(e,i,n))}}var N_=Mt(function(t,n){return t===1?Zt(n):Zs(t,Cd(t,[],n))});function Rd(e){return function t(n,i,r){switch(arguments.length){case 0:return t;case 1:return Dt(n)?t:Mt(function(s,a){return e(n,s,a)});case 2:return Dt(n)&&Dt(i)?t:Dt(n)?Mt(function(s,a){return e(s,i,a)}):Dt(i)?Mt(function(s,a){return e(n,s,a)}):Zt(function(s){return e(n,i,s)});default:return Dt(n)&&Dt(i)&&Dt(r)?t:Dt(n)&&Dt(i)?Mt(function(s,a){return e(s,a,r)}):Dt(n)&&Dt(r)?Mt(function(s,a){return e(s,i,a)}):Dt(i)&&Dt(r)?Mt(function(s,a){return e(n,s,a)}):Dt(n)?Zt(function(s){return e(s,i,r)}):Dt(i)?Zt(function(s){return e(n,s,r)}):Dt(r)?Zt(function(s){return e(n,i,s)}):e(n,i,r)}}}const Ro=Array.isArray||function(t){return t!=null&&t.length>=0&&Object.prototype.toString.call(t)==="[object Array]"};function O_(e){return e!=null&&typeof e["@@transducer/step"]=="function"}function Tc(e,t,n){return function(){if(arguments.length===0)return n();var i=arguments[arguments.length-1];if(!Ro(i)){for(var r=0;r<e.length;){if(typeof i[e[r]]=="function")return i[e[r]].apply(i,Array.prototype.slice.call(arguments,0,-1));r+=1}if(O_(i)){var s=t.apply(null,Array.prototype.slice.call(arguments,0,-1));return s(i)}}return n.apply(this,arguments)}}const Pr={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}};function C_(e,t){for(var n=0,i=t.length,r=Array(i);n<i;)r[n]=e(t[n]),n+=1;return r}function Fd(e){return Object.prototype.toString.call(e)==="[object String]"}var Nc=Zt(function(t){return Ro(t)?!0:!t||typeof t!="object"||Fd(t)?!1:t.length===0?!0:t.length>0?t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1):!1}),R_=function(){function e(t){this.f=t}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(t){return t},e.prototype["@@transducer/step"]=function(t,n){return this.f(t,n)},e}();function F_(e){return new R_(e)}var B_=Mt(function(t,n){return Zs(t.length,function(){return t.apply(n,arguments)})});function L_(e,t,n){for(var i=0,r=n.length;i<r;){if(t=e["@@transducer/step"](t,n[i]),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}i+=1}return e["@@transducer/result"](t)}function Bh(e,t,n){for(var i=n.next();!i.done;){if(t=e["@@transducer/step"](t,i.value),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}i=n.next()}return e["@@transducer/result"](t)}function Lh(e,t,n,i){return e["@@transducer/result"](n[i](B_(e["@@transducer/step"],e),t))}var Dh=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function Rs(e,t,n){if(typeof e=="function"&&(e=F_(e)),Nc(n))return L_(e,t,n);if(typeof n["fantasy-land/reduce"]=="function")return Lh(e,t,n,"fantasy-land/reduce");if(n[Dh]!=null)return Bh(e,t,n[Dh]());if(typeof n.next=="function")return Bh(e,t,n);if(typeof n.reduce=="function")return Lh(e,t,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}var D_=function(){function e(t,n){this.xf=n,this.f=t}return e.prototype["@@transducer/init"]=Pr.init,e.prototype["@@transducer/result"]=Pr.result,e.prototype["@@transducer/step"]=function(t,n){return this.xf["@@transducer/step"](t,this.f(n))},e}(),M_=Mt(function(t,n){return new D_(t,n)});function Fs(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var Mh=Object.prototype.toString,Bd=function(){return Mh.call(arguments)==="[object Arguments]"?function(t){return Mh.call(t)==="[object Arguments]"}:function(t){return Fs("callee",t)}}(),P_=!{toString:null}.propertyIsEnumerable("toString"),Ph=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Uh=function(){return arguments.propertyIsEnumerable("length")}(),U_=function(t,n){for(var i=0;i<t.length;){if(t[i]===n)return!0;i+=1}return!1},V_=Zt(typeof Object.keys=="function"&&!Uh?function(t){return Object(t)!==t?[]:Object.keys(t)}:function(t){if(Object(t)!==t)return[];var n,i,r=[],s=Uh&&Bd(t);for(n in t)Fs(n,t)&&(!s||n!=="length")&&(r[r.length]=n);if(P_)for(i=Ph.length-1;i>=0;)n=Ph[i],Fs(n,t)&&!U_(r,n)&&(r[r.length]=n),i-=1;return r});const an=V_;var Ld=Mt(Tc(["fantasy-land/map","map"],M_,function(t,n){switch(Object.prototype.toString.call(n)){case"[object Function]":return N_(n.length,function(){return t.call(this,n.apply(this,arguments))});case"[object Object]":return Rs(function(i,r){return i[r]=t(n[r]),i},{},an(n));default:return C_(t,n)}})),j_=Rd(Rs);const $_=j_;var z_=Zt(function(t){for(var n=an(t),i=n.length,r=[],s=0;s<i;)r[s]=t[n[s]],s+=1;return r});const Dd=z_;var q_=Zt(function(t){return t==null});const Wu=q_;function Md(e){return function t(n){for(var i,r,s,a=[],o=0,u=n.length;o<u;){if(Nc(n[o]))for(i=e?t(n[o]):n[o],s=0,r=i.length;s<r;)a[a.length]=i[s],s+=1;else a[a.length]=n[o];o+=1}return a}}function H_(e){return{"@@transducer/value":e,"@@transducer/reduced":!0}}var W_=function(e){return{"@@transducer/init":Pr.init,"@@transducer/result":function(t){return e["@@transducer/result"](t)},"@@transducer/step":function(t,n){var i=e["@@transducer/step"](t,n);return i["@@transducer/reduced"]?H_(i):i}}},Y_=function(t){var n=W_(t);return{"@@transducer/init":Pr.init,"@@transducer/result":function(i){return n["@@transducer/result"](i)},"@@transducer/step":function(i,r){return Nc(r)?Rs(n,i,r):Rs(n,i,[r])}}},G_=Mt(function(t,n){return Ld(t,Y_(n))}),K_=Mt(Tc(["fantasy-land/chain","chain"],G_,function(t,n){return typeof n=="function"?function(i){return t(n(i))(i)}:Md(!1)(Ld(t,n))}));const Q_=K_;var Vh=Zt(function(t){return t===null?"Null":t===void 0?"Undefined":Object.prototype.toString.call(t).slice(8,-1)});function J_(e,t){return function(){return t.call(this,e.apply(this,arguments))}}function Pd(e,t){return function(){var n=arguments.length;if(n===0)return t();var i=arguments[n-1];return Ro(i)||typeof i[e]!="function"?t.apply(this,arguments):i[e].apply(i,Array.prototype.slice.call(arguments,0,n-1))}}var X_=Rd(Pd("slice",function(t,n,i){return Array.prototype.slice.call(i,t,n)}));const Yu=X_;var Z_=Zt(Pd("tail",Yu(1,1/0)));const tv=Z_;function ev(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return Zs(arguments[0].length,$_(J_,arguments[0],tv(arguments)))}function nv(e){return e}var iv=Zt(nv);const rv=iv;function jh(e){for(var t=[],n;!(n=e.next()).done;)t.push(n.value);return t}function $h(e,t,n){for(var i=0,r=n.length;i<r;){if(e(t,n[i]))return!0;i+=1}return!1}function sv(e){var t=String(e).match(/^function (\w*)/);return t==null?"":t[1]}function av(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}const vu=typeof Object.is=="function"?Object.is:av;function zh(e,t,n,i){var r=jh(e),s=jh(t);function a(o,u){return Oc(o,u,n.slice(),i.slice())}return!$h(function(o,u){return!$h(a,u,o)},s,r)}function Oc(e,t,n,i){if(vu(e,t))return!0;var r=Vh(e);if(r!==Vh(t))return!1;if(typeof e["fantasy-land/equals"]=="function"||typeof t["fantasy-land/equals"]=="function")return typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](t)&&typeof t["fantasy-land/equals"]=="function"&&t["fantasy-land/equals"](e);if(typeof e.equals=="function"||typeof t.equals=="function")return typeof e.equals=="function"&&e.equals(t)&&typeof t.equals=="function"&&t.equals(e);switch(r){case"Arguments":case"Array":case"Object":if(typeof e.constructor=="function"&&sv(e.constructor)==="Promise")return e===t;break;case"Boolean":case"Number":case"String":if(!(typeof e==typeof t&&vu(e.valueOf(),t.valueOf())))return!1;break;case"Date":if(!vu(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(!(e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.sticky===t.sticky&&e.unicode===t.unicode))return!1;break}for(var s=n.length-1;s>=0;){if(n[s]===e)return i[s]===t;s-=1}switch(r){case"Map":return e.size!==t.size?!1:zh(e.entries(),t.entries(),n.concat([e]),i.concat([t]));case"Set":return e.size!==t.size?!1:zh(e.values(),t.values(),n.concat([e]),i.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var a=an(e);if(a.length!==an(t).length)return!1;var o=n.concat([e]),u=i.concat([t]);for(s=a.length-1;s>=0;){var c=a[s];if(!(Fs(c,t)&&Oc(t[c],e[c],o,u)))return!1;s-=1}return!0}var Ud=Mt(function(t,n){return Oc(t,n,[],[])});function ov(e,t,n){var i,r;if(typeof e.indexOf=="function")switch(typeof t){case"number":if(t===0){for(i=1/t;n<e.length;){if(r=e[n],r===0&&1/r===i)return n;n+=1}return-1}else if(t!==t){for(;n<e.length;){if(r=e[n],typeof r=="number"&&r!==r)return n;n+=1}return-1}return e.indexOf(t,n);case"string":case"boolean":case"function":case"undefined":return e.indexOf(t,n);case"object":if(t===null)return e.indexOf(t,n)}for(;n<e.length;){if(Ud(e[n],t))return n;n+=1}return-1}function Gu(e,t){return ov(t,e,0)>=0}function uv(e,t){for(var n=0,i=t.length,r=[];n<i;)e(t[n])&&(r[r.length]=t[n]),n+=1;return r}function Vd(e){return Object.prototype.toString.call(e)==="[object Object]"}var cv=function(){function e(t,n){this.xf=n,this.f=t}return e.prototype["@@transducer/init"]=Pr.init,e.prototype["@@transducer/result"]=Pr.result,e.prototype["@@transducer/step"]=function(t,n){return this.f(n)?this.xf["@@transducer/step"](t,n):t},e}(),lv=Mt(function(t,n){return new cv(t,n)}),hv=Mt(Tc(["fantasy-land/filter","filter"],lv,function(e,t){return Vd(t)?Rs(function(n,i){return e(t[i])&&(n[i]=t[i]),n},{},an(t)):uv(e,t)}));const fv=hv;var dv=function(){function e(){this._nativeSet=typeof Set=="function"?new Set:null,this._items={}}return e.prototype.add=function(t){return!qh(t,!0,this)},e.prototype.has=function(t){return qh(t,!1,this)},e}();function qh(e,t,n){var i=typeof e,r,s;switch(i){case"string":case"number":return e===0&&1/e===-1/0?n._items["-0"]?!0:(t&&(n._items["-0"]=!0),!1):n._nativeSet!==null?t?(r=n._nativeSet.size,n._nativeSet.add(e),s=n._nativeSet.size,s===r):n._nativeSet.has(e):i in n._items?e in n._items[i]?!0:(t&&(n._items[i][e]=!0),!1):(t&&(n._items[i]={},n._items[i][e]=!0),!1);case"boolean":if(i in n._items){var a=e?1:0;return n._items[i][a]?!0:(t&&(n._items[i][a]=!0),!1)}else return t&&(n._items[i]=e?[!1,!0]:[!0,!1]),!1;case"function":return n._nativeSet!==null?t?(r=n._nativeSet.size,n._nativeSet.add(e),s=n._nativeSet.size,s===r):n._nativeSet.has(e):i in n._items?Gu(e,n._items[i])?!0:(t&&n._items[i].push(e),!1):(t&&(n._items[i]=[e]),!1);case"undefined":return n._items[i]?!0:(t&&(n._items[i]=!0),!1);case"object":if(e===null)return n._items.null?!0:(t&&(n._items.null=!0),!1);default:return i=Object.prototype.toString.call(e),i in n._items?Gu(e,n._items[i])?!0:(t&&n._items[i].push(e),!1):(t&&(n._items[i]=[e]),!1)}}var pv=Mt(function(t,n){for(var i=[],r=0,s=t.length,a=n.length,o=new dv,u=0;u<a;u+=1)o.add(n[u]);for(;r<s;)o.add(t[r])&&(i[i.length]=t[r]),r+=1;return i});const mv=pv;function yv(e){var t=Object.prototype.toString.call(e);return t==="[object Uint8ClampedArray]"||t==="[object Int8Array]"||t==="[object Uint8Array]"||t==="[object Int16Array]"||t==="[object Uint16Array]"||t==="[object Int32Array]"||t==="[object Uint32Array]"||t==="[object Float32Array]"||t==="[object Float64Array]"||t==="[object BigInt64Array]"||t==="[object BigUint64Array]"}var gv=Zt(function(t){return t!=null&&typeof t["fantasy-land/empty"]=="function"?t["fantasy-land/empty"]():t!=null&&t.constructor!=null&&typeof t.constructor["fantasy-land/empty"]=="function"?t.constructor["fantasy-land/empty"]():t!=null&&typeof t.empty=="function"?t.empty():t!=null&&t.constructor!=null&&typeof t.constructor.empty=="function"?t.constructor.empty():Ro(t)?[]:Fd(t)?"":Vd(t)?{}:Bd(t)?function(){return arguments}():yv(t)?t.constructor.from(""):void 0}),_v=Zt(Md(!0));const vv=_v;var bv=Zt(function(t){for(var n={},i=0;i<t.length;)n[t[i][0]]=t[i][1],i+=1;return n});const jd=bv;var wv=Mt(Gu);const Sv=wv;function xv(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1,i=arguments.length;n<i;){var r=arguments[n];if(r!=null)for(var s in r)Fs(s,r)&&(t[s]=r[s]);n+=1}return t}const Cc=typeof Object.assign=="function"?Object.assign:xv;var Iv=Mt(function(t,n){return n instanceof t||n!=null&&(n.constructor===t||t.name==="Object"&&typeof n=="object")});const Ha=Iv;var Ev=Zt(function(t){return t!=null&&Ud(t,gv(t))});const Av=Ev;var kv=Zt(function(t){return Cc.apply(null,[{}].concat(t))});const $d=kv;var Tv=Mt(function(t,n){return Cc({},n,t)});const zd=Tv;var Nv=Mt(function(t,n){return Cc({},t,n)});const Fo=Nv;var Ov=Mt(function(t,n){for(var i={},r={},s=0,a=t.length;s<a;)r[t[s]]=1,s+=1;for(var o in n)r.hasOwnProperty(o)||(i[o]=n[o]);return i});const Cv=Ov;function Rv(e){return Mt(function(t,n){return Zs(Math.max(0,t.length-n.length),function(){return t.apply(this,e(n,arguments))})})}var Fv=Rv(T_);const Bv=Fv;var Lv=Mt(function(t,n){for(var i={},r=0;r<t.length;)t[r]in n&&(i[t[r]]=n[t[r]]),r+=1;return i});const Dv=Lv;var Mv=Mt(function(t,n){var i=Number(n),r=0,s;if(i<0||isNaN(i))throw new RangeError("n must be a non-negative number");for(s=new Array(i);r<i;)s[r]=t(r),r+=1;return s});const Pv=Mv;var Uv=Mt(function(t,n){for(var i=0,r=t.length,s,a=n.length,o=[];i<r;){for(s=0;s<a;)o[o.length]=[t[i],n[s]],s+=1;i+=1}return o});const Vv=Uv;var jv={value:()=>{}};function qd(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Na(n)}function Na(e){this._=e}function $v(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Na.prototype=qd.prototype={constructor:Na,on:function(e,t){var n=this._,i=$v(e+"",n),r,s=-1,a=i.length;if(arguments.length<2){for(;++s<a;)if((r=(e=i[s]).type)&&(r=zv(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(r=(e=i[s]).type)n[r]=Hh(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Hh(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Na(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,r=s.length;i<r;++i)s[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)}};function zv(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function Hh(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=jv,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ku="http://www.w3.org/1999/xhtml";const Wh={svg:"http://www.w3.org/2000/svg",xhtml:Ku,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Bo(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Wh.hasOwnProperty(t)?{space:Wh[t],local:e}:e}function qv(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ku&&t.documentElement.namespaceURI===Ku?t.createElement(e):t.createElementNS(n,e)}}function Hv(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Hd(e){var t=Bo(e);return(t.local?Hv:qv)(t)}function Wv(){}function Rc(e){return e==null?Wv:function(){return this.querySelector(e)}}function Yv(e){typeof e!="function"&&(e=Rc(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],a=s.length,o=i[r]=new Array(a),u,c,l=0;l<a;++l)(u=s[l])&&(c=e.call(u,u.__data__,l,s))&&("__data__"in u&&(c.__data__=u.__data__),o[l]=c);return new In(i,this._parents)}function Gv(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Kv(){return[]}function Wd(e){return e==null?Kv:function(){return this.querySelectorAll(e)}}function Qv(e){return function(){return Gv(e.apply(this,arguments))}}function Jv(e){typeof e=="function"?e=Qv(e):e=Wd(e);for(var t=this._groups,n=t.length,i=[],r=[],s=0;s<n;++s)for(var a=t[s],o=a.length,u,c=0;c<o;++c)(u=a[c])&&(i.push(e.call(u,u.__data__,c,a)),r.push(u));return new In(i,r)}function Yd(e){return function(){return this.matches(e)}}function Gd(e){return function(t){return t.matches(e)}}var Xv=Array.prototype.find;function Zv(e){return function(){return Xv.call(this.children,e)}}function tb(){return this.firstElementChild}function eb(e){return this.select(e==null?tb:Zv(typeof e=="function"?e:Gd(e)))}var nb=Array.prototype.filter;function ib(){return Array.from(this.children)}function rb(e){return function(){return nb.call(this.children,e)}}function sb(e){return this.selectAll(e==null?ib:rb(typeof e=="function"?e:Gd(e)))}function ab(e){typeof e!="function"&&(e=Yd(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],a=s.length,o=i[r]=[],u,c=0;c<a;++c)(u=s[c])&&e.call(u,u.__data__,c,s)&&o.push(u);return new In(i,this._parents)}function Kd(e){return new Array(e.length)}function ob(){return new In(this._enter||this._groups.map(Kd),this._parents)}function Wa(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Wa.prototype={constructor:Wa,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ub(e){return function(){return e}}function cb(e,t,n,i,r,s){for(var a=0,o,u=t.length,c=s.length;a<c;++a)(o=t[a])?(o.__data__=s[a],i[a]=o):n[a]=new Wa(e,s[a]);for(;a<u;++a)(o=t[a])&&(r[a]=o)}function lb(e,t,n,i,r,s,a){var o,u,c=new Map,l=t.length,h=s.length,p=new Array(l),m;for(o=0;o<l;++o)(u=t[o])&&(p[o]=m=a.call(u,u.__data__,o,t)+"",c.has(m)?r[o]=u:c.set(m,u));for(o=0;o<h;++o)m=a.call(e,s[o],o,s)+"",(u=c.get(m))?(i[o]=u,u.__data__=s[o],c.delete(m)):n[o]=new Wa(e,s[o]);for(o=0;o<l;++o)(u=t[o])&&c.get(p[o])===u&&(r[o]=u)}function hb(e){return e.__data__}function fb(e,t){if(!arguments.length)return Array.from(this,hb);var n=t?lb:cb,i=this._parents,r=this._groups;typeof e!="function"&&(e=ub(e));for(var s=r.length,a=new Array(s),o=new Array(s),u=new Array(s),c=0;c<s;++c){var l=i[c],h=r[c],p=h.length,m=db(e.call(l,l&&l.__data__,c,i)),b=m.length,g=o[c]=new Array(b),S=a[c]=new Array(b),I=u[c]=new Array(p);n(l,h,g,S,I,m,t);for(var k=0,j=0,F,Ot;k<b;++k)if(F=g[k]){for(k>=j&&(j=k+1);!(Ot=S[j])&&++j<b;);F._next=Ot||null}}return a=new In(a,i),a._enter=o,a._exit=u,a}function db(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function pb(){return new In(this._exit||this._groups.map(Kd),this._parents)}function mb(e,t,n){var i=this.enter(),r=this,s=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function yb(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,s=i.length,a=Math.min(r,s),o=new Array(r),u=0;u<a;++u)for(var c=n[u],l=i[u],h=c.length,p=o[u]=new Array(h),m,b=0;b<h;++b)(m=c[b]||l[b])&&(p[b]=m);for(;u<r;++u)o[u]=n[u];return new In(o,this._parents)}function gb(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,s=i[r],a;--r>=0;)(a=i[r])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function _b(e){e||(e=vb);function t(h,p){return h&&p?e(h.__data__,p.__data__):!h-!p}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var a=n[s],o=a.length,u=r[s]=new Array(o),c,l=0;l<o;++l)(c=a[l])&&(u[l]=c);u.sort(t)}return new In(r,this._parents).order()}function vb(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function bb(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function wb(){return Array.from(this)}function Sb(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length;r<s;++r){var a=i[r];if(a)return a}return null}function xb(){let e=0;for(const t of this)++e;return e}function Ib(){return!this.node()}function Eb(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],s=0,a=r.length,o;s<a;++s)(o=r[s])&&e.call(o,o.__data__,s,r);return this}function Ab(e){return function(){this.removeAttribute(e)}}function kb(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Tb(e,t){return function(){this.setAttribute(e,t)}}function Nb(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ob(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Cb(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Rb(e,t){var n=Bo(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?kb:Ab:typeof t=="function"?n.local?Cb:Ob:n.local?Nb:Tb)(n,t))}function Qd(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Fb(e){return function(){this.style.removeProperty(e)}}function Bb(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Lb(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function Db(e,t,n){return arguments.length>1?this.each((t==null?Fb:typeof t=="function"?Lb:Bb)(e,t,n??"")):Ur(this.node(),e)}function Ur(e,t){return e.style.getPropertyValue(t)||Qd(e).getComputedStyle(e,null).getPropertyValue(t)}function Mb(e){return function(){delete this[e]}}function Pb(e,t){return function(){this[e]=t}}function Ub(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Vb(e,t){return arguments.length>1?this.each((t==null?Mb:typeof t=="function"?Ub:Pb)(e,t)):this.node()[e]}function Jd(e){return e.trim().split(/^|\s+/)}function Fc(e){return e.classList||new Xd(e)}function Xd(e){this._node=e,this._names=Jd(e.getAttribute("class")||"")}Xd.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Zd(e,t){for(var n=Fc(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function tp(e,t){for(var n=Fc(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function jb(e){return function(){Zd(this,e)}}function $b(e){return function(){tp(this,e)}}function zb(e,t){return function(){(t.apply(this,arguments)?Zd:tp)(this,e)}}function qb(e,t){var n=Jd(e+"");if(arguments.length<2){for(var i=Fc(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?zb:t?jb:$b)(n,t))}function Hb(){this.textContent=""}function Wb(e){return function(){this.textContent=e}}function Yb(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Gb(e){return arguments.length?this.each(e==null?Hb:(typeof e=="function"?Yb:Wb)(e)):this.node().textContent}function Kb(){this.innerHTML=""}function Qb(e){return function(){this.innerHTML=e}}function Jb(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Xb(e){return arguments.length?this.each(e==null?Kb:(typeof e=="function"?Jb:Qb)(e)):this.node().innerHTML}function Zb(){this.nextSibling&&this.parentNode.appendChild(this)}function t1(){return this.each(Zb)}function e1(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function n1(){return this.each(e1)}function i1(e){var t=typeof e=="function"?e:Hd(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function r1(){return null}function s1(e,t){var n=typeof e=="function"?e:Hd(e),i=t==null?r1:typeof t=="function"?t:Rc(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function a1(){var e=this.parentNode;e&&e.removeChild(this)}function o1(){return this.each(a1)}function u1(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function c1(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function l1(e){return this.select(e?c1:u1)}function h1(e){return arguments.length?this.property("__data__",e):this.node().__data__}function f1(e){return function(t){e.call(this,t,this.__data__)}}function d1(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function p1(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,r=t.length,s;n<r;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++i]=s;++i?t.length=i:delete this.__on}}}function m1(e,t,n){return function(){var i=this.__on,r,s=f1(t);if(i){for(var a=0,o=i.length;a<o;++a)if((r=i[a]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=t;return}}this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},i?i.push(r):this.__on=[r]}}function y1(e,t,n){var i=d1(e+""),r,s=i.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var u=0,c=o.length,l;u<c;++u)for(r=0,l=o[u];r<s;++r)if((a=i[r]).type===l.type&&a.name===l.name)return l.value}return}for(o=t?m1:p1,r=0;r<s;++r)this.each(o(i[r],t,n));return this}function ep(e,t,n){var i=Qd(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function g1(e,t){return function(){return ep(this,e,t)}}function _1(e,t){return function(){return ep(this,e,t.apply(this,arguments))}}function v1(e,t){return this.each((typeof t=="function"?_1:g1)(e,t))}function*b1(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length,a;r<s;++r)(a=i[r])&&(yield a)}var w1=[null];function In(e,t){this._groups=e,this._parents=t}function ta(){return new In([[document.documentElement]],w1)}function S1(){return this}In.prototype=ta.prototype={constructor:In,select:Yv,selectAll:Jv,selectChild:eb,selectChildren:sb,filter:ab,data:fb,enter:ob,exit:pb,join:mb,merge:yb,selection:S1,order:gb,sort:_b,call:bb,nodes:wb,node:Sb,size:xb,empty:Ib,each:Eb,attr:Rb,style:Db,property:Vb,classed:qb,text:Gb,html:Xb,raise:t1,lower:n1,append:i1,insert:s1,remove:o1,clone:l1,datum:h1,on:y1,dispatch:v1,[Symbol.iterator]:b1};function Bc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function np(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function ea(){}var Bs=.7,Ya=1/Bs,Cr="\\s*([+-]?\\d+)\\s*",Ls="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Hn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",x1=/^#([0-9a-f]{3,8})$/,I1=new RegExp(`^rgb\\(${Cr},${Cr},${Cr}\\)$`),E1=new RegExp(`^rgb\\(${Hn},${Hn},${Hn}\\)$`),A1=new RegExp(`^rgba\\(${Cr},${Cr},${Cr},${Ls}\\)$`),k1=new RegExp(`^rgba\\(${Hn},${Hn},${Hn},${Ls}\\)$`),T1=new RegExp(`^hsl\\(${Ls},${Hn},${Hn}\\)$`),N1=new RegExp(`^hsla\\(${Ls},${Hn},${Hn},${Ls}\\)$`),Yh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Bc(ea,Ds,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Gh,formatHex:Gh,formatHex8:O1,formatHsl:C1,formatRgb:Kh,toString:Kh});function Gh(){return this.rgb().formatHex()}function O1(){return this.rgb().formatHex8()}function C1(){return ip(this).formatHsl()}function Kh(){return this.rgb().formatRgb()}function Ds(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=x1.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Qh(t):n===3?new Oe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ba(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ba(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=I1.exec(e))?new Oe(t[1],t[2],t[3],1):(t=E1.exec(e))?new Oe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=A1.exec(e))?ba(t[1],t[2],t[3],t[4]):(t=k1.exec(e))?ba(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=T1.exec(e))?Zh(t[1],t[2]/100,t[3]/100,1):(t=N1.exec(e))?Zh(t[1],t[2]/100,t[3]/100,t[4]):Yh.hasOwnProperty(e)?Qh(Yh[e]):e==="transparent"?new Oe(NaN,NaN,NaN,0):null}function Qh(e){return new Oe(e>>16&255,e>>8&255,e&255,1)}function ba(e,t,n,i){return i<=0&&(e=t=n=NaN),new Oe(e,t,n,i)}function R1(e){return e instanceof ea||(e=Ds(e)),e?(e=e.rgb(),new Oe(e.r,e.g,e.b,e.opacity)):new Oe}function Ga(e,t,n,i){return arguments.length===1?R1(e):new Oe(e,t,n,i??1)}function Oe(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Bc(Oe,Ga,np(ea,{brighter(e){return e=e==null?Ya:Math.pow(Ya,e),new Oe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Bs:Math.pow(Bs,e),new Oe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Oe(cr(this.r),cr(this.g),cr(this.b),Ka(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Jh,formatHex:Jh,formatHex8:F1,formatRgb:Xh,toString:Xh}));function Jh(){return`#${tr(this.r)}${tr(this.g)}${tr(this.b)}`}function F1(){return`#${tr(this.r)}${tr(this.g)}${tr(this.b)}${tr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Xh(){const e=Ka(this.opacity);return`${e===1?"rgb(":"rgba("}${cr(this.r)}, ${cr(this.g)}, ${cr(this.b)}${e===1?")":`, ${e})`}`}function Ka(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function cr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function tr(e){return e=cr(e),(e<16?"0":"")+e.toString(16)}function Zh(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new yn(e,t,n,i)}function ip(e){if(e instanceof yn)return new yn(e.h,e.s,e.l,e.opacity);if(e instanceof ea||(e=Ds(e)),!e)return new yn;if(e instanceof yn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),s=Math.max(t,n,i),a=NaN,o=s-r,u=(s+r)/2;return o?(t===s?a=(n-i)/o+(n<i)*6:n===s?a=(i-t)/o+2:a=(t-n)/o+4,o/=u<.5?s+r:2-s-r,a*=60):o=u>0&&u<1?0:a,new yn(a,o,u,e.opacity)}function B1(e,t,n,i){return arguments.length===1?ip(e):new yn(e,t,n,i??1)}function yn(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Bc(yn,B1,np(ea,{brighter(e){return e=e==null?Ya:Math.pow(Ya,e),new yn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Bs:Math.pow(Bs,e),new yn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Oe(bu(e>=240?e-240:e+120,r,i),bu(e,r,i),bu(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new yn(tf(this.h),wa(this.s),wa(this.l),Ka(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ka(this.opacity);return`${e===1?"hsl(":"hsla("}${tf(this.h)}, ${wa(this.s)*100}%, ${wa(this.l)*100}%${e===1?")":`, ${e})`}`}}));function tf(e){return e=(e||0)%360,e<0?e+360:e}function wa(e){return Math.max(0,Math.min(1,e||0))}function bu(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function L1(e,t,n,i,r){var s=e*e,a=s*e;return((1-3*e+3*s-a)*t+(4-6*s+3*a)*n+(1+3*e+3*s-3*a)*i+a*r)/6}function D1(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],s=e[i+1],a=i>0?e[i-1]:2*r-s,o=i<t-1?e[i+2]:2*s-r;return L1((n-i/t)*t,a,r,s,o)}}const Lc=e=>()=>e;function rp(e,t){return function(n){return e+n*t}}function M1(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function EC(e,t){var n=t-e;return n?rp(e,n>180||n<-180?n-360*Math.round(n/360):n):Lc(isNaN(e)?t:e)}function P1(e){return(e=+e)==1?sp:function(t,n){return n-t?M1(t,n,e):Lc(isNaN(t)?n:t)}}function sp(e,t){var n=t-e;return n?rp(e,n):Lc(isNaN(e)?t:e)}const ef=function e(t){var n=P1(t);function i(r,s){var a=n((r=Ga(r)).r,(s=Ga(s)).r),o=n(r.g,s.g),u=n(r.b,s.b),c=sp(r.opacity,s.opacity);return function(l){return r.r=a(l),r.g=o(l),r.b=u(l),r.opacity=c(l),r+""}}return i.gamma=e,i}(1);function U1(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),s=new Array(n),a,o;for(a=0;a<n;++a)o=Ga(t[a]),i[a]=o.r||0,r[a]=o.g||0,s[a]=o.b||0;return i=e(i),r=e(r),s=e(s),o.opacity=1,function(u){return o.r=i(u),o.g=r(u),o.b=s(u),o+""}}}var AC=U1(D1);function Oi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Qu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wu=new RegExp(Qu.source,"g");function V1(e){return function(){return e}}function j1(e){return function(t){return e(t)+""}}function $1(e,t){var n=Qu.lastIndex=wu.lastIndex=0,i,r,s,a=-1,o=[],u=[];for(e=e+"",t=t+"";(i=Qu.exec(e))&&(r=wu.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(i=i[0])===(r=r[0])?o[a]?o[a]+=r:o[++a]=r:(o[++a]=null,u.push({i:a,x:Oi(i,r)})),n=wu.lastIndex;return n<t.length&&(s=t.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?u[0]?j1(u[0].x):V1(t):(t=u.length,function(c){for(var l=0,h;l<t;++l)o[(h=u[l]).i]=h.x(c);return o.join("")})}var nf=180/Math.PI,Ju={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ap(e,t,n,i,r,s){var a,o,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*i)&&(n-=e*u,i-=t*u),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,u/=o),e*i<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*nf,skewX:Math.atan(u)*nf,scaleX:a,scaleY:o}}var Sa;function z1(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ju:ap(t.a,t.b,t.c,t.d,t.e,t.f)}function q1(e){return e==null||(Sa||(Sa=document.createElementNS("http://www.w3.org/2000/svg","g")),Sa.setAttribute("transform",e),!(e=Sa.transform.baseVal.consolidate()))?Ju:(e=e.matrix,ap(e.a,e.b,e.c,e.d,e.e,e.f))}function op(e,t,n,i){function r(c){return c.length?c.pop()+" ":""}function s(c,l,h,p,m,b){if(c!==h||l!==p){var g=m.push("translate(",null,t,null,n);b.push({i:g-4,x:Oi(c,h)},{i:g-2,x:Oi(l,p)})}else(h||p)&&m.push("translate("+h+t+p+n)}function a(c,l,h,p){c!==l?(c-l>180?l+=360:l-c>180&&(c+=360),p.push({i:h.push(r(h)+"rotate(",null,i)-2,x:Oi(c,l)})):l&&h.push(r(h)+"rotate("+l+i)}function o(c,l,h,p){c!==l?p.push({i:h.push(r(h)+"skewX(",null,i)-2,x:Oi(c,l)}):l&&h.push(r(h)+"skewX("+l+i)}function u(c,l,h,p,m,b){if(c!==h||l!==p){var g=m.push(r(m)+"scale(",null,",",null,")");b.push({i:g-4,x:Oi(c,h)},{i:g-2,x:Oi(l,p)})}else(h!==1||p!==1)&&m.push(r(m)+"scale("+h+","+p+")")}return function(c,l){var h=[],p=[];return c=e(c),l=e(l),s(c.translateX,c.translateY,l.translateX,l.translateY,h,p),a(c.rotate,l.rotate,h,p),o(c.skewX,l.skewX,h,p),u(c.scaleX,c.scaleY,l.scaleX,l.scaleY,h,p),c=l=null,function(m){for(var b=-1,g=p.length,S;++b<g;)h[(S=p[b]).i]=S.x(m);return h.join("")}}}var H1=op(z1,"px, ","px)","deg)"),W1=op(q1,", ",")",")"),Vr=0,bs=0,ps=0,up=1e3,Qa,ws,Ja=0,dr=0,Lo=0,Ms=typeof performance=="object"&&performance.now?performance:Date,cp=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Dc(){return dr||(cp(Y1),dr=Ms.now()+Lo)}function Y1(){dr=0}function Xa(){this._call=this._time=this._next=null}Xa.prototype=lp.prototype={constructor:Xa,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Dc():+n)+(t==null?0:+t),!this._next&&ws!==this&&(ws?ws._next=this:Qa=this,ws=this),this._call=e,this._time=n,Xu()},stop:function(){this._call&&(this._call=null,this._time=1/0,Xu())}};function lp(e,t,n){var i=new Xa;return i.restart(e,t,n),i}function G1(){Dc(),++Vr;for(var e=Qa,t;e;)(t=dr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Vr}function rf(){dr=(Ja=Ms.now())+Lo,Vr=bs=0;try{G1()}finally{Vr=0,Q1(),dr=0}}function K1(){var e=Ms.now(),t=e-Ja;t>up&&(Lo-=t,Ja=e)}function Q1(){for(var e,t=Qa,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Qa=n);ws=e,Xu(i)}function Xu(e){if(!Vr){bs&&(bs=clearTimeout(bs));var t=e-dr;t>24?(e<1/0&&(bs=setTimeout(rf,e-Ms.now()-Lo)),ps&&(ps=clearInterval(ps))):(ps||(Ja=Ms.now(),ps=setInterval(K1,up)),Vr=1,cp(rf))}}function sf(e,t,n){var i=new Xa;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var J1=qd("start","end","cancel","interrupt"),X1=[],hp=0,af=1,Zu=2,Oa=3,of=4,tc=5,Ca=6;function Do(e,t,n,i,r,s){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;Z1(e,n,{name:t,index:i,group:r,on:J1,tween:X1,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:hp})}function Mc(e,t){var n=Tn(e,t);if(n.state>hp)throw new Error("too late; already scheduled");return n}function Jn(e,t){var n=Tn(e,t);if(n.state>Oa)throw new Error("too late; already running");return n}function Tn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Z1(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=lp(s,0,n.time);function s(c){n.state=af,n.timer.restart(a,n.delay,n.time),n.delay<=c&&a(c-n.delay)}function a(c){var l,h,p,m;if(n.state!==af)return u();for(l in i)if(m=i[l],m.name===n.name){if(m.state===Oa)return sf(a);m.state===of?(m.state=Ca,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete i[l]):+l<t&&(m.state=Ca,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete i[l])}if(sf(function(){n.state===Oa&&(n.state=of,n.timer.restart(o,n.delay,n.time),o(c))}),n.state=Zu,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Zu){for(n.state=Oa,r=new Array(p=n.tween.length),l=0,h=-1;l<p;++l)(m=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++h]=m);r.length=h+1}}function o(c){for(var l=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=tc,1),h=-1,p=r.length;++h<p;)r[h].call(e,l);n.state===tc&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Ca,n.timer.stop(),delete i[t];for(var c in i)return;delete e.__transition}}function tw(e,t){var n=e.__transition,i,r,s=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((i=n[a]).name!==t){s=!1;continue}r=i.state>Zu&&i.state<tc,i.state=Ca,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[a]}s&&delete e.__transition}}function ew(e){return this.each(function(){tw(this,e)})}function nw(e,t){var n,i;return function(){var r=Jn(this,e),s=r.tween;if(s!==n){i=n=s;for(var a=0,o=i.length;a<o;++a)if(i[a].name===t){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function iw(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=Jn(this,e),a=s.tween;if(a!==i){r=(i=a).slice();for(var o={name:t,value:n},u=0,c=r.length;u<c;++u)if(r[u].name===t){r[u]=o;break}u===c&&r.push(o)}s.tween=r}}function rw(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Tn(this.node(),n).tween,r=0,s=i.length,a;r<s;++r)if((a=i[r]).name===e)return a.value;return null}return this.each((t==null?nw:iw)(n,e,t))}function Pc(e,t,n){var i=e._id;return e.each(function(){var r=Jn(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Tn(r,i).value[t]}}function fp(e,t){var n;return(typeof t=="number"?Oi:t instanceof Ds?ef:(n=Ds(t))?(t=n,ef):$1)(e,t)}function sw(e){return function(){this.removeAttribute(e)}}function aw(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ow(e,t,n){var i,r=n+"",s;return function(){var a=this.getAttribute(e);return a===r?null:a===i?s:s=t(i=a,n)}}function uw(e,t,n){var i,r=n+"",s;return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===i?s:s=t(i=a,n)}}function cw(e,t,n){var i,r,s;return function(){var a,o=n(this),u;return o==null?void this.removeAttribute(e):(a=this.getAttribute(e),u=o+"",a===u?null:a===i&&u===r?s:(r=u,s=t(i=a,o)))}}function lw(e,t,n){var i,r,s;return function(){var a,o=n(this),u;return o==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),u=o+"",a===u?null:a===i&&u===r?s:(r=u,s=t(i=a,o)))}}function hw(e,t){var n=Bo(e),i=n==="transform"?W1:fp;return this.attrTween(e,typeof t=="function"?(n.local?lw:cw)(n,i,Pc(this,"attr."+e,t)):t==null?(n.local?aw:sw)(n):(n.local?uw:ow)(n,i,t))}function fw(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function dw(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function pw(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&dw(e,s)),n}return r._value=t,r}function mw(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&fw(e,s)),n}return r._value=t,r}function yw(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=Bo(e);return this.tween(n,(i.local?pw:mw)(i,t))}function gw(e,t){return function(){Mc(this,e).delay=+t.apply(this,arguments)}}function _w(e,t){return t=+t,function(){Mc(this,e).delay=t}}function vw(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?gw:_w)(t,e)):Tn(this.node(),t).delay}function bw(e,t){return function(){Jn(this,e).duration=+t.apply(this,arguments)}}function ww(e,t){return t=+t,function(){Jn(this,e).duration=t}}function Sw(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?bw:ww)(t,e)):Tn(this.node(),t).duration}function xw(e,t){if(typeof t!="function")throw new Error;return function(){Jn(this,e).ease=t}}function Iw(e){var t=this._id;return arguments.length?this.each(xw(t,e)):Tn(this.node(),t).ease}function Ew(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Jn(this,e).ease=n}}function Aw(e){if(typeof e!="function")throw new Error;return this.each(Ew(this._id,e))}function kw(e){typeof e!="function"&&(e=Yd(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],a=s.length,o=i[r]=[],u,c=0;c<a;++c)(u=s[c])&&e.call(u,u.__data__,c,s)&&o.push(u);return new fi(i,this._parents,this._name,this._id)}function Tw(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,s=Math.min(i,r),a=new Array(i),o=0;o<s;++o)for(var u=t[o],c=n[o],l=u.length,h=a[o]=new Array(l),p,m=0;m<l;++m)(p=u[m]||c[m])&&(h[m]=p);for(;o<i;++o)a[o]=t[o];return new fi(a,this._parents,this._name,this._id)}function Nw(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ow(e,t,n){var i,r,s=Nw(t)?Mc:Jn;return function(){var a=s(this,e),o=a.on;o!==i&&(r=(i=o).copy()).on(t,n),a.on=r}}function Cw(e,t){var n=this._id;return arguments.length<2?Tn(this.node(),n).on.on(e):this.each(Ow(n,e,t))}function Rw(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Fw(){return this.on("end.remove",Rw(this._id))}function Bw(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Rc(e));for(var i=this._groups,r=i.length,s=new Array(r),a=0;a<r;++a)for(var o=i[a],u=o.length,c=s[a]=new Array(u),l,h,p=0;p<u;++p)(l=o[p])&&(h=e.call(l,l.__data__,p,o))&&("__data__"in l&&(h.__data__=l.__data__),c[p]=h,Do(c[p],t,n,p,c,Tn(l,n)));return new fi(s,this._parents,t,n)}function Lw(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Wd(e));for(var i=this._groups,r=i.length,s=[],a=[],o=0;o<r;++o)for(var u=i[o],c=u.length,l,h=0;h<c;++h)if(l=u[h]){for(var p=e.call(l,l.__data__,h,u),m,b=Tn(l,n),g=0,S=p.length;g<S;++g)(m=p[g])&&Do(m,t,n,g,p,b);s.push(p),a.push(l)}return new fi(s,a,t,n)}var Dw=ta.prototype.constructor;function Mw(){return new Dw(this._groups,this._parents)}function Pw(e,t){var n,i,r;return function(){var s=Ur(this,e),a=(this.style.removeProperty(e),Ur(this,e));return s===a?null:s===n&&a===i?r:r=t(n=s,i=a)}}function dp(e){return function(){this.style.removeProperty(e)}}function Uw(e,t,n){var i,r=n+"",s;return function(){var a=Ur(this,e);return a===r?null:a===i?s:s=t(i=a,n)}}function Vw(e,t,n){var i,r,s;return function(){var a=Ur(this,e),o=n(this),u=o+"";return o==null&&(u=o=(this.style.removeProperty(e),Ur(this,e))),a===u?null:a===i&&u===r?s:(r=u,s=t(i=a,o))}}function jw(e,t){var n,i,r,s="style."+t,a="end."+s,o;return function(){var u=Jn(this,e),c=u.on,l=u.value[s]==null?o||(o=dp(t)):void 0;(c!==n||r!==l)&&(i=(n=c).copy()).on(a,r=l),u.on=i}}function $w(e,t,n){var i=(e+="")=="transform"?H1:fp;return t==null?this.styleTween(e,Pw(e,i)).on("end.style."+e,dp(e)):typeof t=="function"?this.styleTween(e,Vw(e,i,Pc(this,"style."+e,t))).each(jw(this._id,e)):this.styleTween(e,Uw(e,i,t),n).on("end.style."+e,null)}function zw(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function qw(e,t,n){var i,r;function s(){var a=t.apply(this,arguments);return a!==r&&(i=(r=a)&&zw(e,a,n)),i}return s._value=t,s}function Hw(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,qw(e,t,n??""))}function Ww(e){return function(){this.textContent=e}}function Yw(e){return function(){var t=e(this);this.textContent=t??""}}function Gw(e){return this.tween("text",typeof e=="function"?Yw(Pc(this,"text",e)):Ww(e==null?"":e+""))}function Kw(e){return function(t){this.textContent=e.call(this,t)}}function Qw(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Kw(r)),t}return i._value=e,i}function Jw(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Qw(e))}function Xw(){for(var e=this._name,t=this._id,n=pp(),i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],o=a.length,u,c=0;c<o;++c)if(u=a[c]){var l=Tn(u,t);Do(u,e,n,c,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new fi(i,this._parents,e,n)}function Zw(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(s,a){var o={value:a},u={value:function(){--r===0&&s()}};n.each(function(){var c=Jn(this,i),l=c.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(u)),c.on=t}),r===0&&s()})}var tS=0;function fi(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function pp(){return++tS}var ni=ta.prototype;fi.prototype={constructor:fi,select:Bw,selectAll:Lw,selectChild:ni.selectChild,selectChildren:ni.selectChildren,filter:kw,merge:Tw,selection:Mw,transition:Xw,call:ni.call,nodes:ni.nodes,node:ni.node,size:ni.size,empty:ni.empty,each:ni.each,on:Cw,attr:hw,attrTween:yw,style:$w,styleTween:Hw,text:Gw,textTween:Jw,remove:Fw,tween:rw,delay:vw,duration:Sw,ease:Iw,easeVarying:Aw,end:Zw,[Symbol.iterator]:ni[Symbol.iterator]};function eS(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var nS={time:null,delay:0,duration:250,ease:eS};function iS(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function rS(e){var t,n;e instanceof fi?(t=e._id,e=e._name):(t=pp(),(n=nS).time=Dc(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],o=a.length,u,c=0;c<o;++c)(u=a[c])&&Do(u,e,t,c,a,n||iS(u,t));return new fi(i,this._parents,e,t)}ta.prototype.interrupt=ew;ta.prototype.transition=rS;var uf={},Su={},xu=34,ms=10,Iu=13;function mp(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function sS(e,t){var n=mp(e);return function(i,r){return t(n(i),r,e)}}function cf(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function Ee(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function aS(e){return e<0?"-"+Ee(-e,6):e>9999?"+"+Ee(e,6):Ee(e,4)}function oS(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":aS(e.getUTCFullYear())+"-"+Ee(e.getUTCMonth()+1,2)+"-"+Ee(e.getUTCDate(),2)+(r?"T"+Ee(t,2)+":"+Ee(n,2)+":"+Ee(i,2)+"."+Ee(r,3)+"Z":i?"T"+Ee(t,2)+":"+Ee(n,2)+":"+Ee(i,2)+"Z":n||t?"T"+Ee(t,2)+":"+Ee(n,2)+"Z":"")}function uS(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(h,p){var m,b,g=r(h,function(S,I){if(m)return m(S,I-1);b=S,m=p?sS(S,p):mp(S)});return g.columns=b||[],g}function r(h,p){var m=[],b=h.length,g=0,S=0,I,k=b<=0,j=!1;h.charCodeAt(b-1)===ms&&--b,h.charCodeAt(b-1)===Iu&&--b;function F(){if(k)return Su;if(j)return j=!1,uf;var rt,Qt=g,gt;if(h.charCodeAt(Qt)===xu){for(;g++<b&&h.charCodeAt(g)!==xu||h.charCodeAt(++g)===xu;);return(rt=g)>=b?k=!0:(gt=h.charCodeAt(g++))===ms?j=!0:gt===Iu&&(j=!0,h.charCodeAt(g)===ms&&++g),h.slice(Qt+1,rt-1).replace(/""/g,'"')}for(;g<b;){if((gt=h.charCodeAt(rt=g++))===ms)j=!0;else if(gt===Iu)j=!0,h.charCodeAt(g)===ms&&++g;else if(gt!==n)continue;return h.slice(Qt,rt)}return k=!0,h.slice(Qt,b)}for(;(I=F())!==Su;){for(var Ot=[];I!==uf&&I!==Su;)Ot.push(I),I=F();p&&(Ot=p(Ot,S++))==null||m.push(Ot)}return m}function s(h,p){return h.map(function(m){return p.map(function(b){return l(m[b])}).join(e)})}function a(h,p){return p==null&&(p=cf(h)),[p.map(l).join(e)].concat(s(h,p)).join(`
`)}function o(h,p){return p==null&&(p=cf(h)),s(h,p).join(`
`)}function u(h){return h.map(c).join(`
`)}function c(h){return h.map(l).join(e)}function l(h){return h==null?"":h instanceof Date?oS(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:i,parseRows:r,format:a,formatBody:o,formatRows:u,formatRow:c,formatValue:l}}var cS=uS(","),lS=cS.parse;function hS(e){for(var t in e){var n=e[t].trim(),i,r;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(i=+n))n=i;else if(r=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))fS&&r[4]&&!r[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;e[t]=n}return e}const fS=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function dS(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function pS(e,t){return fetch(e,t).then(dS)}function mS(e){return function(t,n,i){return arguments.length===2&&typeof n=="function"&&(i=n,n=void 0),pS(t,n).then(function(r){return e(r,i)})}}var yS=mS(lS);function Ss(e,t,n){this.k=e,this.x=t,this.y=n}Ss.prototype={constructor:Ss,scale:function(e){return e===1?this:new Ss(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ss(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Ss.prototype;let lf=bi(null),gS=bi(null),kC=bi(null),TC=bi(null);function hf(e,t,n){const i=e.slice();return i[8]=t[n],i[10]=n,i}function ff(e){let t,n,i,r,s;var a=Za(e[8]);function o(u){return{props:{spec:u[8]}}}return a&&(n=$a(a,o(e)),n.$on("load",za(e[2])),n.$on("state",e[3])),{c(){t=st("div"),n&&ks(n.$$.fragment),i=qe(),this.h()},l(u){t=at(u,"DIV",{class:!0});var c=yt(t);n&&kc(n.$$.fragment,c),i=He(c),c.forEach(B),this.h()},h(){D(t,"class",r="col-md-"+Math.max(12/e[0].children.length,2))},m(u,c){Pt(u,t,c),n&&Ts(n,t,null),Z(t,i),s=!0},p(u,c){const l={};if(c&1&&(l.spec=u[8]),c&1&&a!==(a=Za(u[8]))){if(n){Js();const h=n;Sn(h.$$.fragment,1,0,()=>{Ns(h,1)}),Qs()}a?(n=$a(a,o(u)),n.$on("load",za(u[2])),n.$on("state",u[3]),ks(n.$$.fragment),ze(n.$$.fragment,1),Ts(n,t,i)):n=null}else a&&n.$set(l);(!s||c&1&&r!==(r="col-md-"+Math.max(12/u[0].children.length,2)))&&D(t,"class",r)},i(u){s||(n&&ze(n.$$.fragment,u),s=!0)},o(u){n&&Sn(n.$$.fragment,u),s=!1},d(u){u&&B(t),n&&Ns(n)}}}function _S(e){let t,n,i,r,s=e[0].children,a=[];for(let u=0;u<s.length;u+=1)a[u]=ff(hf(e,s,u));const o=u=>Sn(a[u],1,1,()=>{a[u]=null});return{c(){t=st("div");for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){t=at(u,"DIV",{id:!0,class:!0});var c=yt(t);for(let l=0;l<a.length;l+=1)a[l].l(c);c.forEach(B),this.h()},h(){D(t,"id",n=e[0].id),D(t,"class",i="row "+e[0].type+" gx-4 layout")},m(u,c){Pt(u,t,c);for(let l=0;l<a.length;l+=1)a[l]&&a[l].m(t,null);e[5](t),r=!0},p(u,[c]){if(c&13){s=u[0].children;let l;for(l=0;l<s.length;l+=1){const h=hf(u,s,l);a[l]?(a[l].p(h,c),ze(a[l],1)):(a[l]=ff(h),a[l].c(),ze(a[l],1),a[l].m(t,null))}for(Js(),l=s.length;l<a.length;l+=1)o(l);Qs()}(!r||c&1&&n!==(n=u[0].id))&&D(t,"id",n),(!r||c&1&&i!==(i="row "+u[0].type+" gx-4 layout"))&&D(t,"class",i)},i(u){if(!r){for(let c=0;c<s.length;c+=1)ze(a[c]);r=!0}},o(u){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)Sn(a[c]);r=!1},d(u){u&&B(t),fr(a,u),e[5](null)}}}function vS(e,t,n){let{spec:i}=t,r,s=Td(),{state:a={}}=t;function o(l){}function u(l){n(4,a=$d(childComponents.map(h=>h.state))),s("state",a)}function c(l){zi[l?"unshift":"push"](()=>{r=l,n(1,r)})}return e.$$set=l=>{"spec"in l&&n(0,i=l.spec),"state"in l&&n(4,a=l.state)},[i,r,o,u,a,c]}class bS extends un{constructor(t){super(),cn(this,t,vS,_S,ln,{spec:0,state:4})}}function df(e,t,n){const i=e.slice();return i[7]=t[n],i}function pf(e){let t,n,i,r;var s=Za(e[7]);function a(o){return{props:{spec:o[7]}}}return s&&(n=$a(s,a(e)),n.$on("load",za(e[2])),n.$on("state",e[1])),{c(){t=st("div"),n&&ks(n.$$.fragment),i=qe(),this.h()},l(o){t=at(o,"DIV",{class:!0});var u=yt(t);n&&kc(n.$$.fragment,u),i=He(u),u.forEach(B),this.h()},h(){D(t,"class","col-md-12")},m(o,u){Pt(o,t,u),n&&Ts(n,t,null),Z(t,i),r=!0},p(o,u){const c={};if(u&1&&(c.spec=o[7]),u&1&&s!==(s=Za(o[7]))){if(n){Js();const l=n;Sn(l.$$.fragment,1,0,()=>{Ns(l,1)}),Qs()}s?(n=$a(s,a(o)),n.$on("load",za(o[2])),n.$on("state",o[1]),ks(n.$$.fragment),ze(n.$$.fragment,1),Ts(n,t,i)):n=null}else s&&n.$set(c)},i(o){r||(n&&ze(n.$$.fragment,o),r=!0)},o(o){n&&Sn(n.$$.fragment,o),r=!1},d(o){o&&B(t),n&&Ns(n)}}}function wS(e){let t,n,i,r,s=e[0].children,a=[];for(let u=0;u<s.length;u+=1)a[u]=pf(df(e,s,u));const o=u=>Sn(a[u],1,1,()=>{a[u]=null});return{c(){t=st("div");for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){t=at(u,"DIV",{id:!0,class:!0});var c=yt(t);for(let l=0;l<a.length;l+=1)a[l].l(c);c.forEach(B),this.h()},h(){D(t,"id",n=e[0].id),D(t,"class",i="row "+e[0].type+" layout gy-4")},m(u,c){Pt(u,t,c);for(let l=0;l<a.length;l+=1)a[l]&&a[l].m(t,null);r=!0},p(u,[c]){if(c&7){s=u[0].children;let l;for(l=0;l<s.length;l+=1){const h=df(u,s,l);a[l]?(a[l].p(h,c),ze(a[l],1)):(a[l]=pf(h),a[l].c(),ze(a[l],1),a[l].m(t,null))}for(Js(),l=s.length;l<a.length;l+=1)o(l);Qs()}(!r||c&1&&n!==(n=u[0].id))&&D(t,"id",n),(!r||c&1&&i!==(i="row "+u[0].type+" layout gy-4"))&&D(t,"class",i)},i(u){if(!r){for(let c=0;c<s.length;c+=1)ze(a[c]);r=!0}},o(u){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)Sn(a[c]);r=!1},d(u){u&&B(t),fr(a,u)}}}function SS(e,t,n){let{spec:i}=t,r=Td(),{state:s={}}=t,a=u=>{n(3,s=$d(childComponents.map(c=>c.state))),r("state",s)};function o(u){}return e.$$set=u=>{"spec"in u&&n(0,i=u.spec),"state"in u&&n(3,s=u.state)},[i,a,o,s]}class xS extends un{constructor(t){super(),cn(this,t,SS,wS,ln,{spec:0,state:3})}}function IS(e){let t,n,i;return{c(){t=st("div"),this.h()},l(r){t=at(r,"DIV",{id:!0,class:!0}),yt(t).forEach(B),this.h()},h(){D(t,"id",n=e[0].id),D(t,"class",i=e[0].type+" layout")},m(r,s){Pt(r,t,s),e[2](t)},p(r,[s]){s&1&&n!==(n=r[0].id)&&D(t,"id",n),s&1&&i!==(i=r[0].type+" layout")&&D(t,"class",i)},i:jt,o:jt,d(r){r&&B(t),e[2](null)}}}function ES(e,t,n){let i;Xs(e,lf,a=>n(1,i=a));let{spec:r={}}=t;function s(a){zi[a?"unshift":"push"](()=>{i[r.id]=a,lf.set(i)})}return e.$$set=a=>{"spec"in a&&n(0,r=a.spec)},[r,i,s]}class AS extends un{constructor(t){super(),cn(this,t,ES,IS,ln,{spec:0})}}let kS={Ref:AS,HLayout:bS,VLayout:xS},ce,TS;function bn(e,t,n){let i={};i[t]=n,e.forEach(r=>r.trigger(i))}let Rr=null;function NS(){return Rr||(Rr={x:ce.x,y:ce.y,color:ce.color,key:ce.key}),Rr}function OS(e,t,n){return NS(),an(n).forEach(i=>{const r=n[i]??i,s=t[i].type;let a=null;s==="ordinal"?a=Rr[i]().fieldN(i).title(r):s==="date"?a=Rr[i]().fieldT(i).title(r):a=Rr[i]().fieldQ(i).title(r).scale({zero:!1}),e=e.encode(a)}),e}function CS(e,t,n){return e.map((i,r)=>{for(const s in i)if(t[s].type==="quantitative"?n[s]!=="date"&&(i[s]=parseFloat(i[s])):t[s].type==="geojson"&&(i=Fo(JSON.parse(i[s]),Cv(["geography"],i))),s==="color"){let a=parseInt(i[s]);isNaN(a)||(i[s]=a)}return i})}function RS(e){switch(e){case"SINGLE":return ce.selectSingle().nearest(!0);case"MULTI":return ce.selectMulti().toggle(!1).nearest(!0);case"BRUSHX":return ce.selectInterval().encodings(["x"]);case"BRUSHY":return ce.selectInterval().encodings(["y"]);case"BRUSHXY":return ce.selectInterval().encodings(["x","y"]);case"PANX":return ce.selectInterval().bind("scales").encodings(["x"]).zoom(!1);case"PANY":return ce.selectInterval().bind("scales").encodings(["y"]).zoom(!1);case"PANXY":return ce.selectInterval().bind("scales").encodings(["x","y"]).zoom(!1);case"ZOOMX":return ce.selectInterval().bind("scales").encodings(["x"]).zoom(!0);case"ZOOMY":return ce.selectInterval().bind("scales").encodings(["y"]).zoom(!0);case"ZOOMXY":return ce.selectInterval().bind("scales").encodings(["x","y"]).zoom(!0);default:alert("interaction not supported "+e)}}function FS(e,t,n,i){if(!i.datum)return null;let r=[i.datum.datum];"key"in r[0]&&(r[0].key=parseInt(r[0].key).toString());for(var s in r[0])r[0][s]=r[0][s].toString();return r}function BS(e,t,n,i){let r=t.data(e.sel.name+"_store"),s=t.data("source_0");return r.length==0?null:r.map((a,o)=>{let u=s[r[o].values[0]-1];"key"in u&&(u.key=parseInt(u.key).toString());for(var c in u)u[c]=u[c].toString()})}function mf(e,t,n,i){let r=t.data(e.sel.name+"_store");return!r||r.length==0?[]:(["BRUSHXY","ZOOMXY","PANXY"].includes(e.type)?r=r[0].values[0].concat(r[0].values[1]):r=r[0].values[0],r)}function LS(e,t,n){if(!n)return;let i=t.view;i.addDataListener("source_0",(r,s)=>{}),i.addEventListener("click",(r,s)=>{let a=null;e.type=="SINGLE"?a=FS(e,i,r,s):e.type=="MULTI"?a=BS(e,i):a=mf(e,i),a&&n(e.type,a)}),i.addEventListener("wheel",(r,s)=>{let a=null;["SINGLE","MULTI"].includes(e.type)?s.datum!=null&&(a=[s.datum]):(a=mf(e,i),a=i.data(e.sel.name+"_store"),a.length||(a=null)),a&&n(e.type,a)})}let DS=(e,t)=>{let n=e.toSpec();n.axis={titleFontSize:15,labelFontSize:15,labelOverlap:"parity"};for(let r in n.encoding)n.encoding[r].axis={titleFontSize:15,labelFontSize:15,labelOverlap:"parity",...r==="x"&&{labelAngle:0}};let i=n.encoding;return i&&i.x&&i.x.scale&&i.x.type==="quantitative"&&(i.x.scale.padding=15,i.x.scale.nice=!0),i&&i.y&&i.y.scale&&i.y.type==="quantitative"&&(i.y.scale.padding=15,i.y.scale.nice=!0),t&&(n.data={name:"source_0",values:t}),n};function yf(e,t,n){const i=e.slice();return i[8]=t[n],i[10]=n,i}function gf(e){let t,n=(e[8].label??e[8].value)+"",i;return{c(){t=st("option"),i=Ce(n),this.h()},l(r){t=at(r,"OPTION",{});var s=yt(t);i=Re(s,n),s.forEach(B),this.h()},h(){t.__value=e[10],t.value=t.__value},m(r,s){Pt(r,t,s),Z(t,i)},p(r,s){s&1&&n!==(n=(r[8].label??r[8].value)+"")&&vi(i,n)},d(r){r&&B(t)}}}function MS(e){let t,n,i,r=e[0],s=[];for(let a=0;a<r.length;a+=1)s[a]=gf(yf(e,r,a));return{c(){t=st("select");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){t=at(a,"SELECT",{class:!0});var o=yt(t);for(let u=0;u<s.length;u+=1)s[u].l(o);o.forEach(B),this.h()},h(){D(t,"class","form-select"),e[1]===void 0&&v_(()=>e[6].call(t))},m(a,o){Pt(a,t,o);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(t,null);Rh(t,e[1],!0),n||(i=vn(t,"change",e[6]),n=!0)},p(a,[o]){if(o&1){r=a[0];let u;for(u=0;u<r.length;u+=1){const c=yf(a,r,u);s[u]?s[u].p(c,o):(s[u]=gf(c),s[u].c(),s[u].m(t,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=r.length}o&2&&Rh(t,a[1])},i:jt,o:jt,d(a){a&&B(t),fr(s,a),n=!1,i()}}}function PS(e,t,n){let i,{spec:r={}}=t,s=[],a=bi(0);Xs(e,a,h=>n(1,i=h));let o=[];function u(h){n(0,s=h)}function c(h){o.push(h)}a.subscribe(h=>bn(o,r.id,s[h])),b_(()=>{});function l(){i=w_(this),a.set(i)}return e.$$set=h=>{"spec"in h&&n(3,r=h.spec)},[s,i,a,r,u,c,l]}class US extends un{constructor(t){super(),cn(this,t,PS,MS,ln,{spec:3,render:4,addSourceIact:5})}get spec(){return this.$$.ctx[3]}set spec(t){this.$$set({spec:t}),xn()}get render(){return this.$$.ctx[4]}get addSourceIact(){return this.$$.ctx[5]}}function _f(e,t,n){const i=e.slice();return i[13]=t[n],i[15]=n,i}function vf(e){let t,n,i,r,s=e[13].label+"",a,o,u,c,l;return u=S_(e[9][0]),{c(){t=st("div"),n=st("input"),i=qe(),r=st("label"),a=Ce(s),o=qe(),this.h()},l(h){t=at(h,"DIV",{class:!0});var p=yt(t);n=at(p,"INPUT",{class:!0,type:!0,id:!0,name:!0}),i=He(p),r=at(p,"LABEL",{class:!0,for:!0});var m=yt(r);a=Re(m,s),m.forEach(B),o=He(p),p.forEach(B),this.h()},h(){D(n,"class","form-check-input input"),D(n,"type","radio"),D(n,"id","radio-"+e[2]+"-"+e[15]),D(n,"name",e[2]),n.__value=e[15],n.value=n.__value,D(r,"class","form-check-label"),D(r,"for","radio-"+e[2]+"-"+e[15]),D(t,"class",e[3]),u.p(n)},m(h,p){Pt(h,t,p),Z(t,n),n.checked=n.__value===e[1],Z(t,i),Z(t,r),Z(r,a),Z(t,o),c||(l=vn(n,"change",e[8]),c=!0)},p(h,p){p&3&&(n.checked=n.__value===h[1]),p&1&&s!==(s=h[13].label+"")&&vi(a,s)},d(h){h&&B(t),u.r(),c=!1,l()}}}function VS(e){let t,n=e[0],i=[];for(let r=0;r<n.length;r+=1)i[r]=vf(_f(e,n,r));return{c(){t=st("div");for(let r=0;r<i.length;r+=1)i[r].c()},l(r){t=at(r,"DIV",{});var s=yt(t);for(let a=0;a<i.length;a+=1)i[a].l(s);s.forEach(B)},m(r,s){Pt(r,t,s);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(t,null)},p(r,[s]){if(s&15){n=r[0];let a;for(a=0;a<n.length;a+=1){const o=_f(r,n,a);i[a]?i[a].p(o,s):(i[a]=vf(o),i[a].c(),i[a].m(t,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=n.length}},i:jt,o:jt,d(r){r&&B(t),fr(i,r)}}}function jS(e,t,n){let i,{spec:r={}}=t,s=[],a=r.id,u=(r.orientation??"V")=="V"?"form-check":"form-check-inline",c=[],l=bi(0);Xs(e,l,g=>n(1,i=g));function h(g){n(0,s=g)}function p(g){c.push(g)}l.subscribe(g=>bn(c,a,s[g]));const m=[[]];function b(){i=this.__value,l.set(i)}return e.$$set=g=>{"spec"in g&&n(5,r=g.spec)},[s,i,a,u,l,r,h,p,b,m]}class $S extends un{constructor(t){super(),cn(this,t,jS,VS,ln,{spec:5,render:6,addSourceIact:7})}get spec(){return this.$$.ctx[5]}set spec(t){this.$$set({spec:t}),xn()}get render(){return this.$$.ctx[6]}get addSourceIact(){return this.$$.ctx[7]}}function zS(e){let t,n,i,r,s,a,o,u,c;return{c(){t=st("div"),n=st("div"),i=st("label"),r=Ce(e[1]),s=qe(),a=st("div"),o=st("input"),this.h()},l(l){t=at(l,"DIV",{class:!0});var h=yt(t);n=at(h,"DIV",{class:!0});var p=yt(n);i=at(p,"LABEL",{for:!0,class:!0});var m=yt(i);r=Re(m,e[1]),m.forEach(B),p.forEach(B),s=He(h),a=at(h,"DIV",{class:!0});var b=yt(a);o=at(b,"INPUT",{type:!0,class:!0,id:!0,min:!0,max:!0,step:!0}),b.forEach(B),h.forEach(B),this.h()},h(){D(i,"for","range-"+e[2]),D(i,"class","form-label"),D(n,"class","col-md-1 text-end"),D(o,"type","range"),D(o,"class","form-range"),D(o,"id","range-"+e[2]),D(o,"min",""),D(o,"max",""),D(o,"step",""),Os(o,"position","relative"),D(a,"class","col-md-10"),D(t,"class","row")},m(l,h){Pt(l,t,h),Z(t,n),Z(n,i),Z(i,r),Z(t,s),Z(t,a),Z(a,o),qa(o,e[1]),e[7](o),u||(c=[vn(o,"change",e[6]),vn(o,"input",e[6])],u=!0)},p(l,[h]){h&2&&vi(r,l[1]),h&2&&qa(o,l[1])},i:jt,o:jt,d(l){l&&B(t),e[7](null),u=!1,Nd(c)}}}function qS(e,t,n){let i,{spec:r={}}=t,s=r.id;+(r.min??0),+(r.max??10),+(r.step??1);let a,o=bi(null);Xs(e,o,p=>n(1,i=p));let u=[];function c(p){u.push(p)}o.subscribe(p=>bn(u,s,{value:p})),Od(()=>{Cs(o,i=a.value,i)});function l(){i=x_(this.value),o.set(i)}function h(p){zi[p?"unshift":"push"](()=>{a=p,n(0,a)})}return e.$$set=p=>{"spec"in p&&n(4,r=p.spec)},[a,i,s,o,r,c,l,h]}class HS extends un{constructor(t){super(),cn(this,t,qS,zS,ln,{spec:4,addSourceIact:5})}get spec(){return this.$$.ctx[4]}set spec(t){this.$$set({spec:t}),xn()}get addSourceIact(){return this.$$.ctx[5]}}var WS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function YS(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function NC(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function i(){if(this instanceof i){var r=[null];r.push.apply(r,arguments);var s=Function.bind.apply(t,r);return new s}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var r=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return e[i]}})}),n}var ec={exports:{}};(function(e,t){(function(n,i){i(t)})(WS,function(n){n.PipsMode=void 0,function(v){v.Range="range",v.Steps="steps",v.Positions="positions",v.Count="count",v.Values="values"}(n.PipsMode||(n.PipsMode={})),n.PipsType=void 0,function(v){v[v.None=-1]="None",v[v.NoValue=0]="NoValue",v[v.LargeValue=1]="LargeValue",v[v.SmallValue=2]="SmallValue"}(n.PipsType||(n.PipsType={}));function i(v){return r(v)&&typeof v.from=="function"}function r(v){return typeof v=="object"&&typeof v.to=="function"}function s(v){v.parentElement.removeChild(v)}function a(v){return v!=null}function o(v){v.preventDefault()}function u(v){return v.filter(function(f){return this[f]?!1:this[f]=!0},{})}function c(v,f){return Math.round(v/f)*f}function l(v,f){var A=v.getBoundingClientRect(),O=v.ownerDocument,C=O.documentElement,ot=j(O);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(ot.x=0),f?A.top+ot.y-C.clientTop:A.left+ot.x-C.clientLeft}function h(v){return typeof v=="number"&&!isNaN(v)&&isFinite(v)}function p(v,f,A){A>0&&(S(v,f),setTimeout(function(){I(v,f)},A))}function m(v){return Math.max(Math.min(v,100),0)}function b(v){return Array.isArray(v)?v:[v]}function g(v){v=String(v);var f=v.split(".");return f.length>1?f[1].length:0}function S(v,f){v.classList&&!/\s/.test(f)?v.classList.add(f):v.className+=" "+f}function I(v,f){v.classList&&!/\s/.test(f)?v.classList.remove(f):v.className=v.className.replace(new RegExp("(^|\\b)"+f.split(" ").join("|")+"(\\b|$)","gi")," ")}function k(v,f){return v.classList?v.classList.contains(f):new RegExp("\\b"+f+"\\b").test(v.className)}function j(v){var f=window.pageXOffset!==void 0,A=(v.compatMode||"")==="CSS1Compat",O=f?window.pageXOffset:A?v.documentElement.scrollLeft:v.body.scrollLeft,C=f?window.pageYOffset:A?v.documentElement.scrollTop:v.body.scrollTop;return{x:O,y:C}}function F(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function Ot(){var v=!1;try{var f=Object.defineProperty({},"passive",{get:function(){v=!0}});window.addEventListener("test",null,f)}catch{}return v}function rt(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function Qt(v,f){return 100/(f-v)}function gt(v,f,A){return f*100/(v[A+1]-v[A])}function ge(v,f){return gt(v,v[0]<0?f+Math.abs(v[0]):f-v[0],0)}function Ke(v,f){return f*(v[1]-v[0])/100+v[0]}function Ue(v,f){for(var A=1;v>=f[A];)A+=1;return A}function _g(v,f,A){if(A>=v.slice(-1)[0])return 100;var O=Ue(A,v),C=v[O-1],ot=v[O],tt=f[O-1],$t=f[O];return tt+ge([C,ot],A)/Qt(tt,$t)}function vg(v,f,A){if(A>=100)return v.slice(-1)[0];var O=Ue(A,f),C=v[O-1],ot=v[O],tt=f[O-1],$t=f[O];return Ke([C,ot],(A-tt)*Qt(tt,$t))}function bg(v,f,A,O){if(O===100)return O;var C=Ue(O,v),ot=v[C-1],tt=v[C];return A?O-ot>(tt-ot)/2?tt:ot:f[C-1]?v[C-1]+c(O-v[C-1],f[C-1]):O}var fh=function(){function v(f,A,O){this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[O||!1],this.xNumSteps=[!1],this.snap=A;var C,ot=[];for(Object.keys(f).forEach(function(tt){ot.push([b(f[tt]),tt])}),ot.sort(function(tt,$t){return tt[0][0]-$t[0][0]}),C=0;C<ot.length;C++)this.handleEntryPoint(ot[C][1],ot[C][0]);for(this.xNumSteps=this.xSteps.slice(0),C=0;C<this.xNumSteps.length;C++)this.handleStepPoint(C,this.xNumSteps[C])}return v.prototype.getDistance=function(f){for(var A=[],O=0;O<this.xNumSteps.length-1;O++)A[O]=gt(this.xVal,f,O);return A},v.prototype.getAbsoluteDistance=function(f,A,O){var C=0;if(f<this.xPct[this.xPct.length-1])for(;f>this.xPct[C+1];)C++;else f===this.xPct[this.xPct.length-1]&&(C=this.xPct.length-2);!O&&f===this.xPct[C+1]&&C++,A===null&&(A=[]);var ot,tt=1,$t=A[C],W=0,_e=0,fn=0,ne=0;for(O?ot=(f-this.xPct[C])/(this.xPct[C+1]-this.xPct[C]):ot=(this.xPct[C+1]-f)/(this.xPct[C+1]-this.xPct[C]);$t>0;)W=this.xPct[C+1+ne]-this.xPct[C+ne],A[C+ne]*tt+100-ot*100>100?(_e=W*ot,tt=($t-100*ot)/A[C+ne],ot=1):(_e=A[C+ne]*W/100*tt,tt=0),O?(fn=fn-_e,this.xPct.length+ne>=1&&ne--):(fn=fn+_e,this.xPct.length-ne>=1&&ne++),$t=A[C+ne]*tt;return f+fn},v.prototype.toStepping=function(f){return f=_g(this.xVal,this.xPct,f),f},v.prototype.fromStepping=function(f){return vg(this.xVal,this.xPct,f)},v.prototype.getStep=function(f){return f=bg(this.xPct,this.xSteps,this.snap,f),f},v.prototype.getDefaultStep=function(f,A,O){var C=Ue(f,this.xPct);return(f===100||A&&f===this.xPct[C-1])&&(C=Math.max(C-1,1)),(this.xVal[C]-this.xVal[C-1])/O},v.prototype.getNearbySteps=function(f){var A=Ue(f,this.xPct);return{stepBefore:{startValue:this.xVal[A-2],step:this.xNumSteps[A-2],highestStep:this.xHighestCompleteStep[A-2]},thisStep:{startValue:this.xVal[A-1],step:this.xNumSteps[A-1],highestStep:this.xHighestCompleteStep[A-1]},stepAfter:{startValue:this.xVal[A],step:this.xNumSteps[A],highestStep:this.xHighestCompleteStep[A]}}},v.prototype.countStepDecimals=function(){var f=this.xNumSteps.map(g);return Math.max.apply(null,f)},v.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},v.prototype.convert=function(f){return this.getStep(this.toStepping(f))},v.prototype.handleEntryPoint=function(f,A){var O;if(f==="min"?O=0:f==="max"?O=100:O=parseFloat(f),!h(O)||!h(A[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(O),this.xVal.push(A[0]);var C=Number(A[1]);O?this.xSteps.push(isNaN(C)?!1:C):isNaN(C)||(this.xSteps[0]=C),this.xHighestCompleteStep.push(0)},v.prototype.handleStepPoint=function(f,A){if(A){if(this.xVal[f]===this.xVal[f+1]){this.xSteps[f]=this.xHighestCompleteStep[f]=this.xVal[f];return}this.xSteps[f]=gt([this.xVal[f],this.xVal[f+1]],A,0)/Qt(this.xPct[f],this.xPct[f+1]);var O=(this.xVal[f+1]-this.xVal[f])/this.xNumSteps[f],C=Math.ceil(Number(O.toFixed(3))-1),ot=this.xVal[f]+this.xNumSteps[f]*C;this.xHighestCompleteStep[f]=ot}},v}(),dh={to:function(v){return v===void 0?"":v.toFixed(2)},from:Number},ru={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},Ai={tooltips:".__tooltips",aria:".__aria"};function wg(v,f){if(!h(f))throw new Error("noUiSlider: 'step' is not numeric.");v.singleStep=f}function Sg(v,f){if(!h(f))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");v.keyboardPageMultiplier=f}function xg(v,f){if(!h(f))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");v.keyboardMultiplier=f}function Ig(v,f){if(!h(f))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");v.keyboardDefaultStep=f}function Eg(v,f){if(typeof f!="object"||Array.isArray(f))throw new Error("noUiSlider: 'range' is not an object.");if(f.min===void 0||f.max===void 0)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");v.spectrum=new fh(f,v.snap||!1,v.singleStep)}function Ag(v,f){if(f=b(f),!Array.isArray(f)||!f.length)throw new Error("noUiSlider: 'start' option is incorrect.");v.handles=f.length,v.start=f}function kg(v,f){if(typeof f!="boolean")throw new Error("noUiSlider: 'snap' option must be a boolean.");v.snap=f}function Tg(v,f){if(typeof f!="boolean")throw new Error("noUiSlider: 'animate' option must be a boolean.");v.animate=f}function Ng(v,f){if(typeof f!="number")throw new Error("noUiSlider: 'animationDuration' option must be a number.");v.animationDuration=f}function Og(v,f){var A=[!1],O;if(f==="lower"?f=[!0,!1]:f==="upper"&&(f=[!1,!0]),f===!0||f===!1){for(O=1;O<v.handles;O++)A.push(f);A.push(!1)}else{if(!Array.isArray(f)||!f.length||f.length!==v.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");A=f}v.connect=A}function Cg(v,f){switch(f){case"horizontal":v.ort=0;break;case"vertical":v.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function ph(v,f){if(!h(f))throw new Error("noUiSlider: 'margin' option must be numeric.");f!==0&&(v.margin=v.spectrum.getDistance(f))}function Rg(v,f){if(!h(f))throw new Error("noUiSlider: 'limit' option must be numeric.");if(v.limit=v.spectrum.getDistance(f),!v.limit||v.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function Fg(v,f){var A;if(!h(f)&&!Array.isArray(f))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(f)&&!(f.length===2||h(f[0])||h(f[1])))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(f!==0){for(Array.isArray(f)||(f=[f,f]),v.padding=[v.spectrum.getDistance(f[0]),v.spectrum.getDistance(f[1])],A=0;A<v.spectrum.xNumSteps.length-1;A++)if(v.padding[0][A]<0||v.padding[1][A]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var O=f[0]+f[1],C=v.spectrum.xVal[0],ot=v.spectrum.xVal[v.spectrum.xVal.length-1];if(O/(ot-C)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function Bg(v,f){switch(f){case"ltr":v.dir=0;break;case"rtl":v.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function Lg(v,f){if(typeof f!="string")throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var A=f.indexOf("tap")>=0,O=f.indexOf("drag")>=0,C=f.indexOf("fixed")>=0,ot=f.indexOf("snap")>=0,tt=f.indexOf("hover")>=0,$t=f.indexOf("unconstrained")>=0,W=f.indexOf("drag-all")>=0,_e=f.indexOf("smooth-steps")>=0;if(C){if(v.handles!==2)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");ph(v,v.start[1]-v.start[0])}if($t&&(v.margin||v.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");v.events={tap:A||ot,drag:O,dragAll:W,smoothSteps:_e,fixed:C,snap:ot,hover:tt,unconstrained:$t}}function Dg(v,f){if(f!==!1)if(f===!0||r(f)){v.tooltips=[];for(var A=0;A<v.handles;A++)v.tooltips.push(f)}else{if(f=b(f),f.length!==v.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");f.forEach(function(O){if(typeof O!="boolean"&&!r(O))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}),v.tooltips=f}}function Mg(v,f){if(f.length!==v.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");v.handleAttributes=f}function Pg(v,f){if(!r(f))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");v.ariaFormat=f}function Ug(v,f){if(!i(f))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");v.format=f}function Vg(v,f){if(typeof f!="boolean")throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");v.keyboardSupport=f}function jg(v,f){v.documentElement=f}function $g(v,f){if(typeof f!="string"&&f!==!1)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");v.cssPrefix=f}function zg(v,f){if(typeof f!="object")throw new Error("noUiSlider: 'cssClasses' must be an object.");typeof v.cssPrefix=="string"?(v.cssClasses={},Object.keys(f).forEach(function(A){v.cssClasses[A]=v.cssPrefix+f[A]})):v.cssClasses=f}function mh(v){var f={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:dh,format:dh},A={step:{r:!1,t:wg},keyboardPageMultiplier:{r:!1,t:Sg},keyboardMultiplier:{r:!1,t:xg},keyboardDefaultStep:{r:!1,t:Ig},start:{r:!0,t:Ag},connect:{r:!0,t:Og},direction:{r:!0,t:Bg},snap:{r:!1,t:kg},animate:{r:!1,t:Tg},animationDuration:{r:!1,t:Ng},range:{r:!0,t:Eg},orientation:{r:!1,t:Cg},margin:{r:!1,t:ph},limit:{r:!1,t:Rg},padding:{r:!1,t:Fg},behaviour:{r:!0,t:Lg},ariaFormat:{r:!1,t:Pg},format:{r:!1,t:Ug},tooltips:{r:!1,t:Dg},keyboardSupport:{r:!0,t:Vg},documentElement:{r:!1,t:jg},cssPrefix:{r:!0,t:$g},cssClasses:{r:!0,t:zg},handleAttributes:{r:!1,t:Mg}},O={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:ru,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};v.format&&!v.ariaFormat&&(v.ariaFormat=v.format),Object.keys(A).forEach(function(W){if(!a(v[W])&&O[W]===void 0){if(A[W].r)throw new Error("noUiSlider: '"+W+"' is required.");return}A[W].t(f,a(v[W])?v[W]:O[W])}),f.pips=v.pips;var C=document.createElement("div"),ot=C.style.msTransform!==void 0,tt=C.style.transform!==void 0;f.transformRule=tt?"transform":ot?"msTransform":"webkitTransform";var $t=[["left","top"],["right","bottom"]];return f.style=$t[f.dir][f.ort],f}function qg(v,f,A){var O=F(),C=rt(),ot=C&&Ot(),tt=v,$t,W,_e,fn,ne,bt=f.spectrum,Zn=[],Yt=[],xe=[],su=0,ti={},wr=v.ownerDocument,ma=f.documentElement||wr.documentElement,ya=wr.body,Wg=wr.dir==="rtl"||f.ort===1?0:100;function ei(_,w){var x=wr.createElement("div");return w&&S(x,w),_.appendChild(x),x}function Yg(_,w){var x=ei(_,f.cssClasses.origin),E=ei(x,f.cssClasses.handle);if(ei(E,f.cssClasses.touchArea),E.setAttribute("data-handle",String(w)),f.keyboardSupport&&(E.setAttribute("tabindex","0"),E.addEventListener("keydown",function(T){return c_(T,w)})),f.handleAttributes!==void 0){var N=f.handleAttributes[w];Object.keys(N).forEach(function(T){E.setAttribute(T,N[T])})}return E.setAttribute("role","slider"),E.setAttribute("aria-orientation",f.ort?"vertical":"horizontal"),w===0?S(E,f.cssClasses.handleLower):w===f.handles-1&&S(E,f.cssClasses.handleUpper),x.handle=E,x}function gh(_,w){return w?ei(_,f.cssClasses.connect):!1}function Gg(_,w){var x=ei(w,f.cssClasses.connects);W=[],_e=[],_e.push(gh(x,_[0]));for(var E=0;E<f.handles;E++)W.push(Yg(w,E)),xe[E]=E,_e.push(gh(x,_[E+1]))}function Kg(_){S(_,f.cssClasses.target),f.dir===0?S(_,f.cssClasses.ltr):S(_,f.cssClasses.rtl),f.ort===0?S(_,f.cssClasses.horizontal):S(_,f.cssClasses.vertical);var w=getComputedStyle(_).direction;return w==="rtl"?S(_,f.cssClasses.textDirectionRtl):S(_,f.cssClasses.textDirectionLtr),ei(_,f.cssClasses.base)}function Qg(_,w){return!f.tooltips||!f.tooltips[w]?!1:ei(_.firstChild,f.cssClasses.tooltip)}function _h(){return tt.hasAttribute("disabled")}function au(_){var w=W[_];return w.hasAttribute("disabled")}function Jg(_){_!=null?(W[_].setAttribute("disabled",""),W[_].handle.removeAttribute("tabindex")):(tt.setAttribute("disabled",""),W.forEach(function(w){w.handle.removeAttribute("tabindex")}))}function Xg(_){_!=null?(W[_].removeAttribute("disabled"),W[_].handle.setAttribute("tabindex","0")):(tt.removeAttribute("disabled"),W.forEach(function(w){w.removeAttribute("disabled"),w.handle.setAttribute("tabindex","0")}))}function ou(){ne&&(ds("update"+Ai.tooltips),ne.forEach(function(_){_&&s(_)}),ne=null)}function vh(){ou(),ne=W.map(Qg),fu("update"+Ai.tooltips,function(_,w,x){if(!(!ne||!f.tooltips)&&ne[w]!==!1){var E=_[w];f.tooltips[w]!==!0&&(E=f.tooltips[w].to(x[w])),ne[w].innerHTML=E}})}function Zg(){ds("update"+Ai.aria),fu("update"+Ai.aria,function(_,w,x,E,N){xe.forEach(function(T){var P=W[T],R=ga(Yt,T,0,!0,!0,!0),Lt=ga(Yt,T,100,!0,!0,!0),Ct=N[T],zt=String(f.ariaFormat.to(x[T]));R=bt.fromStepping(R).toFixed(1),Lt=bt.fromStepping(Lt).toFixed(1),Ct=bt.fromStepping(Ct).toFixed(1),P.children[0].setAttribute("aria-valuemin",R),P.children[0].setAttribute("aria-valuemax",Lt),P.children[0].setAttribute("aria-valuenow",Ct),P.children[0].setAttribute("aria-valuetext",zt)})})}function t_(_){if(_.mode===n.PipsMode.Range||_.mode===n.PipsMode.Steps)return bt.xVal;if(_.mode===n.PipsMode.Count){if(_.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var w=_.values-1,x=100/w,E=[];w--;)E[w]=w*x;return E.push(100),bh(E,_.stepped)}return _.mode===n.PipsMode.Positions?bh(_.values,_.stepped):_.mode===n.PipsMode.Values?_.stepped?_.values.map(function(N){return bt.fromStepping(bt.getStep(bt.toStepping(N)))}):_.values:[]}function bh(_,w){return _.map(function(x){return bt.fromStepping(w?bt.getStep(x):x)})}function e_(_){function w(Ct,zt){return Number((Ct+zt).toFixed(7))}var x=t_(_),E={},N=bt.xVal[0],T=bt.xVal[bt.xVal.length-1],P=!1,R=!1,Lt=0;return x=u(x.slice().sort(function(Ct,zt){return Ct-zt})),x[0]!==N&&(x.unshift(N),P=!0),x[x.length-1]!==T&&(x.push(T),R=!0),x.forEach(function(Ct,zt){var qt,It,te,me=Ct,ue=x[zt+1],le,mu,yu,gu,Nh,_u,Oh,Ch=_.mode===n.PipsMode.Steps;for(Ch&&(qt=bt.xNumSteps[zt]),qt||(qt=ue-me),ue===void 0&&(ue=me),qt=Math.max(qt,1e-7),It=me;It<=ue;It=w(It,qt)){for(le=bt.toStepping(It),mu=le-Lt,Nh=mu/(_.density||1),_u=Math.round(Nh),Oh=mu/_u,te=1;te<=_u;te+=1)yu=Lt+te*Oh,E[yu.toFixed(5)]=[bt.fromStepping(yu),0];gu=x.indexOf(It)>-1?n.PipsType.LargeValue:Ch?n.PipsType.SmallValue:n.PipsType.NoValue,!zt&&P&&It!==ue&&(gu=0),It===ue&&R||(E[le.toFixed(5)]=[It,gu]),Lt=le}}),E}function n_(_,w,x){var E,N,T=wr.createElement("div"),P=(E={},E[n.PipsType.None]="",E[n.PipsType.NoValue]=f.cssClasses.valueNormal,E[n.PipsType.LargeValue]=f.cssClasses.valueLarge,E[n.PipsType.SmallValue]=f.cssClasses.valueSub,E),R=(N={},N[n.PipsType.None]="",N[n.PipsType.NoValue]=f.cssClasses.markerNormal,N[n.PipsType.LargeValue]=f.cssClasses.markerLarge,N[n.PipsType.SmallValue]=f.cssClasses.markerSub,N),Lt=[f.cssClasses.valueHorizontal,f.cssClasses.valueVertical],Ct=[f.cssClasses.markerHorizontal,f.cssClasses.markerVertical];S(T,f.cssClasses.pips),S(T,f.ort===0?f.cssClasses.pipsHorizontal:f.cssClasses.pipsVertical);function zt(It,te){var me=te===f.cssClasses.value,ue=me?Lt:Ct,le=me?P:R;return te+" "+ue[f.ort]+" "+le[It]}function qt(It,te,me){if(me=w?w(te,me):me,me!==n.PipsType.None){var ue=ei(T,!1);ue.className=zt(me,f.cssClasses.marker),ue.style[f.style]=It+"%",me>n.PipsType.NoValue&&(ue=ei(T,!1),ue.className=zt(me,f.cssClasses.value),ue.setAttribute("data-value",String(te)),ue.style[f.style]=It+"%",ue.innerHTML=String(x.to(te)))}}return Object.keys(_).forEach(function(It){qt(It,_[It][0],_[It][1])}),T}function uu(){fn&&(s(fn),fn=null)}function cu(_){uu();var w=e_(_),x=_.filter,E=_.format||{to:function(N){return String(Math.round(N))}};return fn=tt.appendChild(n_(w,x,E)),fn}function wh(){var _=$t.getBoundingClientRect(),w="offset"+["Width","Height"][f.ort];return f.ort===0?_.width||$t[w]:_.height||$t[w]}function Ki(_,w,x,E){var N=function(P){var R=i_(P,E.pageOffset,E.target||w);if(!R||_h()&&!E.doNotReject||k(tt,f.cssClasses.tap)&&!E.doNotReject||_===O.start&&R.buttons!==void 0&&R.buttons>1||E.hover&&R.buttons)return!1;ot||R.preventDefault(),R.calcPoint=R.points[f.ort],x(R,E)},T=[];return _.split(" ").forEach(function(P){w.addEventListener(P,N,ot?{passive:!0}:!1),T.push([P,N])}),T}function i_(_,w,x){var E=_.type.indexOf("touch")===0,N=_.type.indexOf("mouse")===0,T=_.type.indexOf("pointer")===0,P=0,R=0;if(_.type.indexOf("MSPointer")===0&&(T=!0),_.type==="mousedown"&&!_.buttons&&!_.touches)return!1;if(E){var Lt=function(qt){var It=qt.target;return It===x||x.contains(It)||_.composed&&_.composedPath().shift()===x};if(_.type==="touchstart"){var Ct=Array.prototype.filter.call(_.touches,Lt);if(Ct.length>1)return!1;P=Ct[0].pageX,R=Ct[0].pageY}else{var zt=Array.prototype.find.call(_.changedTouches,Lt);if(!zt)return!1;P=zt.pageX,R=zt.pageY}}return w=w||j(wr),(N||T)&&(P=_.clientX+w.x,R=_.clientY+w.y),_.pageOffset=w,_.points=[P,R],_.cursor=N||T,_}function Sh(_){var w=_-l($t,f.ort),x=w*100/wh();return x=m(x),f.dir?100-x:x}function r_(_){var w=100,x=!1;return W.forEach(function(E,N){if(!au(N)){var T=Yt[N],P=Math.abs(T-_),R=P===100&&w===100,Lt=P<w,Ct=P<=w&&_>T;(Lt||Ct||R)&&(x=N,w=P)}}),x}function s_(_,w){_.type==="mouseout"&&_.target.nodeName==="HTML"&&_.relatedTarget===null&&lu(_,w)}function a_(_,w){if(navigator.appVersion.indexOf("MSIE 9")===-1&&_.buttons===0&&w.buttonsProperty!==0)return lu(_,w);var x=(f.dir?-1:1)*(_.calcPoint-w.startCalcPoint),E=x*100/w.baseSize;xh(x>0,E,w.locations,w.handleNumbers,w.connect)}function lu(_,w){w.handle&&(I(w.handle,f.cssClasses.active),su-=1),w.listeners.forEach(function(x){ma.removeEventListener(x[0],x[1])}),su===0&&(I(tt,f.cssClasses.drag),pu(),_.cursor&&(ya.style.cursor="",ya.removeEventListener("selectstart",o))),f.events.smoothSteps&&(w.handleNumbers.forEach(function(x){Qi(x,Yt[x],!0,!0,!1,!1)}),w.handleNumbers.forEach(function(x){Jt("update",x)})),w.handleNumbers.forEach(function(x){Jt("change",x),Jt("set",x),Jt("end",x)})}function hu(_,w){if(!w.handleNumbers.some(au)){var x;if(w.handleNumbers.length===1){var E=W[w.handleNumbers[0]];x=E.children[0],su+=1,S(x,f.cssClasses.active)}_.stopPropagation();var N=[],T=Ki(O.move,ma,a_,{target:_.target,handle:x,connect:w.connect,listeners:N,startCalcPoint:_.calcPoint,baseSize:wh(),pageOffset:_.pageOffset,handleNumbers:w.handleNumbers,buttonsProperty:_.buttons,locations:Yt.slice()}),P=Ki(O.end,ma,lu,{target:_.target,handle:x,listeners:N,doNotReject:!0,handleNumbers:w.handleNumbers}),R=Ki("mouseout",ma,s_,{target:_.target,handle:x,listeners:N,doNotReject:!0,handleNumbers:w.handleNumbers});N.push.apply(N,T.concat(P,R)),_.cursor&&(ya.style.cursor=getComputedStyle(_.target).cursor,W.length>1&&S(tt,f.cssClasses.drag),ya.addEventListener("selectstart",o,!1)),w.handleNumbers.forEach(function(Lt){Jt("start",Lt)})}}function o_(_){_.stopPropagation();var w=Sh(_.calcPoint),x=r_(w);x!==!1&&(f.events.snap||p(tt,f.cssClasses.tap,f.animationDuration),Qi(x,w,!0,!0),pu(),Jt("slide",x,!0),Jt("update",x,!0),f.events.snap?hu(_,{handleNumbers:[x]}):(Jt("change",x,!0),Jt("set",x,!0)))}function u_(_){var w=Sh(_.calcPoint),x=bt.getStep(w),E=bt.fromStepping(x);Object.keys(ti).forEach(function(N){N.split(".")[0]==="hover"&&ti[N].forEach(function(T){T.call(va,E)})})}function c_(_,w){if(_h()||au(w))return!1;var x=["Left","Right"],E=["Down","Up"],N=["PageDown","PageUp"],T=["Home","End"];f.dir&&!f.ort?x.reverse():f.ort&&!f.dir&&(E.reverse(),N.reverse());var P=_.key.replace("Arrow",""),R=P===N[0],Lt=P===N[1],Ct=P===E[0]||P===x[0]||R,zt=P===E[1]||P===x[1]||Lt,qt=P===T[0],It=P===T[1];if(!Ct&&!zt&&!qt&&!It)return!0;_.preventDefault();var te;if(zt||Ct){var me=Ct?0:1,ue=Th(w),le=ue[me];if(le===null)return!1;le===!1&&(le=bt.getDefaultStep(Yt[w],Ct,f.keyboardDefaultStep)),Lt||R?le*=f.keyboardPageMultiplier:le*=f.keyboardMultiplier,le=Math.max(le,1e-7),le=(Ct?-1:1)*le,te=Zn[w]+le}else It?te=f.spectrum.xVal[f.spectrum.xVal.length-1]:te=f.spectrum.xVal[0];return Qi(w,bt.toStepping(te),!0,!0),Jt("slide",w),Jt("update",w),Jt("change",w),Jt("set",w),!1}function l_(_){_.fixed||W.forEach(function(w,x){Ki(O.start,w.children[0],hu,{handleNumbers:[x]})}),_.tap&&Ki(O.start,$t,o_,{}),_.hover&&Ki(O.move,$t,u_,{hover:!0}),_.drag&&_e.forEach(function(w,x){if(!(w===!1||x===0||x===_e.length-1)){var E=W[x-1],N=W[x],T=[w],P=[E,N],R=[x-1,x];S(w,f.cssClasses.draggable),_.fixed&&(T.push(E.children[0]),T.push(N.children[0])),_.dragAll&&(P=W,R=xe),T.forEach(function(Lt){Ki(O.start,Lt,hu,{handles:P,handleNumbers:R,connect:w})})}})}function fu(_,w){ti[_]=ti[_]||[],ti[_].push(w),_.split(".")[0]==="update"&&W.forEach(function(x,E){Jt("update",E)})}function h_(_){return _===Ai.aria||_===Ai.tooltips}function ds(_){var w=_&&_.split(".")[0],x=w?_.substring(w.length):_;Object.keys(ti).forEach(function(E){var N=E.split(".")[0],T=E.substring(N.length);(!w||w===N)&&(!x||x===T)&&(!h_(T)||x===T)&&delete ti[E]})}function Jt(_,w,x){Object.keys(ti).forEach(function(E){var N=E.split(".")[0];_===N&&ti[E].forEach(function(T){T.call(va,Zn.map(f.format.to),w,Zn.slice(),x||!1,Yt.slice(),va)})})}function ga(_,w,x,E,N,T,P){var R;return W.length>1&&!f.events.unconstrained&&(E&&w>0&&(R=bt.getAbsoluteDistance(_[w-1],f.margin,!1),x=Math.max(x,R)),N&&w<W.length-1&&(R=bt.getAbsoluteDistance(_[w+1],f.margin,!0),x=Math.min(x,R))),W.length>1&&f.limit&&(E&&w>0&&(R=bt.getAbsoluteDistance(_[w-1],f.limit,!1),x=Math.min(x,R)),N&&w<W.length-1&&(R=bt.getAbsoluteDistance(_[w+1],f.limit,!0),x=Math.max(x,R))),f.padding&&(w===0&&(R=bt.getAbsoluteDistance(0,f.padding[0],!1),x=Math.max(x,R)),w===W.length-1&&(R=bt.getAbsoluteDistance(100,f.padding[1],!0),x=Math.min(x,R))),P||(x=bt.getStep(x)),x=m(x),x===_[w]&&!T?!1:x}function du(_,w){var x=f.ort;return(x?w:_)+", "+(x?_:w)}function xh(_,w,x,E,N){var T=x.slice(),P=E[0],R=f.events.smoothSteps,Lt=[!_,_],Ct=[_,!_];E=E.slice(),_&&E.reverse(),E.length>1?E.forEach(function(qt,It){var te=ga(T,qt,T[qt]+w,Lt[It],Ct[It],!1,R);te===!1?w=0:(w=te-T[qt],T[qt]=te)}):Lt=Ct=[!0];var zt=!1;E.forEach(function(qt,It){zt=Qi(qt,x[qt]+w,Lt[It],Ct[It],!1,R)||zt}),zt&&(E.forEach(function(qt){Jt("update",qt),Jt("slide",qt)}),N!=null&&Jt("drag",P))}function Ih(_,w){return f.dir?100-_-w:_}function f_(_,w){Yt[_]=w,Zn[_]=bt.fromStepping(w);var x=Ih(w,0)-Wg,E="translate("+du(x+"%","0")+")";W[_].style[f.transformRule]=E,Eh(_),Eh(_+1)}function pu(){xe.forEach(function(_){var w=Yt[_]>50?-1:1,x=3+(W.length+w*_);W[_].style.zIndex=String(x)})}function Qi(_,w,x,E,N,T){return N||(w=ga(Yt,_,w,x,E,!1,T)),w===!1?!1:(f_(_,w),!0)}function Eh(_){if(_e[_]){var w=0,x=100;_!==0&&(w=Yt[_-1]),_!==_e.length-1&&(x=Yt[_]);var E=x-w,N="translate("+du(Ih(w,E)+"%","0")+")",T="scale("+du(E/100,"1")+")";_e[_].style[f.transformRule]=N+" "+T}}function Ah(_,w){return _===null||_===!1||_===void 0||(typeof _=="number"&&(_=String(_)),_=f.format.from(_),_!==!1&&(_=bt.toStepping(_)),_===!1||isNaN(_))?Yt[w]:_}function _a(_,w,x){var E=b(_),N=Yt[0]===void 0;w=w===void 0?!0:w,f.animate&&!N&&p(tt,f.cssClasses.tap,f.animationDuration),xe.forEach(function(R){Qi(R,Ah(E[R],R),!0,!1,x)});var T=xe.length===1?0:1;if(N&&bt.hasNoSize()&&(x=!0,Yt[0]=0,xe.length>1)){var P=100/(xe.length-1);xe.forEach(function(R){Yt[R]=R*P})}for(;T<xe.length;++T)xe.forEach(function(R){Qi(R,Yt[R],!0,!0,x)});pu(),xe.forEach(function(R){Jt("update",R),E[R]!==null&&w&&Jt("set",R)})}function d_(_){_a(f.start,_)}function p_(_,w,x,E){if(_=Number(_),!(_>=0&&_<xe.length))throw new Error("noUiSlider: invalid handle number, got: "+_);Qi(_,Ah(w,_),!0,!0,E),Jt("update",_),x&&Jt("set",_)}function kh(_){if(_===void 0&&(_=!1),_)return Zn.length===1?Zn[0]:Zn.slice(0);var w=Zn.map(f.format.to);return w.length===1?w[0]:w}function m_(){for(ds(Ai.aria),ds(Ai.tooltips),Object.keys(f.cssClasses).forEach(function(_){I(tt,f.cssClasses[_])});tt.firstChild;)tt.removeChild(tt.firstChild);delete tt.noUiSlider}function Th(_){var w=Yt[_],x=bt.getNearbySteps(w),E=Zn[_],N=x.thisStep.step,T=null;if(f.snap)return[E-x.stepBefore.startValue||null,x.stepAfter.startValue-E||null];N!==!1&&E+N>x.stepAfter.startValue&&(N=x.stepAfter.startValue-E),E>x.thisStep.startValue?T=x.thisStep.step:x.stepBefore.step===!1?T=!1:T=E-x.stepBefore.highestStep,w===100?N=null:w===0&&(T=null);var P=bt.countStepDecimals();return N!==null&&N!==!1&&(N=Number(N.toFixed(P))),T!==null&&T!==!1&&(T=Number(T.toFixed(P))),[T,N]}function y_(){return xe.map(Th)}function g_(_,w){var x=kh(),E=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];E.forEach(function(T){_[T]!==void 0&&(A[T]=_[T])});var N=mh(A);E.forEach(function(T){_[T]!==void 0&&(f[T]=N[T])}),bt=N.spectrum,f.margin=N.margin,f.limit=N.limit,f.padding=N.padding,f.pips?cu(f.pips):uu(),f.tooltips?vh():ou(),Yt=[],_a(a(_.start)?_.start:x,w)}function __(){$t=Kg(tt),Gg(f.connect,$t),l_(f.events),_a(f.start),f.pips&&cu(f.pips),f.tooltips&&vh(),Zg()}__();var va={destroy:m_,steps:y_,on:fu,off:ds,get:kh,set:_a,setHandle:p_,reset:d_,disable:Jg,enable:Xg,__moveHandles:function(_,w,x){xh(_,w,Yt,x)},options:A,updateOptions:g_,target:tt,removePips:uu,removeTooltips:ou,getPositions:function(){return Yt.slice()},getTooltips:function(){return ne},getOrigins:function(){return W},pips:cu};return va}function yh(v,f){if(!v||!v.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+v);if(v.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var A=mh(f),O=qg(v,A,f);return v.noUiSlider=O,O}var Hg={__spectrum:fh,cssClasses:ru,create:yh};n.create=yh,n.cssClasses=ru,n.default=Hg,Object.defineProperty(n,"__esModule",{value:!0})})})(ec,ec.exports);var GS=ec.exports;const KS=YS(GS);function QS(e){let t;return{c(){t=st("div"),this.h()},l(n){t=at(n,"DIV",{class:!0}),yt(t).forEach(B),this.h()},h(){D(t,"class","doublerange svelte-148o4mi")},m(n,i){Pt(n,t,i),e[4](t)},p:jt,i:jt,o:jt,d(n){n&&B(t),e[4](null)}}}function yp(){console.log("DoubleRange.render called. is Noop")}function JS(e,t,n){let{spec:i={}}=t,r=i.id,s=+(i.min??0),a=+(i.max??10);+(i.step??1);let o,u=[];Od(()=>{KS.create(o,{start:[s,a],behaviour:"tap-drag",tooltips:!0,connect:!0,range:{min:s,max:a}}),o.noUiSlider.on("change",([h,p])=>bn(u,r,{left:h,right:p}))});function c(h){u.push(h)}function l(h){zi[h?"unshift":"push"](()=>{o=h,n(0,o)})}return e.$$set=h=>{"spec"in h&&n(1,i=h.spec)},[o,i,yp,c,l]}class XS extends un{constructor(t){super(),cn(this,t,JS,QS,ln,{spec:1,render:2,addSourceIact:3})}get spec(){return this.$$.ctx[1]}set spec(t){this.$$set({spec:t}),xn()}get render(){return yp}get addSourceIact(){return this.$$.ctx[3]}}function bf(e){let t,n=e[2][0].label+"",i;return{c(){t=st("label"),i=Ce(n),this.h()},l(r){t=at(r,"LABEL",{for:!0,class:!0});var s=yt(t);i=Re(s,n),s.forEach(B),this.h()},h(){D(t,"for",e[3]),D(t,"class","form-label")},m(r,s){Pt(r,t,s),Z(t,i)},p(r,s){s&4&&n!==(n=r[2][0].label+"")&&vi(i,n)},d(r){r&&B(t)}}}function ZS(e){var u;let t,n,i,r,s,a,o=((u=e[2][0])==null?void 0:u.label)&&bf(e);return{c(){t=st("form"),n=st("div"),o&&o.c(),i=qe(),r=st("input"),this.h()},l(c){t=at(c,"FORM",{});var l=yt(t);n=at(l,"DIV",{class:!0});var h=yt(n);o&&o.l(h),i=He(h),r=at(h,"INPUT",{type:!0,class:!0,id:!0}),h.forEach(B),l.forEach(B),this.h()},h(){D(r,"type","text"),D(r,"class","form-control"),D(r,"id",e[3]),D(n,"class","mb-3")},m(c,l){Pt(c,t,l),Z(t,n),o&&o.m(n,null),Z(n,i),Z(n,r),e[9](r),qa(r,e[2][0].value),s||(a=[vn(r,"input",e[10]),vn(r,"input",e[4]),vn(t,"submit",I_(e[5]))],s=!0)},p(c,[l]){var h;(h=c[2][0])!=null&&h.label?o?o.p(c,l):(o=bf(c),o.c(),o.m(n,i)):o&&(o.d(1),o=null),l&4&&r.value!==c[2][0].value&&qa(r,c[2][0].value)},i:jt,o:jt,d(c){c&&B(t),o&&o.d(),e[9](null),s=!1,Nd(a)}}}function tx(e,t,n){let i,r=jt,s=()=>(r(),r=E_(l,I=>n(2,i=I)),l);e.$$.on_destroy.push(()=>r());let{spec:a={}}=t,o=a.id,u,c={INPUT:[],SUBMIT:[]},{table:l=bi([{value:""}])}=t;s();function h(I){Cs(l,i=I,i),i.length<1&&Cs(l,i=[{value:""}],i)}function p(I){(c[I.type]??c.SUBMIT).push(I)}function m(){bn(c.INPUT,o,i[0])}function b(){bn(c.SUBMIT,o,i[0])}function g(I){zi[I?"unshift":"push"](()=>{u=I,n(1,u)})}function S(){i[0].value=this.value,l.set(i)}return e.$$set=I=>{"spec"in I&&n(6,a=I.spec),"table"in I&&s(n(0,l=I.table))},[l,u,i,o,m,b,a,h,p,g,S]}class ex extends un{constructor(t){super(),cn(this,t,tx,ZS,ln,{spec:6,table:0,render:7,addSourceIact:8})}get spec(){return this.$$.ctx[6]}set spec(t){this.$$set({spec:t}),xn()}get table(){return this.$$.ctx[0]}set table(t){this.$$set({table:t}),xn()}get render(){return this.$$.ctx[7]}get addSourceIact(){return this.$$.ctx[8]}}function nx(e){let t,n=e[3][0].label+"",i;return{c(){t=st("label"),i=Ce(n),this.h()},l(r){t=at(r,"LABEL",{class:!0,for:!0,style:!0});var s=yt(t);i=Re(s,n),s.forEach(B),this.h()},h(){D(t,"class","form-check-label label svelte-lf98xr"),D(t,"for",e[2]),Os(t,"line-height","1.5em"),Os(t,"vertical-align","middle")},m(r,s){Pt(r,t,s),Z(t,i)},p:jt,d(r){r&&B(t)}}}function ix(e){var o;let t,n,i,r,s,a=((o=e[3][0])==null?void 0:o.label)&&nx(e);return{c(){t=st("div"),n=st("input"),i=qe(),a&&a.c(),this.h()},l(u){t=at(u,"DIV",{class:!0});var c=yt(t);n=at(c,"INPUT",{class:!0,type:!0,role:!0,id:!0,style:!0}),i=He(c),a&&a.l(c),c.forEach(B),this.h()},h(){D(n,"class","form-check-input toggle svelte-lf98xr"),D(n,"type","checkbox"),D(n,"role","switch"),D(n,"id",e[2]),Os(n,"width","4em"),Os(n,"height","1.5em"),D(t,"class","form-check form-switch")},m(u,c){Pt(u,t,c),Z(t,n),n.checked=e[1][0].value,Z(t,i),a&&a.m(t,null),e[8](t),r||(s=vn(n,"change",e[7]),r=!0)},p(u,[c]){var l;c&2&&(n.checked=u[1][0].value),(l=u[3][0])!=null&&l.label&&a.p(u,c)},i:jt,o:jt,d(u){u&&B(t),a&&a.d(),e[8](null),r=!1,s()}}}function rx(e,t,n){let i,{spec:r}=t,s=r.id,a=bi([{value:!1}]);Xs(e,a,m=>n(1,i=m));let o=null,u=[];a.subscribe(m=>bn(u,s,m[0]));function c(m){u.push(m)}function l(m){Cs(a,i=m,i),i.length<1&&Cs(a,i=[{value:!1}],i),console.log("Toggle.render",i)}function h(){i[0].value=this.checked,a.set(i)}function p(m){zi[m?"unshift":"push"](()=>{o=m,n(0,o)})}return e.$$set=m=>{"spec"in m&&n(4,r=m.spec)},[o,i,s,a,r,c,l,h,p]}class sx extends un{constructor(t){super(),cn(this,t,rx,ix,ln,{spec:4,addSourceIact:5,render:6})}get spec(){return this.$$.ctx[4]}set spec(t){this.$$set({spec:t}),xn()}get addSourceIact(){return this.$$.ctx[5]}get render(){return this.$$.ctx[6]}}function wf(e,t,n){const i=e.slice();return i[16]=t[n],i[18]=n,i}function Sf(e,t,n){const i=e.slice();return i[19]=t[n],i}function xf(e,t,n){const i=e.slice();return i[19]=t[n],i}function If(e){let t,n=(e[1][e[19]]??e[19])+"",i,r,s;function a(){return e[8](e[19])}return{c(){t=st("th"),i=Ce(n)},l(o){t=at(o,"TH",{});var u=yt(t);i=Re(u,n),u.forEach(B)},m(o,u){Pt(o,t,u),Z(t,i),r||(s=vn(t,"click",a),r=!0)},p(o,u){e=o,u&2&&n!==(n=(e[1][e[19]]??e[19])+"")&&vi(i,n)},d(o){o&&B(t),r=!1,s()}}}function Ef(e){let t,n=(e[16][e[19]]??"")+"",i,r,s;function a(){return e[10](e[18],e[19])}return{c(){t=st("td"),i=Ce(n)},l(o){t=at(o,"TD",{});var u=yt(t);i=Re(u,n),u.forEach(B)},m(o,u){Pt(o,t,u),Z(t,i),r||(s=vn(t,"click",a),r=!0)},p(o,u){e=o,u&3&&n!==(n=(e[16][e[19]]??"")+"")&&vi(i,n)},d(o){o&&B(t),r=!1,s()}}}function Af(e){let t,n,i,r,s,a,o;function u(){return e[9](e[18])}let c=an(e[1]),l=[];for(let h=0;h<c.length;h+=1)l[h]=Ef(Sf(e,c,h));return{c(){t=st("tr"),n=st("td"),i=Ce(" "),r=qe();for(let h=0;h<l.length;h+=1)l[h].c();s=qe()},l(h){t=at(h,"TR",{});var p=yt(t);n=at(p,"TD",{});var m=yt(n);i=Re(m," "),m.forEach(B),r=He(p);for(let b=0;b<l.length;b+=1)l[b].l(p);s=He(p),p.forEach(B)},m(h,p){Pt(h,t,p),Z(t,n),Z(n,i),Z(t,r);for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(t,null);Z(t,s),a||(o=vn(n,"click",u),a=!0)},p(h,p){if(e=h,p&19){c=an(e[1]);let m;for(m=0;m<c.length;m+=1){const b=Sf(e,c,m);l[m]?l[m].p(b,p):(l[m]=Ef(b),l[m].c(),l[m].m(t,s))}for(;m<l.length;m+=1)l[m].d(1);l.length=c.length}},d(h){h&&B(t),fr(l,h),a=!1,o()}}}function kf(e){let t,n=e[0].length-30+"",i,r;return{c(){t=st("p"),i=Ce(n),r=Ce(" more rows omitted")},l(s){t=at(s,"P",{});var a=yt(t);i=Re(a,n),r=Re(a," more rows omitted"),a.forEach(B)},m(s,a){Pt(s,t,a),Z(t,i),Z(t,r)},p(s,a){a&1&&n!==(n=s[0].length-30+"")&&vi(i,n)},d(s){s&&B(t)}}}function ax(e){let t,n,i,r,s,a,o,u,c,l=an(e[1]),h=[];for(let g=0;g<l.length;g+=1)h[g]=If(xf(e,l,g));let p=Yu(0,30,e[0]),m=[];for(let g=0;g<p.length;g+=1)m[g]=Af(wf(e,p,g));let b=e[0].length>30&&kf(e);return{c(){t=st("table"),n=st("tr"),i=st("th"),r=Ce(" "),s=qe();for(let g=0;g<h.length;g+=1)h[g].c();a=qe(),o=st("tbody");for(let g=0;g<m.length;g+=1)m[g].c();u=qe(),b&&b.c(),c=Fh(),this.h()},l(g){t=at(g,"TABLE",{class:!0});var S=yt(t);n=at(S,"TR",{});var I=yt(n);i=at(I,"TH",{});var k=yt(i);r=Re(k," "),k.forEach(B),s=He(I);for(let F=0;F<h.length;F+=1)h[F].l(I);I.forEach(B),a=He(S),o=at(S,"TBODY",{});var j=yt(o);for(let F=0;F<m.length;F+=1)m[F].l(j);j.forEach(B),S.forEach(B),u=He(g),b&&b.l(g),c=Fh(),this.h()},h(){D(t,"class","table table-striped")},m(g,S){Pt(g,t,S),Z(t,n),Z(n,i),Z(i,r),Z(n,s);for(let I=0;I<h.length;I+=1)h[I]&&h[I].m(n,null);Z(t,a),Z(t,o);for(let I=0;I<m.length;I+=1)m[I]&&m[I].m(o,null);Pt(g,u,S),b&&b.m(g,S),Pt(g,c,S)},p(g,[S]){if(S&6){l=an(g[1]);let I;for(I=0;I<l.length;I+=1){const k=xf(g,l,I);h[I]?h[I].p(k,S):(h[I]=If(k),h[I].c(),h[I].m(n,null))}for(;I<h.length;I+=1)h[I].d(1);h.length=l.length}if(S&27){p=Yu(0,30,g[0]);let I;for(I=0;I<p.length;I+=1){const k=wf(g,p,I);m[I]?m[I].p(k,S):(m[I]=Af(k),m[I].c(),m[I].m(o,null))}for(;I<m.length;I+=1)m[I].d(1);m.length=p.length}g[0].length>30?b?b.p(g,S):(b=kf(g),b.c(),b.m(c.parentNode,c)):b&&(b.d(1),b=null)},i:jt,o:jt,d(g){g&&B(t),fr(h,g),fr(m,g),g&&B(u),b&&b.d(g),g&&B(c)}}}function ox(e,t,n){let{spec:i={}}=t;const r=i.id;let{table:s=[]}=t,a=i.label,o=!1;l();let u={CELL:[],ROW:[],COL:[]};function c(k){n(0,s=k),l(),n(1,a)}function l(){(o||Av(a)||Wu(a))&&(n(1,a=jd(an(s[0]).map(k=>[k,k]))),o=!0)}function h(k){var j;(j=u[k.type])==null||j.push(k)}function p(k){bn(u.COL,r,{key:k})}function m(k){bn(u.ROW,r,s[k])}function b(k,j){bn(u.CELL,r,Dv([j],s[k]))}const g=k=>p(k),S=k=>m(k),I=(k,j)=>b(k,j);return e.$$set=k=>{"spec"in k&&n(5,i=k.spec),"table"in k&&n(0,s=k.table)},[s,a,p,m,b,i,c,h,g,S,I]}let gp=class extends un{constructor(t){super(),cn(this,t,ox,ax,ln,{spec:5,table:0,render:6,addSourceIact:7})}get spec(){return this.$$.ctx[5]}set spec(t){this.$$set({spec:t}),xn()}get table(){return this.$$.ctx[0]}set table(t){this.$$set({table:t}),xn()}get render(){return this.$$.ctx[6]}get addSourceIact(){return this.$$.ctx[7]}};function ux(e){let t,n=JSON.stringify(e[1])+"",i;return{c(){t=st("p"),i=Ce(n)},l(r){t=at(r,"P",{});var s=yt(t);i=Re(s,n),s.forEach(B)},m(r,s){Pt(r,t,s),Z(t,i)},p(r,s){s&2&&n!==(n=JSON.stringify(r[1])+"")&&vi(i,n)},i:jt,o:jt,d(r){r&&B(t)}}}function cx(e){let t,n,i={table:e[1],spec:hx};return t=new gp({props:i}),e[4](t),{c(){ks(t.$$.fragment)},l(r){kc(t.$$.fragment,r)},m(r,s){Ts(t,r,s),n=!0},p(r,s){const a={};s&2&&(a.table=r[1]),t.$set(a)},i(r){n||(ze(t.$$.fragment,r),n=!0)},o(r){Sn(t.$$.fragment,r),n=!1},d(r){e[4](null),Ns(t,r)}}}function lx(e){let t,n,i,r=(e[0].id??"")+"",s,a,o,u,c,l,h;const p=[cx,ux],m=[];function b(g,S){return S&2&&(u=null),u==null&&(u=!!Ha(Array,g[1])),u?0:1}return c=b(e,-1),l=m[c]=p[c](e),{c(){t=st("div"),n=st("div"),i=Ce("Debug Box "),s=Ce(r),a=qe(),o=st("div"),l.c(),this.h()},l(g){t=at(g,"DIV",{class:!0});var S=yt(t);n=at(S,"DIV",{class:!0});var I=yt(n);i=Re(I,"Debug Box "),s=Re(I,r),I.forEach(B),a=He(S),o=at(S,"DIV",{class:!0});var k=yt(o);l.l(k),k.forEach(B),S.forEach(B),this.h()},h(){D(n,"class","card-header"),D(o,"class","debug card-body alert svelte-r1xcj8"),D(t,"class","card")},m(g,S){Pt(g,t,S),Z(t,n),Z(n,i),Z(n,s),Z(t,a),Z(t,o),m[c].m(o,null),h=!0},p(g,[S]){(!h||S&1)&&r!==(r=(g[0].id??"")+"")&&vi(s,r);let I=c;c=b(g,S),c===I?m[c].p(g,S):(Js(),Sn(m[I],1,1,()=>{m[I]=null}),Qs(),l=m[c],l?l.p(g,S):(l=m[c]=p[c](g),l.c()),ze(l,1),l.m(o,null))},i(g){h||(ze(l),h=!0)},o(g){Sn(l),h=!1},d(g){g&&B(t),m[c].d()}}}const hx=()=>({});function fx(e,t,n){let{spec:i={}}=t,r="",s=null;function a(u){n(1,r=u),s==null||s.render(r)}function o(u){zi[u?"unshift":"push"](()=>{s=u,n(2,s)})}return e.$$set=u=>{"spec"in u&&n(0,i=u.spec)},[i,r,s,a,o]}class dx extends un{constructor(t){super(),cn(this,t,fx,lx,ln,{spec:0,render:3})}get spec(){return this.$$.ctx[0]}set spec(t){this.$$set({spec:t}),xn()}get render(){return this.$$.ctx[3]}}function px(e){let t;return{c(){t=st("div")},l(n){t=at(n,"DIV",{});var i=yt(t);i.forEach(B)},m(n,i){Pt(n,t,i),e[4](t)},p:jt,i:jt,o:jt,d(n){n&&B(t),e[4](null)}}}function mx(e,t,n){let{spec:i={}}=t,r=zd(i.labels,i.mapping),s=[],a=null,o,u,c=[];const l={x:{type:"quantitative",required:!0},y:{type:"quantitative",required:!0},color:{type:"ordinal",required:!1},key:{type:"ordinal",required:!1}};function h(g){if(g=CS(g,l,r),s=g,!!s)if(o){let S=o.view.changeset().remove(()=>!0).insert(s);o.view.change("source_0",S).run()}else{let S=DS(u,s);TS(a,S,{renderer:"canvas"}).then(I=>{o=I,m()})}}function p(g){c.push(g),c.length==1&&(g.sel=RS(g.type),u=u.select(g.sel).encode(ce.size().value(100)),o=null,h(s))}function m(){c.length!=0&&LS(c[0],o,(g,S)=>{bn(c,i.id,S)})}u=ce.markPoint({filled:!0,tooltip:{content:"data"}}).width(600).height(400).encode(ce.size().value(80)).autosize({type:"fit",resize:!0,contains:"padding"}).data(s),u=OS(u,l,r);function b(g){zi[g?"unshift":"push"](()=>{a=g,n(0,a)})}return e.$$set=g=>{"spec"in g&&n(1,i=g.spec)},[a,i,h,p,b]}class yx extends un{constructor(t){super(),cn(this,t,mx,px,ln,{spec:1,render:2,addSourceIact:3})}get spec(){return this.$$.ctx[1]}set spec(t){this.$$set({spec:t}),xn()}get render(){return this.$$.ctx[2]}get addSourceIact(){return this.$$.ctx[3]}}let gx={Dropdown:US,Toggle:sx,Range:HS,DoubleRange:XS,Textbox:ex,Table:gp,Radio:$S,Point:yx,Debug:dx};class _x{constructor(){this.listeners={},this.id=0}on(t,n){let i=this.id++;return this.listeners[t]=this.listeners[t]||{},this.listeners[t][i]=n,()=>{delete this.listeners[t][i]}}emit(t,...n){(Dd(this.listeners[t])??[]).forEach(r=>{r(...n)})}}let vx=zd(kS,gx);function Za(e){return vx[e.type]||null}class wi extends _x{constructor(){super(),this.registeredViews=[],this.on("data",(t,...n)=>{this.registeredViews.forEach(({view:i,postprocessFuncs:r})=>{if(Wu(i)||Wu(i.render))return;let a=ev(...r)(t);i.render(a,...n)})})}async init(){}registerView(t,n){console.log("Backend.registerView",t,n),n=vv([n??rv]),this.registeredViews.push({view:t,postprocessFuncs:n})}addPostprocessing(t,n){this.registeredViews.forEach(({view:i,postprocessFuncs:r})=>{var s;((s=i.spec)==null?void 0:s.id)==t&&r.push(n)})}merge(t,n){return n}async execute(t,n){}}class bx extends wi{constructor(t){super(),this.data=t.data||[]}async execute(t,...n){this.emit("data",this.data,...n)}}class wx extends wi{constructor(t){super(),this.data=null,this.promise=null,this.promise=yS(t.url,hS)}async execute(t,n){this.promise&&(this.data=await this.promise,this.promise=null),this.emit("data",this.data,n)}}function U(e,t,n,i){function r(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(l){try{c(i.next(l))}catch(h){a(h)}}function u(l){try{c(i.throw(l))}catch(h){a(h)}}function c(l){l.done?s(l.value):r(l.value).then(o,u)}c((i=i.apply(e,t||[])).next())})}function Tf(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function X(e){return this instanceof X?(this.v=e,this):new X(e)}function zn(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),r,s=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(p){i[p]&&(r[p]=function(m){return new Promise(function(b,g){s.push([p,m,b,g])>1||o(p,m)})})}function o(p,m){try{u(i[p](m))}catch(b){h(s[0][3],b)}}function u(p){p.value instanceof X?Promise.resolve(p.value.v).then(c,l):h(s[0][2],p)}function c(p){o("next",p)}function l(p){o("throw",p)}function h(p,m){p(m),s.shift(),s.length&&o(s[0][0],s[0][1])}}function Ra(e){var t,n;return t={},i("next"),i("throw",function(r){throw r}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(r,s){t[r]=e[r]?function(a){return(n=!n)?{value:X(e[r](a)),done:!1}:s?s(a):a}:s}}function lr(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Tf=="function"?Tf(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=e[s]&&function(a){return new Promise(function(o,u){a=e[s](a),r(o,u,a.done,a.value)})}}function r(s,a,o,u){Promise.resolve(u).then(function(c){s({value:c,done:o})},a)}}const Sx=new TextDecoder("utf-8"),nc=e=>Sx.decode(e),xx=new TextEncoder,Mo=e=>xx.encode(e),[CC,_p]=(()=>{const e=()=>{throw new Error("BigInt is not available in this environment")};function t(){throw e()}return t.asIntN=()=>{throw e()},t.asUintN=()=>{throw e()},typeof BigInt<"u"?[BigInt,!0]:[t,!1]})(),[gr,RC]=(()=>{const e=()=>{throw new Error("BigInt64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[t,!1]})(),[_r,FC]=(()=>{const e=()=>{throw new Error("BigUint64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[t,!1]})(),Ix=e=>typeof e=="number",vp=e=>typeof e=="boolean",re=e=>typeof e=="function",Fe=e=>e!=null&&Object(e)===e,pr=e=>Fe(e)&&re(e.then),na=e=>Fe(e)&&re(e[Symbol.iterator]),ns=e=>Fe(e)&&re(e[Symbol.asyncIterator]),ic=e=>Fe(e)&&Fe(e.schema),bp=e=>Fe(e)&&"done"in e&&"value"in e,wp=e=>Fe(e)&&re(e.stat)&&Ix(e.fd),Sp=e=>Fe(e)&&Uc(e.body),Po=e=>"_getDOMStream"in e&&"_getNodeStream"in e,Ex=e=>Fe(e)&&re(e.abort)&&re(e.getWriter)&&!Po(e),Uc=e=>Fe(e)&&re(e.cancel)&&re(e.getReader)&&!Po(e),Ax=e=>Fe(e)&&re(e.end)&&re(e.write)&&vp(e.writable)&&!Po(e),xp=e=>Fe(e)&&re(e.read)&&re(e.pipe)&&vp(e.readable)&&!Po(e),kx=e=>Fe(e)&&re(e.clear)&&re(e.bytes)&&re(e.position)&&re(e.setPosition)&&re(e.capacity)&&re(e.getBufferIdentifier)&&re(e.createLong),Vc=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function Tx(e){const t=e[0]?[e[0]]:[];let n,i,r,s;for(let a,o,u=0,c=0,l=e.length;++u<l;){if(a=t[c],o=e[u],!a||!o||a.buffer!==o.buffer||o.byteOffset<a.byteOffset){o&&(t[++c]=o);continue}if({byteOffset:n,byteLength:r}=a,{byteOffset:i,byteLength:s}=o,n+r<i||i+s<n){o&&(t[++c]=o);continue}t[c]=new Uint8Array(a.buffer,n,i-n+s)}return t}function to(e,t,n=0,i=t.byteLength){const r=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,r),a=new Uint8Array(t.buffer,t.byteOffset,Math.min(i,r));return s.set(a,n),e}function Wn(e,t){const n=Tx(e),i=n.reduce((l,h)=>l+h.byteLength,0);let r,s,a,o=0,u=-1;const c=Math.min(t||Number.POSITIVE_INFINITY,i);for(const l=n.length;++u<l;){if(r=n[u],s=r.subarray(0,Math.min(r.length,c-o)),c<=o+s.length){s.length<r.length?n[u]=r.subarray(s.length):s.length===r.length&&u++,a?to(a,s,o):a=s;break}to(a||(a=new Uint8Array(c)),s,o),o+=s.length}return[a||new Uint8Array(0),n.slice(u),i-(a?a.byteLength:0)]}function Rt(e,t){let n=bp(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=Mo(n)),n instanceof ArrayBuffer?new e(n):n instanceof Vc?new e(n):kx(n)?Rt(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const ys=e=>Rt(Int32Array,e),wt=e=>Rt(Uint8Array,e),rc=e=>(e.next(),e);function*Nx(e,t){const n=function*(r){yield r},i=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Vc?n(t):na(t)?t:n(t);return yield*rc(function*(r){let s=null;do s=r.next(yield Rt(e,s));while(!s.done)}(i[Symbol.iterator]())),new e}const Ox=e=>Nx(Uint8Array,e);function Ip(e,t){return zn(this,arguments,function*(){if(pr(t))return yield X(yield X(yield*Ra(lr(Ip(e,yield X(t))))));const i=function(a){return zn(this,arguments,function*(){yield yield X(yield X(a))})},r=function(a){return zn(this,arguments,function*(){yield X(yield*Ra(lr(rc(function*(o){let u=null;do u=o.next(yield u==null?void 0:u.value);while(!u.done)}(a[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Vc?i(t):na(t)?r(t):ns(t)?t:i(t);return yield X(yield*Ra(lr(rc(function(a){return zn(this,arguments,function*(){let o=null;do o=yield X(a.next(yield yield X(Rt(e,o))));while(!o.done)})}(s[Symbol.asyncIterator]()))))),yield X(new e)})}const Cx=e=>Ip(Uint8Array,e);function jc(e,t,n){if(e!==0){n=n.slice(0,t+1);for(let i=-1;++i<=t;)n[i]+=e}return n}function Rx(e,t){let n=0;const i=e.length;if(i!==t.length)return!1;if(i>0)do if(e[n]!==t[n])return!1;while(++n<i);return!0}const tn={fromIterable(e){return xa(Fx(e))},fromAsyncIterable(e){return xa(Bx(e))},fromDOMStream(e){return xa(Lx(e))},fromNodeStream(e){return xa(Mx(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},xa=e=>(e.next(),e);function*Fx(e){let t,n=!1,i=[],r,s,a,o=0;function u(){return s==="peek"?Wn(i,a)[0]:([r,i,o]=Wn(i,a),r)}({cmd:s,size:a}=yield null);const c=Ox(e)[Symbol.iterator]();try{do if({done:t,value:r}=Number.isNaN(a-o)?c.next():c.next(a-o),!t&&r.byteLength>0&&(i.push(r),o+=r.byteLength),t||a<=o)do({cmd:s,size:a}=yield u());while(a<o);while(!t)}catch(l){(n=!0)&&typeof c.throw=="function"&&c.throw(l)}finally{n===!1&&typeof c.return=="function"&&c.return(null)}return null}function Bx(e){return zn(this,arguments,function*(){let n,i=!1,r=[],s,a,o,u=0;function c(){return a==="peek"?Wn(r,o)[0]:([s,r,u]=Wn(r,o),s)}({cmd:a,size:o}=yield yield X(null));const l=Cx(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(o-u)?yield X(l.next()):yield X(l.next(o-u)),!n&&s.byteLength>0&&(r.push(s),u+=s.byteLength),n||o<=u)do({cmd:a,size:o}=yield yield X(c()));while(o<u);while(!n)}catch(h){(i=!0)&&typeof l.throw=="function"&&(yield X(l.throw(h)))}finally{i===!1&&typeof l.return=="function"&&(yield X(l.return(new Uint8Array(0))))}return yield X(null)})}function Lx(e){return zn(this,arguments,function*(){let n=!1,i=!1,r=[],s,a,o,u=0;function c(){return a==="peek"?Wn(r,o)[0]:([s,r,u]=Wn(r,o),s)}({cmd:a,size:o}=yield yield X(null));const l=new Dx(e);try{do if({done:n,value:s}=Number.isNaN(o-u)?yield X(l.read()):yield X(l.read(o-u)),!n&&s.byteLength>0&&(r.push(wt(s)),u+=s.byteLength),n||o<=u)do({cmd:a,size:o}=yield yield X(c()));while(o<u);while(!n)}catch(h){(i=!0)&&(yield X(l.cancel(h)))}finally{i===!1?yield X(l.cancel()):e.locked&&l.releaseLock()}return yield X(null)})}class Dx{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return U(this,void 0,void 0,function*(){const{reader:n,source:i}=this;n&&(yield n.cancel(t).catch(()=>{})),i&&i.locked&&this.releaseLock()})}read(t){return U(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=wt(n)),n})}}const Eu=(e,t)=>{const n=r=>i([t,r]);let i;return[t,n,new Promise(r=>(i=r)&&e.once(t,n))]};function Mx(e){return zn(this,arguments,function*(){const n=[];let i="error",r=!1,s=null,a,o,u=0,c=[],l;function h(){return a==="peek"?Wn(c,o)[0]:([l,c,u]=Wn(c,o),l)}if({cmd:a,size:o}=yield yield X(null),e.isTTY)return yield yield X(new Uint8Array(0)),yield X(null);try{n[0]=Eu(e,"end"),n[1]=Eu(e,"error");do{if(n[2]=Eu(e,"readable"),[i,s]=yield X(Promise.race(n.map(m=>m[2]))),i==="error")break;if((r=i==="end")||(Number.isFinite(o-u)?(l=wt(e.read(o-u)),l.byteLength<o-u&&(l=wt(e.read()))):l=wt(e.read()),l.byteLength>0&&(c.push(l),u+=l.byteLength)),r||o<=u)do({cmd:a,size:o}=yield yield X(h()));while(o<u)}while(!r)}finally{yield X(p(n,i==="error"?s:null))}return yield X(null);function p(m,b){return l=c=null,new Promise((g,S)=>{for(const[I,k]of m)e.off(I,k);try{const I=e.destroy;I&&I.call(e,b),b=void 0}catch(I){b=I||b}finally{b!=null?S(b):g()}})}})}var $e;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})($e||($e={}));var We;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(We||(We={}));var de;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(de||(de={}));var En;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(En||(En={}));var ft;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(ft||(ft={}));var Yn;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Yn||(Yn={}));var Et;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Et||(Et={}));var y;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"})(y||(y={}));var ri;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(ri||(ri={}));const Px=void 0;function Fi(e){if(e===null)return"null";if(e===Px)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof gr||e instanceof _r?`[${[...e].map(t=>Fi(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const Ux=Symbol.for("isArrowBigNum");function Nn(e,...t){return t.length===0?Object.setPrototypeOf(Rt(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Nn.prototype[Ux]=!0;Nn.prototype.toJSON=function(){return`"${hr(this)}"`};Nn.prototype.valueOf=function(){return Ep(this)};Nn.prototype.toString=function(){return hr(this)};Nn.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return Ep(this);case"string":return hr(this);case"default":return sc(this)}return hr(this)};function Fr(...e){return Nn.apply(this,e)}function Br(...e){return Nn.apply(this,e)}function Ps(...e){return Nn.apply(this,e)}Object.setPrototypeOf(Fr.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Br.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(Ps.prototype,Object.create(Uint32Array.prototype));Object.assign(Fr.prototype,Nn.prototype,{constructor:Fr,signed:!0,TypedArray:Int32Array,BigIntArray:gr});Object.assign(Br.prototype,Nn.prototype,{constructor:Br,signed:!1,TypedArray:Uint32Array,BigIntArray:_r});Object.assign(Ps.prototype,Nn.prototype,{constructor:Ps,signed:!0,TypedArray:Uint32Array,BigIntArray:_r});function Ep(e){const{buffer:t,byteOffset:n,length:i,signed:r}=e,s=new _r(t,n,i),a=r&&s[s.length-1]&BigInt(1)<<BigInt(63);let o=BigInt(a?1:0),u=BigInt(0);if(a){for(const c of s)o+=~c*(BigInt(1)<<BigInt(32)*u++);o*=BigInt(-1)}else for(const c of s)o+=c*(BigInt(1)<<BigInt(32)*u++);return o}let hr,sc;_p?(sc=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:Au(e),hr=e=>e.byteLength===8?`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`:Au(e)):(hr=Au,sc=hr);function Au(e){let t="";const n=new Uint32Array(2);let i=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const r=new Uint32Array((i=new Uint16Array(i).reverse()).buffer);let s=-1;const a=i.length-1;do{for(n[0]=i[s=0];s<a;)i[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+i[s];i[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(r[0]||r[1]||r[2]||r[3]);return t??"0"}class $c{static new(t,n){switch(n){case!0:return new Fr(t);case!1:return new Br(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case gr:return new Fr(t)}return t.byteLength===16?new Ps(t):new Br(t)}static signed(t){return new Fr(t)}static unsigned(t){return new Br(t)}static decimal(t){return new Ps(t)}constructor(t,n){return $c.new(t,n)}}var Ap,kp,Tp,Np,Op,Cp,Rp,Fp,Bp,Lp,Dp,Mp,Pp,Up,Vp,jp,$p,zp,qp;class V{static isNull(t){return(t==null?void 0:t.typeId)===y.Null}static isInt(t){return(t==null?void 0:t.typeId)===y.Int}static isFloat(t){return(t==null?void 0:t.typeId)===y.Float}static isBinary(t){return(t==null?void 0:t.typeId)===y.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===y.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===y.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===y.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===y.Date}static isTime(t){return(t==null?void 0:t.typeId)===y.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===y.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===y.Interval}static isList(t){return(t==null?void 0:t.typeId)===y.List}static isStruct(t){return(t==null?void 0:t.typeId)===y.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===y.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===y.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===y.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===y.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===y.Dictionary}static isDenseUnion(t){return V.isUnion(t)&&t.mode===We.Dense}static isSparseUnion(t){return V.isUnion(t)&&t.mode===We.Sparse}get typeId(){return y.NONE}}Ap=Symbol.toStringTag;V[Ap]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(V.prototype);let di=class extends V{toString(){return"Null"}get typeId(){return y.Null}};kp=Symbol.toStringTag;di[kp]=(e=>e[Symbol.toStringTag]="Null")(di.prototype);class be extends V{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return y.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?gr:_r}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}Tp=Symbol.toStringTag;be[Tp]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(be.prototype);class zc extends be{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class qc extends be{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class Li extends be{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}let Hc=class extends be{constructor(){super(!0,64)}get ArrayType(){return gr}};class Wc extends be{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class Yc extends be{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class Gc extends be{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}let Kc=class extends be{constructor(){super(!1,64)}get ArrayType(){return _r}};Object.defineProperty(zc.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(qc.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(Li.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(Hc.prototype,"ArrayType",{value:gr});Object.defineProperty(Wc.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(Yc.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(Gc.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(Kc.prototype,"ArrayType",{value:_r});class Di extends V{constructor(t){super(),this.precision=t}get typeId(){return y.Float}get ArrayType(){switch(this.precision){case de.HALF:return Uint16Array;case de.SINGLE:return Float32Array;case de.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}Np=Symbol.toStringTag;Di[Np]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(Di.prototype);class Hp extends Di{constructor(){super(de.HALF)}}class Qc extends Di{constructor(){super(de.SINGLE)}}class Jc extends Di{constructor(){super(de.DOUBLE)}}Object.defineProperty(Hp.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(Qc.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(Jc.prototype,"ArrayType",{value:Float64Array});let Us=class extends V{constructor(){super()}get typeId(){return y.Binary}toString(){return"Binary"}};Op=Symbol.toStringTag;Us[Op]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(Us.prototype);let jr=class extends V{constructor(){super()}get typeId(){return y.Utf8}toString(){return"Utf8"}};Cp=Symbol.toStringTag;jr[Cp]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(jr.prototype);let Vs=class extends V{constructor(){super()}get typeId(){return y.Bool}toString(){return"Bool"}};Rp=Symbol.toStringTag;Vs[Rp]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(Vs.prototype);let eo=class extends V{constructor(t,n,i=128){super(),this.scale=t,this.precision=n,this.bitWidth=i}get typeId(){return y.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};Fp=Symbol.toStringTag;eo[Fp]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(eo.prototype);class $r extends V{constructor(t){super(),this.unit=t}get typeId(){return y.Date}toString(){return`Date${(this.unit+1)*32}<${En[this.unit]}>`}}Bp=Symbol.toStringTag;$r[Bp]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))($r.prototype);class Vx extends $r{constructor(){super(En.DAY)}}class jx extends $r{constructor(){super(En.MILLISECOND)}}class pi extends V{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return y.Time}toString(){return`Time${this.bitWidth}<${ft[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return gr}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}Lp=Symbol.toStringTag;pi[Lp]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(pi.prototype);class $x extends pi{constructor(){super(ft.SECOND,32)}}class zx extends pi{constructor(){super(ft.MILLISECOND,32)}}class qx extends pi{constructor(){super(ft.MICROSECOND,64)}}class Hx extends pi{constructor(){super(ft.NANOSECOND,64)}}class no extends V{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return y.Timestamp}toString(){return`Timestamp<${ft[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}Dp=Symbol.toStringTag;no[Dp]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(no.prototype);class zr extends V{constructor(t){super(),this.unit=t}get typeId(){return y.Interval}toString(){return`Interval<${Yn[this.unit]}>`}}Mp=Symbol.toStringTag;zr[Mp]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(zr.prototype);class Wx extends zr{constructor(){super(Yn.DAY_TIME)}}class Yx extends zr{constructor(){super(Yn.YEAR_MONTH)}}let qr=class extends V{constructor(t){super(),this.children=[t]}get typeId(){return y.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};Pp=Symbol.toStringTag;qr[Pp]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(qr.prototype);class fe extends V{constructor(t){super(),this.children=t}get typeId(){return y.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}Up=Symbol.toStringTag;fe[Up]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(fe.prototype);class js extends V{constructor(t,n,i){super(),this.mode=t,this.children=i,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((r,s,a)=>(r[s]=a)&&r||r,Object.create(null))}get typeId(){return y.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}Vp=Symbol.toStringTag;js[Vp]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(js.prototype);let io=class extends V{constructor(t){super(),this.byteWidth=t}get typeId(){return y.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};jp=Symbol.toStringTag;io[jp]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(io.prototype);let Hr=class extends V{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return y.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};$p=Symbol.toStringTag;Hr[$p]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(Hr.prototype);class $s extends V{constructor(t,n=!1){super(),this.children=[t],this.keysSorted=n}get typeId(){return y.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}zp=Symbol.toStringTag;$s[zp]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))($s.prototype);const Gx=(e=>()=>++e)(-1);let Mi=class extends V{constructor(t,n,i,r){super(),this.indices=n,this.dictionary=t,this.isOrdered=r||!1,this.id=i==null?Gx():typeof i=="number"?i:i.low}get typeId(){return y.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}};qp=Symbol.toStringTag;Mi[qp]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(Mi.prototype);function Mn(e){const t=e;switch(e.typeId){case y.Decimal:return e.bitWidth/32;case y.Timestamp:return 2;case y.Date:return 1+t.unit;case y.Interval:return 1+t.unit;case y.FixedSizeList:return t.listSize;case y.FixedSizeBinary:return t.byteWidth;default:return 1}}class ct{visitMany(t,...n){return t.map((i,r)=>this.visit(i,...n.map(s=>s[r])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return Kx(this,t,n)}getVisitFnByTypeId(t,n=!0){return xr(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function Kx(e,t,n=!0){return typeof t=="number"?xr(e,t,n):typeof t=="string"&&t in y?xr(e,y[t],n):t&&t instanceof V?xr(e,Nf(t),n):t!=null&&t.type&&t.type instanceof V?xr(e,Nf(t.type),n):xr(e,y.NONE,n)}function xr(e,t,n=!0){let i=null;switch(t){case y.Null:i=e.visitNull;break;case y.Bool:i=e.visitBool;break;case y.Int:i=e.visitInt;break;case y.Int8:i=e.visitInt8||e.visitInt;break;case y.Int16:i=e.visitInt16||e.visitInt;break;case y.Int32:i=e.visitInt32||e.visitInt;break;case y.Int64:i=e.visitInt64||e.visitInt;break;case y.Uint8:i=e.visitUint8||e.visitInt;break;case y.Uint16:i=e.visitUint16||e.visitInt;break;case y.Uint32:i=e.visitUint32||e.visitInt;break;case y.Uint64:i=e.visitUint64||e.visitInt;break;case y.Float:i=e.visitFloat;break;case y.Float16:i=e.visitFloat16||e.visitFloat;break;case y.Float32:i=e.visitFloat32||e.visitFloat;break;case y.Float64:i=e.visitFloat64||e.visitFloat;break;case y.Utf8:i=e.visitUtf8;break;case y.Binary:i=e.visitBinary;break;case y.FixedSizeBinary:i=e.visitFixedSizeBinary;break;case y.Date:i=e.visitDate;break;case y.DateDay:i=e.visitDateDay||e.visitDate;break;case y.DateMillisecond:i=e.visitDateMillisecond||e.visitDate;break;case y.Timestamp:i=e.visitTimestamp;break;case y.TimestampSecond:i=e.visitTimestampSecond||e.visitTimestamp;break;case y.TimestampMillisecond:i=e.visitTimestampMillisecond||e.visitTimestamp;break;case y.TimestampMicrosecond:i=e.visitTimestampMicrosecond||e.visitTimestamp;break;case y.TimestampNanosecond:i=e.visitTimestampNanosecond||e.visitTimestamp;break;case y.Time:i=e.visitTime;break;case y.TimeSecond:i=e.visitTimeSecond||e.visitTime;break;case y.TimeMillisecond:i=e.visitTimeMillisecond||e.visitTime;break;case y.TimeMicrosecond:i=e.visitTimeMicrosecond||e.visitTime;break;case y.TimeNanosecond:i=e.visitTimeNanosecond||e.visitTime;break;case y.Decimal:i=e.visitDecimal;break;case y.List:i=e.visitList;break;case y.Struct:i=e.visitStruct;break;case y.Union:i=e.visitUnion;break;case y.DenseUnion:i=e.visitDenseUnion||e.visitUnion;break;case y.SparseUnion:i=e.visitSparseUnion||e.visitUnion;break;case y.Dictionary:i=e.visitDictionary;break;case y.Interval:i=e.visitInterval;break;case y.IntervalDayTime:i=e.visitIntervalDayTime||e.visitInterval;break;case y.IntervalYearMonth:i=e.visitIntervalYearMonth||e.visitInterval;break;case y.FixedSizeList:i=e.visitFixedSizeList;break;case y.Map:i=e.visitMap;break}if(typeof i=="function")return i;if(!n)return()=>null;throw new Error(`Unrecognized type '${y[t]}'`)}function Nf(e){switch(e.typeId){case y.Null:return y.Null;case y.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?y.Int8:y.Uint8;case 16:return n?y.Int16:y.Uint16;case 32:return n?y.Int32:y.Uint32;case 64:return n?y.Int64:y.Uint64}return y.Int}case y.Float:switch(e.precision){case de.HALF:return y.Float16;case de.SINGLE:return y.Float32;case de.DOUBLE:return y.Float64}return y.Float;case y.Binary:return y.Binary;case y.Utf8:return y.Utf8;case y.Bool:return y.Bool;case y.Decimal:return y.Decimal;case y.Time:switch(e.unit){case ft.SECOND:return y.TimeSecond;case ft.MILLISECOND:return y.TimeMillisecond;case ft.MICROSECOND:return y.TimeMicrosecond;case ft.NANOSECOND:return y.TimeNanosecond}return y.Time;case y.Timestamp:switch(e.unit){case ft.SECOND:return y.TimestampSecond;case ft.MILLISECOND:return y.TimestampMillisecond;case ft.MICROSECOND:return y.TimestampMicrosecond;case ft.NANOSECOND:return y.TimestampNanosecond}return y.Timestamp;case y.Date:switch(e.unit){case En.DAY:return y.DateDay;case En.MILLISECOND:return y.DateMillisecond}return y.Date;case y.Interval:switch(e.unit){case Yn.DAY_TIME:return y.IntervalDayTime;case Yn.YEAR_MONTH:return y.IntervalYearMonth}return y.Interval;case y.Map:return y.Map;case y.List:return y.List;case y.Struct:return y.Struct;case y.Union:switch(e.mode){case We.Dense:return y.DenseUnion;case We.Sparse:return y.SparseUnion}return y.Union;case y.FixedSizeBinary:return y.FixedSizeBinary;case y.FixedSizeList:return y.FixedSizeList;case y.Dictionary:return y.Dictionary}throw new Error(`Unrecognized type '${y[e.typeId]}'`)}ct.prototype.visitInt8=null;ct.prototype.visitInt16=null;ct.prototype.visitInt32=null;ct.prototype.visitInt64=null;ct.prototype.visitUint8=null;ct.prototype.visitUint16=null;ct.prototype.visitUint32=null;ct.prototype.visitUint64=null;ct.prototype.visitFloat16=null;ct.prototype.visitFloat32=null;ct.prototype.visitFloat64=null;ct.prototype.visitDateDay=null;ct.prototype.visitDateMillisecond=null;ct.prototype.visitTimestampSecond=null;ct.prototype.visitTimestampMillisecond=null;ct.prototype.visitTimestampMicrosecond=null;ct.prototype.visitTimestampNanosecond=null;ct.prototype.visitTimeSecond=null;ct.prototype.visitTimeMillisecond=null;ct.prototype.visitTimeMicrosecond=null;ct.prototype.visitTimeNanosecond=null;ct.prototype.visitDenseUnion=null;ct.prototype.visitSparseUnion=null;ct.prototype.visitIntervalDayTime=null;ct.prototype.visitIntervalYearMonth=null;const Wp=new Float64Array(1),Sr=new Uint32Array(Wp.buffer);function Yp(e){const t=(e&31744)>>10,n=(e&1023)/1024,i=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return i*(n?Number.NaN:1/0);case 0:return i*(n?6103515625e-14*n:0)}return i*Math.pow(2,t-15)*(1+n)}function Gp(e){if(e!==e)return 32256;Wp[0]=e;const t=(Sr[1]&2147483648)>>16&65535;let n=Sr[1]&2146435072,i=0;return n>=1089470464?Sr[0]>0?n=31744:(n=(n&2080374784)>>16,i=(Sr[1]&1048575)>>10):n<=1056964608?(i=1048576+(Sr[1]&1048575),i=1048576+(i<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,i=(Sr[1]&1048575)+512>>10),t|n|i&65535}class Y extends ct{}function J(e){return(t,n,i)=>{if(t.setValid(n,i!=null))return e(t,n,i)}}const Qx=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},Xc=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},Jx=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},Xx=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},Kp=(e,t,n,i)=>{if(n+1<t.length){const{[n]:r,[n+1]:s}=t;e.set(i.subarray(0,s-r),r)}},Zx=({offset:e,values:t},n,i)=>{const r=e+n;i?t[r>>3]|=1<<r%8:t[r>>3]&=~(1<<r%8)},Si=({values:e},t,n)=>{e[t]=n},Zc=({values:e},t,n)=>{e[t]=n},Qp=({values:e},t,n)=>{e[t]=Gp(n)},tI=(e,t,n)=>{switch(e.type.precision){case de.HALF:return Qp(e,t,n);case de.SINGLE:case de.DOUBLE:return Zc(e,t,n)}},tl=({values:e},t,n)=>{Qx(e,t,n.valueOf())},el=({values:e},t,n)=>{Xc(e,t*2,n.valueOf())},Jp=({stride:e,values:t},n,i)=>{t.set(i.subarray(0,e),e*n)},eI=({values:e,valueOffsets:t},n,i)=>Kp(e,t,n,i),nI=({values:e,valueOffsets:t},n,i)=>{Kp(e,t,n,Mo(i))},Xp=(e,t,n)=>{e.type.unit===En.DAY?tl(e,t,n):el(e,t,n)},nl=({values:e},t,n)=>Xc(e,t*2,n/1e3),il=({values:e},t,n)=>Xc(e,t*2,n),rl=({values:e},t,n)=>Jx(e,t*2,n),sl=({values:e},t,n)=>Xx(e,t*2,n),Zp=(e,t,n)=>{switch(e.type.unit){case ft.SECOND:return nl(e,t,n);case ft.MILLISECOND:return il(e,t,n);case ft.MICROSECOND:return rl(e,t,n);case ft.NANOSECOND:return sl(e,t,n)}},al=({values:e},t,n)=>{e[t]=n},ol=({values:e},t,n)=>{e[t]=n},ul=({values:e},t,n)=>{e[t]=n},cl=({values:e},t,n)=>{e[t]=n},tm=(e,t,n)=>{switch(e.type.unit){case ft.SECOND:return al(e,t,n);case ft.MILLISECOND:return ol(e,t,n);case ft.MICROSECOND:return ul(e,t,n);case ft.NANOSECOND:return cl(e,t,n)}},em=({values:e,stride:t},n,i)=>{e.set(i.subarray(0,t),t*n)},iI=(e,t,n)=>{const i=e.children[0],r=e.valueOffsets,s=on.getVisitFn(i);if(Array.isArray(n))for(let a=-1,o=r[t],u=r[t+1];o<u;)s(i,o++,n[++a]);else for(let a=-1,o=r[t],u=r[t+1];o<u;)s(i,o++,n.get(++a))},rI=(e,t,n)=>{const i=e.children[0],{valueOffsets:r}=e,s=on.getVisitFn(i);let{[t]:a,[t+1]:o}=r;const u=n instanceof Map?n.entries():Object.entries(n);for(const c of u)if(s(i,a,c),++a>=o)break},sI=(e,t)=>(n,i,r,s)=>i&&n(i,e,t[s]),aI=(e,t)=>(n,i,r,s)=>i&&n(i,e,t.get(s)),oI=(e,t)=>(n,i,r,s)=>i&&n(i,e,t.get(r.name)),uI=(e,t)=>(n,i,r,s)=>i&&n(i,e,t[r.name]),cI=(e,t,n)=>{const i=e.type.children.map(s=>on.getVisitFn(s.type)),r=n instanceof Map?oI(t,n):n instanceof mt?aI(t,n):Array.isArray(n)?sI(t,n):uI(t,n);e.type.children.forEach((s,a)=>r(i[a],e.children[a],s,a))},lI=(e,t,n)=>{e.type.mode===We.Dense?nm(e,t,n):im(e,t,n)},nm=(e,t,n)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[i];on.visit(r,e.valueOffsets[t],n)},im=(e,t,n)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[i];on.visit(r,t,n)},hI=(e,t,n)=>{var i;(i=e.dictionary)===null||i===void 0||i.set(e.values[t],n)},rm=(e,t,n)=>{e.type.unit===Yn.DAY_TIME?ll(e,t,n):hl(e,t,n)},ll=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},hl=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},fI=(e,t,n)=>{const{stride:i}=e,r=e.children[0],s=on.getVisitFn(r);if(Array.isArray(n))for(let a=-1,o=t*i;++a<i;)s(r,o+a,n[a]);else for(let a=-1,o=t*i;++a<i;)s(r,o+a,n.get(a))};Y.prototype.visitBool=J(Zx);Y.prototype.visitInt=J(Si);Y.prototype.visitInt8=J(Si);Y.prototype.visitInt16=J(Si);Y.prototype.visitInt32=J(Si);Y.prototype.visitInt64=J(Si);Y.prototype.visitUint8=J(Si);Y.prototype.visitUint16=J(Si);Y.prototype.visitUint32=J(Si);Y.prototype.visitUint64=J(Si);Y.prototype.visitFloat=J(tI);Y.prototype.visitFloat16=J(Qp);Y.prototype.visitFloat32=J(Zc);Y.prototype.visitFloat64=J(Zc);Y.prototype.visitUtf8=J(nI);Y.prototype.visitBinary=J(eI);Y.prototype.visitFixedSizeBinary=J(Jp);Y.prototype.visitDate=J(Xp);Y.prototype.visitDateDay=J(tl);Y.prototype.visitDateMillisecond=J(el);Y.prototype.visitTimestamp=J(Zp);Y.prototype.visitTimestampSecond=J(nl);Y.prototype.visitTimestampMillisecond=J(il);Y.prototype.visitTimestampMicrosecond=J(rl);Y.prototype.visitTimestampNanosecond=J(sl);Y.prototype.visitTime=J(tm);Y.prototype.visitTimeSecond=J(al);Y.prototype.visitTimeMillisecond=J(ol);Y.prototype.visitTimeMicrosecond=J(ul);Y.prototype.visitTimeNanosecond=J(cl);Y.prototype.visitDecimal=J(em);Y.prototype.visitList=J(iI);Y.prototype.visitStruct=J(cI);Y.prototype.visitUnion=J(lI);Y.prototype.visitDenseUnion=J(nm);Y.prototype.visitSparseUnion=J(im);Y.prototype.visitDictionary=J(hI);Y.prototype.visitInterval=J(rm);Y.prototype.visitIntervalDayTime=J(ll);Y.prototype.visitIntervalYearMonth=J(hl);Y.prototype.visitFixedSizeList=J(fI);Y.prototype.visitMap=J(rI);const on=new Y,mn=Symbol.for("parent"),Lr=Symbol.for("rowIndex");class fl{constructor(t,n){return this[mn]=t,this[Lr]=n,new Proxy(this,new pI)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Lr],n=this[mn],i=n.type.children,r={};for(let s=-1,a=i.length;++s<a;)r[i[s].name]=Be.visit(n.children[s],t);return r}toString(){return`{${[...this].map(([t,n])=>`${Fi(t)}: ${Fi(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new dI(this[mn],this[Lr])}}class dI{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Be.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(fl.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[mn]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Lr]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class pI{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[mn].type.children.map(n=>n.name)}has(t,n){return t[mn].type.children.findIndex(i=>i.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[mn].type.children.findIndex(i=>i.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const i=t[mn].type.children.findIndex(r=>r.name===n);if(i!==-1){const r=Be.visit(t[mn].children[i],t[Lr]);return Reflect.set(t,n,r),r}}set(t,n,i){const r=t[mn].type.children.findIndex(s=>s.name===n);return r!==-1?(on.visit(t[mn].children[r],t[Lr],i),Reflect.set(t,n,i)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,i):!1}}class $ extends ct{}function G(e){return(t,n)=>t.getValid(n)?e(t,n):null}const mI=(e,t)=>864e5*e[t],dl=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),yI=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,gI=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,sm=e=>new Date(e),_I=(e,t)=>sm(mI(e,t)),vI=(e,t)=>sm(dl(e,t)),bI=(e,t)=>null,am=(e,t,n)=>{if(n+1>=t.length)return null;const i=t[n],r=t[n+1];return e.subarray(i,r)},wI=({offset:e,values:t},n)=>{const i=e+n;return(t[i>>3]&1<<i%8)!==0},om=({values:e},t)=>_I(e,t),um=({values:e},t)=>vI(e,t*2),qi=({stride:e,values:t},n)=>t[e*n],SI=({stride:e,values:t},n)=>Yp(t[e*n]),cm=({values:e},t)=>e[t],xI=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),II=({values:e,valueOffsets:t},n)=>am(e,t,n),EI=({values:e,valueOffsets:t},n)=>{const i=am(e,t,n);return i!==null?nc(i):null},AI=({values:e},t)=>e[t],kI=({type:e,values:t},n)=>e.precision!==de.HALF?t[n]:Yp(t[n]),TI=(e,t)=>e.type.unit===En.DAY?om(e,t):um(e,t),lm=({values:e},t)=>1e3*dl(e,t*2),hm=({values:e},t)=>dl(e,t*2),fm=({values:e},t)=>yI(e,t*2),dm=({values:e},t)=>gI(e,t*2),NI=(e,t)=>{switch(e.type.unit){case ft.SECOND:return lm(e,t);case ft.MILLISECOND:return hm(e,t);case ft.MICROSECOND:return fm(e,t);case ft.NANOSECOND:return dm(e,t)}},pm=({values:e},t)=>e[t],mm=({values:e},t)=>e[t],ym=({values:e},t)=>e[t],gm=({values:e},t)=>e[t],OI=(e,t)=>{switch(e.type.unit){case ft.SECOND:return pm(e,t);case ft.MILLISECOND:return mm(e,t);case ft.MICROSECOND:return ym(e,t);case ft.NANOSECOND:return gm(e,t)}},CI=({values:e,stride:t},n)=>$c.decimal(e.subarray(t*n,t*(n+1))),RI=(e,t)=>{const{valueOffsets:n,stride:i,children:r}=e,{[t*i]:s,[t*i+1]:a}=n,u=r[0].slice(s,a-s);return new mt([u])},FI=(e,t)=>{const{valueOffsets:n,children:i}=e,{[t]:r,[t+1]:s}=n,a=i[0];return new Uo(a.slice(r,s-r))},BI=(e,t)=>new fl(e,t),LI=(e,t)=>e.type.mode===We.Dense?_m(e,t):vm(e,t),_m=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[n];return Be.visit(i,e.valueOffsets[t])},vm=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[n];return Be.visit(i,t)},DI=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},MI=(e,t)=>e.type.unit===Yn.DAY_TIME?bm(e,t):wm(e,t),bm=({values:e},t)=>e.subarray(2*t,2*(t+1)),wm=({values:e},t)=>{const n=e[t],i=new Int32Array(2);return i[0]=Math.trunc(n/12),i[1]=Math.trunc(n%12),i},PI=(e,t)=>{const{stride:n,children:i}=e,s=i[0].slice(t*n,n);return new mt([s])};$.prototype.visitNull=G(bI);$.prototype.visitBool=G(wI);$.prototype.visitInt=G(AI);$.prototype.visitInt8=G(qi);$.prototype.visitInt16=G(qi);$.prototype.visitInt32=G(qi);$.prototype.visitInt64=G(cm);$.prototype.visitUint8=G(qi);$.prototype.visitUint16=G(qi);$.prototype.visitUint32=G(qi);$.prototype.visitUint64=G(cm);$.prototype.visitFloat=G(kI);$.prototype.visitFloat16=G(SI);$.prototype.visitFloat32=G(qi);$.prototype.visitFloat64=G(qi);$.prototype.visitUtf8=G(EI);$.prototype.visitBinary=G(II);$.prototype.visitFixedSizeBinary=G(xI);$.prototype.visitDate=G(TI);$.prototype.visitDateDay=G(om);$.prototype.visitDateMillisecond=G(um);$.prototype.visitTimestamp=G(NI);$.prototype.visitTimestampSecond=G(lm);$.prototype.visitTimestampMillisecond=G(hm);$.prototype.visitTimestampMicrosecond=G(fm);$.prototype.visitTimestampNanosecond=G(dm);$.prototype.visitTime=G(OI);$.prototype.visitTimeSecond=G(pm);$.prototype.visitTimeMillisecond=G(mm);$.prototype.visitTimeMicrosecond=G(ym);$.prototype.visitTimeNanosecond=G(gm);$.prototype.visitDecimal=G(CI);$.prototype.visitList=G(RI);$.prototype.visitStruct=G(BI);$.prototype.visitUnion=G(LI);$.prototype.visitDenseUnion=G(_m);$.prototype.visitSparseUnion=G(vm);$.prototype.visitDictionary=G(DI);$.prototype.visitInterval=G(MI);$.prototype.visitIntervalDayTime=G(bm);$.prototype.visitIntervalYearMonth=G(wm);$.prototype.visitFixedSizeList=G(PI);$.prototype.visitMap=G(FI);const Be=new $,gn=Symbol.for("keys"),Dr=Symbol.for("vals");class Uo{constructor(t){return this[gn]=new mt([t.children[0]]).memoize(),this[Dr]=t.children[1],new Proxy(this,new VI)}[Symbol.iterator](){return new UI(this[gn],this[Dr])}get size(){return this[gn].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[gn],n=this[Dr],i={};for(let r=-1,s=t.length;++r<s;)i[t.get(r)]=Be.visit(n,r);return i}toString(){return`{${[...this].map(([t,n])=>`${Fi(t)}: ${Fi(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class UI{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Be.visit(this.vals,t)]})}}class VI{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[gn].toArray().map(String)}has(t,n){return t[gn].includes(n)}getOwnPropertyDescriptor(t,n){if(t[gn].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const i=t[gn].indexOf(n);if(i!==-1){const r=Be.visit(Reflect.get(t,Dr),i);return Reflect.set(t,n,r),r}}set(t,n,i){const r=t[gn].indexOf(n);return r!==-1?(on.visit(Reflect.get(t,Dr),r,i),Reflect.set(t,n,i)):Reflect.has(t,n)?Reflect.set(t,n,i):!1}}Object.defineProperties(Uo.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[gn]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Dr]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Of;function Sm(e,t,n,i){const{length:r=0}=e;let s=typeof t!="number"?0:t,a=typeof n!="number"?r:n;return s<0&&(s=(s%r+r)%r),a<0&&(a=(a%r+r)%r),a<s&&(Of=s,s=a,a=Of),a>r&&(a=r),i?i(e,s,a):[s,a]}const Cf=e=>e!==e;function is(e){if(typeof e!=="object"||e===null)return Cf(e)?Cf:n=>n===e;if(e instanceof Date){const n=e.valueOf();return i=>i instanceof Date?i.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?Rx(e,n):!1:e instanceof Map?$I(e):Array.isArray(e)?jI(e):e instanceof mt?zI(e):qI(e,!0)}function jI(e){const t=[];for(let n=-1,i=e.length;++n<i;)t[n]=is(e[n]);return Vo(t)}function $I(e){let t=-1;const n=[];for(const i of e.values())n[++t]=is(i);return Vo(n)}function zI(e){const t=[];for(let n=-1,i=e.length;++n<i;)t[n]=is(e.get(n));return Vo(t)}function qI(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const i=[];for(let r=-1,s=n.length;++r<s;)i[r]=is(e[n[r]]);return Vo(i,n)}function Vo(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return HI(e,n);case Map:return Rf(e,n,n.keys());case Uo:case fl:case Object:case void 0:return Rf(e,n,t||Object.keys(n))}return n instanceof mt?WI(e,n):!1}}function HI(e,t){const n=e.length;if(t.length!==n)return!1;for(let i=-1;++i<n;)if(!e[i](t[i]))return!1;return!0}function WI(e,t){const n=e.length;if(t.length!==n)return!1;for(let i=-1;++i<n;)if(!e[i](t.get(i)))return!1;return!0}function Rf(e,t,n){const i=n[Symbol.iterator](),r=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let a=0;const o=e.length;let u=s.next(),c=i.next(),l=r.next();for(;a<o&&!c.done&&!l.done&&!u.done&&!(c.value!==l.value||!e[a](u.value));++a,c=i.next(),l=r.next(),u=s.next());return a===o&&c.done&&l.done&&u.done?!0:(i.return&&i.return(),r.return&&r.return(),s.return&&s.return(),!1)}function xm(e,t,n,i){return(n&1<<i)!==0}function YI(e,t,n,i){return(n&1<<i)>>i}function pl(e,t,n){const i=n.byteLength+7&-8;if(e>0||n.byteLength<i){const r=new Uint8Array(i);return r.set(e%8===0?n.subarray(e>>3):ro(new ml(n,e,t,null,xm)).subarray(0,i)),r}return n}function ro(e){const t=[];let n=0,i=0,r=0;for(const a of e)a&&(r|=1<<i),++i===8&&(t[n++]=r,r=i=0);(n===0||i>0)&&(t[n++]=r);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class ml{constructor(t,n,i,r,s){this.bytes=t,this.length=i,this.context=r,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function ac(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const a of new ml(e,t,n-t,e,YI))s+=a;return s}const i=n>>3<<3,r=t+(t%8===0?0:8-t%8);return ac(e,t,r)+ac(e,i,n)+GI(e,r>>3,i-r>>3)}function GI(e,t,n){let i=0,r=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),a=n===void 0?e.byteLength:r+n;for(;a-r>=4;)i+=ku(s.getUint32(r)),r+=4;for(;a-r>=2;)i+=ku(s.getUint16(r)),r+=2;for(;a-r>=1;)i+=ku(s.getUint8(r)),r+=1;return i}function ku(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const KI=-1;class Nt{constructor(t,n,i,r,s,a=[],o){this.type=t,this.children=a,this.dictionary=o,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(i||0,0)),this._nullCount=Math.floor(Math.max(r||0,-1));let u;s instanceof Nt?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Mn(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:n,values:i,nullBitmap:r,typeIds:s}=this;return n&&(t+=n.byteLength),i&&(t+=i.byteLength),r&&(t+=r.byteLength),s&&(t+=s.byteLength),this.children.reduce((a,o)=>a+o.byteLength,t)}get nullCount(){let t=this._nullCount,n;return t<=KI&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-ac(n,this.offset,this.offset+this.length)),t}getValid(t){if(this.nullable&&this.nullCount>0){const n=this.offset+t;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(t,n){if(!this.nullable)return n;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:u}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:u,_nullCount:0})}const{nullBitmap:i,offset:r}=this,s=r+t>>3,a=(r+t)%8,o=i[s]>>a&1;return n?o===0&&(i[s]|=1<<a,this._nullCount=this.nullCount+1):o===1&&(i[s]&=~(1<<a),this._nullCount=this.nullCount-1),n}clone(t=this.type,n=this.offset,i=this.length,r=this._nullCount,s=this,a=this.children){return new Nt(t,n,i,r,s,a,this.dictionary)}slice(t,n){const{stride:i,typeId:r,children:s}=this,a=+(this._nullCount===0)-1,o=r===16?i:1,u=this._sliceBuffers(t,n,i,r);return this.clone(this.type,this.offset+t,n,a,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,o*t,o*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===y.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:i}=this,r=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);r[n>>3]=(1<<n-(n&-8))-1,i>0&&r.set(pl(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[ri.VALIDITY]=r,this.clone(this.type,0,t,i+(t-n),s)}_sliceBuffers(t,n,i,r){let s;const{buffers:a}=this;return(s=a[ri.TYPE])&&(a[ri.TYPE]=s.subarray(t,t+n)),(s=a[ri.OFFSET])&&(a[ri.OFFSET]=s.subarray(t,t+n+1))||(s=a[ri.DATA])&&(a[ri.DATA]=r===6?s:s.subarray(i*t,i*(t+n))),a}_sliceChildren(t,n,i){return t.map(r=>r.slice(n,i))}}Nt.prototype.children=Object.freeze([]);class Es extends ct{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:i=0,["length"]:r=0}=t;return new Nt(n,i,r,0)}visitBool(t){const{["type"]:n,["offset"]:i=0}=t,r=wt(t.nullBitmap),s=Rt(n.ArrayType,t.data),{["length"]:a=s.length>>3,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Nt(n,i,a,o,[void 0,s,r])}visitInt(t){const{["type"]:n,["offset"]:i=0}=t,r=wt(t.nullBitmap),s=Rt(n.ArrayType,t.data),{["length"]:a=s.length,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Nt(n,i,a,o,[void 0,s,r])}visitFloat(t){const{["type"]:n,["offset"]:i=0}=t,r=wt(t.nullBitmap),s=Rt(n.ArrayType,t.data),{["length"]:a=s.length,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Nt(n,i,a,o,[void 0,s,r])}visitUtf8(t){const{["type"]:n,["offset"]:i=0}=t,r=wt(t.data),s=wt(t.nullBitmap),a=ys(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Nt(n,i,o,u,[a,r,s])}visitBinary(t){const{["type"]:n,["offset"]:i=0}=t,r=wt(t.data),s=wt(t.nullBitmap),a=ys(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Nt(n,i,o,u,[a,r,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:i=0}=t,r=wt(t.nullBitmap),s=Rt(n.ArrayType,t.data),{["length"]:a=s.length/Mn(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Nt(n,i,a,o,[void 0,s,r])}visitDate(t){const{["type"]:n,["offset"]:i=0}=t,r=wt(t.nullBitmap),s=Rt(n.ArrayType,t.data),{["length"]:a=s.length/Mn(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Nt(n,i,a,o,[void 0,s,r])}visitTimestamp(t){const{["type"]:n,["offset"]:i=0}=t,r=wt(t.nullBitmap),s=Rt(n.ArrayType,t.data),{["length"]:a=s.length/Mn(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Nt(n,i,a,o,[void 0,s,r])}visitTime(t){const{["type"]:n,["offset"]:i=0}=t,r=wt(t.nullBitmap),s=Rt(n.ArrayType,t.data),{["length"]:a=s.length/Mn(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Nt(n,i,a,o,[void 0,s,r])}visitDecimal(t){const{["type"]:n,["offset"]:i=0}=t,r=wt(t.nullBitmap),s=Rt(n.ArrayType,t.data),{["length"]:a=s.length/Mn(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Nt(n,i,a,o,[void 0,s,r])}visitList(t){const{["type"]:n,["offset"]:i=0,["child"]:r}=t,s=wt(t.nullBitmap),a=ys(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Nt(n,i,o,u,[a,void 0,s],[r])}visitStruct(t){const{["type"]:n,["offset"]:i=0,["children"]:r=[]}=t,s=wt(t.nullBitmap),{length:a=r.reduce((u,{length:c})=>Math.max(u,c),0),nullCount:o=t.nullBitmap?-1:0}=t;return new Nt(n,i,a,o,[void 0,void 0,s],r)}visitUnion(t){const{["type"]:n,["offset"]:i=0,["children"]:r=[]}=t,s=wt(t.nullBitmap),a=Rt(n.ArrayType,t.typeIds),{["length"]:o=a.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;if(V.isSparseUnion(n))return new Nt(n,i,o,u,[void 0,void 0,s,a],r);const c=ys(t.valueOffsets);return new Nt(n,i,o,u,[c,void 0,s,a],r)}visitDictionary(t){const{["type"]:n,["offset"]:i=0}=t,r=wt(t.nullBitmap),s=Rt(n.indices.ArrayType,t.data),{["dictionary"]:a=new mt([new Es().visit({type:n.dictionary})])}=t,{["length"]:o=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Nt(n,i,o,u,[void 0,s,r],[],a)}visitInterval(t){const{["type"]:n,["offset"]:i=0}=t,r=wt(t.nullBitmap),s=Rt(n.ArrayType,t.data),{["length"]:a=s.length/Mn(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Nt(n,i,a,o,[void 0,s,r])}visitFixedSizeList(t){const{["type"]:n,["offset"]:i=0,["child"]:r=new Es().visit({type:n.valueType})}=t,s=wt(t.nullBitmap),{["length"]:a=r.length/Mn(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Nt(n,i,a,o,[void 0,void 0,s],[r])}visitMap(t){const{["type"]:n,["offset"]:i=0,["child"]:r=new Es().visit({type:n.childType})}=t,s=wt(t.nullBitmap),a=ys(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Nt(n,i,o,u,[a,void 0,s],[r])}}function ut(e){return new Es().visit(e)}class Ff{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function Im(e){return e.reduce((t,n)=>t+n.nullCount,0)}function Em(e){return e.reduce((t,n,i)=>(t[i+1]=t[i]+n.length,t),new Uint32Array(e.length+1))}function Am(e,t,n,i){const r=[];for(let s=-1,a=e.length;++s<a;){const o=e[s],u=t[s],{length:c}=o;if(u>=i)break;if(n>=u+c)continue;if(u>=n&&u+c<=i){r.push(o);continue}const l=Math.max(0,n-u),h=Math.min(i-u,c);r.push(o.slice(l,h-l))}return r.length===0&&r.push(e[0].slice(0,0)),r}function yl(e,t,n,i){let r=0,s=0,a=t.length-1;do{if(r>=a-1)return n<t[a]?i(e,r,n-t[r]):null;s=r+Math.trunc((a-r)*.5),n<t[s]?a=s:r=s}while(r<a)}function gl(e,t){return e.getValid(t)}function Mr(e){function t(n,i,r){return e(n[i],r)}return function(n){const i=this.data;return yl(i,this._offsets,n,t)}}function km(e){let t;function n(i,r,s){return e(i[r],s,t)}return function(i,r){const s=this.data;t=r;const a=yl(s,this._offsets,i,n);return t=void 0,a}}function Tm(e){let t;function n(i,r,s){let a=s,o=0,u=0;for(let c=r-1,l=i.length;++c<l;){const h=i[c];if(~(o=e(h,t,a)))return u+o;a=0,u+=h.length}return-1}return function(i,r){t=i;const s=this.data,a=typeof r!="number"?n(s,0,0):yl(s,this._offsets,r,n);return t=void 0,a}}class z extends ct{}function QI(e,t){return t===null&&e.length>0?0:-1}function JI(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let i=0;for(const r of new ml(n,e.offset+(t||0),e.length,n,xm)){if(!r)return i;++i}return-1}function nt(e,t,n){if(t===void 0)return-1;if(t===null)return JI(e,n);const i=Be.getVisitFn(e),r=is(t);for(let s=(n||0)-1,a=e.length;++s<a;)if(r(i(e,s)))return s;return-1}function Nm(e,t,n){const i=Be.getVisitFn(e),r=is(t);for(let s=(n||0)-1,a=e.length;++s<a;)if(r(i(e,s)))return s;return-1}z.prototype.visitNull=QI;z.prototype.visitBool=nt;z.prototype.visitInt=nt;z.prototype.visitInt8=nt;z.prototype.visitInt16=nt;z.prototype.visitInt32=nt;z.prototype.visitInt64=nt;z.prototype.visitUint8=nt;z.prototype.visitUint16=nt;z.prototype.visitUint32=nt;z.prototype.visitUint64=nt;z.prototype.visitFloat=nt;z.prototype.visitFloat16=nt;z.prototype.visitFloat32=nt;z.prototype.visitFloat64=nt;z.prototype.visitUtf8=nt;z.prototype.visitBinary=nt;z.prototype.visitFixedSizeBinary=nt;z.prototype.visitDate=nt;z.prototype.visitDateDay=nt;z.prototype.visitDateMillisecond=nt;z.prototype.visitTimestamp=nt;z.prototype.visitTimestampSecond=nt;z.prototype.visitTimestampMillisecond=nt;z.prototype.visitTimestampMicrosecond=nt;z.prototype.visitTimestampNanosecond=nt;z.prototype.visitTime=nt;z.prototype.visitTimeSecond=nt;z.prototype.visitTimeMillisecond=nt;z.prototype.visitTimeMicrosecond=nt;z.prototype.visitTimeNanosecond=nt;z.prototype.visitDecimal=nt;z.prototype.visitList=nt;z.prototype.visitStruct=nt;z.prototype.visitUnion=nt;z.prototype.visitDenseUnion=Nm;z.prototype.visitSparseUnion=Nm;z.prototype.visitDictionary=nt;z.prototype.visitInterval=nt;z.prototype.visitIntervalDayTime=nt;z.prototype.visitIntervalYearMonth=nt;z.prototype.visitFixedSizeList=nt;z.prototype.visitMap=nt;const so=new z;class q extends ct{}function K(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===y.Timestamp||t instanceof be&&t.bitWidth!==64||t instanceof pi&&t.bitWidth!==64||t instanceof Di&&t.precision!==de.HALF))return new Ff(e.data.length,i=>{const r=e.data[i];return r.values.subarray(0,r.length)[Symbol.iterator]()});let n=0;return new Ff(e.data.length,i=>{const s=e.data[i].length,a=e.slice(n,n+s);return n+=s,new XI(a)})}class XI{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}q.prototype.visitNull=K;q.prototype.visitBool=K;q.prototype.visitInt=K;q.prototype.visitInt8=K;q.prototype.visitInt16=K;q.prototype.visitInt32=K;q.prototype.visitInt64=K;q.prototype.visitUint8=K;q.prototype.visitUint16=K;q.prototype.visitUint32=K;q.prototype.visitUint64=K;q.prototype.visitFloat=K;q.prototype.visitFloat16=K;q.prototype.visitFloat32=K;q.prototype.visitFloat64=K;q.prototype.visitUtf8=K;q.prototype.visitBinary=K;q.prototype.visitFixedSizeBinary=K;q.prototype.visitDate=K;q.prototype.visitDateDay=K;q.prototype.visitDateMillisecond=K;q.prototype.visitTimestamp=K;q.prototype.visitTimestampSecond=K;q.prototype.visitTimestampMillisecond=K;q.prototype.visitTimestampMicrosecond=K;q.prototype.visitTimestampNanosecond=K;q.prototype.visitTime=K;q.prototype.visitTimeSecond=K;q.prototype.visitTimeMillisecond=K;q.prototype.visitTimeMicrosecond=K;q.prototype.visitTimeNanosecond=K;q.prototype.visitDecimal=K;q.prototype.visitList=K;q.prototype.visitStruct=K;q.prototype.visitUnion=K;q.prototype.visitDenseUnion=K;q.prototype.visitSparseUnion=K;q.prototype.visitDictionary=K;q.prototype.visitInterval=K;q.prototype.visitIntervalDayTime=K;q.prototype.visitIntervalYearMonth=K;q.prototype.visitFixedSizeList=K;q.prototype.visitMap=K;const _l=new q,ZI=(e,t)=>e+t;class Hi extends ct{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===ft.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitStruct(t,n){return t.children.reduce((i,r)=>i+Gn.visit(r,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((i,r)=>i+Gn.visit(r,n),0)}visitDictionary(t,n){var i;return t.type.indices.bitWidth/8+(((i=t.dictionary)===null||i===void 0?void 0:i.getByteLength(t.values[n]))||0)}}const tE=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),eE=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),nE=({valueOffsets:e,stride:t,children:n},i)=>{const r=n[0],{[i*t]:s}=e,{[i*t+1]:a}=e,o=Gn.getVisitFn(r.type),u=r.slice(s,a-s);let c=8;for(let l=-1,h=a-s;++l<h;)c+=o(u,l);return c},iE=({stride:e,children:t},n)=>{const i=t[0],r=i.slice(n*e,e),s=Gn.getVisitFn(i.type);let a=0;for(let o=-1,u=r.length;++o<u;)a+=s(r,o);return a},rE=(e,t)=>e.type.mode===We.Dense?Om(e,t):Cm(e,t),Om=({type:e,children:t,typeIds:n,valueOffsets:i},r)=>{const s=e.typeIdToChildIndex[n[r]];return 8+Gn.visit(t[s],i[r])},Cm=({children:e},t)=>4+Gn.visitMany(e,e.map(()=>t)).reduce(ZI,0);Hi.prototype.visitUtf8=tE;Hi.prototype.visitBinary=eE;Hi.prototype.visitList=nE;Hi.prototype.visitFixedSizeList=iE;Hi.prototype.visitUnion=rE;Hi.prototype.visitDenseUnion=Om;Hi.prototype.visitSparseUnion=Cm;const Gn=new Hi;var Rm;const Fm={},Bm={};class mt{constructor(t){var n,i,r;const s=t[0]instanceof mt?t.flatMap(o=>o.data):t;if(s.length===0||s.some(o=>!(o instanceof Nt)))throw new TypeError("Vector constructor expects an Array of Data instances.");const a=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:o,set:u,indexOf:c,byteLength:l}=Fm[a.typeId],h=s[0];this.isValid=p=>gl(h,p),this.get=p=>o(h,p),this.set=(p,m)=>u(h,p,m),this.indexOf=p=>c(h,p),this.getByteLength=p=>l(h,p),this._offsets=[0,h.length];break}default:Object.setPrototypeOf(this,Bm[a.typeId]),this._offsets=Em(s);break}this.data=s,this.type=a,this.stride=Mn(a),this.numChildren=(r=(i=a.children)===null||i===void 0?void 0:i.length)!==null&&r!==void 0?r:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((t,n)=>t+n.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=Im(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${y[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>0}getByteLength(t){return 0}[Symbol.iterator](){return _l.visit(this)}concat(...t){return new mt(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new mt(Sm(this,t,n,({data:i,_offsets:r},s,a)=>Am(i,r,s,a)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:i,stride:r,ArrayType:s}=this;switch(t.typeId){case y.Int:case y.Float:case y.Decimal:case y.Time:case y.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,i*r);default:return n.reduce((a,{values:o,length:u})=>(a.array.set(o.subarray(0,u*r),a.offset),a.offset+=u*r,a),{array:new s(i*r),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(i=>i.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new mt(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return V.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(V.isDictionary(this.type)){const t=new ao(this.data[0].dictionary),n=this.data.map(i=>{const r=i.clone();return r.dictionary=t,r});return new mt(n)}return new ao(this)}unmemoize(){if(V.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(i=>{const r=i.clone();return r.dictionary=t,r});return new mt(n)}return this}}Rm=Symbol.toStringTag;mt[Rm]=(e=>{e.type=V.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._nullCount=-1,e._byteLength=-1,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(y).map(n=>y[n]).filter(n=>typeof n=="number"&&n!==y.NONE);for(const n of t){const i=Be.getVisitFnByTypeId(n),r=on.getVisitFnByTypeId(n),s=so.getVisitFnByTypeId(n),a=Gn.getVisitFnByTypeId(n);Fm[n]={get:i,set:r,indexOf:s,byteLength:a},Bm[n]=Object.create(e,{isValid:{value:Mr(gl)},get:{value:Mr(Be.getVisitFnByTypeId(n))},set:{value:km(on.getVisitFnByTypeId(n))},indexOf:{value:Tm(so.getVisitFnByTypeId(n))},getByteLength:{value:Mr(Gn.getVisitFnByTypeId(n))}})}return"Vector"})(mt.prototype);class ao extends mt{constructor(t){super(t.data);const n=this.get,i=this.set,r=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(a){const o=s[a];if(o!==void 0)return o;const u=n.call(this,a);return s[a]=u,u}}),Object.defineProperty(this,"set",{value(a,o){i.call(this,a,o),s[a]=o}}),Object.defineProperty(this,"slice",{value:(a,o)=>new ao(r.call(this,a,o))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new mt(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function sE(e){if(!e||e.length<=0)return function(r){return!0};let t="";const n=e.filter(i=>i===i);return n.length>0&&(t=`
    switch (x) {${n.map(i=>`
        case ${aE(i)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function aE(e){return typeof e!="bigint"?Fi(e):_p?`${Fi(e)}n`:`"${Fi(e)}"`}const Tu=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,oE=(e,t=0)=>e.length>=t?e.subarray(0,t):to(new e.constructor(t),e,0);class jo{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,i=this.length*n,r=this.buffer.length;i>=r&&this._resize(r===0?Tu(i*1,this.BYTES_PER_ELEMENT):Tu(i*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=Tu(t*this.stride,this.BYTES_PER_ELEMENT);const n=oE(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=to(new this.ArrayType(t),this.buffer)}}jo.prototype.offset=0;class ia extends jo{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class Lm extends ia{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:i}=this.reserve(t-this.length+1),r=t>>3,s=t%8,a=i[r]>>s&1;return n?a===0&&(i[r]|=1<<s,++this.numValid):a===1&&(i[r]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class Dm extends ia{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const i=this.length-1,r=this.reserve(t-i+1).buffer;return i<t++&&r.fill(r[i],i,t),r[t]=r[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let Me=class{constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=Mn(t),this._nulls=new Lm,n&&n.length>0&&(this._isValid=sE(n))}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}toVector(){return new mt([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:i,_nulls:r,_typeIds:s,children:a}=this;return n&&(t+=n.byteLength),i&&(t+=i.byteLength),r&&(t+=r.byteLength),s&&(t+=s.byteLength),a.reduce((o,u)=>o+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,i)=>n+i.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,i,r;const{type:s,length:a,nullCount:o,_typeIds:u,_offsets:c,_values:l,_nulls:h}=this;(n=u==null?void 0:u.flush(a))?r=c==null?void 0:c.flush(a):(r=c==null?void 0:c.flush(a))?t=l==null?void 0:l.flush(c.last()):t=l==null?void 0:l.flush(a),o>0&&(i=h==null?void 0:h.flush(a));const p=this.children.map(m=>m.flush());return this.clear(),ut({type:s,length:a,nullCount:o,children:p,child:p[0],data:t,typeIds:n,nullBitmap:i,valueOffsets:r})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,i,r;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(i=this._offsets)===null||i===void 0||i.clear(),(r=this._typeIds)===null||r===void 0||r.clear();for(const s of this.children)s.clear();return this}};Me.prototype.length=1;Me.prototype.stride=1;Me.prototype.children=null;Me.prototype.finished=!1;Me.prototype.nullValues=null;Me.prototype._isValid=()=>!0;class Wi extends Me{constructor(t){super(t),this._values=new ia(new this.ArrayType(0),this.stride)}setValue(t,n){const i=this._values;return i.reserve(t-i.length+1),super.setValue(t,n)}}class $o extends Me{constructor(t){super(t),this._pendingLength=0,this._offsets=new Dm}setValue(t,n){const i=this._pending||(this._pending=new Map),r=i.get(t);r&&(this._pendingLength-=r.length),this._pendingLength+=n instanceof Uo?n[gn].length:n.length,i.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class oc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,i,r){return t.prep(8,24),t.writeInt64(r),t.pad(4),t.writeInt32(i),t.writeInt64(n),t.offset()}}const Nu=2,Pn=4,oi=4,Ft=4,Ci=new Int32Array(2),Bf=new Float32Array(Ci.buffer),Lf=new Float64Array(Ci.buffer),Ia=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;let li=class uc{constructor(t,n){this.low=t|0,this.high=n|0}static create(t,n){return t==0&&n==0?uc.ZERO:new uc(t,n)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(t){return this.low==t.low&&this.high==t.high}};li.ZERO=new li(0,0);var cc;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(cc||(cc={}));let Wr=class Mm{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new Mm(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new li(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new li(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return Ci[0]=this.readInt32(t),Bf[0]}readFloat64(t){return Ci[Ia?0:1]=this.readInt32(t),Ci[Ia?1:0]=this.readInt32(t+4),Lf[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,n.low),this.writeInt32(t+4,n.high)}writeUint64(t,n){this.writeUint32(t,n.low),this.writeUint32(t+4,n.high)}writeFloat32(t,n){Bf[0]=n,this.writeInt32(t,Ci[0])}writeFloat64(t,n){Lf[0]=n,this.writeInt32(t,Ci[Ia?0:1]),this.writeInt32(t+4,Ci[Ia?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Pn+oi)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<oi;n++)t+=String.fromCharCode(this.readInt8(this.position_+Pn+n));return t}__offset(t,n){const i=t-this.readInt32(t);return n<this.readInt16(i)?this.readInt16(i+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const i=this.readInt32(t);let r="",s=0;if(t+=Pn,n===cc.UTF8_BYTES)return this.bytes_.subarray(t,t+i);for(;s<i;){let a;const o=this.readUint8(t+s++);if(o<192)a=o;else{const u=this.readUint8(t+s++);if(o<224)a=(o&31)<<6|u&63;else{const c=this.readUint8(t+s++);if(o<240)a=(o&15)<<12|(u&63)<<6|c&63;else{const l=this.readUint8(t+s++);a=(o&7)<<18|(u&63)<<12|(c&63)<<6|l&63}}}a<65536?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode((a>>10)+55296,(a&1024-1)+56320))}return r}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Pn}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=oi)throw new Error("FlatBuffers: file identifier must be length "+oi);for(let n=0;n<oi;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Pn+n))return!1;return!0}createLong(t,n){return li.create(t,n)}createScalarList(t,n){const i=[];for(let r=0;r<n;++r)t(r)!==null&&i.push(t(r));return i}createObjList(t,n){const i=[];for(let r=0;r<n;++r){const s=t(r);s!==null&&i.push(s.unpack())}return i}},Pm=class Um{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let n;t?n=t:n=1024,this.bb=Wr.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const i=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<i+t+n;){const r=this.bb.capacity();this.bb=Um.growByteBuffer(this.bb),this.space+=this.bb.capacity()-r}this.pad(i)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,i){(this.force_defaults||n!=i)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,i){(this.force_defaults||n!=i)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,i){(this.force_defaults||n!=i)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,i){(this.force_defaults||!n.equals(i))&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,i){(this.force_defaults||n!=i)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,i){(this.force_defaults||n!=i)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,i){(this.force_defaults||n!=i)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,i){n!=i&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const i=n<<1,r=Wr.allocate(i);return r.setPosition(i-n),r.bytes().set(t.bytes(),i-n),r}addOffset(t){this.prep(Pn,0),this.writeInt32(this.offset()-t+Pn)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const i=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const r=2;this.addInt16(t-this.object_start);const s=(i+r)*Nu;this.addInt16(s);let a=0;const o=this.space;t:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let c=Nu;c<s;c+=Nu)if(this.bb.readInt16(o+c)!=this.bb.readInt16(u+c))continue t;a=this.vtables[n];break}}return a?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,a-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,i){const r=i?Ft:0;if(n){const s=n;if(this.prep(this.minalign,Pn+oi+r),s.length!=oi)throw new Error("FlatBuffers: file identifier must be length "+oi);for(let a=oi-1;a>=0;a--)this.writeInt8(s.charCodeAt(a))}this.prep(this.minalign,Pn+r),this.addOffset(t),r&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const i=this.bb.capacity()-t,r=i-this.bb.readInt32(i);if(!(this.bb.readInt16(r+n)!=0))throw new Error("FlatBuffers: field "+n+" must be set")}startVector(t,n,i){this.notNested(),this.vector_num_elems=n,this.prep(Pn,t*n),this.prep(i,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(!t)return 0;let n;if(t instanceof Uint8Array)n=t;else{n=[];let i=0;for(;i<t.length;){let r;const s=t.charCodeAt(i++);if(s<55296||s>=56320)r=s;else{const a=t.charCodeAt(i++);r=(s<<10)+a+(65536-56623104-56320)}r<128?n.push(r):(r<2048?n.push(r>>6&31|192):(r<65536?n.push(r>>12&15|224):n.push(r>>18&7|240,r>>12&63|128),n.push(r>>6&63|128)),n.push(r&63|128))}}this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let i=0,r=this.space,s=this.bb.bytes();i<n.length;i++)s[r++]=n[i];return this.endVector()}createLong(t,n){return li.create(t,n)}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let i=0;i<t.length;++i){const r=t[i];if(r!==null)n.push(this.createObjectOffset(r));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t),this.endVector()}};class se{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new se).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Ft),(n||new se).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,i){return se.startKeyValue(t),se.addKey(t,n),se.addValue(t,i),se.endKeyValue(t)}}var Yr;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Yr||(Yr={}));var Gr;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(Gr||(Gr={}));var oo;(function(e){e[e.DenseArray=0]="DenseArray"})(oo||(oo={}));class je{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new je).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Ft),(n||new je).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,i){return je.startInt(t),je.addBitWidth(t,n),je.addIsSigned(t,i),je.endInt(t)}}class ui{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new ui).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Ft),(n||new ui).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new je).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):oo.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,oo.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class er{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new er).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Ft),(n||new er).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return er.startBinary(t),er.endBinary(t)}}class nr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new nr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Ft),(n||new nr).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return nr.startBool(t),nr.endBool(t)}}var uo;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(uo||(uo={}));let Fa=class Ir{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new Ir).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Ft),(n||new Ir).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):uo.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,uo.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return Ir.startDate(t),Ir.addUnit(t,n),Ir.endDate(t)}};class ke{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new ke).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Ft),(n||new ke).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,i,r){return ke.startDecimal(t),ke.addPrecision(t,n),ke.addScale(t,i),ke.addBitWidth(t,r),ke.endDecimal(t)}}var Kr;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Kr||(Kr={}));class Un{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new Un).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Ft),(n||new Un).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return Un.startFixedSizeBinary(t),Un.addByteWidth(t,n),Un.endFixedSizeBinary(t)}}class Vn{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Vn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Ft),(n||new Vn).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Vn.startFixedSizeList(t),Vn.addListSize(t,n),Vn.endFixedSizeList(t)}}var co;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(co||(co={}));class jn{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new jn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Ft),(n||new jn).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):co.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,co.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return jn.startFloatingPoint(t),jn.addPrecision(t,n),jn.endFloatingPoint(t)}}var lo;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(lo||(lo={}));class $n{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new $n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Ft),(n||new $n).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):lo.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,lo.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return $n.startInterval(t),$n.addUnit(t,n),$n.endInterval(t)}}class ir{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new ir).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Ft),(n||new ir).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return ir.startList(t),ir.endList(t)}}let Ba=class Er{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new Er).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Ft),(n||new Er).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return Er.startMap(t),Er.addKeysSorted(t,n),Er.endMap(t)}};class rr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new rr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Ft),(n||new rr).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return rr.startNull(t),rr.endNull(t)}}class sr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new sr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Ft),(n||new sr).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return sr.startStruct_(t),sr.endStruct_(t)}}class en{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new en).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Ft),(n||new en).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Kr.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Kr.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,i){return en.startTime(t),en.addUnit(t,n),en.addBitWidth(t,i),en.endTime(t)}}class nn{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new nn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Ft),(n||new nn).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Kr.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Kr.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,i){return nn.startTimestamp(t),nn.addUnit(t,n),nn.addTimezone(t,i),nn.endTimestamp(t)}}var ho;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(ho||(ho={}));class Te{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new Te).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Ft),(n||new Te).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ho.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,ho.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addInt32(n[i]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,i){return Te.startUnion(t),Te.addMode(t,n),Te.addTypeIds(t,i),Te.endUnion(t)}}class ar{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new ar).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Ft),(n||new ar).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return ar.startUtf8(t),ar.endUtf8(t)}}var Ht;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList"})(Ht||(Ht={}));let Xe=class La{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new La).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Ft),(n||new La).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Ht.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new ui).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const i=this.bb.__offset(this.bb_pos,14);return i?(n||new La).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,16);return i?(n||new se).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,Ht.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Fn=class ii{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new ii).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Ft),(n||new ii).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Gr.Little}fields(t,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new Xe).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new se).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,Gr.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let i=n.length-1;i>=0;i--)t.addInt64(n[i]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,i,r,s){return ii.startSchema(t),ii.addEndianness(t,n),ii.addFields(t,i),ii.addCustomMetadata(t,r),ii.addFeatures(t,s),ii.endSchema(t)}};class Ve{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new Ve).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Ft),(n||new Ve).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Yr.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Fn).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new oc).__init(this.bb.__vector(this.bb_pos+i)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const i=this.bb.__offset(this.bb_pos,10);return i?(n||new oc).__init(this.bb.__vector(this.bb_pos+i)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new se).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Yr.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class At{constructor(t=[],n,i){this.fields=t||[],this.metadata=n||new Map,i||(i=lc(t)),this.dictionaries=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),i=this.fields.filter(r=>n.has(r.name));return new At(i,this.metadata)}selectAt(t){const n=t.map(i=>this.fields[i]).filter(Boolean);return new At(n,this.metadata)}assign(...t){const n=t[0]instanceof At?t[0]:Array.isArray(t[0])?new At(t[0]):new At(t),i=[...this.fields],r=Ea(Ea(new Map,this.metadata),n.metadata),s=n.fields.filter(o=>{const u=i.findIndex(c=>c.name===o.name);return~u?(i[u]=o.clone({metadata:Ea(Ea(new Map,i[u].metadata),o.metadata)}))&&!1:!0}),a=lc(s,new Map);return new At([...i,...s],r,new Map([...this.dictionaries,...a]))}}At.prototype.fields=null;At.prototype.metadata=null;At.prototype.dictionaries=null;class xt{constructor(t,n,i=!1,r){this.name=t,this.type=n,this.nullable=i,this.metadata=r||new Map}static new(...t){let[n,i,r,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],i===void 0&&(i=t[0].type),r===void 0&&(r=t[0].nullable),s===void 0&&(s=t[0].metadata)),new xt(`${n}`,i,r,s)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,i,r,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,i=this.type,r=this.nullable,s=this.metadata]=t:{name:n=this.name,type:i=this.type,nullable:r=this.nullable,metadata:s=this.metadata}=t[0],xt.new(n,i,r,s)}}xt.prototype.type=null;xt.prototype.name=null;xt.prototype.nullable=null;xt.prototype.metadata=null;function Ea(e,t){return new Map([...e||new Map,...t||new Map])}function lc(e,t=new Map){for(let n=-1,i=e.length;++n<i;){const s=e[n].type;if(V.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&lc(s.children,t)}return t}var Df=li,uE=Pm,cE=Wr;class zs{constructor(t,n=$e.V4,i,r){this.schema=t,this.version=n,i&&(this._recordBatches=i),r&&(this._dictionaryBatches=r)}static decode(t){t=new cE(wt(t));const n=Ve.getRootAsFooter(t),i=At.decode(n.schema());return new lE(i,n)}static encode(t){const n=new uE,i=At.encode(n,t.schema);Ve.startRecordBatchesVector(n,t.numRecordBatches);for(const a of[...t.recordBatches()].slice().reverse())Pi.encode(n,a);const r=n.endVector();Ve.startDictionariesVector(n,t.numDictionaries);for(const a of[...t.dictionaryBatches()].slice().reverse())Pi.encode(n,a);const s=n.endVector();return Ve.startFooter(n),Ve.addSchema(n,i),Ve.addVersion(n,$e.V4),Ve.addRecordBatches(n,r),Ve.addDictionaries(n,s),Ve.finishFooterBuffer(n,Ve.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,n=-1,i=this.numRecordBatches;++n<i;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,i=this.numDictionaries;++n<i;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class lE extends zs{constructor(t,n){super(t,n.version()),this._footer=n}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return Pi.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return Pi.decode(n)}return null}}class Pi{constructor(t,n,i){this.metaDataLength=t,this.offset=typeof i=="number"?i:i.low,this.bodyLength=typeof n=="number"?n:n.low}static decode(t){return new Pi(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:i}=n,r=new Df(n.offset,0),s=new Df(n.bodyLength,0);return oc.createBlock(t,r,i,s)}}const Wt=Object.freeze({done:!0,value:void 0});class Mf{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class vl{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class hE extends vl{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return U(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(Wt);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return tn.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return tn.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return U(this,void 0,void 0,function*(){return yield this.abort(t),Wt})}return(t){return U(this,void 0,void 0,function*(){return yield this.close(),Wt})}read(t){return U(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return U(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,i)=>{this.resolvers.push({resolve:n,reject:i})}):Promise.resolve(Wt)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class Da extends hE{write(t){if((t=wt(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?nc(this.toUint8Array(!0)):this.toUint8Array(!1).then(nc)}toUint8Array(t=!1){return t?Wn(this._values)[0]:(()=>U(this,void 0,void 0,function*(){var n,i;const r=[];let s=0;try{for(var a=lr(this),o;o=yield a.next(),!o.done;){const u=o.value;r.push(u),s+=u.byteLength}}catch(u){n={error:u}}finally{try{o&&!o.done&&(i=a.return)&&(yield i.call(a))}finally{if(n)throw n.error}}return Wn(r,s)[0]}))()}}class fo{constructor(t){t&&(this.source=new fE(tn.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Qr{constructor(t){t instanceof Qr?this.source=t.source:t instanceof Da?this.source=new Ji(tn.fromAsyncIterable(t)):xp(t)?this.source=new Ji(tn.fromNodeStream(t)):Uc(t)?this.source=new Ji(tn.fromDOMStream(t)):Sp(t)?this.source=new Ji(tn.fromDOMStream(t.body)):na(t)?this.source=new Ji(tn.fromIterable(t)):pr(t)?this.source=new Ji(tn.fromAsyncIterable(t)):ns(t)&&(this.source=new Ji(tn.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class fE{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,n="read"){return this.source.next({cmd:n,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||Wt)}return(t){return Object.create(this.source.return&&this.source.return(t)||Wt)}}class Ji{constructor(t){this.source=t,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(t){return U(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return U(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return U(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t,n="read"){return U(this,void 0,void 0,function*(){return yield this.source.next({cmd:n,size:t})})}throw(t){return U(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(t))||Wt;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(t){return U(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(t))||Wt;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}}class Pf extends fo{constructor(t,n){super(),this.position=0,this.buffer=wt(t),this.size=typeof n>"u"?this.buffer.byteLength:n}readInt32(t){const{buffer:n,byteOffset:i}=this.readAt(t,4);return new DataView(n,i).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:n,size:i,position:r}=this;return n&&r<i?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(i,r+Math.min(i-r,t)),n.subarray(r,this.position)):null}readAt(t,n){const i=this.buffer,r=Math.min(this.size,t+n);return i?i.subarray(t,r):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class po extends Qr{constructor(t,n){super(),this.position=0,this._handle=t,typeof n=="number"?this.size=n:this._pending=(()=>U(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending}))()}readInt32(t){return U(this,void 0,void 0,function*(){const{buffer:n,byteOffset:i}=yield this.readAt(t,4);return new DataView(n,i).getInt32(0,!0)})}seek(t){return U(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return U(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:i,position:r}=this;if(n&&r<i){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let s=r,a=0,o=0;const u=Math.min(i,s+Math.min(i-s,t)),c=new Uint8Array(Math.max(0,(this.position=u)-s));for(;(s+=o)<u&&(a+=o)<c.byteLength;)({bytesRead:o}=yield n.read(c,a,c.byteLength-a,s));return c}return null})}readAt(t,n){return U(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:i,size:r}=this;if(i&&t+n<r){const s=Math.min(r,t+n),a=new Uint8Array(s-t);return(yield i.read(a,0,n,t)).buffer}return new Uint8Array(n)})}close(){return U(this,void 0,void 0,function*(){const t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return U(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return U(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}}const dE=65536;function kr(e){return e<0&&(e=4294967295+e+1),`0x${e.toString(16)}`}const Jr=8,bl=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class Vm{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),i=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]);let r=n[3]*i[3];this.buffer[0]=r&65535;let s=r>>>16;return r=n[2]*i[3],s+=r,r=n[3]*i[2]>>>0,s+=r,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<r?dE:0,this.buffer[1]+=s>>>16,this.buffer[1]+=n[1]*i[3]+n[2]*i[2]+n[3]*i[1],this.buffer[1]+=n[0]*i[3]+n[1]*i[2]+n[2]*i[1]+n[3]*i[0]<<16,this}_plus(t){const n=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${kr(this.buffer[1])} ${kr(this.buffer[0])}`}}class kt extends Vm{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,n=new Uint32Array(2)){return kt.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return kt.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const i=t.length,r=new kt(n);for(let s=0;s<i;){const a=Jr<i-s?Jr:i-s,o=new kt(new Uint32Array([Number.parseInt(t.slice(s,s+a),10),0])),u=new kt(new Uint32Array([bl[a],0]));r.times(u),r.plus(o),s+=a}return r}static convertArray(t){const n=new Uint32Array(t.length*2);for(let i=-1,r=t.length;++i<r;)kt.from(t[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(t,n){return new kt(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new kt(new Uint32Array(t.buffer)).plus(n)}}class Ae extends Vm{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const n=this.buffer[1]<<0,i=t.buffer[1]<<0;return n<i||n===i&&this.buffer[0]<t.buffer[0]}static from(t,n=new Uint32Array(2)){return Ae.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return Ae.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const i=t.startsWith("-"),r=t.length,s=new Ae(n);for(let a=i?1:0;a<r;){const o=Jr<r-a?Jr:r-a,u=new Ae(new Uint32Array([Number.parseInt(t.slice(a,a+o),10),0])),c=new Ae(new Uint32Array([bl[o],0]));s.times(c),s.plus(u),a+=o}return i?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*2);for(let i=-1,r=t.length;++i<r;)Ae.from(t[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(t,n){return new Ae(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new Ae(new Uint32Array(t.buffer)).plus(n)}}class Bn{constructor(t){this.buffer=t}high(){return new Ae(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new Ae(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){const n=new kt(new Uint32Array([this.buffer[3],0])),i=new kt(new Uint32Array([this.buffer[2],0])),r=new kt(new Uint32Array([this.buffer[1],0])),s=new kt(new Uint32Array([this.buffer[0],0])),a=new kt(new Uint32Array([t.buffer[3],0])),o=new kt(new Uint32Array([t.buffer[2],0])),u=new kt(new Uint32Array([t.buffer[1],0])),c=new kt(new Uint32Array([t.buffer[0],0]));let l=kt.multiply(s,c);this.buffer[0]=l.low();const h=new kt(new Uint32Array([l.high(),0]));return l=kt.multiply(r,c),h.plus(l),l=kt.multiply(s,u),h.plus(l),this.buffer[1]=h.low(),this.buffer[3]=h.lessThan(l)?1:0,this.buffer[2]=h.high(),new kt(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(kt.multiply(i,c)).plus(kt.multiply(r,u)).plus(kt.multiply(s,o)),this.buffer[3]+=kt.multiply(n,c).plus(kt.multiply(i,u)).plus(kt.multiply(r,o)).plus(kt.multiply(s,a)).low(),this}plus(t){const n=new Uint32Array(4);return n[3]=this.buffer[3]+t.buffer[3]>>>0,n[2]=this.buffer[2]+t.buffer[2]>>>0,n[1]=this.buffer[1]+t.buffer[1]>>>0,n[0]=this.buffer[0]+t.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${kr(this.buffer[3])} ${kr(this.buffer[2])} ${kr(this.buffer[1])} ${kr(this.buffer[0])}`}static multiply(t,n){return new Bn(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new Bn(new Uint32Array(t.buffer)).plus(n)}static from(t,n=new Uint32Array(4)){return Bn.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(4)){return Bn.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(4)){const i=t.startsWith("-"),r=t.length,s=new Bn(n);for(let a=i?1:0;a<r;){const o=Jr<r-a?Jr:r-a,u=new Bn(new Uint32Array([Number.parseInt(t.slice(a,a+o),10),0,0,0])),c=new Bn(new Uint32Array([bl[o],0,0,0]));s.times(c),s.plus(u),a+=o}return i?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*4);for(let i=-1,r=t.length;++i<r;)Bn.from(t[i],new Uint32Array(n.buffer,n.byteOffset+4*4*i,4));return n}}class jm extends ct{constructor(t,n,i,r){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=n,this.buffers=i,this.dictionaries=r}visit(t){return super.visit(t instanceof xt?t.type:t)}visitNull(t,{length:n}=this.nextFieldNode()){return ut({type:t,length:n})}visitBool(t,{length:n,nullCount:i}=this.nextFieldNode()){return ut({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitInt(t,{length:n,nullCount:i}=this.nextFieldNode()){return ut({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitFloat(t,{length:n,nullCount:i}=this.nextFieldNode()){return ut({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitUtf8(t,{length:n,nullCount:i}=this.nextFieldNode()){return ut({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:n,nullCount:i}=this.nextFieldNode()){return ut({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:n,nullCount:i}=this.nextFieldNode()){return ut({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitDate(t,{length:n,nullCount:i}=this.nextFieldNode()){return ut({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitTimestamp(t,{length:n,nullCount:i}=this.nextFieldNode()){return ut({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitTime(t,{length:n,nullCount:i}=this.nextFieldNode()){return ut({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitDecimal(t,{length:n,nullCount:i}=this.nextFieldNode()){return ut({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitList(t,{length:n,nullCount:i}=this.nextFieldNode()){return ut({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:n,nullCount:i}=this.nextFieldNode()){return ut({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),children:this.visitMany(t.children)})}visitUnion(t){return t.mode===We.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t,{length:n,nullCount:i}=this.nextFieldNode()){return ut({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:n,nullCount:i}=this.nextFieldNode()){return ut({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:n,nullCount:i}=this.nextFieldNode()){return ut({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:n,nullCount:i}=this.nextFieldNode()){return ut({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitFixedSizeList(t,{length:n,nullCount:i}=this.nextFieldNode()){return ut({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),child:this.visit(t.children[0])})}visitMap(t,{length:n,nullCount:i}=this.nextFieldNode()){return ut({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,n,i=this.nextBufferRange()){return n>0&&this.readData(t,i)||new Uint8Array(0)}readOffsets(t,n){return this.readData(t,n)}readTypeIds(t,n){return this.readData(t,n)}readData(t,{length:n,offset:i}=this.nextBufferRange()){return this.bytes.subarray(i,i+n)}readDictionary(t){return this.dictionaries.get(t.id)}}class pE extends jm{constructor(t,n,i,r){super(new Uint8Array(0),n,i,r),this.sources=t}readNullBitmap(t,n,{offset:i}=this.nextBufferRange()){return n<=0?new Uint8Array(0):ro(this.sources[i])}readOffsets(t,{offset:n}=this.nextBufferRange()){return Rt(Uint8Array,Rt(Int32Array,this.sources[n]))}readTypeIds(t,{offset:n}=this.nextBufferRange()){return Rt(Uint8Array,Rt(t.ArrayType,this.sources[n]))}readData(t,{offset:n}=this.nextBufferRange()){const{sources:i}=this;return V.isTimestamp(t)||(V.isInt(t)||V.isTime(t))&&t.bitWidth===64||V.isDate(t)&&t.unit===En.MILLISECOND?Rt(Uint8Array,Ae.convertArray(i[n])):V.isDecimal(t)?Rt(Uint8Array,Bn.convertArray(i[n])):V.isBinary(t)||V.isFixedSizeBinary(t)?mE(i[n]):V.isBool(t)?ro(i[n]):V.isUtf8(t)?Mo(i[n].join("")):Rt(Uint8Array,Rt(t.ArrayType,i[n].map(r=>+r)))}}function mE(e){const t=e.join(""),n=new Uint8Array(t.length/2);for(let i=0;i<t.length;i+=2)n[i>>1]=Number.parseInt(t.slice(i,i+2),16);return n}class $m extends $o{constructor(t){super(t),this._values=new jo(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,wt(n))}_flushPending(t,n){const i=this._offsets,r=this._values.reserve(n).buffer;let s=0;for(const[a,o]of t)if(o===void 0)i.set(a,0);else{const u=o.length;r.set(o,s),i.set(a,u),s+=u}}}class yE extends Me{constructor(t){super(t),this._values=new Lm}setValue(t,n){this._values.set(t,+n)}}class zo extends Wi{}zo.prototype._setValue=Xp;class zm extends zo{}zm.prototype._setValue=tl;class qm extends zo{}qm.prototype._setValue=el;class Hm extends Wi{}Hm.prototype._setValue=em;class gE extends Me{constructor({type:t,nullValues:n,dictionaryHashFunction:i}){super({type:new Mi(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=mo({type:this.type.indices,nullValues:n}),this.dictionary=mo({type:this.type.dictionary,nullValues:null}),typeof i=="function"&&(this.valueToKey=i)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const i=this.indices;return n=i.setValid(t,n),this.length=i.length,n}setValue(t,n){const i=this._keysToIndices,r=this.valueToKey(n);let s=i[r];return s===void 0&&(i[r]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,i=this.dictionary.toVector(),r=this.indices.flush().clone(t);return r.dictionary=n?n.concat(i):i,this.finished||(this._dictionaryOffset+=i.length),this._dictionary=r.dictionary,this.clear(),r}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class Wm extends Wi{}Wm.prototype._setValue=Jp;class _E extends Me{setValue(t,n){const[i]=this.children,r=t*this.stride;for(let s=-1,a=n.length;++s<a;)i.set(r+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const i=this.children.push(t);return this.type=new Hr(this.type.listSize,new xt(n,t.type,!0)),i}}class qo extends Wi{setValue(t,n){this._values.set(t,n)}}class vE extends qo{setValue(t,n){super.setValue(t,Gp(n))}}class bE extends qo{}class wE extends qo{}class Ho extends Wi{}Ho.prototype._setValue=rm;class Ym extends Ho{}Ym.prototype._setValue=ll;class Gm extends Ho{}Gm.prototype._setValue=hl;class xi extends Wi{setValue(t,n){this._values.set(t,n)}}class SE extends xi{}class xE extends xi{}class IE extends xi{}class EE extends xi{}class AE extends xi{}class kE extends xi{}class TE extends xi{}class NE extends xi{}class OE extends $o{constructor(t){super(t),this._offsets=new Dm}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new qr(new xt(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[i]=this.children;for(const[r,s]of t)if(typeof s>"u")n.set(r,0);else{const a=s.length,o=n.set(r,a).buffer[r];for(let u=-1;++u<a;)i.set(o+u,s[u])}}}class CE extends $o{set(t,n){return super.set(t,n)}setValue(t,n){const i=n instanceof Map?n:new Map(Object.entries(n)),r=this._pending||(this._pending=new Map),s=r.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=i.size,r.set(t,i)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new $s(new xt(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[i]=this.children;for(const[r,s]of t)if(s===void 0)n.set(r,0);else{let{[r]:a,[r+1]:o}=n.set(r,s.size).buffer;for(const u of s.entries())if(i.set(a,u),++a>=o)break}}}class RE extends Me{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class FE extends Me{setValue(t,n){const{children:i,type:r}=this;switch(Array.isArray(n)||n.constructor){case!0:return r.children.forEach((s,a)=>i[a].set(t,n[a]));case Map:return r.children.forEach((s,a)=>i[a].set(t,n.get(s.name)));default:return r.children.forEach((s,a)=>i[a].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(i=>i.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const i=this.children.push(t);return this.type=new fe([...this.type.children,new xt(n,t.type,!0)]),i}}class rs extends Wi{}rs.prototype._setValue=Zp;class Km extends rs{}Km.prototype._setValue=nl;class Qm extends rs{}Qm.prototype._setValue=il;class Jm extends rs{}Jm.prototype._setValue=rl;class Xm extends rs{}Xm.prototype._setValue=sl;class ss extends Wi{}ss.prototype._setValue=tm;class Zm extends ss{}Zm.prototype._setValue=al;class t0 extends ss{}t0.prototype._setValue=ol;class e0 extends ss{}e0.prototype._setValue=ul;class n0 extends ss{}n0.prototype._setValue=cl;class wl extends Me{constructor(t){super(t),this._typeIds=new ia(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,i){return i===void 0&&(i=this._valueToChildTypeId(this,n,t)),this.setValid(t,this.isValid(n))&&this.setValue(t,n,i),this}setValue(t,n,i){this._typeIds.set(t,i);const r=this.type.typeIdToChildIndex[i],s=this.children[r];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const i=this.children.push(t),{type:{children:r,mode:s,typeIds:a}}=this,o=[...r,new xt(n,t.type)];return this.type=new js(s,[...a,i],o),i}_valueToChildTypeId(t,n,i){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class BE extends wl{}class LE extends wl{constructor(t){super(t),this._offsets=new ia(new Int32Array(0))}setValue(t,n,i){const r=this._typeIds.set(t,i).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[r]),a=this._offsets.set(t,s.length).buffer[t];s==null||s.set(a,n)}}class i0 extends $o{constructor(t){super(t),this._values=new jo(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Mo(n))}_flushPending(t,n){}}i0.prototype._flushPending=$m.prototype._flushPending;class DE extends ct{visitNull(){return RE}visitBool(){return yE}visitInt(){return xi}visitInt8(){return SE}visitInt16(){return xE}visitInt32(){return IE}visitInt64(){return EE}visitUint8(){return AE}visitUint16(){return kE}visitUint32(){return TE}visitUint64(){return NE}visitFloat(){return qo}visitFloat16(){return vE}visitFloat32(){return bE}visitFloat64(){return wE}visitUtf8(){return i0}visitBinary(){return $m}visitFixedSizeBinary(){return Wm}visitDate(){return zo}visitDateDay(){return zm}visitDateMillisecond(){return qm}visitTimestamp(){return rs}visitTimestampSecond(){return Km}visitTimestampMillisecond(){return Qm}visitTimestampMicrosecond(){return Jm}visitTimestampNanosecond(){return Xm}visitTime(){return ss}visitTimeSecond(){return Zm}visitTimeMillisecond(){return t0}visitTimeMicrosecond(){return e0}visitTimeNanosecond(){return n0}visitDecimal(){return Hm}visitList(){return OE}visitStruct(){return FE}visitUnion(){return wl}visitDenseUnion(){return LE}visitSparseUnion(){return BE}visitDictionary(){return gE}visitInterval(){return Ho}visitIntervalDayTime(){return Ym}visitIntervalYearMonth(){return Gm}visitFixedSizeList(){return _E}visitMap(){return CE}}const ME=new DE;class H extends ct{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((i,r)=>this.compareFields(i,n[r]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function Pe(e,t){return t instanceof e.constructor}function ra(e,t){return e===t||Pe(e,t)}function Ii(e,t){return e===t||Pe(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function Wo(e,t){return e===t||Pe(e,t)&&e.precision===t.precision}function PE(e,t){return e===t||Pe(e,t)&&e.byteWidth===t.byteWidth}function Sl(e,t){return e===t||Pe(e,t)&&e.unit===t.unit}function sa(e,t){return e===t||Pe(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function aa(e,t){return e===t||Pe(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function UE(e,t){return e===t||Pe(e,t)&&e.children.length===t.children.length&&Ui.compareManyFields(e.children,t.children)}function VE(e,t){return e===t||Pe(e,t)&&e.children.length===t.children.length&&Ui.compareManyFields(e.children,t.children)}function xl(e,t){return e===t||Pe(e,t)&&e.mode===t.mode&&e.typeIds.every((n,i)=>n===t.typeIds[i])&&Ui.compareManyFields(e.children,t.children)}function jE(e,t){return e===t||Pe(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Ui.visit(e.indices,t.indices)&&Ui.visit(e.dictionary,t.dictionary)}function Il(e,t){return e===t||Pe(e,t)&&e.unit===t.unit}function $E(e,t){return e===t||Pe(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Ui.compareManyFields(e.children,t.children)}function zE(e,t){return e===t||Pe(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Ui.compareManyFields(e.children,t.children)}H.prototype.visitNull=ra;H.prototype.visitBool=ra;H.prototype.visitInt=Ii;H.prototype.visitInt8=Ii;H.prototype.visitInt16=Ii;H.prototype.visitInt32=Ii;H.prototype.visitInt64=Ii;H.prototype.visitUint8=Ii;H.prototype.visitUint16=Ii;H.prototype.visitUint32=Ii;H.prototype.visitUint64=Ii;H.prototype.visitFloat=Wo;H.prototype.visitFloat16=Wo;H.prototype.visitFloat32=Wo;H.prototype.visitFloat64=Wo;H.prototype.visitUtf8=ra;H.prototype.visitBinary=ra;H.prototype.visitFixedSizeBinary=PE;H.prototype.visitDate=Sl;H.prototype.visitDateDay=Sl;H.prototype.visitDateMillisecond=Sl;H.prototype.visitTimestamp=sa;H.prototype.visitTimestampSecond=sa;H.prototype.visitTimestampMillisecond=sa;H.prototype.visitTimestampMicrosecond=sa;H.prototype.visitTimestampNanosecond=sa;H.prototype.visitTime=aa;H.prototype.visitTimeSecond=aa;H.prototype.visitTimeMillisecond=aa;H.prototype.visitTimeMicrosecond=aa;H.prototype.visitTimeNanosecond=aa;H.prototype.visitDecimal=ra;H.prototype.visitList=UE;H.prototype.visitStruct=VE;H.prototype.visitUnion=xl;H.prototype.visitDenseUnion=xl;H.prototype.visitSparseUnion=xl;H.prototype.visitDictionary=jE;H.prototype.visitInterval=Il;H.prototype.visitIntervalDayTime=Il;H.prototype.visitIntervalYearMonth=Il;H.prototype.visitFixedSizeList=$E;H.prototype.visitMap=zE;const Ui=new H;function hc(e,t){return Ui.compareSchemas(e,t)}function mo(e){const t=e.type,n=new(ME.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const i=e.children||[],r={nullValues:e.nullValues},s=Array.isArray(i)?(a,o)=>i[o]||r:({name:a})=>i[a]||r;for(const[a,o]of t.children.entries()){const{type:u}=o,c=s(o,a);n.children.push(mo(Object.assign(Object.assign({},c),{type:u})))}}return n}function Ou(e,t){return qE(e,t.map(n=>n.data.concat()))}function qE(e,t){const n=[...e.fields],i=[],r={numBatches:t.reduce((h,p)=>Math.max(h,p.length),0)};let s=0,a=0,o=-1;const u=t.length;let c,l=[];for(;r.numBatches-- >0;){for(a=Number.POSITIVE_INFINITY,o=-1;++o<u;)l[o]=c=t[o].shift(),a=Math.min(a,c?c.length:a);Number.isFinite(a)&&(l=HE(n,a,l,t,r),a>0&&(i[s++]=ut({type:new fe(n),length:a,nullCount:0,children:l.slice()})))}return[e=e.assign(n),i.map(h=>new Ne(e,h))]}function HE(e,t,n,i,r){var s;const a=(t+63&-64)>>3;for(let o=-1,u=i.length;++o<u;){const c=n[o],l=c==null?void 0:c.length;if(l>=t)l===t?n[o]=c:(n[o]=c.slice(0,t),r.numBatches=Math.max(r.numBatches,i[o].unshift(c.slice(t,l-t))));else{const h=e[o];e[o]=h.clone({nullable:!0}),n[o]=(s=c==null?void 0:c._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:ut({type:h.type,length:t,nullCount:t,nullBitmap:new Uint8Array(a)})}}return n}var r0;let mi=class Xi{constructor(...t){var n,i;if(t.length===0)return this.batches=[],this.schema=new At([]),this._offsets=[0],this;let r,s;t[0]instanceof At&&(r=t.shift()),t[t.length-1]instanceof Uint32Array&&(s=t.pop());const a=u=>{if(u){if(u instanceof Ne)return[u];if(u instanceof Xi)return u.batches;if(u instanceof Nt){if(u.type instanceof fe)return[new Ne(new At(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(c=>a(c));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(c=>a(c));if(typeof u=="object"){const c=Object.keys(u),l=c.map(m=>new mt([u[m]])),h=new At(c.map((m,b)=>new xt(String(m),l[b].type))),[,p]=Ou(h,l);return p.length===0?[new Ne(u)]:p}}}return[]},o=t.flatMap(u=>a(u));if(r=(i=r??((n=o[0])===null||n===void 0?void 0:n.schema))!==null&&i!==void 0?i:new At([]),!(r instanceof At))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of o){if(!(u instanceof Ne))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!hc(r,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=r,this.batches=o,this._offsets=s??Em(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=Im(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?_l.visit(new mt(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,i=this.data.concat(t.flatMap(({data:r})=>r));return new Xi(n,i.map(r=>new Ne(n,r)))}slice(t,n){const i=this.schema;[t,n]=Sm({length:this.numRows},t,n);const r=Am(this.data,this._offsets,t,n);return new Xi(i,r.map(s=>new Ne(i,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(i=>i.children[t]);if(n.length===0){const{type:i}=this.schema.fields[t],r=ut({type:i,length:0,nullCount:0});n.push(r._changeLengthAndBackfillNullBitmap(this.numRows))}return new mt(n)}return null}setChild(t,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(r=>r.name===t),n)}setChildAt(t,n){let i=this.schema,r=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new mt([ut({type:new di,length:this.numRows})]));const s=i.fields.slice(),a=s[t].clone({type:n.type}),o=this.schema.fields.map((u,c)=>this.getChildAt(c));[s[t],o[t]]=[a,n],[i,r]=Ou(i,o)}return new Xi(i,r)}select(t){const n=this.schema.fields.reduce((i,r,s)=>i.set(r.name,s),new Map);return this.selectAt(t.map(i=>n.get(i)).filter(i=>i>-1))}selectAt(t){const n=this.schema.selectAt(t),i=this.batches.map(r=>r.selectAt(t));return new Xi(n,i)}assign(t){const n=this.schema.fields,[i,r]=t.schema.fields.reduce((o,u,c)=>{const[l,h]=o,p=n.findIndex(m=>m.name===u.name);return~p?h[p]=c:l.push(c),o},[[],[]]),s=this.schema.assign(t.schema),a=[...n.map((o,u)=>[u,r[u]]).map(([o,u])=>u===void 0?this.getChildAt(o):t.getChildAt(u)),...i.map(o=>t.getChildAt(o))].filter(Boolean);return new Xi(...Ou(s,a))}};r0=Symbol.toStringTag;mi[r0]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Mr(gl),e.get=Mr(Be.getVisitFn(y.Struct)),e.set=km(on.getVisitFn(y.Struct)),e.indexOf=Tm(so.getVisitFn(y.Struct)),e.getByteLength=Mr(Gn.getVisitFn(y.Struct)),"Table"))(mi.prototype);var s0;let Ne=class xs{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof At))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=ut({nullCount:0,type:new fe(this.schema.fields),children:this.schema.fields.map(n=>ut({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Nt))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Uf(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:i,children:r,length:s}=Object.keys(n).reduce((u,c,l)=>(u.children[l]=n[c],u.length=Math.max(u.length,n[c].length),u.fields[l]=xt.new({name:c,type:n[c].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),a=new At(i),o=ut({type:new fe(i),length:s,children:r,nullCount:0});[this.schema,this.data]=Uf(a,o.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=a0(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Be.visit(this.data,t)}set(t,n){return on.visit(this.data,t,n)}indexOf(t,n){return so.visit(this.data,t,n)}getByteLength(t){return Gn.visit(this.data,t)}[Symbol.iterator](){return _l.visit(new mt([this.data]))}toArray(){return[...this]}concat(...t){return new mi(this.schema,[this,...t])}slice(t,n){const[i]=new mt([this.data]).slice(t,n).data;return new xs(this.schema,i)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(i=>i.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new mt([this.data.children[t]]):null}setChild(t,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(r=>r.name===t),n)}setChildAt(t,n){let i=this.schema,r=this.data;if(t>-1&&t<this.numCols){n||(n=new mt([ut({type:new di,length:this.numRows})]));const s=i.fields.slice(),a=r.children.slice(),o=s[t].clone({type:n.type});[s[t],a[t]]=[o,n.data[0]],i=new At(s,new Map(this.schema.metadata)),r=ut({type:new fe(s),children:a})}return new xs(i,r)}select(t){const n=this.schema.select(t),i=new fe(n.fields),r=[];for(const s of t){const a=this.schema.fields.findIndex(o=>o.name===s);~a&&(r[a]=this.data.children[a])}return new xs(n,ut({type:i,length:this.numRows,children:r}))}selectAt(t){const n=this.schema.selectAt(t),i=t.map(s=>this.data.children[s]).filter(Boolean),r=ut({type:new fe(n.fields),length:this.numRows,children:i});return new xs(n,r)}};s0=Symbol.toStringTag;Ne[s0]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Ne.prototype);function Uf(e,t,n=t.reduce((i,r)=>Math.max(i,r.length),0)){var i;const r=[...e.fields],s=[...t],a=(n+63&-64)>>3;for(const[o,u]of e.fields.entries()){const c=t[o];(!c||c.length!==n)&&(r[o]=u.clone({nullable:!0}),s[o]=(i=c==null?void 0:c._changeLengthAndBackfillNullBitmap(n))!==null&&i!==void 0?i:ut({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(a)}))}return[e.assign(r),ut({type:new fe(r),length:n,children:s})]}function a0(e,t,n=new Map){for(let i=-1,r=e.length;++i<r;){const a=e[i].type,o=t[i];if(V.isDictionary(a)){if(!n.has(a.id))o.dictionary&&n.set(a.id,o.dictionary);else if(n.get(a.id)!==o.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}a.children&&a.children.length>0&&a0(a.children,o.children,n)}return n}class El extends Ne{constructor(t){const n=t.fields.map(r=>ut({type:r.type})),i=ut({type:new fe(t.fields),nullCount:0,children:n});super(t,i)}}var yo;(function(e){e[e.BUFFER=0]="BUFFER"})(yo||(yo={}));var go;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(go||(go={}));class Ri{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Ri).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Ft),(n||new Ri).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):go.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):yo.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,go.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,yo.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,i){return Ri.startBodyCompression(t),Ri.addCodec(t,n),Ri.addMethod(t,i),Ri.endBodyCompression(t)}}class o0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,i){return t.prep(8,16),t.writeInt64(i),t.writeInt64(n),t.offset()}}let u0=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,i){return t.prep(8,16),t.writeInt64(i),t.writeInt64(n),t.offset()}},si=class fc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new fc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Ft),(n||new fc).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new u0).__init(this.bb.__vector(this.bb_pos+i)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new o0).__init(this.bb.__vector(this.bb_pos+i)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Ri).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},Ar=class dc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new dc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Ft),(n||new dc).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new si).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var _o;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(_o||(_o={}));let ki=class Rn{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new Rn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Ft),(n||new Rn).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Yr.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):_o.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new se).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Yr.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,_o.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,t.createLong(0,0))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,i,r,s,a){return Rn.startMessage(t),Rn.addVersion(t,n),Rn.addHeaderType(t,i),Rn.addHeader(t,r),Rn.addBodyLength(t,s),Rn.addCustomMetadata(t,a),Rn.endMessage(t)}};var WE=li;class YE extends ct{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return rr.startNull(n),rr.endNull(n)}visitInt(t,n){return je.startInt(n),je.addBitWidth(n,t.bitWidth),je.addIsSigned(n,t.isSigned),je.endInt(n)}visitFloat(t,n){return jn.startFloatingPoint(n),jn.addPrecision(n,t.precision),jn.endFloatingPoint(n)}visitBinary(t,n){return er.startBinary(n),er.endBinary(n)}visitBool(t,n){return nr.startBool(n),nr.endBool(n)}visitUtf8(t,n){return ar.startUtf8(n),ar.endUtf8(n)}visitDecimal(t,n){return ke.startDecimal(n),ke.addScale(n,t.scale),ke.addPrecision(n,t.precision),ke.addBitWidth(n,t.bitWidth),ke.endDecimal(n)}visitDate(t,n){return Fa.startDate(n),Fa.addUnit(n,t.unit),Fa.endDate(n)}visitTime(t,n){return en.startTime(n),en.addUnit(n,t.unit),en.addBitWidth(n,t.bitWidth),en.endTime(n)}visitTimestamp(t,n){const i=t.timezone&&n.createString(t.timezone)||void 0;return nn.startTimestamp(n),nn.addUnit(n,t.unit),i!==void 0&&nn.addTimezone(n,i),nn.endTimestamp(n)}visitInterval(t,n){return $n.startInterval(n),$n.addUnit(n,t.unit),$n.endInterval(n)}visitList(t,n){return ir.startList(n),ir.endList(n)}visitStruct(t,n){return sr.startStruct_(n),sr.endStruct_(n)}visitUnion(t,n){Te.startTypeIdsVector(n,t.typeIds.length);const i=Te.createTypeIdsVector(n,t.typeIds);return Te.startUnion(n),Te.addMode(n,t.mode),Te.addTypeIds(n,i),Te.endUnion(n)}visitDictionary(t,n){const i=this.visit(t.indices,n);return ui.startDictionaryEncoding(n),ui.addId(n,new WE(t.id,0)),ui.addIsOrdered(n,t.isOrdered),i!==void 0&&ui.addIndexType(n,i),ui.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return Un.startFixedSizeBinary(n),Un.addByteWidth(n,t.byteWidth),Un.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Vn.startFixedSizeList(n),Vn.addListSize(n,t.listSize),Vn.endFixedSizeList(n)}visitMap(t,n){return Ba.startMap(n),Ba.addKeysSorted(n,t.keysSorted),Ba.endMap(n)}}const Cu=new YE;function GE(e,t=new Map){return new At(QE(e,t),Ma(e.customMetadata),t)}function c0(e){return new Ye(e.count,l0(e.columns),h0(e.columns))}function KE(e){return new Kn(c0(e.data),e.id,e.isDelta)}function QE(e,t){return(e.fields||[]).filter(Boolean).map(n=>xt.fromJSON(n,t))}function Vf(e,t){return(e.children||[]).filter(Boolean).map(n=>xt.fromJSON(n,t))}function l0(e){return(e||[]).reduce((t,n)=>[...t,new vr(n.count,JE(n.VALIDITY)),...l0(n.children)],[])}function h0(e,t=[]){for(let n=-1,i=(e||[]).length;++n<i;){const r=e[n];r.VALIDITY&&t.push(new qn(t.length,r.VALIDITY.length)),r.TYPE&&t.push(new qn(t.length,r.TYPE.length)),r.OFFSET&&t.push(new qn(t.length,r.OFFSET.length)),r.DATA&&t.push(new qn(t.length,r.DATA.length)),t=h0(r.children,t)}return t}function JE(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function XE(e,t){let n,i,r,s,a,o;return!t||!(s=e.dictionary)?(a=$f(e,Vf(e,t)),r=new xt(e.name,a,e.nullable,Ma(e.customMetadata))):t.has(n=s.id)?(i=(i=s.indexType)?jf(i):new Li,o=new Mi(t.get(n),i,n,s.isOrdered),r=new xt(e.name,o,e.nullable,Ma(e.customMetadata))):(i=(i=s.indexType)?jf(i):new Li,t.set(n,a=$f(e,Vf(e,t))),o=new Mi(a,i,n,s.isOrdered),r=new xt(e.name,o,e.nullable,Ma(e.customMetadata))),r||null}function Ma(e){return new Map(Object.entries(e||{}))}function jf(e){return new be(e.isSigned,e.bitWidth)}function $f(e,t){const n=e.type.name;switch(n){case"NONE":return new di;case"null":return new di;case"binary":return new Us;case"utf8":return new jr;case"bool":return new Vs;case"list":return new qr((t||[])[0]);case"struct":return new fe(t||[]);case"struct_":return new fe(t||[])}switch(n){case"int":{const i=e.type;return new be(i.isSigned,i.bitWidth)}case"floatingpoint":{const i=e.type;return new Di(de[i.precision])}case"decimal":{const i=e.type;return new eo(i.scale,i.precision,i.bitWidth)}case"date":{const i=e.type;return new $r(En[i.unit])}case"time":{const i=e.type;return new pi(ft[i.unit],i.bitWidth)}case"timestamp":{const i=e.type;return new no(ft[i.unit],i.timezone)}case"interval":{const i=e.type;return new zr(Yn[i.unit])}case"union":{const i=e.type;return new js(We[i.mode],i.typeIds||[],t||[])}case"fixedsizebinary":{const i=e.type;return new io(i.byteWidth)}case"fixedsizelist":{const i=e.type;return new Hr(i.listSize,(t||[])[0])}case"map":{const i=e.type;return new $s((t||[])[0],i.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var mr=li,ZE=Pm,tA=Wr;class ve{constructor(t,n,i,r){this._version=n,this._headerType=i,this.body=new Uint8Array(0),r&&(this._createHeader=()=>r),this._bodyLength=typeof t=="number"?t:t.low}static fromJSON(t,n){const i=new ve(0,$e.V4,n);return i._createHeader=eA(t,n),i}static decode(t){t=new tA(wt(t));const n=ki.getRootAsMessage(t),i=n.bodyLength(),r=n.version(),s=n.headerType(),a=new ve(i,r,s);return a._createHeader=nA(n,s),a}static encode(t){const n=new ZE;let i=-1;return t.isSchema()?i=At.encode(n,t.header()):t.isRecordBatch()?i=Ye.encode(n,t.header()):t.isDictionaryBatch()&&(i=Kn.encode(n,t.header())),ki.startMessage(n),ki.addVersion(n,$e.V4),ki.addHeader(n,i),ki.addHeaderType(n,t.headerType),ki.addBodyLength(n,new mr(t.bodyLength,0)),ki.finishMessageBuffer(n,ki.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof At)return new ve(0,$e.V4,Et.Schema,t);if(t instanceof Ye)return new ve(n,$e.V4,Et.RecordBatch,t);if(t instanceof Kn)return new ve(n,$e.V4,Et.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Et.Schema}isRecordBatch(){return this.headerType===Et.RecordBatch}isDictionaryBatch(){return this.headerType===Et.DictionaryBatch}}class Ye{constructor(t,n,i){this._nodes=n,this._buffers=i,this._length=typeof t=="number"?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class Kn{constructor(t,n,i=!1){this._data=t,this._isDelta=i,this._id=typeof n=="number"?n:n.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class qn{constructor(t,n){this.offset=typeof t=="number"?t:t.low,this.length=typeof n=="number"?n:n.low}}class vr{constructor(t,n){this.length=typeof t=="number"?t:t.low,this.nullCount=typeof n=="number"?n:n.low}}function eA(e,t){return()=>{switch(t){case Et.Schema:return At.fromJSON(e);case Et.RecordBatch:return Ye.fromJSON(e);case Et.DictionaryBatch:return Kn.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Et[t]}, type: ${t} }`)}}function nA(e,t){return()=>{switch(t){case Et.Schema:return At.decode(e.header(new Fn));case Et.RecordBatch:return Ye.decode(e.header(new si),e.version());case Et.DictionaryBatch:return Kn.decode(e.header(new Ar),e.version())}throw new Error(`Unrecognized Message type: { name: ${Et[t]}, type: ${t} }`)}}xt.encode=dA;xt.decode=hA;xt.fromJSON=XE;At.encode=fA;At.decode=iA;At.fromJSON=GE;Ye.encode=pA;Ye.decode=rA;Ye.fromJSON=c0;Kn.encode=mA;Kn.decode=sA;Kn.fromJSON=KE;vr.encode=yA;vr.decode=oA;qn.encode=gA;qn.decode=aA;function iA(e,t=new Map){const n=lA(e,t);return new At(n,Pa(e),t)}function rA(e,t=$e.V4){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Ye(e.length(),uA(e),cA(e,t))}function sA(e,t=$e.V4){return new Kn(Ye.decode(e.data(),t),e.id(),e.isDelta())}function aA(e){return new qn(e.offset(),e.length())}function oA(e){return new vr(e.length(),e.nullCount())}function uA(e){const t=[];for(let n,i=-1,r=-1,s=e.nodesLength();++i<s;)(n=e.nodes(i))&&(t[++r]=vr.decode(n));return t}function cA(e,t){const n=[];for(let i,r=-1,s=-1,a=e.buffersLength();++r<a;)(i=e.buffers(r))&&(t<$e.V4&&(i.bb_pos+=8*(r+1)),n[++s]=qn.decode(i));return n}function lA(e,t){const n=[];for(let i,r=-1,s=-1,a=e.fieldsLength();++r<a;)(i=e.fields(r))&&(n[++s]=xt.decode(i,t));return n}function zf(e,t){const n=[];for(let i,r=-1,s=-1,a=e.childrenLength();++r<a;)(i=e.children(r))&&(n[++s]=xt.decode(i,t));return n}function hA(e,t){let n,i,r,s,a,o;return!t||!(o=e.dictionary())?(r=Hf(e,zf(e,t)),i=new xt(e.name(),r,e.nullable(),Pa(e))):t.has(n=o.id().low)?(s=(s=o.indexType())?qf(s):new Li,a=new Mi(t.get(n),s,n,o.isOrdered()),i=new xt(e.name(),a,e.nullable(),Pa(e))):(s=(s=o.indexType())?qf(s):new Li,t.set(n,r=Hf(e,zf(e,t))),a=new Mi(r,s,n,o.isOrdered()),i=new xt(e.name(),a,e.nullable(),Pa(e))),i||null}function Pa(e){const t=new Map;if(e)for(let n,i,r=-1,s=Math.trunc(e.customMetadataLength());++r<s;)(n=e.customMetadata(r))&&(i=n.key())!=null&&t.set(i,n.value());return t}function qf(e){return new be(e.isSigned(),e.bitWidth())}function Hf(e,t){const n=e.typeType();switch(n){case Ht.NONE:return new di;case Ht.Null:return new di;case Ht.Binary:return new Us;case Ht.Utf8:return new jr;case Ht.Bool:return new Vs;case Ht.List:return new qr((t||[])[0]);case Ht.Struct_:return new fe(t||[])}switch(n){case Ht.Int:{const i=e.type(new je);return new be(i.isSigned(),i.bitWidth())}case Ht.FloatingPoint:{const i=e.type(new jn);return new Di(i.precision())}case Ht.Decimal:{const i=e.type(new ke);return new eo(i.scale(),i.precision(),i.bitWidth())}case Ht.Date:{const i=e.type(new Fa);return new $r(i.unit())}case Ht.Time:{const i=e.type(new en);return new pi(i.unit(),i.bitWidth())}case Ht.Timestamp:{const i=e.type(new nn);return new no(i.unit(),i.timezone())}case Ht.Interval:{const i=e.type(new $n);return new zr(i.unit())}case Ht.Union:{const i=e.type(new Te);return new js(i.mode(),i.typeIdsArray()||[],t||[])}case Ht.FixedSizeBinary:{const i=e.type(new Un);return new io(i.byteWidth())}case Ht.FixedSizeList:{const i=e.type(new Vn);return new Hr(i.listSize(),(t||[])[0])}case Ht.Map:{const i=e.type(new Ba);return new $s((t||[])[0],i.keysSorted())}}throw new Error(`Unrecognized type: "${Ht[n]}" (${n})`)}function fA(e,t){const n=t.fields.map(s=>xt.encode(e,s));Fn.startFieldsVector(e,n.length);const i=Fn.createFieldsVector(e,n),r=t.metadata&&t.metadata.size>0?Fn.createCustomMetadataVector(e,[...t.metadata].map(([s,a])=>{const o=e.createString(`${s}`),u=e.createString(`${a}`);return se.startKeyValue(e),se.addKey(e,o),se.addValue(e,u),se.endKeyValue(e)})):-1;return Fn.startSchema(e),Fn.addFields(e,i),Fn.addEndianness(e,_A?Gr.Little:Gr.Big),r!==-1&&Fn.addCustomMetadata(e,r),Fn.endSchema(e)}function dA(e,t){let n=-1,i=-1,r=-1;const s=t.type;let a=t.typeId;V.isDictionary(s)?(a=s.dictionary.typeId,r=Cu.visit(s,e),i=Cu.visit(s.dictionary,e)):i=Cu.visit(s,e);const o=(s.children||[]).map(l=>xt.encode(e,l)),u=Xe.createChildrenVector(e,o),c=t.metadata&&t.metadata.size>0?Xe.createCustomMetadataVector(e,[...t.metadata].map(([l,h])=>{const p=e.createString(`${l}`),m=e.createString(`${h}`);return se.startKeyValue(e),se.addKey(e,p),se.addValue(e,m),se.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Xe.startField(e),Xe.addType(e,i),Xe.addTypeType(e,a),Xe.addChildren(e,u),Xe.addNullable(e,!!t.nullable),n!==-1&&Xe.addName(e,n),r!==-1&&Xe.addDictionary(e,r),c!==-1&&Xe.addCustomMetadata(e,c),Xe.endField(e)}function pA(e,t){const n=t.nodes||[],i=t.buffers||[];si.startNodesVector(e,n.length);for(const a of n.slice().reverse())vr.encode(e,a);const r=e.endVector();si.startBuffersVector(e,i.length);for(const a of i.slice().reverse())qn.encode(e,a);const s=e.endVector();return si.startRecordBatch(e),si.addLength(e,new mr(t.length,0)),si.addNodes(e,r),si.addBuffers(e,s),si.endRecordBatch(e)}function mA(e,t){const n=Ye.encode(e,t.data);return Ar.startDictionaryBatch(e),Ar.addId(e,new mr(t.id,0)),Ar.addIsDelta(e,t.isDelta),Ar.addData(e,n),Ar.endDictionaryBatch(e)}function yA(e,t){return u0.createFieldNode(e,new mr(t.length,0),new mr(t.nullCount,0))}function gA(e,t){return o0.createBuffer(e,new mr(t.offset,0),new mr(t.length,0))}const _A=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),Al=e=>`Expected ${Et[e]} Message in stream, but was null or length 0.`,kl=e=>`Header pointer of flatbuffer-encoded ${Et[e]} Message is null or length 0.`,f0=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,d0=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`;class p0{constructor(t){this.source=t instanceof fo?t:new fo(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||t.value===-1&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?Wt:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(Al(t));return n.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const n=wt(this.source.read(t));if(n.byteLength<t)throw new Error(d0(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(t=!1){const n=Et.Schema,i=this.readMessage(n),r=i==null?void 0:i.header();if(t&&!r)throw new Error(kl(n));return r}readMetadataLength(){const t=this.source.read(Yo),n=t&&new Wr(t),i=(n==null?void 0:n.readInt32(0))||0;return{done:i===0,value:i}}readMetadata(t){const n=this.source.read(t);if(!n)return Wt;if(n.byteLength<t)throw new Error(f0(t,n.byteLength));return{done:!1,value:ve.decode(n)}}}class vA{constructor(t,n){this.source=t instanceof Qr?t:wp(t)?new po(t,n):new Qr(t)}[Symbol.asyncIterator](){return this}next(){return U(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done||t.value===-1&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?Wt:t})}throw(t){return U(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return U(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return U(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(Al(t));return n.value})}readMessageBody(t){return U(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);const n=wt(yield this.source.read(t));if(n.byteLength<t)throw new Error(d0(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(t=!1){return U(this,void 0,void 0,function*(){const n=Et.Schema,i=yield this.readMessage(n),r=i==null?void 0:i.header();if(t&&!r)throw new Error(kl(n));return r})}readMetadataLength(){return U(this,void 0,void 0,function*(){const t=yield this.source.read(Yo),n=t&&new Wr(t),i=(n==null?void 0:n.readInt32(0))||0;return{done:i===0,value:i}})}readMetadata(t){return U(this,void 0,void 0,function*(){const n=yield this.source.read(t);if(!n)return Wt;if(n.byteLength<t)throw new Error(f0(t,n.byteLength));return{done:!1,value:ve.decode(n)}})}}class bA extends p0{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof Mf?t:new Mf(t)}next(){const{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:ve.fromJSON(t.schema,Et.Schema)};if(this._dictionaryIndex<t.dictionaries.length){const n=t.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:ve.fromJSON(n,Et.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const n=t.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:ve.fromJSON(n,Et.RecordBatch)}}return this._body=[],Wt}readMessageBody(t){return n(this._body);function n(i){return(i||[]).reduce((r,s)=>[...r,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE&&[s.TYPE]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...n(s.children)],[])}}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(Al(t));return n.value}readSchema(){const t=Et.Schema,n=this.readMessage(t),i=n==null?void 0:n.header();if(!n||!i)throw new Error(kl(t));return i}}const Yo=4,pc="ARROW1",qs=new Uint8Array(pc.length);for(let e=0;e<pc.length;e+=1)qs[e]=pc.codePointAt(e);function Tl(e,t=0){for(let n=-1,i=qs.length;++n<i;)if(qs[n]!==e[t+n])return!1;return!0}const oa=qs.length,m0=oa+Yo,wA=oa*2+Yo;class sn extends vl{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const n=this._impl.open(t);return pr(n)?n.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return tn.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return tn.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof sn?t:ic(t)?EA(t):wp(t)?TA(t):pr(t)?(()=>U(this,void 0,void 0,function*(){return yield sn.from(yield t)}))():Sp(t)||Uc(t)||xp(t)||ns(t)?kA(new Qr(t)):AA(new fo(t))}static readAll(t){return t instanceof sn?t.isSync()?Wf(t):Yf(t):ic(t)||ArrayBuffer.isView(t)||na(t)||bp(t)?Wf(t):Yf(t)}}class vo extends sn{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return zn(this,arguments,function*(){yield X(yield*Ra(lr(this[Symbol.iterator]())))})}}class bo extends sn{constructor(t){super(t),this._impl=t}readAll(){var t,n;return U(this,void 0,void 0,function*(){const i=new Array;try{for(var r=lr(this),s;s=yield r.next(),!s.done;){const a=s.value;i.push(a)}}catch(a){t={error:a}}finally{try{s&&!s.done&&(n=r.return)&&(yield n.call(r))}finally{if(t)throw t.error}}return i})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class y0 extends vo{constructor(t){super(t),this._impl=t}}class SA extends bo{constructor(t){super(t),this._impl=t}}class g0{constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,n){const i=this._loadVectors(t,n,this.schema.fields),r=ut({type:new fe(this.schema.fields),length:t.length,children:i});return new Ne(this.schema,r)}_loadDictionaryBatch(t,n){const{id:i,isDelta:r}=t,{dictionaries:s,schema:a}=this,o=s.get(i);if(r||!o){const u=a.dictionaries.get(i),c=this._loadVectors(t.data,n,[u]);return(o&&r?o.concat(new mt(c)):new mt(c)).memoize()}return o.memoize()}_loadVectors(t,n,i){return new jm(n,t.nodes,t.buffers,this.dictionaries).visitMany(i)}}class wo extends g0{constructor(t,n){super(n),this._reader=ic(t)?new bA(this._handle=t):new p0(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=v0(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):Wt}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):Wt}next(){if(this.closed)return Wt;let t;const{_reader:n}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const i=t.header(),r=n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(i,r)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const i=t.header(),r=n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(i,r);this.dictionaries.set(i.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new El(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class So extends g0{constructor(t,n){super(n),this._reader=new vA(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return U(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return U(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=v0(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return U(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):Wt})}return(t){return U(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):Wt})}next(){return U(this,void 0,void 0,function*(){if(this.closed)return Wt;let t;const{_reader:n}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const i=t.header(),r=yield n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(i,r)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const i=t.header(),r=yield n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(i,r);this.dictionaries.set(i.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new El(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return U(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}}class _0 extends wo{constructor(t,n){super(t instanceof Pf?t:new Pf(t),n)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var n;if(this.closed)return null;this._footer||this.open();const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(i&&this._handle.seek(i.offset)){const r=this._reader.readMessage(Et.RecordBatch);if(r!=null&&r.isRecordBatch()){const s=r.header(),a=this._reader.readMessageBody(r.bodyLength);return this._loadRecordBatch(s,a)}}return null}_readDictionaryBatch(t){var n;const i=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(i&&this._handle.seek(i.offset)){const r=this._reader.readMessage(Et.DictionaryBatch);if(r!=null&&r.isDictionaryBatch()){const s=r.header(),a=this._reader.readMessageBody(r.bodyLength),o=this._loadDictionaryBatch(s,a);this.dictionaries.set(s.id,o)}}}_readFooter(){const{_handle:t}=this,n=t.size-m0,i=t.readInt32(n),r=t.readAt(n-i,i);return zs.decode(r)}_readNextMessageAndValidate(t){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(i&&this._handle.seek(i.offset))return this._reader.readMessage(t)}return null}}class xA extends So{constructor(t,...n){const i=typeof n[0]!="number"?n.shift():void 0,r=n[0]instanceof Map?n.shift():void 0;super(t instanceof po?t:new po(t,i),r)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(t){const n=Object.create(null,{open:{get:()=>super.open}});return U(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const i of this._footer.dictionaryBatches())i&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,t)})}readRecordBatch(t){var n;return U(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(i&&(yield this._handle.seek(i.offset))){const r=yield this._reader.readMessage(Et.RecordBatch);if(r!=null&&r.isRecordBatch()){const s=r.header(),a=yield this._reader.readMessageBody(r.bodyLength);return this._loadRecordBatch(s,a)}}return null})}_readDictionaryBatch(t){var n;return U(this,void 0,void 0,function*(){const i=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(i&&(yield this._handle.seek(i.offset))){const r=yield this._reader.readMessage(Et.DictionaryBatch);if(r!=null&&r.isDictionaryBatch()){const s=r.header(),a=yield this._reader.readMessageBody(r.bodyLength),o=this._loadDictionaryBatch(s,a);this.dictionaries.set(s.id,o)}}})}_readFooter(){return U(this,void 0,void 0,function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const n=t.size-m0,i=yield t.readInt32(n),r=yield t.readAt(n-i,i);return zs.decode(r)})}_readNextMessageAndValidate(t){return U(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(t)}return null})}}class IA extends wo{constructor(t,n){super(t,n)}_loadVectors(t,n,i){return new pE(n,t.nodes,t.buffers,this.dictionaries).visitMany(i)}}function v0(e,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:e.autoDestroy}function*Wf(e){const t=sn.from(e);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function Yf(e){return zn(this,arguments,function*(){const n=yield X(sn.from(e));try{if(!(yield X(n.open({autoDestroy:!1}))).closed)do yield yield X(n);while(!(yield X(n.reset().open())).closed)}finally{yield X(n.cancel())}})}function EA(e){return new vo(new IA(e))}function AA(e){const t=e.peek(oa+7&-8);return t&&t.byteLength>=4?Tl(t)?new y0(new _0(e.read())):new vo(new wo(e)):new vo(new wo(function*(){}()))}function kA(e){return U(this,void 0,void 0,function*(){const t=yield e.peek(oa+7&-8);return t&&t.byteLength>=4?Tl(t)?new y0(new _0(yield e.read())):new bo(new So(e)):new bo(new So(function(){return zn(this,arguments,function*(){})}()))})}function TA(e){return U(this,void 0,void 0,function*(){const{size:t}=yield e.stat(),n=new po(e,t);return t>=wA&&Tl(yield n.readAt(0,oa+7&-8))?new SA(new xA(n)):new bo(new So(n))})}class ee extends ct{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...t){const n=r=>r.flatMap(s=>Array.isArray(s)?n(s):s instanceof Ne?s.data.children:s.data),i=new ee;return i.visitMany(n(t)),i}visit(t){if(t instanceof mt)return this.visitMany(t.data),this;const{type:n}=t;if(!V.isDictionary(n)){const{length:i,nullCount:r}=t;if(i>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");V.isNull(n)||wn.call(this,r<=0?new Uint8Array(0):pl(t.offset,i,t.nullBitmap)),this.nodes.push(new vr(i,r))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function wn(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new qn(this._byteLength,t)),this._byteLength+=t,this}function NA(e){const{type:t,length:n,typeIds:i,valueOffsets:r}=e;if(wn.call(this,i),t.mode===We.Sparse)return mc.call(this,e);if(t.mode===We.Dense){if(e.offset<=0)return wn.call(this,r),mc.call(this,e);{const s=i.reduce((l,h)=>Math.max(l,h),i[0]),a=new Int32Array(s+1),o=new Int32Array(s+1).fill(-1),u=new Int32Array(n),c=jc(-r[0],n,r);for(let l,h,p=-1;++p<n;)(h=o[l=i[p]])===-1&&(h=o[l]=c[l]),u[p]=c[p]-h,++a[l];wn.call(this,u);for(let l,h=-1,p=t.children.length;++h<p;)if(l=e.children[h]){const m=t.typeIds[h],b=Math.min(n,a[m]);this.visit(l.slice(o[m],b))}}}return this}function OA(e){let t;return e.nullCount>=e.length?wn.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?wn.call(this,pl(e.offset,e.length,t)):wn.call(this,ro(e.values))}function Yi(e){return wn.call(this,e.values.subarray(0,e.length*e.stride))}function b0(e){const{length:t,values:n,valueOffsets:i}=e,r=i[0],s=i[t],a=Math.min(s-r,n.byteLength-r);return wn.call(this,jc(-i[0],t,i)),wn.call(this,n.subarray(r,r+a)),this}function Nl(e){const{length:t,valueOffsets:n}=e;return n&&wn.call(this,jc(n[0],t,n)),this.visit(e.children[0])}function mc(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}ee.prototype.visitBool=OA;ee.prototype.visitInt=Yi;ee.prototype.visitFloat=Yi;ee.prototype.visitUtf8=b0;ee.prototype.visitBinary=b0;ee.prototype.visitFixedSizeBinary=Yi;ee.prototype.visitDate=Yi;ee.prototype.visitTimestamp=Yi;ee.prototype.visitTime=Yi;ee.prototype.visitDecimal=Yi;ee.prototype.visitList=Nl;ee.prototype.visitStruct=mc;ee.prototype.visitUnion=NA;ee.prototype.visitInterval=Yi;ee.prototype.visitFixedSizeList=Nl;ee.prototype.visitMap=Nl;class w0 extends vl{constructor(t){super(),this._position=0,this._started=!1,this._sink=new Da,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Fe(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return pr(t)?t.then(n=>this.writeAll(n)):ns(t)?Fl(this,t):Rl(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof Da?this._sink=t:(this._sink=new Da,t&&Ex(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&Ax(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!hc(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof mi&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof Ne&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!hc(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof Ne?t instanceof El||this._writeRecordBatch(t):t instanceof mi?this.writeAll(t.batches):na(t)&&this.writeAll(t)}_writeMessage(t,n=8){const i=n-1,r=ve.encode(t),s=r.byteLength,a=this._writeLegacyIpcFormat?4:8,o=s+a+i&~i,u=o-s-a;return t.headerType===Et.RecordBatch?this._recordBatchBlocks.push(new Pi(o,t.bodyLength,this._position)):t.headerType===Et.DictionaryBatch&&this._dictionaryBlocks.push(new Pi(o,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(o-a)),s>0&&this._write(r),this._writePadding(u)}_write(t){if(this._started){const n=wt(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(ve.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(qs)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:i,bufferRegions:r,buffers:s}=ee.assemble(t),a=new Ye(t.numRows,i,r),o=ve.from(a,n);return this._writeDictionaries(t)._writeMessage(o)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,i=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:r,nodes:s,bufferRegions:a,buffers:o}=ee.assemble(new mt([t])),u=new Ye(t.length,s,a),c=new Kn(u,n,i),l=ve.from(c,r);return this._writeMessage(l)._writeBodyBuffers(o)}_writeBodyBuffers(t){let n,i,r;for(let s=-1,a=t.length;++s<a;)(n=t[s])&&(i=n.byteLength)>0&&(this._write(n),(r=(i+7&-8)-i)>0&&this._writePadding(r));return this}_writeDictionaries(t){for(let[n,i]of t.dictionaries){let r=this._dictionaryDeltaOffsets.get(n)||0;if(r===0||(i=i==null?void 0:i.slice(r)).length>0)for(const s of i.data)this._writeDictionaryBatch(s,n,r>0),r+=s.length}return this}}class Ol extends w0{static writeAll(t,n){const i=new Ol(n);return pr(t)?t.then(r=>i.writeAll(r)):ns(t)?Fl(i,t):Rl(i,t)}}class Cl extends w0{static writeAll(t){const n=new Cl;return pr(t)?t.then(i=>n.writeAll(i)):ns(t)?Fl(n,t):Rl(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=zs.encode(new zs(t,$e.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function Rl(e,t){let n=t;t instanceof mi&&(n=t.batches,e.reset(void 0,t.schema));for(const i of n)e.write(i);return e.finish()}function Fl(e,t){var n,i,r,s;return U(this,void 0,void 0,function*(){try{for(n=lr(t);i=yield n.next(),!i.done;){const a=i.value;e.write(a)}}catch(a){r={error:a}}finally{try{i&&!i.done&&(s=n.return)&&(yield s.call(n))}finally{if(r)throw r.error}}return e.finish()})}function S0(e,t="stream"){return(t==="stream"?Ol:Cl).writeAll(e).toUint8Array(!0)}var CA=Object.create,x0=Object.defineProperty,RA=Object.getOwnPropertyDescriptor,FA=Object.getOwnPropertyNames,BA=Object.getPrototypeOf,LA=Object.prototype.hasOwnProperty,DA=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),MA=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of FA(t))!LA.call(e,r)&&r!==n&&x0(e,r,{get:()=>t[r],enumerable:!(i=RA(t,r))||i.enumerable});return e},PA=(e,t,n)=>(n=e!=null?CA(BA(e)):{},MA(t||!e||!e.__esModule?x0(n,"default",{value:e,enumerable:!0}):n,e)),UA=DA((e,t)=>{t.exports=Worker}),VA=(e=>(e[e.UNDEFINED=0]="UNDEFINED",e[e.AUTOMATIC=1]="AUTOMATIC",e[e.READ_ONLY=2]="READ_ONLY",e[e.READ_WRITE=3]="READ_WRITE",e))(VA||{}),jA=(e=>(e[e.NONE=0]="NONE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARNING=3]="WARNING",e[e.ERROR=4]="ERROR",e))(jA||{}),$A=(e=>(e[e.NONE=0]="NONE",e[e.CONNECT=1]="CONNECT",e[e.DISCONNECT=2]="DISCONNECT",e[e.OPEN=3]="OPEN",e[e.QUERY=4]="QUERY",e[e.INSTANTIATE=5]="INSTANTIATE",e))($A||{}),zA=(e=>(e[e.NONE=0]="NONE",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR",e[e.START=3]="START",e[e.RUN=4]="RUN",e[e.CAPTURE=5]="CAPTURE",e))(zA||{}),qA=(e=>(e[e.NONE=0]="NONE",e[e.WEB_WORKER=1]="WEB_WORKER",e[e.NODE_WORKER=2]="NODE_WORKER",e[e.BINDINGS=3]="BINDINGS",e[e.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",e))(qA||{}),HA=class{constructor(e=2){this.level=e}log(e){e.level>=this.level&&console.log(e)}},WA=(e=>(e[e.SUCCESS=0]="SUCCESS",e))(WA||{}),YA=class{constructor(e,t){this._bindings=e,this._conn=t}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(e){return e(this._bindings,this._conn)}async query(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.runQuery(this._conn,e),n=sn.from(t);return console.assert(n.isSync(),"Reader is not sync"),console.assert(n.isFile(),"Reader is not file"),new mi(n)}async send(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.startPendingQuery(this._conn,e);for(;t==null;)t=await this._bindings.pollPendingQuery(this._conn);let n=new I0(this._bindings,this._conn,t),i=await sn.from(n);return console.assert(i.isAsync()),console.assert(i.isStream()),i}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(e){return await this._bindings.getTableNames(this._conn,e)}async prepare(e){let t=await this._bindings.createPrepared(this._conn,e);return new GA(this._bindings,this._conn,t)}async insertArrowTable(e,t){let n=S0(e,"stream");await this.insertArrowFromIPCStream(n,t)}async insertArrowFromIPCStream(e,t){await this._bindings.insertArrowFromIPCStream(this._conn,e,t)}async insertCSVFromPath(e,t){await this._bindings.insertCSVFromPath(this._conn,e,t)}async insertJSONFromPath(e,t){await this._bindings.insertJSONFromPath(this._conn,e,t)}},I0=class{constructor(e,t,n){this.db=e,this.conn=t,this.header=n,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let e;return this._inFlight!=null?(e=await this._inFlight,this._inFlight=null):e=await this.db.fetchQueryResults(this.conn),this._depleted=e.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:e}}[Symbol.asyncIterator](){return this}},GA=class{constructor(e,t,n){this.bindings=e,this.connectionId=t,this.statementId=n}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...e){let t=await this.bindings.runPrepared(this.connectionId,this.statementId,e),n=sn.from(t);return console.assert(n.isSync()),console.assert(n.isFile()),new mi(n)}async send(...e){let t=await this.bindings.sendPrepared(this.connectionId,this.statementId,e),n=new I0(this.bindings,this.connectionId,t),i=await sn.from(n);return console.assert(i.isAsync()),console.assert(i.isStream()),i}},KA=(e=>(e.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",e.CLOSE_PREPARED="CLOSE_PREPARED",e.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",e.CONNECT="CONNECT",e.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",e.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",e.CREATE_PREPARED="CREATE_PREPARED",e.DISCONNECT="DISCONNECT",e.DROP_FILE="DROP_FILE",e.DROP_FILES="DROP_FILES",e.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",e.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",e.FLUSH_FILES="FLUSH_FILES",e.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",e.GET_TABLE_NAMES="GET_TABLE_NAMES",e.GET_VERSION="GET_VERSION",e.GLOB_FILE_INFOS="GLOB_FILE_INFOS",e.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",e.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",e.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",e.INSTANTIATE="INSTANTIATE",e.OPEN="OPEN",e.PING="PING",e.POLL_PENDING_QUERY="POLL_PENDING_QUERY",e.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",e.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",e.REGISTER_FILE_URL="REGISTER_FILE_URL",e.RESET="RESET",e.RUN_PREPARED="RUN_PREPARED",e.RUN_QUERY="RUN_QUERY",e.SEND_PREPARED="SEND_PREPARED",e.START_PENDING_QUERY="START_PENDING_QUERY",e.TOKENIZE="TOKENIZE",e))(KA||{}),QA=(e=>(e.CONNECTION_INFO="CONNECTION_INFO",e.ERROR="ERROR",e.FEATURE_FLAGS="FEATURE_FLAGS",e.FILE_BUFFER="FILE_BUFFER",e.FILE_INFOS="FILE_INFOS",e.FILE_SIZE="FILE_SIZE",e.FILE_STATISTICS="FILE_STATISTICS",e.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",e.LOG="LOG",e.OK="OK",e.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",e.QUERY_PLAN="QUERY_PLAN",e.QUERY_RESULT="QUERY_RESULT",e.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",e.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",e.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",e.REGISTERED_FILE="REGISTERED_FILE",e.SCRIPT_TOKENS="SCRIPT_TOKENS",e.SUCCESS="SUCCESS",e.TABLE_NAMES="TABLE_NAMES",e.VERSION_STRING="VERSION_STRING",e))(QA||{}),dt=class{constructor(t,n){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=t,this.data=n,this.promise=new Promise((i,r)=>{this.promiseResolver=i,this.promiseRejecter=r})}};function Ua(e){switch(e.typeId){case y.Binary:return{sqlType:"binary"};case y.Bool:return{sqlType:"bool"};case y.Date:return{sqlType:"date"};case y.DateDay:return{sqlType:"date32[d]"};case y.DateMillisecond:return{sqlType:"date64[ms]"};case y.Decimal:{let t=e;return{sqlType:"decimal",precision:t.precision,scale:t.scale}}case y.Float:return{sqlType:"float"};case y.Float16:return{sqlType:"float16"};case y.Float32:return{sqlType:"float32"};case y.Float64:return{sqlType:"float64"};case y.Int:return{sqlType:"int32"};case y.Int16:return{sqlType:"int16"};case y.Int32:return{sqlType:"int32"};case y.Int64:return{sqlType:"int64"};case y.Uint16:return{sqlType:"uint16"};case y.Uint32:return{sqlType:"uint32"};case y.Uint64:return{sqlType:"uint64"};case y.Uint8:return{sqlType:"uint8"};case y.IntervalDayTime:return{sqlType:"interval[dt]"};case y.IntervalYearMonth:return{sqlType:"interval[m]"};case y.List:return{sqlType:"list",valueType:Ua(e.valueType)};case y.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:e.byteWidth};case y.Null:return{sqlType:"null"};case y.Utf8:return{sqlType:"utf8"};case y.Struct:return{sqlType:"struct",fields:e.children.map(t=>yc(t.name,t.type))};case y.Map:{let t=e;return{sqlType:"map",keyType:Ua(t.keyType),valueType:Ua(t.valueType)}}case y.Time:return{sqlType:"time[s]"};case y.TimeMicrosecond:return{sqlType:"time[us]"};case y.TimeMillisecond:return{sqlType:"time[ms]"};case y.TimeNanosecond:return{sqlType:"time[ns]"};case y.TimeSecond:return{sqlType:"time[s]"};case y.Timestamp:return{sqlType:"timestamp",timezone:e.timezone||void 0};case y.TimestampSecond:return{sqlType:"timestamp[s]",timezone:e.timezone||void 0};case y.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:e.timezone||void 0};case y.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:e.timezone||void 0};case y.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:e.timezone||void 0}}throw new Error(`unsupported arrow type: ${e.toString()}`)}function yc(e,t){let n=Ua(t);return n.name=e,n}var JA=new TextEncoder,XA=class{constructor(e,t=null){this._onInstantiationProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=e,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),t!=null&&this.attach(t)}get logger(){return this._logger}attach(e){this._worker=e,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((t,n)=>{this._workerShutdownResolver=t})}detach(){!this._worker||(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){!this._worker||(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(e,t=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let n=this._nextMessageId++;return this._pendingRequests.set(n,e),this._worker.postMessage({messageId:n,type:e.type,data:e.data},t),await e.promise}onMessage(e){let t=e.data;switch(t.type){case"LOG":{this._logger.log(t.data);return}case"INSTANTIATE_PROGRESS":{for(let i of this._onInstantiationProgress)i(t.data);return}}let n=this._pendingRequests.get(t.requestId);if(!n){console.warn(`unassociated response: [${t.requestId}, ${t.type.toString()}]`);return}if(this._pendingRequests.delete(t.requestId),t.type=="ERROR"){let i=new Error(t.data.message);i.name=t.data.name,i.stack=t.data.stack,n.promiseRejecter(i);return}switch(n.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(t.type=="OK"){n.promiseResolver(t.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],t.type=="OK"){n.promiseResolver(t.data);return}break;case"GLOB_FILE_INFOS":if(t.type=="FILE_INFOS"){n.promiseResolver(t.data);return}break;case"GET_VERSION":if(t.type=="VERSION_STRING"){n.promiseResolver(t.data);return}break;case"GET_FEATURE_FLAGS":if(t.type=="FEATURE_FLAGS"){n.promiseResolver(t.data);return}break;case"GET_TABLE_NAMES":if(t.type=="TABLE_NAMES"){n.promiseResolver(t.data);return}break;case"TOKENIZE":if(t.type=="SCRIPT_TOKENS"){n.promiseResolver(t.data);return}break;case"COPY_FILE_TO_BUFFER":if(t.type=="FILE_BUFFER"){n.promiseResolver(t.data);return}break;case"EXPORT_FILE_STATISTICS":if(t.type=="FILE_STATISTICS"){n.promiseResolver(t.data);return}break;case"CONNECT":if(t.type=="CONNECTION_INFO"){n.promiseResolver(t.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(t.type=="QUERY_RESULT"){n.promiseResolver(t.data);return}break;case"SEND_PREPARED":if(t.type=="QUERY_RESULT_HEADER"){n.promiseResolver(t.data);return}break;case"START_PENDING_QUERY":if(t.type=="QUERY_RESULT_HEADER_OR_NULL"){n.promiseResolver(t.data);return}break;case"POLL_PENDING_QUERY":if(t.type=="QUERY_RESULT_HEADER_OR_NULL"){n.promiseResolver(t.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],t.type=="SUCCESS"){n.promiseResolver(t.data);return}break;case"FETCH_QUERY_RESULTS":if(t.type=="QUERY_RESULT_CHUNK"){n.promiseResolver(t.data);return}break;case"CREATE_PREPARED":if(t.type=="PREPARED_STATEMENT_ID"){n.promiseResolver(t.data);return}break}n.promiseRejecter(new Error(`unexpected response type: ${t.type.toString()}`))}onError(e){console.error(e),console.error(`error in duckdb worker: ${e.message}`),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn(`worker terminated with ${this._pendingRequests.size} pending requests`);return}this._pendingRequests.clear()}async reset(){let e=new dt("RESET",null);return await this.postTask(e)}async ping(){let e=new dt("PING",null);await this.postTask(e)}async dropFile(e){let t=new dt("DROP_FILE",e);return await this.postTask(t)}async dropFiles(){let e=new dt("DROP_FILES",null);return await this.postTask(e)}async flushFiles(){let e=new dt("FLUSH_FILES",null);return await this.postTask(e)}async instantiate(e,t=null,n=i=>{}){this._onInstantiationProgress.push(n);let i=new dt("INSTANTIATE",[e,t]);return await this.postTask(i)}async getVersion(){let e=new dt("GET_VERSION",null);return await this.postTask(e)}async getFeatureFlags(){let e=new dt("GET_FEATURE_FLAGS",null);return await this.postTask(e)}async open(e){let t=new dt("OPEN",e);await this.postTask(t)}async tokenize(e){let t=new dt("TOKENIZE",e);return await this.postTask(t)}async connectInternal(){let e=new dt("CONNECT",null);return await this.postTask(e)}async connect(){let e=await this.connectInternal();return new YA(this,e)}async disconnect(e){let t=new dt("DISCONNECT",e);await this.postTask(t)}async runQuery(e,t){let n=new dt("RUN_QUERY",[e,t]);return await this.postTask(n)}async startPendingQuery(e,t){let n=new dt("START_PENDING_QUERY",[e,t]);return await this.postTask(n)}async pollPendingQuery(e){let t=new dt("POLL_PENDING_QUERY",e);return await this.postTask(t)}async cancelPendingQuery(e){let t=new dt("CANCEL_PENDING_QUERY",e);return await this.postTask(t)}async fetchQueryResults(e){let t=new dt("FETCH_QUERY_RESULTS",e);return await this.postTask(t)}async getTableNames(e,t){let n=new dt("GET_TABLE_NAMES",[e,t]);return await this.postTask(n)}async createPrepared(e,t){let n=new dt("CREATE_PREPARED",[e,t]);return await this.postTask(n)}async closePrepared(e,t){let n=new dt("CLOSE_PREPARED",[e,t]);await this.postTask(n)}async runPrepared(e,t,n){let i=new dt("RUN_PREPARED",[e,t,n]);return await this.postTask(i)}async sendPrepared(e,t,n){let i=new dt("SEND_PREPARED",[e,t,n]);return await this.postTask(i)}async globFiles(e){let t=new dt("GLOB_FILE_INFOS",e);return await this.postTask(t)}async registerFileText(e,t){let n=JA.encode(t);await this.registerFileBuffer(e,n)}async registerFileURL(e,t,n,i){t===void 0&&(t=e);let r=new dt("REGISTER_FILE_URL",[e,t,n,i]);await this.postTask(r)}async registerEmptyFileBuffer(e){let t=new dt("REGISTER_FILE_BUFFER",[e,new Uint8Array]);await this.postTask(t)}async registerFileBuffer(e,t){let n=new dt("REGISTER_FILE_BUFFER",[e,t]);await this.postTask(n,[t.buffer])}async registerFileHandle(e,t,n,i){let r=new dt("REGISTER_FILE_HANDLE",[e,t,n,i]);await this.postTask(r,[])}async collectFileStatistics(e,t){let n=new dt("COLLECT_FILE_STATISTICS",[e,t]);await this.postTask(n,[])}async exportFileStatistics(e){let t=new dt("EXPORT_FILE_STATISTICS",e);return await this.postTask(t,[])}async copyFileToBuffer(e){let t=new dt("COPY_FILE_TO_BUFFER",e);return await this.postTask(t)}async copyFileToPath(e,t){let n=new dt("COPY_FILE_TO_PATH",[e,t]);await this.postTask(n)}async insertArrowFromIPCStream(e,t,n){if(t.length==0)return;let i=new dt("INSERT_ARROW_FROM_IPC_STREAM",[e,t,n]);await this.postTask(i,[t.buffer])}async insertCSVFromPath(e,t,n){if(n.columns!==void 0){let r=[];for(let s in n.columns){let a=n.columns[s];r.push(yc(s,a))}n.columnsFlat=r,delete n.columns}let i=new dt("IMPORT_CSV_FROM_PATH",[e,t,n]);await this.postTask(i)}async insertJSONFromPath(e,t,n){if(n.columns!==void 0){let r=[];for(let s in n.columns){let a=n.columns[s];r.push(yc(s,a))}n.columnsFlat=r,delete n.columns}let i=new dt("IMPORT_JSON_FROM_PATH",[e,t,n]);await this.postTask(i)}},ZA=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),t2=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),e2=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),n2=()=>(async e=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),i2={name:"@duckdb/duckdb-wasm",version:"1.26.0",description:"DuckDB powered by WebAssembly",license:"MIT",repository:{type:"git",url:"https://github.com/duckdb/duckdb-wasm.git"},keywords:["sql","duckdb","relational","database","data","query","wasm","analytics","olap","arrow","parquet","json","csv"],dependencies:{"apache-arrow":"^11.0.0"},devDependencies:{"@types/emscripten":"^1.39.6","@types/jasmine":"^4.3.1","@typescript-eslint/eslint-plugin":"^5.53.0","@typescript-eslint/parser":"^5.49.0",esbuild:"^0.15.12",eslint:"^8.35.0","eslint-plugin-jasmine":"^4.1.3","eslint-plugin-react":"^7.32.2","fast-glob":"^3.2.12",jasmine:"^4.5.0","jasmine-core":"^5.0.0","jasmine-spec-reporter":"^7.0.0","js-sha256":"^0.9.0",karma:"^6.4.2","karma-chrome-launcher":"^3.1.1","karma-coverage":"^2.2.0","karma-firefox-launcher":"^2.1.2","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.0.0","karma-sourcemap-loader":"^0.3.8","karma-spec-reporter":"^0.0.36","make-dir":"^3.1.0",nyc:"^15.1.0",prettier:"^2.8.4",puppeteer:"^19.10.0",rimraf:"^4.3.0",s3rver:"^3.7.1",typedoc:"^0.23.27",typescript:"^4.8.4","wasm-feature-detect":"^1.5.1","web-worker":"^1.2.0"},scripts:{"build:debug":"node bundle.mjs debug && tsc --emitDeclarationOnly","build:release":"node bundle.mjs release && tsc --emitDeclarationOnly",docs:"typedoc",report:"node ./coverage.mjs","test:node":"node --enable-source-maps --experimental-wasm-eh ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:debug":"node --inspect-brk --enable-source-maps --experimental-wasm-eh ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:coverage":"nyc -r json --report-dir ./coverage/node node --experimental-wasm-eh ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:firefox":"karma start ./karma/tests-firefox.cjs","test:chrome":"karma start ./karma/tests-chrome.cjs","test:chrome:eh":"karma start ./karma/tests-chrome-eh.cjs","test:chrome:coverage":"karma start ./karma/tests-chrome-coverage.cjs","test:browser":"karma start ./karma/tests-all.cjs","test:browser:debug":"karma start ./karma/tests-debug.cjs",test:"npm run test:chrome && npm run test:node","test:coverage":"npm run test:chrome:coverage && npm run test:node:coverage && npm run report",lint:"eslint src test"},files:["dist","!dist/types/test"],main:"dist/duckdb-browser.cjs",module:"dist/duckdb-browser.mjs",types:"dist/duckdb-browser.d.ts",jsdelivr:"dist/duckdb-browser.cjs",unpkg:"dist/duckdb-browser.mjs",sideEffects:!1,browser:{fs:!1,path:!1,perf_hooks:!1,os:!1,worker_threads:!1},exports:{"./dist/duckdb-mvp.wasm":"./dist/duckdb-mvp.wasm","./dist/duckdb-eh.wasm":"./dist/duckdb-eh.wasm","./dist/duckdb-coi.wasm":"./dist/duckdb-coi.wasm","./dist/duckdb-browser":"./dist/duckdb-browser.mjs","./dist/duckdb-browser.cjs":"./dist/duckdb-browser.cjs","./dist/duckdb-browser.mjs":"./dist/duckdb-browser.mjs","./dist/duckdb-browser-blocking":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.mjs":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.cjs":"./dist/duckdb-browser-blocking.cjs","./dist/duckdb-browser-coi.pthread.worker.js":"./dist/duckdb-browser-coi.pthread.worker.js","./dist/duckdb-browser-coi.worker.js":"./dist/duckdb-browser-coi.worker.js","./dist/duckdb-browser-eh.worker.js":"./dist/duckdb-browser-eh.worker.js","./dist/duckdb-browser-mvp.worker.js":"./dist/duckdb-browser-mvp.worker.js","./dist/duckdb-node":"./dist/duckdb-node.cjs","./dist/duckdb-node.cjs":"./dist/duckdb-node.cjs","./dist/duckdb-node-blocking":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-blocking.cjs":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-eh.worker.cjs":"./dist/duckdb-node-eh.worker.cjs","./dist/duckdb-node-mvp.worker.cjs":"./dist/duckdb-node-mvp.worker.cjs","./blocking":{browser:{types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},node:{types:"./dist/duckdb-node-blocking.d.ts",require:"./dist/duckdb-node-blocking.cjs",import:"./dist/duckdb-node-blocking.cjs"},types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},".":{browser:{types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"},node:{types:"./dist/duckdb-node.d.ts",import:"./dist/duckdb-node.cjs",require:"./dist/duckdb-node.cjs"},types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"}}},Bl=i2.version.split(".");Bl[0];Bl[1];Bl[2];var r2=()=>typeof navigator>"u",Ru=null,Fu=null,Bu=null,Lu=null,Du=null;async function s2(){return Ru==null&&(Ru=typeof BigInt64Array<"u"),Fu==null&&(Fu=await t2()),Bu==null&&(Bu=await n2()),Lu==null&&(Lu=await e2()),Du==null&&(Du=await ZA()),{bigInt64Array:Ru,crossOriginIsolated:r2()||globalThis.crossOriginIsolated||!1,wasmExceptions:Fu,wasmSIMD:Lu,wasmThreads:Bu,wasmBulkMemory:Du}}async function a2(e){let t=await s2();if(t.wasmExceptions){if(t.wasmSIMD&&t.wasmThreads&&t.crossOriginIsolated&&e.coi)return{mainModule:e.coi.mainModule,mainWorker:e.coi.mainWorker,pthreadWorker:e.coi.pthreadWorker};if(e.eh)return{mainModule:e.eh.mainModule,mainWorker:e.eh.mainWorker,pthreadWorker:null}}return{mainModule:e.mvp.mainModule,mainWorker:e.mvp.mainWorker,pthreadWorker:null}}PA(UA());function o2(){let e=new TextDecoder;return t=>(typeof SharedArrayBuffer<"u"&&t.buffer instanceof SharedArrayBuffer&&(t=new Uint8Array(t)),e.decode(t))}o2();var u2=(e=>(e[e.BUFFER=0]="BUFFER",e[e.NODE_FS=1]="NODE_FS",e[e.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",e[e.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",e[e.HTTP=4]="HTTP",e[e.S3=5]="S3",e))(u2||{});const c2=""+new URL("../assets/duckdb-mvp.a4aa3c03.wasm",import.meta.url).href,l2=""+new URL("../assets/duckdb-browser-mvp.worker.91331f4b.js",import.meta.url).href,h2=""+new URL("../assets/duckdb-eh.13ec0755.wasm",import.meta.url).href,f2=""+new URL("../assets/duckdb-browser-eh.worker.80bdeff3.js",import.meta.url).href;class d2 extends wi{constructor(t){super(),this.db=null,this.conn=null,this.name=t.name,this.url=t.url}async init(t){const i=await a2({mvp:{mainModule:c2,mainWorker:l2},eh:{mainModule:h2,mainWorker:f2}}),r=new Worker(i.mainWorker),s=new HA;this.db=new XA(s,r),await this.db.instantiate(i.mainModule,i.pthreadWorker),this.conn=await this.db.connect()}async register(t,n){await this.db.registerFileURL(t,n,4,!1)}async query(t){return await this.conn.query(t)}async parquetLoad(t){const n=`${k_}/${t.parquet}`;console.log("parquet_name and registration path:",t.parquet,n),await this.register(t.parquet,n);const i=`CREATE TABLE ${t.name} AS SELECT * FROM parquet_scan('${t.parquet}')`;console.log("parquet loading query:",i),await this.query(i)}async dbLoad(){const t="IMPORT DATABASE ''";console.log("database load is:",t),await this.query(t)}async loadParquets(t){for(const n of t)await this.parquetLoad(n)}async execute(t,...n){let i=await this.conn.query(t),r=i.toArray().map(Object.fromEntries);return r.columns=i.schema.fields.map(s=>s.name),console.log("duckdb.execute",t,r,...n),this.emit("data",r,...n),this.emit("debug",r),r}}var Ti=(e=>(e.LITERAL="literal",e.AST="ast",e.LIST="list",e.ANY="any",e.OPT="opt",e.FIXEDMULTI="fixedmulti",e.MULTI="multi",e))(Ti||{});let Gf=fv(e=>e.length>0);class p2{constructor(t){this.binding={},this.spec={},this.spec=t}update(t){return this.binding=Fo(this.binding,t),this}toSQL(){return gc(this.binding,this.spec)}}function gc(e,t){let n=t.children??[],i=Bv(gc,[e]),r=[],s;switch(t==null?void 0:t.type){case Ti.LITERAL:return t.value;case Ti.AST:return r=n.map(i),Gf(r).join("");case Ti.LIST:return r=n.map(i),Gf(r).join(t.delim);case Ti.ANY:if(s=e[t.id]??t.default??0,s=="inf")return"9e999";if(s=="-inf")return"-9e999";let a=+s;return Number.isNaN(a)?`'${s}'`:s<0||s>=n.length?a:i(n[a]);case Ti.OPT:return s=e[t.id]??t.default??0,Sv(s,[1,"selected"])?i(n[0]):"";case Ti.FIXEDMULTI:case Ti.MULTI:let o=e[t.id]??t.default??[];return Ha(Array,o)||(o=[o]),o.map(u=>gc(u,n[0])).join(t.delim??"");default:return""}}class m2 extends wi{constructor(t){super(),this.spec={},this.dt=null,this.backend=null,this.bindings={},this.spec=t,this.dt=new p2(t.difftree),this.backend=Ha(String,t.backend)?A_(gS)[t.backend]:t.backend,this.backend&&this.backend.on("data",n=>{this.emit("data",n)})}merge(t,n){return(void 0)(t,n)}async execute(t,n){Ha(Array,t)&&(t=t[0]??{});const i=this.dt.update(t).toSQL();if(console.log("ClientDT.execute",i,t),this.emit("debug",i),this.backend)return this.backend.execute(i,n)}}class y2 extends wi{constructor(t){super(),this.q=[],this.q=t.data??[]}async execute(t,n){this.emit("data",t??this.q,n)}}class g2 extends wi{constructor(t){super();let n=t.attrs??[];this.gen=i=>{let r=n.map(s=>[s,Math.ceil(Math.random()*100)]);return r.push(["id",i]),jd(r)}}async execute(t,...n){this.emit("data",Pv(this.gen,10),...n)}}class _2 extends wi{constructor(t){super(),this.backend=t.backend,this.query=t.query,this.name=t.name,this.params=t.params,this.backend.on("data",(n,i)=>{i==this.name&&this.emit("data",n,this.name)})}prepareQuery(t,n){let i,r=t;console.log("currQuery is,",r);for(const s in n)i="var("+s+")",r=r.replaceAll(i,n[s]);return r}async execute(t){console.log("QueryBackend name ",this.name," with args ",t);for(const i in t){console.log("check",t[i]);let r=t[i];this.params=Fo(this.params,r)}console.log("QueryBackend name ",this.name," now has params ",this.params);let n=this.prepareQuery(this.query,this.params);return this.emit("debug",n),console.log("QueryBackend calling to its own backend"),this.backend.execute(n,this.name)}}const St=Array.isArray;function Le(e){return e!=null?St(e)?e:[e]:[]}function v2(e=0,t=1/0){return`${Kf(e)} < row_number() && row_number() <= ${Kf(t)}`}function Kf(e){return e<0?`count() + ${e}`:e}class E0{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(v2(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Le(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,i){return this.__pivot(this,t,n,i)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...i){return this.__lookup(this,t,n,i.flat())}join(t,n,i,r){return this.__join(this,t,n,i,r)}join_left(t,n,i,r){const s={...r,left:!0,right:!1};return this.__join(this,t,n,i,s)}join_right(t,n,i,r){const s={...r,left:!1,right:!0};return this.__join(this,t,n,i,s)}join_full(t,n,i,r){const s={...r,left:!0,right:!0};return this.__join(this,t,n,i,s)}cross(t,n,i){return this.__cross(this,t,n,i)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function et(e){throw Error(e)}function we(e){return typeof e=="number"}function Ut(e){return typeof e=="function"}function Go(e,t){const n=Array(e);if(Ut(t))for(let i=0;i<e;++i)n[i]=t(i);else n.fill(t);return n}class b2 extends E0{constructor(t,n,i,r,s,a,o){super(o),this._names=Object.freeze(t),this._data=i,this._total=n,this._nrows=r?r.count():n,this._mask=n!==this._nrows&&r||null,this._group=s||null,this._order=a||null}create(t){et("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){et("Not implemented")}*values(t){const n=this.getter(t),i=this.numRows();for(let r=0;r<i;++r)yield n(r)}get(t,n=0){et("Not implemented")}getter(t){et("Not implemented")}objects(t){et("Not implemented")}object(t){et("Not implemented")}[Symbol.iterator](){et("Not implemented")}print(t={}){we(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),i=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(i),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),i=new Uint32Array(n),r=this.isOrdered(),s=this.mask();let a=-1;if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))i[++a]=o;else for(let o=0;o<n;++o)i[++a]=o;if(t&&r){const o=this._order,u=this._data;i.sort((c,l)=>o(c,l,u))}return(t||!r)&&(this._index=i),i}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:i}=this._group,r=Go(i,()=>[]),s=this._index,a=this.mask(),o=this.numRows();if(s&&this.isOrdered())for(let u=0,c;u<o;++u)c=s[u],r[n[c]].push(c);else if(a)for(let u=a.next(0);u>=0;u=a.next(u+1))r[n[u]].push(u);else for(let u=0;u<o;++u)r[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,c=this._data;for(let l=0;l<i;++l)r[l].sort((h,p)=>u(h,p,c))}return(t||!this.isOrdered())&&(this._partitions=r),r}scan(t,n,i=1/0,r=0){const s=this._mask,a=this._nrows,o=this._data;let u=r||0;if(u>a)return;const c=Math.min(a,u+i),l=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const h=this.indices(),p=this._data;for(;u<c;++u)t(h[u],p,l)}else if(s){let h=c-u+1;for(u=s.nth(u);--h&&u>-1;u=s.next(u+1))t(u,o,l)}else for(;u<c;++u)t(u,o,l)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const i=[],r=this.numRows();return t=Math.max(0,t+(t<0?r:0)),n=Math.min(r,Math.max(0,n+(n<0?r:0))),this.scan(s=>i.push(s),!0,n-t,t),this.reify(i)}reduce(t){return this.__reduce(this,t)}}let w2=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},S2=function(e){return e&&Ut(e.get)?e:new w2(e)};function yi(e){return e instanceof Date}function ye(e){return e===Object(e)}function xo(e){return e instanceof RegExp}function pe(e){return typeof e=="string"}function x2(e,t){const n=i=>et(`Illegal argument type: ${i||typeof e}`);return e instanceof Map?Qf(e.entries(),t):yi(e)?n("Date"):xo(e)?n("RegExp"):pe(e)?n():St(e)?I2(e,t):Ut(e[Symbol.iterator])?E2(e,t):ye(e)?Qf(Object.entries(e),t):n()}function Qf(e,t=["key","value"]){const n=[],i=[];for(const[s,a]of e)n.push(s),i.push(a);const r={};return t[0]&&(r[t[0]]=n),t[1]&&(r[t[1]]=i),r}function I2(e,t){const n=e.length,i={},r=s=>i[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(r),a=s.length;for(let o=0;o<n;++o){const u=e[o];for(let c=0;c<a;++c)s[c][o]=u[t[c]]}}else t&&t.forEach(r);return i}function E2(e,t){const n={},i=a=>n[a]=[];let r,s;for(const a of e){r||(t=t||Object.keys(a),r=t.map(i),s=r.length);for(let o=0;o<s;++o)r[o].push(a[t[o]])}return!r&&t&&t.forEach(i),n}const{hasOwnProperty:A2}=Object.prototype;function An(e,t){return A2.call(e,t)}function Ge(e){return e?new Jf({...e.data()},e.columnNames()):new Jf}class Jf{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return An(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const vt=void 0,k2=Object.getPrototypeOf(Int8Array);function ua(e){return e instanceof k2}function or(e){return St(e)||ua(e)}function _n(e){return e!=null&&e===e}const gs=e=>or(e)||pe(e),T2={compact:e=>or(e)?e.filter(t=>_n(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>gs(e)?e.includes(t,n):!1,indexof:(e,t)=>gs(e)?e.indexOf(t):-1,join:(e,t)=>or(e)?e.join(t):vt,lastindexof:(e,t)=>gs(e)?e.lastIndexOf(t):-1,length:e=>gs(e)?e.length:0,pluck:(e,t)=>or(e)?e.map(n=>_n(n)?n[t]:vt):vt,reverse:e=>or(e)?e.slice().reverse():pe(e)?e.split("").reverse().join(""):vt,slice:(e,t,n)=>gs(e)?e.slice(t,n):vt};function N2(e,t,n,i,r){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+i*Math.floor(1e-14+(e-t)/i+(r||0)))}function Va(e,t,n="0"){const i=e+"",r=i.length;return r<t?Array(t-r+1).join(n)+i:i}const Cn=e=>(e<10?"0":"")+e,O2=e=>e<0?"-"+Va(-e,6):e>9999?"+"+Va(e,6):Va(e,4);function A0(e,t,n,i,r,s,a,o,u){const c=o?"Z":"";return O2(e)+"-"+Cn(t+1)+"-"+Cn(n)+(!u||a?"T"+Cn(i)+":"+Cn(r)+":"+Cn(s)+"."+Va(a,3)+c:s?"T"+Cn(i)+":"+Cn(r)+":"+Cn(s)+c:r||i||!o?"T"+Cn(i)+":"+Cn(r)+c:"")}function k0(e,t){return isNaN(e)?"Invalid Date":A0(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function Ko(e,t){return isNaN(e)?"Invalid Date":A0(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const C2=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function R2(e){return e.match(C2)}function F2(e,t=Date.parse){return R2(e)?t(e):e}const T0=6e4,N0=864e5,O0=6048e5,Gt=new Date,Kt=new Date,Xt=e=>(Gt.setTime(typeof e=="string"?F2(e):e),Gt);function B2(e,t,n,i,r,s,a){return arguments.length?new Date(e,t||0,n??1,i||0,r||0,s||0,a||0):new Date(Date.now())}function L2(e,t,n,i,r,s,a){return arguments.length?new Date(Date.UTC(e,t||0,n??1,i||0,r||0,s||0,a||0)):new Date(Date.now())}function D2(e){Kt.setTime(+e),Kt.setHours(0,0,0,0),Gt.setTime(+Kt),Gt.setMonth(0),Gt.setDate(1);const t=(Kt.getTimezoneOffset()-Gt.getTimezoneOffset())*T0;return Math.floor(1+(Kt-Gt-t)/N0)}function M2(e){Kt.setTime(+e),Kt.setUTCHours(0,0,0,0);const t=Date.UTC(Kt.getUTCFullYear(),0,1);return Math.floor(1+(Kt-t)/N0)}function P2(e,t){const n=t||0;Kt.setTime(+e),Kt.setDate(Kt.getDate()-(Kt.getDay()+7-n)%7),Kt.setHours(0,0,0,0),Gt.setTime(+e),Gt.setMonth(0),Gt.setDate(1),Gt.setDate(1-(Gt.getDay()+7-n)%7),Gt.setHours(0,0,0,0);const i=(Kt.getTimezoneOffset()-Gt.getTimezoneOffset())*T0;return Math.floor((1+(Kt-Gt)-i)/O0)}function U2(e,t){const n=t||0;return Kt.setTime(+e),Kt.setUTCDate(Kt.getUTCDate()-(Kt.getUTCDay()+7-n)%7),Kt.setUTCHours(0,0,0,0),Gt.setTime(+e),Gt.setUTCMonth(0),Gt.setUTCDate(1),Gt.setUTCDate(1-(Gt.getUTCDay()+7-n)%7),Gt.setUTCHours(0,0,0,0),Math.floor((1+(Kt-Gt))/O0)}const V2={format_date:(e,t)=>k0(Xt(e),!t),format_utcdate:(e,t)=>Ko(Xt(e),!t),timestamp:e=>+Xt(e),year:e=>Xt(e).getFullYear(),quarter:e=>Math.floor(Xt(e).getMonth()/3),month:e=>Xt(e).getMonth(),date:e=>Xt(e).getDate(),dayofweek:e=>Xt(e).getDay(),hours:e=>Xt(e).getHours(),minutes:e=>Xt(e).getMinutes(),seconds:e=>Xt(e).getSeconds(),milliseconds:e=>Xt(e).getMilliseconds(),utcyear:e=>Xt(e).getUTCFullYear(),utcquarter:e=>Math.floor(Xt(e).getUTCMonth()/3),utcmonth:e=>Xt(e).getUTCMonth(),utcdate:e=>Xt(e).getUTCDate(),utcdayofweek:e=>Xt(e).getUTCDay(),utchours:e=>Xt(e).getUTCHours(),utcminutes:e=>Xt(e).getUTCMinutes(),utcseconds:e=>Xt(e).getUTCSeconds(),utcmilliseconds:e=>Xt(e).getUTCMilliseconds(),datetime:B2,dayofyear:D2,week:P2,utcdatetime:L2,utcdayofyear:M2,utcweek:U2,now:Date.now};function Ll(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:yi(e)||yi(t)?+e==+t:xo(e)&&xo(t)?e+""==t+"":ye(e)&&ye(t)?j2(e,t):!1}function j2(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return Xf(e,t);const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length||(n.sort(),i.sort(),!Xf(n,i,(s,a)=>s===a)))return!1;const r=n.length;for(let s=0;s<r;++s){const a=n[s];if(!Ll(e[a],t[a]))return!1}return!0}function Xf(e,t,n=Ll){const i=e.length;if(i!==t.length)return!1;for(let r=0;r<i;++r)if(!n(e[r],t[r]))return!1;return!0}const $2={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let z2=Math.random;function as(){return z2()}const q2={random:as,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function Dl(e){return e instanceof Map}function H2(e){return e instanceof Set}function ja(e){return Dl(e)||H2(e)}function Mu(e){return Array.from(e)}const W2={has:(e,t)=>ja(e)?e.has(t):e!=null?An(e,t):!1,keys:e=>Dl(e)?Mu(e.keys()):e!=null?Object.keys(e):[],values:e=>ja(e)?Mu(e.values()):e!=null?Object.values(e):[],entries:e=>ja(e)?Mu(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):vt};function Y2(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(An(t,e))return t[e];return n!==void 0?n:e}function G2(e,t,n){let i=arguments.length;e=+e,t=+t,n=i<2?(t=e,e=0,1):i<3?1:+n,i=Math.max(0,Math.ceil((t-e)/n))|0;const r=new Array(i);for(let s=0;s<i;++s)r[s]=e+s*n;return r}const K2={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const i=e==null?e:String(e).match(t);return n==null||i==null?i:typeof n=="number"?i[n]:i.groups?i.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},Tr={bin:N2,equal:Ll,recode:Y2,sequence:G2,...T2,...V2,...$2,...q2,...W2,...K2};function Hs(e){return typeof e=="bigint"}function Qn(e){return e===void 0?e+"":Hs(e)?e+"n":JSON.stringify(e)}function Q(e,t=[],n=[]){return new Q2(e,Le(t),Le(n))}let Q2=class{constructor(t,n,i){this.name=t,this.fields=n,this.params=i}toString(){const t=[...this.fields.map(n=>`d[${Qn(n)}]`),...this.params.map(Qn)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const C0=e=>Q("any",e),R0=()=>Q("count"),F0=e=>Q("array_agg",e),B0=e=>Q("array_agg_distinct",e),L0=(e,t)=>Q("map_agg",[e,t]),D0=(e,t)=>Q("object_agg",[e,t]),M0=(e,t)=>Q("entries_agg",[e,t]);({...Tr});function J2(e,t){e=ja(e)?e:new Set(e);let n=t,i=0;for(;e.has(n);)n=t+ ++i;return n}function X2(e,t){if(!e||!t)return e;const{keys:n,rows:i,size:r}=e,s=new Int32Array(r);t.scan(l=>s[n[l]]=1);const a=s.reduce((l,h)=>l+h,0);if(a===r)return e;const o=Array(a);let u=0;for(let l=0;l<r;++l)s[l]&&(o[s[l]=u++]=i[l]);const c=new Uint32Array(n.length);return t.scan(l=>c[l]=s[n[l]]),{...e,keys:c,rows:o,size:u}}function Z2(e,t,n,i){const{keys:r,rows:s,size:a}=e;let o=s,u=a,c=null;if(n){c=new Int32Array(a),t(b=>c[r[b]]=1);const m=c.reduce((b,g)=>b+g,0);if(m!==a){o=Array(m),u=0;for(let b=0;b<a;++b)c[b]&&(o[c[b]=u++]=s[b])}}let l=-1;const h=new Uint32Array(i);return t(u!==a?m=>h[++l]=c[r[m]]:m=>h[++l]=r[m]),{...e,keys:h,rows:o,size:u}}function tk(e,t,n,i){const r=i==="map"||i===!0?L0:i==="entries"?M0:i==="object"?D0:et('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),a=J2(e.columnNames(),"_");let o=e.select().reify(t).create({data:{[a]:n}}).rollup({[a]:F0(a)});for(let u=s.length;--u>=0;)o=o.groupby(s.slice(0,u)).rollup({[a]:r(s[u],a)});return o.get(a)}const ek="ArrayPattern",nk="ArrowFunctionExpression",ik="FunctionExpression",Bi="Identifier",os="Literal",P0="MemberExpression",rk="ObjectExpression",U0="ObjectPattern",V0="Property",ca="Column",sk="Constant",ak="Dictionary",ok="Function",uk="Parameter",j0="Op",Bt=(e,t)=>{const n=ck[e.type];return n?n(e,t):et(`Unsupported expression construct: ${e.type}`)},Pu=(e,t)=>"("+Bt(e.left,t)+" "+e.operator+" "+Bt(e.right,t)+")",Uu=(e,t)=>"("+Ln(e.params,t)+")=>"+Bt(e.body,t),Zf=(e,t)=>Bt(e.callee,t)+"("+Ln(e.arguments,t)+")",Ln=(e,t,n=",")=>e.map(i=>Bt(i,t)).join(n),$0=e=>e.computed?`[${Qn(e.name)}]`:`.${e.name}`,td=(e,t,n)=>{const i=e.table||"";return`data${i}${$0(e)}.${n}(${t.index}${i})`},ck={Constant:e=>e.raw,Column:(e,t)=>td(e,t,"get"),Dictionary:(e,t)=>td(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${$0(e)}`,Op:(e,t)=>`op(${Qn(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:i}=e,r=i.length;let s=n[0].value.raw;for(let a=0;a<r;)s+="${"+Bt(i[a],t)+"}"+n[++a].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,i=Bt(e.object,t),r=Bt(e.property,t);return i+(n?"."+r:"["+r+"]")},CallExpression:Zf,NewExpression:(e,t)=>"new "+Zf(e,t),ArrayExpression:(e,t)=>"["+Ln(e.elements,t)+"]",AssignmentExpression:Pu,BinaryExpression:Pu,LogicalExpression:Pu,UnaryExpression:(e,t)=>"("+e.operator+Bt(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+Bt(e.test,t)+"?"+Bt(e.consequent,t)+":"+Bt(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Ln(e.properties,t)+"})",Property:(e,t)=>{const n=Bt(e.key,t);return(e.computed?`[${n}]`:n)+":"+Bt(e.value,t)},ArrowFunctionExpression:Uu,FunctionExpression:Uu,FunctionDeclaration:Uu,ArrayPattern:(e,t)=>"["+Ln(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Ln(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Ln(e.declarations,t,","),VariableDeclarator:(e,t)=>Bt(e.id,t)+"="+Bt(e.init,t),SpreadElement:(e,t)=>"..."+Bt(e.argument,t),BlockStatement:(e,t)=>"{"+Ln(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>Bt(e.expression,t),IfStatement:(e,t)=>"if ("+Bt(e.test,t)+")"+Bt(e.consequent,t)+(e.alternate?" else "+Bt(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+Bt(e.discriminant,t)+") {"+Ln(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+Bt(e.test,t):"default")+": "+Ln(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+Bt(e.argument,t),Program:(e,t)=>Bt(e.body[0],t)};function Io(e,t={index:"row"}){return Bt(e,t)}function lk(e,t,n=15,i=!0,r=0,s){const o=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/o),c=t-e||Math.abs(e)||1,l=[5,2];for(s=Math.max(r,Math.pow(10,Math.round(Math.log(c)/o)-u));Math.ceil(c/s)>n;)s*=10;const h=l.length;for(let p=0;p<h;++p){const m=s/l[p];m>=r&&c/m<=n&&(s=m)}}if(i){let u=Math.log(s);const c=u>=0?0:~~(-u/o)+1,l=Math.pow(10,-c-1);u=Math.floor(e/s+l)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function Xr(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:yi(e)?+e:St(e)||ua(e)?`[${e.map(Xr)}]`:xo(e)?e+"":hk(e)}function hk(e){let t="{",n=-1;for(const i in e)++n>0&&(t+=","),t+=`"${i}":${Xr(e[i])}`;return t+="}",t}function Eo(e,t){const n=e.length;return n===1?(i,r)=>Xr(e[0](i,r)):(i,r)=>{let s="";for(let a=0;a<n;++a){a>0&&(s+="|");const o=e[a](i,r);if(t&&(o==null||o!==o))return null;s+=Xr(o)}return s}}function fk(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=Xr(t),i=e.get(n);i?++i.n:e.set(n,{v:t,n:1})},decrement(t){const n=Xr(t),i=e.get(n);i.n===1?e.delete(n):--i.n},forEach(t){e.forEach(({v:n,n:i})=>t(n,i))}}}function ai(){}function dk(e,t=0,n=e.length){let i=e[t++];for(let r=t;r<n;++r)i*=e[r];return i}function ie(e){return e.init=e.init||ai,e.add=e.add||ai,e.rem=e.rem||ai,e}function ed(e,t){return e.product_v=!1,e.product=t}const z0={count:{create:()=>ie({value:e=>e.count}),param:[]},array_agg:{create:()=>ie({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>ie({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>ie({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>ie({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>ie({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:vt}),param:[1]},valid:{create:()=>ie({value:e=>e.valid}),param:[1]},invalid:{create:()=>ie({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=fk(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>ie({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>ie({value:e=>{let t=vt,n=0;return e.distinct.forEach((i,r)=>{r>n&&(n=r,t=i)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:vt,add:(e,t)=>Hs(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>ed(e,1),value:e=>e.valid?e.product_v?ed(e,dk(e.list.values())):e.product:void 0,add:(e,t)=>Hs(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:vt,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>ie({value:e=>e.valid?e.mean:vt}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):vt,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>ie({value:e=>e.valid>1?e.dev/e.valid:vt}),param:[1],req:["variance"]},stdev:{create:()=>ie({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):vt}),param:[1],req:["variance"]},stdevp:{create:()=>ie({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):vt}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=vt,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===vt)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=vt,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===vt)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>ie({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>ie({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):vt,add:(e,t,n)=>{const i=t-e.mean_x,r=n-e.mean_y;e.mean_x+=i/e.valid,e.mean_y+=r/e.valid;const s=n-e.mean_y;e.dev_x+=i*(t-e.mean_x),e.dev_y+=r*s,e.cov+=i*s},rem:(e,t,n)=>{const i=t-e.mean_x,r=n-e.mean_y;e.mean_x-=e.valid?i/e.valid:e.mean_x,e.mean_y-=e.valid?r/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=i*(t-e.mean_x),e.dev_y-=r*s,e.cov-=i*s}}),param:[2]},covariancep:{create:()=>ie({value:e=>e.valid>1?e.cov/e.valid:vt}),param:[2],req:["covariance"]},corr:{create:()=>ie({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):vt}),param:[2],req:["covariance"]},bins:{create:(e,t,n,i)=>ie({value:r=>lk(r.min,r.max,e,t,n,i)}),param:[1,4],req:["min","max"]}},nd={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},id={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:i,size:r}=t;let s=n;if(e<s){for(;s+1<r&&i(s+1);)++s;e=s}return(1+e)/r}}},param:[]},q0={row_number:{create(){return{init:ai,value:e=>e.index+1}},param:[]},rank:nd,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const i=n.index;if(i>=e){for(t=e=i+1;n.peer(e);t+=++e);t/=e-i}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=nd.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:id,ntile:{create(e){e=+e,e>0||et("ntile num must be greater than zero.");const{init:t,value:n}=id.create();return{init:t,value:i=>Math.ceil(e*n(i))}},param:[0,1]},lag:{create(e,t=vt){return e=+e||1,{init:ai,value:(n,i)=>{const r=n.index-e;return r>=0?n.value(r,i):t}}},param:[1,2]},lead:{create(e,t=vt){return e=+e||1,{init:ai,value:(n,i)=>{const r=n.index+e;return r<n.size?n.value(r,i):t}}},param:[1,2]},first_value:{create(){return{init:ai,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:ai,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||et("nth_value nth must be greater than zero."),{init:ai,value:(t,n)=>{const i=t.i0+(e-1);return i<t.i1?t.value(i,n):vt}}},param:[1,1]},fill_down:{create(e=vt){let t;return{init:()=>t=e,value:(n,i)=>{const r=n.value(n.index,i);return _n(r)?t=r:t}}},param:[1,1]},fill_up:{create(e=vt){let t,n;return{init:()=>(t=e,n=-1),value:(i,r)=>i.index<=n?t:(n=pk(i,r,i.index))>=0?t=i.value(n,r):(n=i.size,t=e)}},param:[1,1]}};function pk(e,t,n){for(const i=e.size;n<i;++n)if(_n(e.value(n,t)))return n;return-1}function Ml(e){return An(z0,e)}function Pl(e){return An(q0,e)}function H0(e){return An(Tr,e)||e==="row_object"}function W0(e){return Ml(e)&&z0[e]}function Y0(e){return Pl(e)&&q0[e]}function _s(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const Ul={escape:(e,t,n)=>_s(e,t,n),expr:(e,t)=>_s(`(row,data,op)=>${e}`,Tr,t),expr2:(e,t)=>_s(`(row0,data0,row,data)=>${e}`,Tr,t),join:(e,t)=>_s(`(row1,data1,row2,data2)=>${e}`,Tr,t),param:(e,t)=>_s(e,Tr,t)},mk={"==":1,"!=":1,"===":1,"!==":1};function G0(e,t,n=0,i,r){if(e.type=ca,e.name=t,e.table=n,r&&i&&Ut(i.keyFor)){const s=mk[r.operator]?r.left===e?r.right:r.left:r.callee&&r.callee.name==="equal"?r.arguments[r.arguments[0]===e?1:0]:null;s&&s.type===os&&yk(r,e,s,i.keyFor(s.value))}return e}function yk(e,t,n,i){return i<0?(e.type=os,e.value=!1,e.raw="false"):(t.type=ak,n.value=i,n.raw=i+""),!0}function Qo(e){return St(e)?e:Dl(e)?e.entries():e?Object.entries(e):[]}const K0="row_object";function Q0(e,t){e.type=rk;const n=e.properties=[];for(const i of Qo(t)){const[r,s]=St(i)?i:[i,i];n.push({type:V0,key:{type:os,raw:Qn(s)},value:G0({computed:!0},r)})}return e}function J0(e){return Io(Q0({},e))}function X0(e){return Ul.expr(J0(e))}function Vl(e,t=1){return(e*t+63&-64||64)/t}function Vi(e,t,n=e.BYTES_PER_ELEMENT){return new e(Vl(t,n))}function jl(e){return e instanceof Nt?e:new Nt(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function gk(e){return new mt([jl(e)])}const $l=new TextEncoder;function _k(e,t,n){const i=$l.encode(n);return e.set(i,t),i.length}function vk(e,t,n){return $l.encodeInto(n,e.subarray(t)).written}const bk=$l.encodeInto?vk:_k;function rd(e,t){const n=Vi(e.ArrayType,t);return{set(i,r){n[r]=i},data:()=>({type:e,length:t,buffers:[null,n]})}}function wk(e,t){const n=Vi(e.ArrayType,t/8);return{set(i,r){i&&(n[r>>3]|=1<<r%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function Sk(e,t){const n=Vi(e.ArrayType,t);return{set(i,r){n[r]=i/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function xk(e,t){const n=Vi(e.ArrayType,t<<1);return{set(i,r){const s=r<<1;n[s]=i%4294967296|0,n[s+1]=i/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function Ik(e){const t=mo({type:e,nullValues:[null,void 0]});return{set(n,i){t.set(i,n)},data:()=>t.finish().flush()}}function Ek(e,t,n){const i=Vi(Int32Array,t+1),r=Vi(Uint8Array,3*n);let s=0;return{set(a,o){s+=bk(r,s,a),i[o+1]=s},data:()=>{const a=Vl(s),o=r.length>a?r.subarray(0,a):r;return{type:e,length:t,buffers:[i,o]}}}}function Ak(e,t){const n=[],i=Vi(e.indices.ArrayType,t),r=Object.create(null);let s=-1,a=0;return{set(o,u){const c=String(o);let l=r[c];l===void 0&&(a+=c.length,r[c]=l=++s,n.push(c)),i[u]=l},data:()=>({type:e,length:t,buffers:[null,i],dict:kk(e.dictionary,n,a)})}}function kk(e,t,n){const i=Ek(e,t.length,n);return t.forEach(i.set),gk(i.data())}function Tk(e,t){const n=Vi(Uint8Array,t/8);let i=0;return{set(r,s){r==null?++i:(e.set(r,s),n[s>>3]|=1<<s%8)},data:()=>{const r=e.data();return i&&(r.nulls=i,r.buffers[2]=n),r}}}function Nk(e,t,n=!0){let i;switch(e.typeId){case y.Int:i=e.bitWidth<64?rd:null;break;case y.Float:i=e.precision>0?rd:null;break;case y.Dictionary:i=e.dictionary.typeId===y.Utf8&&e.indices.typeId===y.Int&&e.indices.bitWidth<64?Ak:null;break;case y.Bool:i=wk;break;case y.Date:i=e.unit?xk:Sk;break}return i==null?Ik(e):n?Tk(i(e,t),t):i(e,t)}function Ok(e,t){const n=e.length,i=Vl(n,e.BYTES_PER_ELEMENT);let r=e;return n!==i&&(r=new e.constructor(i),r.set(e)),jl({type:t,length:n,buffers:[null,r]})}function Z0(e,t,n,i,r=!0){const s=Nk(i,e,r);return t(n,s.set),jl(s.data())}function zl(e){if(e instanceof V||e==null)return e;switch(e){case y.Binary:return new Us;case y.Bool:return new Vs;case y.DateDay:return new Vx;case y.DateMillisecond:case y.Date:return new jx;case y.Dictionary:return new Mi(new jr,new Li);case y.Float16:return new Hp;case y.Float32:return new Qc;case y.Float64:case y.Float:return new Jc;case y.Int8:return new zc;case y.Int16:return new qc;case y.Int32:case y.Int:return new Li;case y.Int64:return new Hc;case y.IntervalDayTime:return new Wx;case y.Interval:case y.IntervalYearMonth:return new Yx;case y.Null:return new di;case y.TimeMicrosecond:return new qx;case y.TimeMillisecond:case y.Time:return new zx;case y.TimeNanosecond:return new Hx;case y.TimeSecond:return new $x;case y.Uint8:return new Wc;case y.Uint16:return new Yc;case y.Uint32:return new Gc;case y.Uint64:return new Kc;case y.Utf8:return new jr;default:et(`Unsupported type code: ${Qn(e)}. Use a data type constructor instead?`)}}function Ck(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function ty(e,t){const n=_c();return e(t,n.add),n}function _c(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(yi(t))++e.dates,Ck(t)&&++e.utcdays;else if(or(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const i=e.array_prof||(e.array_prof=_c());t.forEach(i.add)}else{++e.structs;const i=e.struct_prof||(e.struct_prof={});for(const r in t)(i[r]||(i[r]=_c())).add(t[r])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return zl(Rk(e))}};return e}function Rk(e){const t=e.count-e.nulls;if(t===0)return y.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?y.Float64:n<128?y.Int8:n<32768?y.Int16:y.Int32:n>=2**32?y.Float64:n<256?y.Uint8:n<65536?y.Uint16:y.Uint32}else{if(e.nums===t)return y.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?y.Int64:et(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?y.Uint64:et(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return y.Bool;if(e.utcdays===t)return y.DateDay;if(e.dates===t)return y.DateMillisecond;if(e.arrays===t){const n=xt.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new Hr(e.minlen,n):new qr(n)}else if(e.structs===t){const n=e.struct_prof;return new fe(Object.keys(n).map(i=>xt.new(i,n[i].type(),!0)))}else{if(e.strings>0)return y.Dictionary;et("Type inference failure")}}}}function Fk(e,t,n,i,r,s=!0){if(r=zl(r),!r){const a=ty(i,t);s=a.nulls>0,r=a.type()}return Z0(n,i,t,r,s)}function Bk(e,t,n,i,r,s=!0){r=zl(r);const a=e.column(t),o=!(e.isFiltered()||e.isOrdered()),u=Lk(a);if(u&&o&&sd(u.type,r))return u;const c=a.data;if(ua(c)){const l=Dk(c);if(o&&l&&sd(l,r))return Ok(c,l);r=r||l,s=!1}if(!r){const l=ty(i,a);s=l.nulls>0,r=l.type()}return Z0(n,i,a,r,s)}function Lk(e){return e instanceof mt?e:e.vector instanceof mt?e.vector:null}function Dk(e){const n={Float32Array:Qc,Float64Array:Jc,Int8Array:zc,Int16Array:qc,Int32Array:Li,Uint8Array:Wc,Uint16Array:Yc,Uint32Array:Gc,BigInt64Array:Hc,BigUint64Array:Kc}[e.constructor.name];return n?new n:null}function sd(e,t){return!e||!t?!0:e.compareTo(t)}function Mk(e,t,n){const i=Math.min(e.length,n+t);return(r,s)=>{for(let a=n;a<i;++a)s(e[a][r],a)}}function Pk(e,t,n){const i=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(r,s)=>{let a=-1;i&&or(r.data)?r.data.forEach(s):e.scan(o=>s(r.get(o),++a),!0,t,n)}}const Uk=()=>et("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function Vk(){try{return mi}catch{Uk()}}function ey(e,t={}){const{types:n={}}=t,{dataFrom:i,names:r,nrows:s,scan:a}=jk(e,t),o={};r.forEach(c=>{const l=i(e,c,s,a,n[c]);l.length!==s&&et("Column length mismatch"),o[c]=l});const u=Vk();return new u(o)}function jk(e,t){const{columns:n,limit:i=1/0,offset:r=0}=t,s=Ut(n)?n(e):St(n)?n:null;if(St(e))return{dataFrom:Fk,names:s||Object.keys(e[0]),nrows:Math.min(i,e.length-r),scan:Mk(e,i,r)};if($k(e))return{dataFrom:Bk,names:s||e.columnNames(),nrows:Math.min(i,e.numRows()-r),scan:Pk(e,i,r)};et("Unsupported input data type")}function $k(e){return e&&Ut(e.reify)}function zk(e,t={}){const{format:n,...i}=t,r=n||"stream";if(!["stream","file"].includes(r))throw Error("Unrecognised output format");return S0(ey(e,i),n)}function qk(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function Hk(e,t={}){let n=0,i=0,r=0,s=0,a=0,o=0;return e(u=>{if(++n,u==null){++i;return}const c=typeof u;if(c==="object"&&yi(u))++r,qk(u)&&++s;else if(c==="number"&&(++a,u===u&&(u|0)!==u)){const l=u+"",h=l.indexOf(".");if(h>=0){const p=l.indexOf("e"),m=p>0?p:l.length;o=Math.max(o,m-h-1)}}}),{align:(i+a+r)/n>.5?"r":"l",format:{utc:r===s,digits:Math.min(o,t.maxdigits||6)}}}function Jo(e,t){return Ut(t)?t(e):t||e.columnNames()}function ny(e,t,n){const i=n.format||{},r=n.align||{},s={},a={};return t.forEach(o=>{const u=Hk(Wk(e,o),n);a[o]=r[o]||u.align,s[o]=i[o]||u.format}),{align:a,format:s}}function Wk(e,t){const n=e.column(t);return i=>e.scan(r=>i(n.get(r)))}function ql(e,t,n=100,i,r){const s=e.data(),a=t.length;e.scan(o=>{r.row(o);for(let u=0;u<a;++u){const c=t[u];r.cell(s[t[u]].get(o),c,u)}},!0,n,i)}function Yk(e,t={}){const n=Jo(e,t.columns),i=t.format||{},r=t.delimiter||",",s=new RegExp(`["${r}
\r]`),a=c=>c==null?"":yi(c)?Ko(c,!0):s.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c,o=n.map(a);let u="";return ql(e,n,t.limit||1/0,t.offset,{row(){u+=o.join(r)+`
`},cell(c,l,h){o[h]=a(i[l]?i[l](c):c)}}),u+o.join(r)}function iy(e,t={}){if(Ut(t))return t(e)+"";const n=typeof e;if(n==="object"){if(yi(e))return t.utc?Ko(e):k0(e);{const i=JSON.stringify(e,(s,a)=>ua(a)?Array.from(a):a),r=t.maxlen||30;return i.length>r?i.slice(0,28)+"…"+(i[0]==="["?"]":"}"):i}}else if(n==="number"){const i=t.digits||0;let r;return e!==0&&((r=Math.abs(e))>=1e18||r<Math.pow(10,-i))?e.toExponential(i):e.toFixed(i)}else return e+""}function Xo(e,t,n={}){for(const i in e)n[i]=t(e[i],i);return n}function Gk(e,t={}){const n=Jo(e,t.columns),{align:i,format:r}=ny(e,n,t),s=Kk(t),a=t.null,o=g=>g==="c"?"center":g==="r"?"right":"left",u=g=>g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),c=(g,S)=>u(iy(g,S)),l=a?(g,S)=>g==null?a(g):c(g,S):c;let h=-1,p=-1;const m=(g,S,I)=>{const k=I?o(i[S]):"",j=s[g]&&s[g](S,p,h)||"",F=(k?`text-align: ${k};`+(j?" ":""):"")+j;return`<${g}${F?` style="${F}"`:""}>`};let b=m("table")+m("thead")+m("tr",h)+n.map(g=>`${m("th",g,1)}${g}</th>`).join("")+"</tr></thead>"+m("tbody");return ql(e,n,t.limit,t.offset,{row(g){h=g,b+=(++p?"</tr>":"")+m("tr")},cell(g,S){b+=m("td",S,1)+l(g,r[S])+"</td>"}}),b+"</tr></tbody></table>"}function Kk(e){return Xo(e.style,t=>Ut(t)?t:()=>t)}function Qk(e,t=!0,n=!1){return e===void 0||e?t:n}const Jk=e=>yi(e)?Ko(e,!0):e;function Xk(e,t={}){const n=Qk(t.schema),i=t.format||{},r=Jo(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(r.map(a=>({name:a})))+'},"data":{'),r.forEach((a,o)=>{s+=(o?",":"")+JSON.stringify(a)+":[";const u=e.column(a),c=i[a]||Jk;let l=-1;e.scan(h=>{const p=u.get(h);s+=(++l?",":"")+JSON.stringify(c(p))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function Zk(e,t={}){const n=Jo(e,t.columns),{align:i,format:r}=ny(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",a=u=>u.replace(/\|/g,"\\|");let o="|"+n.map(a).join("|")+`|
|`+n.map(u=>s(i[u])).join("|")+"|";return ql(e,n,t.limit,t.offset,{row(){o+=`
|`},cell(u,c){o+=a(iy(u,r[c]))+"|"}}),o+`
`}function ry(e,t){for(const[n,i]of Qo(t))e.set(n,i);return e}function tT(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function gi(e,t,n=new Map){return t=we(t)?e.columnName(t):t,pe(t)?n.set(t,t):St(t)?t.forEach(i=>gi(e,i,n)):Ut(t)?gi(e,t(e),n):ye(t)?ry(n,t):et(`Invalid column selection: ${Qn(t)}`),n}function Zo(e,t){return e.toObject=t,e}function sy(e){return St(e)?e.map(sy):e&&e.toObject?e.toObject():e}function Zr(){return Zo(e=>e.columnNames(),()=>({all:[]}))}function ay(...e){return e=e.flat(),Zo(t=>{const n=gi(t,e);return t.columnNames(i=>!n.has(i))},()=>({not:sy(e)}))}function eT(e,t){return Zo(n=>{let i=we(e)?e:n.columnIndex(e),r=we(t)?t:n.columnIndex(t);if(r<i){const s=r;r=i,i=s}return n.columnNames().slice(i,r+1)},()=>({range:[e,t]}))}function nT(e){return pe(e)&&(e=RegExp(tT(e))),Zo(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function iT(e){return ua(e.data)?e.data.constructor:Array}class ci extends b2{static from(t,n){return new ci(x2(t,n),n)}static new(t,n){if(t instanceof ci)return t;const i={},r=[];for(const[s,a]of Qo(t))i[s]=a,r.push(s);return new ci(i,n||r)}constructor(t,n,i,r,s,a){Xo(t,S2,t),n=n||Object.keys(t);const o=n.length?t[n[0]].length:0;super(n,o,t,i,r,s,a)}create({data:t,names:n,filter:i,groups:r,order:s}){const a=i!==void 0?i:this.mask();return new ci(t||this._data,n||(t?null:this._names),a,r!==void 0?r:X2(this._group,i&&a),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),i=this.reify(),r=Ge(i).groupby(i.groups());return t.forEach(s=>{s=ci.new(s),s.numRows()!==n&&et("Assign row counts do not match"),s=s.reify(),s.columnNames(a=>r.add(a,s.column(a)))}),this.create(r.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const i=this.column(t),r=new n(this.numRows());let s=-1;return this.scan(a=>r[++s]=i.get(a),!0),r}get(t,n=0){const i=this.column(t);return this.isFiltered()||this.isOrdered()?i.get(this.indices()[n]):i.get(n)}getter(t){const n=this.column(t),i=this.isFiltered()||this.isOrdered()?this.indices():null;return i?r=>n.get(i[r]):n?r=>n.get(r):et(`Unrecognized column: ${t}`)}object(t=0){return ad(this)(t)}objects(t={}){const{grouped:n,limit:i,offset:r}=t,s=gi(this,t.columns||Zr()),a=X0(s),o=[];if(this.scan((u,c)=>o.push(a(u,c)),!0,i,r),n&&this.isGrouped()){const u=[];return this.scan(c=>u.push(c),!0,i,r),tk(this,u,o,n)}return o}*[Symbol.iterator](){const t=ad(this),n=this.numRows();for(let i=0;i<n;++i)yield t(i)}reify(t){const n=t?t.length:this.numRows(),i=this._names;let r,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(r=this.data());else return this;if(!r){const a=t?u=>t.forEach(u):u=>this.scan(u,!0),o=i.length;r={};for(let u=0;u<o;++u){const c=i[u],l=this.column(c),h=r[c]=new(iT(l))(n);let p=-1;a(m=>h[++p]=l.get(m))}this.isGrouped()&&(s=Z2(this.groups(),a,!!t,n))}return this.create({data:r,names:i,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,i)=>i(n),this)}toArrow(t){return ey(this,t)}toArrowBuffer(t){return zk(this,t)}toCSV(t){return Yk(this,t)}toHTML(t){return Gk(this,t)}toJSON(t){return Xk(this,t)}toMarkdown(t){return Zk(this,t)}}function ad(e){let t=e._builder;if(!t){const n=X0(e.columnNames()),i=e.data();if(e.isOrdered()||e.isFiltered()){const r=e.indices();t=s=>n(r[s],i)}else t=r=>n(r,i);e._builder=t}return t}class rT{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function pt(e,t,n,i){const r=n[e.type]||n.Default;if(r&&r(e,t,i)===!1)return;const s=sT[e.type];s&&s(e,t,n)}const Aa=(e,t,n)=>{pt(e.argument,t,n,e)},Vu=(e,t,n)=>{pt(e.left,t,n,e),pt(e.right,t,n,e)},od=(e,t,n)=>{pt(e.test,t,n,e),pt(e.consequent,t,n,e),e.alternate&&pt(e.alternate,t,n,e)},ju=(e,t,n)=>{Dn(e.params,t,n,e),pt(e.body,t,n,e)},ud=(e,t,n)=>{pt(e.callee,t,n,e),Dn(e.arguments,t,n,e)},Dn=(e,t,n,i)=>{e.forEach(r=>pt(r,t,n,i))},sT={TemplateLiteral:(e,t,n)=>{Dn(e.expressions,t,n,e),Dn(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{pt(e.object,t,n,e),pt(e.property,t,n,e)},CallExpression:ud,NewExpression:ud,ArrayExpression:(e,t,n)=>{Dn(e.elements,t,n,e)},AssignmentExpression:Vu,AwaitExpression:Aa,BinaryExpression:Vu,LogicalExpression:Vu,UnaryExpression:Aa,UpdateExpression:Aa,ConditionalExpression:od,ObjectExpression:(e,t,n)=>{Dn(e.properties,t,n,e)},Property:(e,t,n)=>{pt(e.key,t,n,e),pt(e.value,t,n,e)},ArrowFunctionExpression:ju,FunctionExpression:ju,FunctionDeclaration:ju,VariableDeclaration:(e,t,n)=>{Dn(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{pt(e.id,t,n,e),pt(e.init,t,n,e)},SpreadElement:(e,t,n)=>{pt(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{Dn(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{pt(e.expression,t,n,e)},IfStatement:od,ForStatement:(e,t,n)=>{pt(e.init,t,n,e),pt(e.test,t,n,e),pt(e.update,t,n,e),pt(e.body,t,n,e)},WhileStatement:(e,t,n)=>{pt(e.test,t,n,e),pt(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{pt(e.body,t,n,e),pt(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{pt(e.discriminant,t,n,e),Dn(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&pt(e.test,t,n,e),Dn(e.consequent,t,n,e)},ReturnStatement:Aa,Program:(e,t,n)=>{pt(e.body[0],t,n,e)}};function oy(e){delete e.start,delete e.end,delete e.optional}function cd(e){oy(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function aT(e){return pt(e,null,{Column:cd,Constant:cd,Default:oy}),e}function ae(e,t){return t&&t.type===e}function oT(e){return ae(ik,e)||ae(nk,e)}function uT(e){return Ut(e)?e:()=>e}const cT="Escaped functions are not valid as rollup or pivot values.";function lT(e,t,n){e.aggronly&&et(cT);const i="(row,data)=>fn("+J0(e.table.columnNames())+",$)";return{escape:Ul.escape(i,uT(t.expr),n)}}var hT=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],uy=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,3104,541,1507,4938,6,4191],fT="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",cy="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",$u={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},zu="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",dT={5:zu,"5module":zu+" export import",6:zu+" const class extends export import super"},pT=/^in(stanceof)?$/,mT=new RegExp("["+cy+"]"),yT=new RegExp("["+cy+fT+"]");function vc(e,t){for(var n=65536,i=0;i<t.length;i+=2){if(n+=t[i],n>e)return!1;if(n+=t[i+1],n>=e)return!0}return!1}function _i(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&mT.test(String.fromCharCode(e)):t===!1?!1:vc(e,uy)}function ts(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&yT.test(String.fromCharCode(e)):t===!1?!1:vc(e,uy)||vc(e,hT)}var _t=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function Qe(e,t){return new _t(e,{beforeExpr:!0,binop:t})}var Je={beforeExpr:!0},Ie={startsExpr:!0},Hl={};function ht(e,t){return t===void 0&&(t={}),t.keyword=e,Hl[e]=new _t(e,t)}var d={num:new _t("num",Ie),regexp:new _t("regexp",Ie),string:new _t("string",Ie),name:new _t("name",Ie),privateId:new _t("privateId",Ie),eof:new _t("eof"),bracketL:new _t("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new _t("]"),braceL:new _t("{",{beforeExpr:!0,startsExpr:!0}),braceR:new _t("}"),parenL:new _t("(",{beforeExpr:!0,startsExpr:!0}),parenR:new _t(")"),comma:new _t(",",Je),semi:new _t(";",Je),colon:new _t(":",Je),dot:new _t("."),question:new _t("?",Je),questionDot:new _t("?."),arrow:new _t("=>",Je),template:new _t("template"),invalidTemplate:new _t("invalidTemplate"),ellipsis:new _t("...",Je),backQuote:new _t("`",Ie),dollarBraceL:new _t("${",{beforeExpr:!0,startsExpr:!0}),eq:new _t("=",{beforeExpr:!0,isAssign:!0}),assign:new _t("_=",{beforeExpr:!0,isAssign:!0}),incDec:new _t("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new _t("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Qe("||",1),logicalAND:Qe("&&",2),bitwiseOR:Qe("|",3),bitwiseXOR:Qe("^",4),bitwiseAND:Qe("&",5),equality:Qe("==/!=/===/!==",6),relational:Qe("</>/<=/>=",7),bitShift:Qe("<</>>/>>>",8),plusMin:new _t("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Qe("%",10),star:Qe("*",10),slash:Qe("/",10),starstar:new _t("**",{beforeExpr:!0}),coalesce:Qe("??",1),_break:ht("break"),_case:ht("case",Je),_catch:ht("catch"),_continue:ht("continue"),_debugger:ht("debugger"),_default:ht("default",Je),_do:ht("do",{isLoop:!0,beforeExpr:!0}),_else:ht("else",Je),_finally:ht("finally"),_for:ht("for",{isLoop:!0}),_function:ht("function",Ie),_if:ht("if"),_return:ht("return",Je),_switch:ht("switch"),_throw:ht("throw",Je),_try:ht("try"),_var:ht("var"),_const:ht("const"),_while:ht("while",{isLoop:!0}),_with:ht("with"),_new:ht("new",{beforeExpr:!0,startsExpr:!0}),_this:ht("this",Ie),_super:ht("super",Ie),_class:ht("class",Ie),_extends:ht("extends",Je),_export:ht("export"),_import:ht("import",Ie),_null:ht("null",Ie),_true:ht("true",Ie),_false:ht("false",Ie),_in:ht("in",{beforeExpr:!0,binop:7}),_instanceof:ht("instanceof",{beforeExpr:!0,binop:7}),_typeof:ht("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:ht("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:ht("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},hn=/\r\n?|\n|\u2028|\u2029/,gT=new RegExp(hn.source,"g");function us(e){return e===10||e===13||e===8232||e===8233}function ly(e,t,n){n===void 0&&(n=e.length);for(var i=t;i<n;i++){var r=e.charCodeAt(i);if(us(r))return i<n-1&&r===13&&e.charCodeAt(i+1)===10?i+2:i+1}return-1}var hy=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,rn=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,fy=Object.prototype,_T=fy.hasOwnProperty,vT=fy.toString,la=Object.hasOwn||function(e,t){return _T.call(e,t)},ld=Array.isArray||function(e){return vT.call(e)==="[object Array]"};function ur(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}function ji(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var bT=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Ws=function(t,n){this.line=t,this.column=n};Ws.prototype.offset=function(t){return new Ws(this.line,this.column+t)};var tu=function(t,n,i){this.start=n,this.end=i,t.sourceFile!==null&&(this.source=t.sourceFile)};function dy(e,t){for(var n=1,i=0;;){var r=ly(e,i,t);if(r<0)return new Ws(n,t-i);++n,i=r}}var bc={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},hd=!1;function wT(e){var t={};for(var n in bc)t[n]=e&&la(e,n)?e[n]:bc[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!hd&&typeof console=="object"&&console.warn&&(hd=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),ld(t.onToken)){var i=t.onToken;t.onToken=function(r){return i.push(r)}}return ld(t.onComment)&&(t.onComment=ST(t,t.onComment)),t}function ST(e,t){return function(n,i,r,s,a,o){var u={type:n?"Block":"Line",value:i,start:r,end:s};e.locations&&(u.loc=new tu(this,a,o)),e.ranges&&(u.range=[r,s]),t.push(u)}}var Ys=1,cs=2,Wl=4,py=8,my=16,yy=32,Yl=64,gy=128,ha=256,Gl=Ys|cs|ha;function Kl(e,t){return cs|(e?Wl:0)|(t?py:0)}var Ao=0,Ql=1,hi=2,_y=3,vy=4,by=5,oe=function(t,n,i){this.options=t=wT(t),this.sourceFile=t.sourceFile,this.keywords=ur(dT[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var r="";t.allowReserved!==!0&&(r=$u[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(r+=" await")),this.reservedWords=ur(r);var s=(r?r+" ":"")+$u.strict;this.reservedWordsStrict=ur(s),this.reservedWordsStrictBind=ur(s+" "+$u.strictBind),this.input=String(n),this.containsEsc=!1,i?(this.pos=i,this.lineStart=this.input.lastIndexOf(`
`,i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(hn).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=d.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Ys),this.regexpState=null,this.privateNameStack=[]},Xn={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};oe.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};Xn.inFunction.get=function(){return(this.currentVarScope().flags&cs)>0};Xn.inGenerator.get=function(){return(this.currentVarScope().flags&py)>0&&!this.currentVarScope().inClassFieldInit};Xn.inAsync.get=function(){return(this.currentVarScope().flags&Wl)>0&&!this.currentVarScope().inClassFieldInit};Xn.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&ha)return!1;if(t.flags&cs)return(t.flags&Wl)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};Xn.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&Yl)>0||n||this.options.allowSuperOutsideMethod};Xn.allowDirectSuper.get=function(){return(this.currentThisScope().flags&gy)>0};Xn.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Xn.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(cs|ha))>0||n};Xn.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&ha)>0};oe.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var i=this,r=0;r<t.length;r++)i=t[r](i);return i};oe.parse=function(t,n){return new this(n,t).parse()};oe.parseExpressionAt=function(t,n,i){var r=new this(i,t,n);return r.nextToken(),r.parseExpression()};oe.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(oe.prototype,Xn);var Se=oe.prototype,xT=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Se.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){rn.lastIndex=e,e+=rn.exec(this.input)[0].length;var t=xT.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){rn.lastIndex=e+t[0].length;var n=rn.exec(this.input),i=n.index+n[0].length,r=this.input.charAt(i);return r===";"||r==="}"||hn.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(r)||r==="!"&&this.input.charAt(i+1)==="=")}e+=t[0].length,rn.lastIndex=e,e+=rn.exec(this.input)[0].length,this.input[e]===";"&&e++}};Se.eat=function(e){return this.type===e?(this.next(),!0):!1};Se.isContextual=function(e){return this.type===d.name&&this.value===e&&!this.containsEsc};Se.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};Se.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};Se.canInsertSemicolon=function(){return this.type===d.eof||this.type===d.braceR||hn.test(this.input.slice(this.lastTokEnd,this.start))};Se.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};Se.semicolon=function(){!this.eat(d.semi)&&!this.insertSemicolon()&&this.unexpected()};Se.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};Se.expect=function(e){this.eat(e)||this.unexpected()};Se.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var eu=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Se.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};Se.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,i=e.doubleProto;if(!t)return n>=0||i>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),i>=0&&this.raiseRecoverable(i,"Redefinition of __proto__ property")};Se.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Se.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var M=oe.prototype;M.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==d.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var i=0,r=Object.keys(this.undefinedExports);i<r.length;i+=1){var s=r[i];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var Jl={kind:"loop"},IT={kind:"switch"};M.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;rn.lastIndex=this.pos;var t=rn.exec(this.input),n=this.pos+t[0].length,i=this.input.charCodeAt(n);if(i===91||i===92)return!0;if(e)return!1;if(i===123||i>55295&&i<56320)return!0;if(_i(i,!0)){for(var r=n+1;ts(i=this.input.charCodeAt(r),!0);)++r;if(i===92||i>55295&&i<56320)return!0;var s=this.input.slice(n,r);if(!pT.test(s))return!0}return!1};M.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;rn.lastIndex=this.pos;var e=rn.exec(this.input),t=this.pos+e[0].length,n;return!hn.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(ts(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};M.parseStatement=function(e,t,n){var i=this.type,r=this.startNode(),s;switch(this.isLet(e)&&(i=d._var,s="let"),i){case d._break:case d._continue:return this.parseBreakContinueStatement(r,i.keyword);case d._debugger:return this.parseDebuggerStatement(r);case d._do:return this.parseDoStatement(r);case d._for:return this.parseForStatement(r);case d._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(r,!1,!e);case d._class:return e&&this.unexpected(),this.parseClass(r,!0);case d._if:return this.parseIfStatement(r);case d._return:return this.parseReturnStatement(r);case d._switch:return this.parseSwitchStatement(r);case d._throw:return this.parseThrowStatement(r);case d._try:return this.parseTryStatement(r);case d._const:case d._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(r,s);case d._while:return this.parseWhileStatement(r);case d._with:return this.parseWithStatement(r);case d.braceL:return this.parseBlock(!0,r);case d.semi:return this.parseEmptyStatement(r);case d._export:case d._import:if(this.options.ecmaVersion>10&&i===d._import){rn.lastIndex=this.pos;var a=rn.exec(this.input),o=this.pos+a[0].length,u=this.input.charCodeAt(o);if(u===40||u===46)return this.parseExpressionStatement(r,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===d._import?this.parseImport(r):this.parseExport(r,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(r,!0,!e);var c=this.value,l=this.parseExpression();return i===d.name&&l.type==="Identifier"&&this.eat(d.colon)?this.parseLabeledStatement(r,c,l,e):this.parseExpressionStatement(r,l)}};M.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(d.semi)||this.insertSemicolon()?e.label=null:this.type!==d.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var i=0;i<this.labels.length;++i){var r=this.labels[i];if((e.label==null||r.name===e.label.name)&&(r.kind!=null&&(n||r.kind==="loop")||e.label&&n))break}return i===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};M.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};M.parseDoStatement=function(e){return this.next(),this.labels.push(Jl),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(d._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(d.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};M.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Jl),this.enterScope(0),this.expect(d.parenL),this.type===d.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===d._var||this.type===d._const||n){var i=this.startNode(),r=n?"let":this.value;return this.next(),this.parseVar(i,!0,r),this.finishNode(i,"VariableDeclaration"),(this.type===d._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&i.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===d._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,i)):(t>-1&&this.unexpected(t),this.parseFor(e,i))}var s=this.isContextual("let"),a=!1,o=new eu,u=this.parseExpression(t>-1?"await":!0,o);return this.type===d._in||(a=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===d._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&a&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,o),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(o,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};M.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,As|(n?0:wc),!1,t)};M.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(d._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};M.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(d.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};M.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(d.braceL),this.labels.push(IT),this.enterScope(0);for(var t,n=!1;this.type!==d.braceR;)if(this.type===d._case||this.type===d._default){var i=this.type===d._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),i?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(d.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};M.parseThrowStatement=function(e){return this.next(),hn.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var ET=[];M.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===d._catch){var t=this.startNode();if(this.next(),this.eat(d.parenL)){t.param=this.parseBindingAtom();var n=t.param.type==="Identifier";this.enterScope(n?yy:0),this.checkLValPattern(t.param,n?vy:hi),this.expect(d.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0);t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(d._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};M.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")};M.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(Jl),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};M.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};M.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};M.parseLabeledStatement=function(e,t,n,i){for(var r=0,s=this.labels;r<s.length;r+=1){var a=s[r];a.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var o=this.type.isLoop?"loop":this.type===d._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var c=this.labels[u];if(c.statementStart===e.start)c.statementStart=this.start,c.kind=o;else break}return this.labels.push({name:t,kind:o,statementStart:this.start}),e.body=this.parseStatement(i?i.indexOf("label")===-1?i+"label":i:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};M.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};M.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(d.braceL),e&&this.enterScope(0);this.type!==d.braceR;){var i=this.parseStatement(null);t.body.push(i)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};M.parseFor=function(e,t){return e.init=t,this.expect(d.semi),e.test=this.type===d.semi?null:this.parseExpression(),this.expect(d.semi),e.update=this.type===d.parenR?null:this.parseExpression(),this.expect(d.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};M.parseForIn=function(e,t){var n=this.type===d._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(d.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};M.parseVar=function(e,t,n){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(d.eq)?i.init=this.parseMaybeAssign(t):n==="const"&&!(this.type===d._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():i.id.type!=="Identifier"&&!(t&&(this.type===d._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(d.comma))break}return e};M.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?Ql:hi,!1)};var As=1,wc=2,wy=4;M.parseFunction=function(e,t,n,i,r){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!i)&&(this.type===d.star&&t&wc&&this.unexpected(),e.generator=this.eat(d.star)),this.options.ecmaVersion>=8&&(e.async=!!i),t&As&&(e.id=t&wy&&this.type!==d.name?null:this.parseIdent(),e.id&&!(t&wc)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?Ql:hi:_y));var s=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Kl(e.async,e.generator)),t&As||(e.id=this.type===d.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,r),this.yieldPos=s,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(e,t&As?"FunctionDeclaration":"FunctionExpression")};M.parseFunctionParams=function(e){this.expect(d.parenL),e.params=this.parseBindingList(d.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};M.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var i=this.enterClassBody(),r=this.startNode(),s=!1;for(r.body=[],this.expect(d.braceL);this.type!==d.braceR;){var a=this.parseClassElement(e.superClass!==null);a&&(r.body.push(a),a.type==="MethodDefinition"&&a.kind==="constructor"?(s&&this.raise(a.start,"Duplicate constructor in the same class"),s=!0):a.key&&a.key.type==="PrivateIdentifier"&&AT(i,a)&&this.raiseRecoverable(a.key.start,"Identifier '#"+a.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(r,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};M.parseClassElement=function(e){if(this.eat(d.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),i="",r=!1,s=!1,a="method",o=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(d.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===d.star?o=!0:i="static"}if(n.static=o,!i&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===d.star)&&!this.canInsertSemicolon()?s=!0:i="async"),!i&&(t>=9||!s)&&this.eat(d.star)&&(r=!0),!i&&!s&&!r){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=u:i=u)}if(i?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=i,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===d.parenL||a!=="method"||r||s){var c=!n.static&&ko(n,"constructor"),l=c&&e;c&&a!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=c?"constructor":a,this.parseClassMethod(n,r,s,l)}else this.parseClassField(n);return n};M.isClassElementNameStart=function(){return this.type===d.name||this.type===d.privateId||this.type===d.num||this.type===d.string||this.type===d.bracketL||this.type.keyword};M.parseClassElementName=function(e){this.type===d.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};M.parseClassMethod=function(e,t,n,i){var r=e.key;e.kind==="constructor"?(t&&this.raise(r.start,"Constructor can't be a generator"),n&&this.raise(r.start,"Constructor can't be an async method")):e.static&&ko(e,"prototype")&&this.raise(r.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,i);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};M.parseClassField=function(e){if(ko(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&ko(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(d.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};M.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(ha|Yl);this.type!==d.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};M.parseClassId=function(e,t){this.type===d.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,hi,!1)):(t===!0&&this.unexpected(),e.id=null)};M.parseClassSuper=function(e){e.superClass=this.eat(d._extends)?this.parseExprSubscripts(null,!1):null};M.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};M.exitClassBody=function(){for(var e=this.privateNameStack.pop(),t=e.declared,n=e.used,i=this.privateNameStack.length,r=i===0?null:this.privateNameStack[i-1],s=0;s<n.length;++s){var a=n[s];la(t,a.name)||(r?r.used.push(a):this.raiseRecoverable(a.start,"Private field '#"+a.name+"' must be declared in an enclosing class"))}};function AT(e,t){var n=t.key.name,i=e[n],r="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(r=(t.static?"s":"i")+t.kind),i==="iget"&&r==="iset"||i==="iset"&&r==="iget"||i==="sget"&&r==="sset"||i==="sset"&&r==="sget"?(e[n]="true",!1):i?!0:(e[n]=r,!1)}function ko(e,t){var n=e.computed,i=e.key;return!n&&(i.type==="Identifier"&&i.name===t||i.type==="Literal"&&i.value===t)}M.parseExport=function(e,t){if(this.next(),this.eat(d.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==d.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(d._default)){this.checkExport(t,"default",this.lastTokStart);var n;if(this.type===d._function||(n=this.isAsyncFunction())){var i=this.startNode();this.next(),n&&this.next(),e.declaration=this.parseFunction(i,As|wy,!1,n)}else if(this.type===d._class){var r=this.startNode();e.declaration=this.parseClass(r,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(null),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==d.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var s=0,a=e.specifiers;s<a.length;s+=1){var o=a[s];this.checkUnreserved(o.local),this.checkLocalExport(o.local),o.local.type==="Literal"&&this.raise(o.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};M.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),la(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};M.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var i=0,r=t.properties;i<r.length;i+=1){var s=r[i];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var a=0,o=t.elements;a<o.length;a+=1){var u=o[a];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"?this.checkPatternExport(e,t.argument):n==="ParenthesizedExpression"&&this.checkPatternExport(e,t.expression)};M.checkVariableExport=function(e,t){if(e)for(var n=0,i=t;n<i.length;n+=1){var r=i[n];this.checkPatternExport(e,r.id)}};M.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};M.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(d.braceL);!this.eat(d.braceR);){if(n)n=!1;else if(this.expect(d.comma),this.afterTrailingComma(d.braceR))break;var i=this.startNode();i.local=this.parseModuleExportName(),i.exported=this.eatContextual("as")?this.parseModuleExportName():i.local,this.checkExport(e,i.exported,i.exported.start),t.push(this.finishNode(i,"ExportSpecifier"))}return t};M.parseImport=function(e){return this.next(),this.type===d.string?(e.specifiers=ET,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===d.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};M.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===d.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLValSimple(n.local,hi),e.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(d.comma))return e}if(this.type===d.star){var i=this.startNode();return this.next(),this.expectContextual("as"),i.local=this.parseIdent(),this.checkLValSimple(i.local,hi),e.push(this.finishNode(i,"ImportNamespaceSpecifier")),e}for(this.expect(d.braceL);!this.eat(d.braceR);){if(t)t=!1;else if(this.expect(d.comma),this.afterTrailingComma(d.braceR))break;var r=this.startNode();r.imported=this.parseModuleExportName(),this.eatContextual("as")?r.local=this.parseIdent():(this.checkUnreserved(r.imported),r.local=r.imported),this.checkLValSimple(r.local,hi),e.push(this.finishNode(r,"ImportSpecifier"))}return e};M.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===d.string){var e=this.parseLiteral(this.value);return bT.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};M.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};M.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var On=oe.prototype;On.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var i=0,r=e.properties;i<r.length;i+=1){var s=r[i];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};On.toAssignableList=function(e,t){for(var n=e.length,i=0;i<n;i++){var r=e[i];r&&this.toAssignable(r,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};On.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};On.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==d.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};On.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case d.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(d.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case d.braceL:return this.parseObj(!0)}return this.parseIdent()};On.parseBindingList=function(e,t,n){for(var i=[],r=!0;!this.eat(e);)if(r?r=!1:this.expect(d.comma),t&&this.type===d.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===d.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),i.push(s),this.type===d.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else{var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),i.push(a)}}return i};On.parseBindingListItem=function(e){return e};On.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(d.eq))return n;var i=this.startNodeAt(e,t);return i.left=n,i.right=this.parseMaybeAssign(),this.finishNode(i,"AssignmentPattern")};On.checkLValSimple=function(e,t,n){t===void 0&&(t=Ao);var i=t!==Ao;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(i?"Binding ":"Assigning to ")+e.name+" in strict mode"),i&&(t===hi&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(la(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==by&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":i&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return i&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(i?"Binding":"Assigning to")+" rvalue")}};On.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=Ao),e.type){case"ObjectPattern":for(var i=0,r=e.properties;i<r.length;i+=1){var s=r[i];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var a=0,o=e.elements;a<o.length;a+=1){var u=o[a];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};On.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=Ao),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var dn=function(t,n,i,r,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!i,this.override=r,this.generator=!!s},Vt={b_stat:new dn("{",!1),b_expr:new dn("{",!0),b_tmpl:new dn("${",!1),p_stat:new dn("(",!1),p_expr:new dn("(",!0),q_tmpl:new dn("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new dn("function",!1),f_expr:new dn("function",!0),f_expr_gen:new dn("function",!0,!1,null,!0),f_gen:new dn("function",!1,!1,null,!0)},ls=oe.prototype;ls.initialContext=function(){return[Vt.b_stat]};ls.curContext=function(){return this.context[this.context.length-1]};ls.braceIsBlock=function(e){var t=this.curContext();return t===Vt.f_expr||t===Vt.f_stat?!0:e===d.colon&&(t===Vt.b_stat||t===Vt.b_expr)?!t.isExpr:e===d._return||e===d.name&&this.exprAllowed?hn.test(this.input.slice(this.lastTokEnd,this.start)):e===d._else||e===d.semi||e===d.eof||e===d.parenR||e===d.arrow?!0:e===d.braceL?t===Vt.b_stat:e===d._var||e===d._const||e===d.name?!1:!this.exprAllowed};ls.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};ls.updateContext=function(e){var t,n=this.type;n.keyword&&e===d.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};ls.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};d.parenR.updateContext=d.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Vt.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};d.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Vt.b_stat:Vt.b_expr),this.exprAllowed=!0};d.dollarBraceL.updateContext=function(){this.context.push(Vt.b_tmpl),this.exprAllowed=!0};d.parenL.updateContext=function(e){var t=e===d._if||e===d._for||e===d._with||e===d._while;this.context.push(t?Vt.p_stat:Vt.p_expr),this.exprAllowed=!0};d.incDec.updateContext=function(){};d._function.updateContext=d._class.updateContext=function(e){e.beforeExpr&&e!==d._else&&!(e===d.semi&&this.curContext()!==Vt.p_stat)&&!(e===d._return&&hn.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===d.colon||e===d.braceL)&&this.curContext()===Vt.b_stat)?this.context.push(Vt.f_expr):this.context.push(Vt.f_stat),this.exprAllowed=!1};d.backQuote.updateContext=function(){this.curContext()===Vt.q_tmpl?this.context.pop():this.context.push(Vt.q_tmpl),this.exprAllowed=!1};d.star.updateContext=function(e){if(e===d._function){var t=this.context.length-1;this.context[t]===Vt.f_expr?this.context[t]=Vt.f_expr_gen:this.context[t]=Vt.f_gen}this.exprAllowed=!0};d.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==d.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var it=oe.prototype;it.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var i=e.key,r;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){r==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=i.start):this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0);return}r="$"+r;var a=t[r];if(a){var o;s==="init"?o=this.strict&&a.init||a.get||a.set:o=a.init||a[s],o&&this.raiseRecoverable(i.start,"Redefinition of property")}else a=t[r]={init:!1,get:!1,set:!1};a[s]=!0}};it.parseExpression=function(e,t){var n=this.start,i=this.startLoc,r=this.parseMaybeAssign(e,t);if(this.type===d.comma){var s=this.startNodeAt(n,i);for(s.expressions=[r];this.eat(d.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return r};it.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var i=!1,r=-1,s=-1,a=-1;t?(r=t.parenthesizedAssign,s=t.trailingComma,a=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new eu,i=!0);var o=this.start,u=this.startLoc;(this.type===d.parenL||this.type===d.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var c=this.parseMaybeConditional(e,t);if(n&&(c=n.call(this,c,o,u)),this.type.isAssign){var l=this.startNodeAt(o,u);return l.operator=this.value,this.type===d.eq&&(c=this.toAssignable(c,!1,t)),i||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=c.start&&(t.shorthandAssign=-1),this.type===d.eq?this.checkLValPattern(c):this.checkLValSimple(c),l.left=c,this.next(),l.right=this.parseMaybeAssign(e),a>-1&&(t.doubleProto=a),this.finishNode(l,"AssignmentExpression")}else i&&this.checkExpressionErrors(t,!0);return r>-1&&(t.parenthesizedAssign=r),s>-1&&(t.trailingComma=s),c};it.parseMaybeConditional=function(e,t){var n=this.start,i=this.startLoc,r=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return r;if(this.eat(d.question)){var s=this.startNodeAt(n,i);return s.test=r,s.consequent=this.parseMaybeAssign(),this.expect(d.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return r};it.parseExprOps=function(e,t){var n=this.start,i=this.startLoc,r=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||r.start===n&&r.type==="ArrowFunctionExpression"?r:this.parseExprOp(r,n,i,-1,e)};it.parseExprOp=function(e,t,n,i,r){var s=this.type.binop;if(s!=null&&(!r||this.type!==d._in)&&s>i){var a=this.type===d.logicalOR||this.type===d.logicalAND,o=this.type===d.coalesce;o&&(s=d.logicalAND.binop);var u=this.value;this.next();var c=this.start,l=this.startLoc,h=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,r),c,l,s,r),p=this.buildBinary(t,n,e,h,u,a||o);return(a&&this.type===d.coalesce||o&&(this.type===d.logicalOR||this.type===d.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(p,t,n,i,r)}return e};it.buildBinary=function(e,t,n,i,r,s){i.type==="PrivateIdentifier"&&this.raise(i.start,"Private identifier can only be left side of binary expression");var a=this.startNodeAt(e,t);return a.left=n,a.operator=r,a.right=i,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")};it.parseMaybeUnary=function(e,t,n,i){var r=this.start,s=this.startLoc,a;if(this.isContextual("await")&&this.canAwait)a=this.parseAwait(i),t=!0;else if(this.type.prefix){var o=this.startNode(),u=this.type===d.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0,u,i),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(o.argument):this.strict&&o.operator==="delete"&&o.argument.type==="Identifier"?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):o.operator==="delete"&&Sy(o.argument)?this.raiseRecoverable(o.start,"Private fields can not be deleted"):t=!0,a=this.finishNode(o,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===d.privateId)(i||this.privateNameStack.length===0)&&this.unexpected(),a=this.parsePrivateIdent(),this.type!==d._in&&this.unexpected();else{if(a=this.parseExprSubscripts(e,i),this.checkExpressionErrors(e))return a;for(;this.type.postfix&&!this.canInsertSemicolon();){var c=this.startNodeAt(r,s);c.operator=this.value,c.prefix=!1,c.argument=a,this.checkLValSimple(a),this.next(),a=this.finishNode(c,"UpdateExpression")}}if(!n&&this.eat(d.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(r,s,a,this.parseMaybeUnary(null,!1,!1,i),"**",!1);else return a};function Sy(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&Sy(e.expression)}it.parseExprSubscripts=function(e,t){var n=this.start,i=this.startLoc,r=this.parseExprAtom(e,t);if(r.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return r;var s=this.parseSubscripts(r,n,i,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};it.parseSubscripts=function(e,t,n,i,r){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,a=!1;;){var o=this.parseSubscript(e,t,n,i,s,a,r);if(o.optional&&(a=!0),o===e||o.type==="ArrowFunctionExpression"){if(a){var u=this.startNodeAt(t,n);u.expression=o,o=this.finishNode(u,"ChainExpression")}return o}e=o}};it.parseSubscript=function(e,t,n,i,r,s,a){var o=this.options.ecmaVersion>=11,u=o&&this.eat(d.questionDot);i&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var c=this.eat(d.bracketL);if(c||u&&this.type!==d.parenL&&this.type!==d.backQuote||this.eat(d.dot)){var l=this.startNodeAt(t,n);l.object=e,c?(l.property=this.parseExpression(),this.expect(d.bracketR)):this.type===d.privateId&&e.type!=="Super"?l.property=this.parsePrivateIdent():l.property=this.parseIdent(this.options.allowReserved!=="never"),l.computed=!!c,o&&(l.optional=u),e=this.finishNode(l,"MemberExpression")}else if(!i&&this.eat(d.parenL)){var h=new eu,p=this.yieldPos,m=this.awaitPos,b=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var g=this.parseExprList(d.parenR,this.options.ecmaVersion>=8,!1,h);if(r&&!u&&!this.canInsertSemicolon()&&this.eat(d.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=p,this.awaitPos=m,this.awaitIdentPos=b,this.parseArrowExpression(this.startNodeAt(t,n),g,!0,a);this.checkExpressionErrors(h,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=m||this.awaitPos,this.awaitIdentPos=b||this.awaitIdentPos;var S=this.startNodeAt(t,n);S.callee=e,S.arguments=g,o&&(S.optional=u),e=this.finishNode(S,"CallExpression")}else if(this.type===d.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var I=this.startNodeAt(t,n);I.tag=e,I.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(I,"TaggedTemplateExpression")}return e};it.parseExprAtom=function(e,t){this.type===d.slash&&this.readRegexp();var n,i=this.potentialArrowAt===this.start;switch(this.type){case d._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),n=this.startNode(),this.next(),this.type===d.parenL&&!this.allowDirectSuper&&this.raise(n.start,"super() call outside constructor of a subclass"),this.type!==d.dot&&this.type!==d.bracketL&&this.type!==d.parenL&&this.unexpected(),this.finishNode(n,"Super");case d._this:return n=this.startNode(),this.next(),this.finishNode(n,"ThisExpression");case d.name:var r=this.start,s=this.startLoc,a=this.containsEsc,o=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&o.name==="async"&&!this.canInsertSemicolon()&&this.eat(d._function))return this.overrideContext(Vt.f_expr),this.parseFunction(this.startNodeAt(r,s),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(d.arrow))return this.parseArrowExpression(this.startNodeAt(r,s),[o],!1,t);if(this.options.ecmaVersion>=8&&o.name==="async"&&this.type===d.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return o=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(d.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,s),[o],!0,t)}return o;case d.regexp:var u=this.value;return n=this.parseLiteral(u.value),n.regex={pattern:u.pattern,flags:u.flags},n;case d.num:case d.string:return this.parseLiteral(this.value);case d._null:case d._true:case d._false:return n=this.startNode(),n.value=this.type===d._null?null:this.type===d._true,n.raw=this.type.keyword,this.next(),this.finishNode(n,"Literal");case d.parenL:var c=this.start,l=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(l)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),l;case d.bracketL:return n=this.startNode(),this.next(),n.elements=this.parseExprList(d.bracketR,!0,!0,e),this.finishNode(n,"ArrayExpression");case d.braceL:return this.overrideContext(Vt.b_expr),this.parseObj(!1,e);case d._function:return n=this.startNode(),this.next(),this.parseFunction(n,0);case d._class:return this.parseClass(this.startNode(),!1);case d._new:return this.parseNew();case d.backQuote:return this.parseTemplate();case d._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}};it.parseExprImport=function(){var e=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var t=this.parseIdent(!0);switch(this.type){case d.parenL:return this.parseDynamicImport(e);case d.dot:return e.meta=t,this.parseImportMeta(e);default:this.unexpected()}};it.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(d.parenR)){var t=this.start;this.eat(d.comma)&&this.eat(d.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};it.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};it.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};it.parseParenExpression=function(){this.expect(d.parenL);var e=this.parseExpression();return this.expect(d.parenR),e};it.parseParenAndDistinguishExpression=function(e,t){var n=this.start,i=this.startLoc,r,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a=this.start,o=this.startLoc,u=[],c=!0,l=!1,h=new eu,p=this.yieldPos,m=this.awaitPos,b;for(this.yieldPos=0,this.awaitPos=0;this.type!==d.parenR;)if(c?c=!1:this.expect(d.comma),s&&this.afterTrailingComma(d.parenR,!0)){l=!0;break}else if(this.type===d.ellipsis){b=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===d.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,h,this.parseParenItem));var g=this.lastTokEnd,S=this.lastTokEndLoc;if(this.expect(d.parenR),e&&!this.canInsertSemicolon()&&this.eat(d.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=p,this.awaitPos=m,this.parseParenArrowList(n,i,u,t);(!u.length||l)&&this.unexpected(this.lastTokStart),b&&this.unexpected(b),this.checkExpressionErrors(h,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=m||this.awaitPos,u.length>1?(r=this.startNodeAt(a,o),r.expressions=u,this.finishNodeAt(r,"SequenceExpression",g,S)):r=u[0]}else r=this.parseParenExpression();if(this.options.preserveParens){var I=this.startNodeAt(n,i);return I.expression=r,this.finishNode(I,"ParenthesizedExpression")}else return r};it.parseParenItem=function(e){return e};it.parseParenArrowList=function(e,t,n,i){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,i)};var kT=[];it.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(d.dot)){e.meta=t;var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var i=this.start,r=this.startLoc,s=this.type===d._import;return e.callee=this.parseSubscripts(this.parseExprAtom(),i,r,!0,!1),s&&e.callee.type==="ImportExpression"&&this.raise(i,"Cannot use new with import()"),this.eat(d.parenL)?e.arguments=this.parseExprList(d.parenR,this.options.ecmaVersion>=8,!1):e.arguments=kT,this.finishNode(e,"NewExpression")};it.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===d.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===d.backQuote,this.finishNode(n,"TemplateElement")};it.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var i=this.parseTemplateElement({isTagged:t});for(n.quasis=[i];!i.tail;)this.type===d.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(d.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(d.braceR),n.quasis.push(i=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};it.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===d.name||this.type===d.num||this.type===d.string||this.type===d.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===d.star)&&!hn.test(this.input.slice(this.lastTokEnd,this.start))};it.parseObj=function(e,t){var n=this.startNode(),i=!0,r={};for(n.properties=[],this.next();!this.eat(d.braceR);){if(i)i=!1;else if(this.expect(d.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(d.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,r,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};it.parseProperty=function(e,t){var n=this.startNode(),i,r,s,a;if(this.options.ecmaVersion>=9&&this.eat(d.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===d.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===d.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,a=this.startLoc),e||(i=this.eat(d.star)));var o=this.containsEsc;return this.parsePropertyName(n),!e&&!o&&this.options.ecmaVersion>=8&&!i&&this.isAsyncProp(n)?(r=!0,i=this.options.ecmaVersion>=9&&this.eat(d.star),this.parsePropertyName(n)):r=!1,this.parsePropertyValue(n,e,i,r,s,a,t,o),this.finishNode(n,"Property")};it.parsePropertyValue=function(e,t,n,i,r,s,a,o){if((n||i)&&this.type===d.colon&&this.unexpected(),this.eat(d.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===d.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,i);else if(!t&&!o&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==d.comma&&this.type!==d.braceR&&this.type!==d.eq){(n||i)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var u=e.kind==="get"?0:1;if(e.value.params.length!==u){var c=e.value.start;e.kind==="get"?this.raiseRecoverable(c,"getter should have no params"):this.raiseRecoverable(c,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}else this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||i)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=r),e.kind="init",t?e.value=this.parseMaybeDefault(r,s,this.copyNode(e.key)):this.type===d.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(r,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};it.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(d.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(d.bracketR),e.key;e.computed=!1}return e.key=this.type===d.num||this.type===d.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};it.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};it.parseMethod=function(e,t,n){var i=this.startNode(),r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(i),this.options.ecmaVersion>=6&&(i.generator=e),this.options.ecmaVersion>=8&&(i.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Kl(t,i.generator)|Yl|(n?gy:0)),this.expect(d.parenL),i.params=this.parseBindingList(d.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(i,!1,!0,!1),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(i,"FunctionExpression")};it.parseArrowExpression=function(e,t,n,i){var r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(Kl(n,!1)|my),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,i),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(e,"ArrowFunctionExpression")};it.parseFunctionBody=function(e,t,n,i){var r=t&&this.type!==d.braceL,s=this.strict,a=!1;if(r)e.body=this.parseMaybeAssign(i),e.expression=!0,this.checkParams(e,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||o)&&(a=this.strictDirective(this.end),a&&o&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(e,!s&&!a&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,by),e.body=this.parseBlock(!1,void 0,a&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};it.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var i=n[t];if(i.type!=="Identifier")return!1}return!0};it.checkParams=function(e,t){for(var n=Object.create(null),i=0,r=e.params;i<r.length;i+=1){var s=r[i];this.checkLValInnerPattern(s,Ql,t?null:n)}};it.parseExprList=function(e,t,n,i){for(var r=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(d.comma),t&&this.afterTrailingComma(e))break;var a=void 0;n&&this.type===d.comma?a=null:this.type===d.ellipsis?(a=this.parseSpread(i),i&&this.type===d.comma&&i.trailingComma<0&&(i.trailingComma=this.start)):a=this.parseMaybeAssign(!1,i),r.push(a)}return r};it.checkUnreserved=function(e){var t=e.start,n=e.end,i=e.name;if(this.inGenerator&&i==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&i==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&i==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(i==="arguments"||i==="await")&&this.raise(t,"Cannot use "+i+" in class static initialization block"),this.keywords.test(i)&&this.raise(t,"Unexpected keyword '"+i+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var r=this.strict?this.reservedWordsStrict:this.reservedWords;r.test(i)&&(!this.inAsync&&i==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+i+"' is reserved"))}};it.parseIdent=function(e){var t=this.startNode();return this.type===d.name?t.name=this.value:this.type.keyword?(t.name=this.type.keyword,(t.name==="class"||t.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop()):this.unexpected(),this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};it.parsePrivateIdent=function(){var e=this.startNode();return this.type===d.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e),e};it.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===d.semi||this.canInsertSemicolon()||this.type!==d.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(d.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};it.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var To=oe.prototype;To.raise=function(e,t){var n=dy(this.input,e);t+=" ("+n.line+":"+n.column+")";var i=new SyntaxError(t);throw i.pos=e,i.loc=n,i.raisedAt=this.pos,i};To.raiseRecoverable=To.raise;To.curPosition=function(){if(this.options.locations)return new Ws(this.curLine,this.pos-this.lineStart)};var Gi=oe.prototype,TT=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Gi.enterScope=function(e){this.scopeStack.push(new TT(e))};Gi.exitScope=function(){this.scopeStack.pop()};Gi.treatFunctionsAsVarInScope=function(e){return e.flags&cs||!this.inModule&&e.flags&Ys};Gi.declareName=function(e,t,n){var i=!1;if(t===hi){var r=this.currentScope();i=r.lexical.indexOf(e)>-1||r.functions.indexOf(e)>-1||r.var.indexOf(e)>-1,r.lexical.push(e),this.inModule&&r.flags&Ys&&delete this.undefinedExports[e]}else if(t===vy){var s=this.currentScope();s.lexical.push(e)}else if(t===_y){var a=this.currentScope();this.treatFunctionsAsVar?i=a.lexical.indexOf(e)>-1:i=a.lexical.indexOf(e)>-1||a.var.indexOf(e)>-1,a.functions.push(e)}else for(var o=this.scopeStack.length-1;o>=0;--o){var u=this.scopeStack[o];if(u.lexical.indexOf(e)>-1&&!(u.flags&yy&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){i=!0;break}if(u.var.push(e),this.inModule&&u.flags&Ys&&delete this.undefinedExports[e],u.flags&Gl)break}i&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};Gi.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};Gi.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Gi.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Gl)return t}};Gi.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Gl&&!(t.flags&my))return t}};var nu=function(t,n,i){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new tu(t,i)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},fa=oe.prototype;fa.startNode=function(){return new nu(this,this.start,this.startLoc)};fa.startNodeAt=function(e,t){return new nu(this,e,t)};function xy(e,t,n,i){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=i),this.options.ranges&&(e.range[1]=n),e}fa.finishNode=function(e,t){return xy.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};fa.finishNodeAt=function(e,t,n,i){return xy.call(this,e,t,n,i)};fa.copyNode=function(e){var t=new nu(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var Iy="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Ey=Iy+" Extended_Pictographic",Ay=Ey,ky=Ay+" EBase EComp EMod EPres ExtPict",Ty=ky,NT=Ty,OT={9:Iy,10:Ey,11:Ay,12:ky,13:Ty,14:NT},fd="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Ny="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Oy=Ny+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Cy=Oy+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Ry=Cy+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Fy=Ry+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",CT=Fy+" Kawi Nag_Mundari Nagm",RT={9:Ny,10:Oy,11:Cy,12:Ry,13:Fy,14:CT},By={};function FT(e){var t=By[e]={binary:ur(OT[e]+" "+fd),nonBinary:{General_Category:ur(fd),Script:ur(RT[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var qu=0,dd=[9,10,11,12,13,14];qu<dd.length;qu+=1){var BT=dd[qu];FT(BT)}var L=oe.prototype,Ei=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":""),this.unicodeProperties=By[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};Ei.prototype.reset=function(t,n,i){var r=i.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=i,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9};Ei.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};Ei.prototype.at=function(t,n){n===void 0&&(n=!1);var i=this.source,r=i.length;if(t>=r)return-1;var s=i.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=r)return s;var a=i.charCodeAt(t+1);return a>=56320&&a<=57343?(s<<10)+a-56613888:s};Ei.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var i=this.source,r=i.length;if(t>=r)return r;var s=i.charCodeAt(t),a;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=r||(a=i.charCodeAt(t+1))<56320||a>57343?t+1:t+2};Ei.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};Ei.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};Ei.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};Ei.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};L.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,i=0;i<n.length;i++){var r=n.charAt(i);t.indexOf(r)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(r,i+1)>-1&&this.raise(e.start,"Duplicate regular expression flag")}};L.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};L.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var i=n[t];e.groupNames.indexOf(i)===-1&&e.raise("Invalid named capture referenced")}};L.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};L.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};L.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};L.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};L.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};L.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};L.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var i=0,r=-1;if(this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue),e.eat(125)))return r!==-1&&r<i&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};L.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};L.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};L.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};L.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};L.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};L.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};L.regexp_eatSyntaxCharacter=function(e){var t=e.current();return Ly(t)?(e.lastIntValue=t,e.advance(),!0):!1};function Ly(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}L.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!Ly(n);)e.advance();return e.pos!==t};L.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};L.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};L.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};L.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=ji(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=ji(e.lastIntValue);return!0}return!1};L.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,i=e.current(n);return e.advance(n),i===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(i=e.lastIntValue),LT(i)?(e.lastIntValue=i,!0):(e.pos=t,!1)};function LT(e){return _i(e,!0)||e===36||e===95}L.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,i=e.current(n);return e.advance(n),i===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(i=e.lastIntValue),DT(i)?(e.lastIntValue=i,!0):(e.pos=t,!1)};function DT(e){return ts(e,!0)||e===36||e===95||e===8204||e===8205}L.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};L.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};L.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};L.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};L.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};L.regexp_eatZero=function(e){return e.current()===48&&!iu(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};L.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};L.regexp_eatControlLetter=function(e){var t=e.current();return Dy(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function Dy(e){return e>=65&&e<=90||e>=97&&e<=122}L.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,i=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var r=e.lastIntValue;if(i&&r>=55296&&r<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var a=e.lastIntValue;if(a>=56320&&a<=57343)return e.lastIntValue=(r-55296)*1024+(a-56320)+65536,!0}e.pos=s,e.lastIntValue=r}return!0}if(i&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&MT(e.lastIntValue))return!0;i&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function MT(e){return e>=0&&e<=1114111}L.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};L.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};L.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(PT(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(t===80||t===112)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1};function PT(e){return e===100||e===68||e===115||e===83||e===119||e===87}L.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,i),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,r),!0}return!1};L.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){la(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};L.regexp_validateUnicodePropertyNameOrValue=function(e,t){e.unicodeProperties.binary.test(t)||e.raise("Invalid property name")};L.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";My(t=e.current());)e.lastStringValue+=ji(t),e.advance();return e.lastStringValue!==""};function My(e){return Dy(e)||e===95}L.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";UT(t=e.current());)e.lastStringValue+=ji(t),e.advance();return e.lastStringValue!==""};function UT(e){return My(e)||iu(e)}L.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};L.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1};L.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};L.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||Vy(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var i=e.current();return i!==93?(e.lastIntValue=i,e.advance(),!0):!1};L.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};L.regexp_eatClassControlLetter=function(e){var t=e.current();return iu(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};L.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};L.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;iu(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function iu(e){return e>=48&&e<=57}L.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;Py(n=e.current());)e.lastIntValue=16*e.lastIntValue+Uy(n),e.advance();return e.pos!==t};function Py(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function Uy(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}L.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};L.regexp_eatOctalDigit=function(e){var t=e.current();return Vy(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function Vy(e){return e>=48&&e<=55}L.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var i=0;i<t;++i){var r=e.current();if(!Py(r))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+Uy(r),e.advance()}return!0};var Xl=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new tu(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},lt=oe.prototype;lt.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Xl(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};lt.getToken=function(){return this.next(),new Xl(this)};typeof Symbol<"u"&&(lt[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===d.eof,value:t}}}});lt.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(d.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};lt.readToken=function(e){return _i(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};lt.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};lt.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var i=void 0,r=t;(i=ly(this.input,r,this.pos))>-1;)++this.curLine,r=this.lineStart=i;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};lt.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),i=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!us(i);)i=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};lt.skipSpace=function(){t:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(e>8&&e<14||e>=5760&&hy.test(String.fromCharCode(e)))++this.pos;else break t}}};lt.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};lt.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(d.ellipsis)):(++this.pos,this.finishToken(d.dot))};lt.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(d.assign,2):this.finishOp(d.slash,1)};lt.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,i=e===42?d.star:d.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,i=d.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(d.assign,n+1):this.finishOp(i,n)};lt.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(d.assign,3)}return this.finishOp(e===124?d.logicalOR:d.logicalAND,2)}return t===61?this.finishOp(d.assign,2):this.finishOp(e===124?d.bitwiseOR:d.bitwiseAND,1)};lt.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(d.assign,2):this.finishOp(d.bitwiseXOR,1)};lt.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||hn.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(d.incDec,2):t===61?this.finishOp(d.assign,2):this.finishOp(d.plusMin,1)};lt.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(d.assign,n+1):this.finishOp(d.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(d.relational,n))};lt.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(d.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(d.arrow)):this.finishOp(e===61?d.eq:d.prefix,1)};lt.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(d.questionDot,2)}if(t===63){if(e>=12){var i=this.input.charCodeAt(this.pos+2);if(i===61)return this.finishOp(d.assign,3)}return this.finishOp(d.coalesce,2)}}return this.finishOp(d.question,1)};lt.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),_i(t,!0)||t===92))return this.finishToken(d.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+ji(t)+"'")};lt.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(d.parenL);case 41:return++this.pos,this.finishToken(d.parenR);case 59:return++this.pos,this.finishToken(d.semi);case 44:return++this.pos,this.finishToken(d.comma);case 91:return++this.pos,this.finishToken(d.bracketL);case 93:return++this.pos,this.finishToken(d.bracketR);case 123:return++this.pos,this.finishToken(d.braceL);case 125:return++this.pos,this.finishToken(d.braceR);case 58:return++this.pos,this.finishToken(d.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(d.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(d.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+ji(e)+"'")};lt.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};lt.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var i=this.input.charAt(this.pos);if(hn.test(i)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(i==="[")t=!0;else if(i==="]"&&t)t=!1;else if(i==="/"&&!t)break;e=i==="\\"}++this.pos}var r=this.input.slice(n,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var o=this.regexpState||(this.regexpState=new Ei(this));o.reset(n,r,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var u=null;try{u=new RegExp(r,a)}catch{}return this.finishToken(d.regexp,{pattern:r,flags:a,value:u})};lt.readInt=function(e,t,n){for(var i=this.options.ecmaVersion>=12&&t===void 0,r=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,a=0,o=0,u=0,c=t??1/0;u<c;++u,++this.pos){var l=this.input.charCodeAt(this.pos),h=void 0;if(i&&l===95){r&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),o===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),o=l;continue}if(l>=97?h=l-97+10:l>=65?h=l-65+10:l>=48&&l<=57?h=l-48:h=1/0,h>=e)break;o=l,a=a*e+h}return i&&o===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:a};function VT(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function jy(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}lt.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=jy(this.input.slice(t,this.pos)),++this.pos):_i(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(d.num,n)};lt.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var i=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&i===110){var r=jy(this.input.slice(t,this.pos));return++this.pos,_i(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(d.num,r)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),i===46&&!n&&(++this.pos,this.readInt(10),i=this.input.charCodeAt(this.pos)),(i===69||i===101)&&!n&&(i=this.input.charCodeAt(++this.pos),(i===43||i===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),_i(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=VT(this.input.slice(t,this.pos),n);return this.finishToken(d.num,s)};lt.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};lt.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var i=this.input.charCodeAt(this.pos);if(i===e)break;i===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):i===8232||i===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(us(i)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(d.string,t)};var $y={};lt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===$y)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};lt.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw $y;this.raise(e,t)};lt.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===d.template||this.type===d.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(d.dollarBraceL)):(++this.pos,this.finishToken(d.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(d.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(us(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};lt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(d.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};lt.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return ji(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var i=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(i,8);return r>255&&(i=i.slice(0,-1),r=parseInt(i,8)),this.pos+=i.length-1,t=this.input.charCodeAt(this.pos),(i!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-i.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return us(t)?"":String.fromCharCode(t)}};lt.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};lt.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,i=this.options.ecmaVersion>=6;this.pos<this.input.length;){var r=this.fullCharCodeAtPos();if(ts(r,i))this.pos+=r<=65535?1:2;else if(r===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(t?_i:ts)(a,i)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=ji(a),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};lt.readWord=function(){var e=this.readWord1(),t=d.name;return this.keywords.test(e)&&(t=Hl[e]),this.finishToken(t,e)};var jT="8.8.2";oe.acorn={Parser:oe,version:jT,defaultOptions:bc,Position:Ws,SourceLocation:tu,getLineInfo:dy,Node:nu,TokenType:_t,tokTypes:d,keywordTypes:Hl,TokContext:dn,tokContexts:Vt,isIdentifierChar:ts,isIdentifierStart:_i,Token:Xl,isNewLine:us,lineBreak:hn,lineBreakG:gT,nonASCIIwhitespace:hy};function $T(e,t){return oe.parse(e,t)}const Zl={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},zT={ecmaVersion:11},pd="$",qT="d",HT="d1",WT="d2",he=e=>(t,n)=>n.error(t,e+" not allowed"),YT=he("Aggregate function"),GT=he("Window function"),KT="Invalid argument",th="Invalid column reference",QT=th+" (must be input to an aggregate function)",zy="Invalid function call",JT="Invalid member expression",XT="Invalid operator parameter",ZT="Invalid param reference",tN="Invalid variable reference",eN="Variable not accessible in operator call",nN="Unsupported variable declaration",iN="Unsupported destructuring pattern",qy="Table expressions do not support closures",Hy="Use aq.escape(fn) to use a function as-is (including closures)",rN="use table.params({ name: value }) to define dynamic parameters",sN="use aq.addFunction(name, fn) to add new op functions",aN=`
Note: ${qy}. ${Hy}, or ${rN}.`,Wy=`
Note: ${qy}. ${Hy}, or ${sN}.`,oN=`The ${K0} method is not valid in multi-table expressions.`;function uN(e,t){const n=cN(t);let i=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,oT(i)?(hN(i,e),i=i.body):e.join?(e.scope.add(e.tuple1=HT),e.scope.add(e.tuple2=WT),e.scope.add(e.$param=pd)):(e.scope.add(e.tuple=qT),e.scope.add(e.$param=pd)),pt(i,e,eh),e.root}function cN(e){try{const t=e.field?lN(e):St(e)?Qn(e):e;return $T(`expr=(${t})`,zT).body[0].expression.right}catch{et(`Expression parse error: ${e+""}`)}}function lN(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const eh={FunctionDeclaration:he("Function definitions"),ForStatement:he("For loops"),ForOfStatement:he("For-of loops"),ForInStatement:he("For-in loops"),WhileStatement:he("While loops"),DoWhileStatement:he("Do-while loops"),AwaitExpression:he("Await expressions"),ArrowFunctionExpression:he("Function definitions"),AssignmentExpression:he("Assignments"),FunctionExpression:he("Function definitions"),NewExpression:he('Use of "new"'),UpdateExpression:he("Update expressions"),VariableDeclarator(e,t){Ic(e.id,t)},Identifier(e,t,n){Ky(e,t,n)&&!t.scope.has(e.name)&&t.error(e,tN,aN)},CallExpression(e,t){const n=Yy(e.callee),i=W0(n)||Y0(n);if(i){if((t.join||t.aggregate===!1)&&Ml(n)&&YT(e,t),(t.join||t.window===!1)&&Pl(n)&&GT(e,t),t.$op=1,t.ast)xc(e,n,t),e.arguments.forEach(r=>pt(r,t,Sc));else{const r=t.op(fN(t,i,n,e.arguments));Object.assign(e,{type:j0,name:r.id})}return t.$op=0,!1}else H0(n)?xc(e,n,t):t.error(e,zy,Wy)},MemberExpression(e,t,n){const{object:i,property:r}=e;if(!ae(Bi,i))return;const{name:s}=i;if(Gy(e)&&ae(Bi,r)&&An(Zl,r.name)){Xy(e,r.name);return}const a=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(a>=0)return md(e,a,t,Qy,n);if(s===t.$param)return md(e,a,t,pN);t.paramsRef.has(s)?Gs(e,t.paramsRef.get(s)):t.columnRef.has(s)?Jy(i,s,t,e):An(t.params,s)&&Gs(i,s)}};function md(e,t,n,i,r){const{property:s,computed:a}=e;let o;if(!a)o=s.name;else if(ae(os,s))o=s.value;else try{pt(s,n,eh,e),o=n.param(s)}catch{n.error(e,JT)}return i(e,o,t,n,r),!1}const Sc={...eh,VariableDeclarator:he("Variable declaration in operator call"),Identifier(e,t,n){Ky(e,t,n)&&t.error(e,eN)},CallExpression(e,t){const n=Yy(e.callee);H0(n)?xc(e,n,t):t.error(e,zy,Wy)}};function hN(e,t){e.generator&&he("Generator functions")(e,t),e.async&&he("Async functions")(e,t);const{params:n}=e,i=n.length,r=a=>(o,u)=>t.columnRef.set(o,[u,a]),s=(a,o)=>t.paramsRef.set(a,o);i&&(t.join?(vs(t,n[0],"tuple1",r(1)),i>1&&vs(t,n[1],"tuple2",r(2)),i>2&&vs(t,n[2],"$param",s)):(vs(t,n[0],"tuple",r(0)),i>1&&vs(t,n[1],"$param",s))),t.root=e.body}function vs(e,t,n,i){ae(Bi,t)?(e.scope.add(t.name),e[n]=t.name):ae(U0,t)&&t.properties.forEach(r=>{const s=ae(Bi,r.key)?r.key.name:ae(os,r.key)?r.key.value:e.error(r,KT);ae(Bi,r.value)||e.error(r.value,iN),i(r.value.name,s)})}function fN(e,t,n,i){const r=[],s=[],a=t.param[0]||0,o=a+(t.param[1]||0);return i.forEach((u,c)=>{c<a?(pt(u,e,Sc),r.push(e.field(u))):c<o?(pt(u,e,Sc),s.push(e.param(u))):e.error(u,XT)}),{name:n,fields:r,params:s,...e.spec.window||{}}}function Yy(e){return ae(Bi,e)?e.name:ae(P0,e)?Gy(e)?dN(e.property.name):e.property.name:null}function Gy(e){return ae(Bi,e.object)&&e.object.name==="Math"}function dN(e){return e==="max"?"greatest":e==="min"?"least":e}function Ky(e,t,n){const{name:i}=e;if(!(ae(P0,n)&&n.property===e)){if(!(ae(V0,n)&&n.key===e))if(t.paramsRef.has(i))Gs(e,t.paramsRef.get(i));else if(t.columnRef.has(i))Jy(e,i,t,n);else if(An(t.params,i))Gs(e,i);else if(An(Zl,i))Xy(e,i);else return!0}}function Qy(e,t,n,i,r){const s=n===0?i.table:n>0?i.join[n-1]:null,a=s&&s.column(t);s&&!a&&i.error(e,th),i.aggronly&&!i.$op&&i.error(e,QT),G0(e,t,n,a,r)}function Jy(e,t,n,i){const[r,s]=n.columnRef.get(t);Qy(e,r,s,n,i)}function pN(e,t,n,i){i.params&&!An(i.params,t)&&i.error(e,ZT),Gs(e,t)}function Gs(e,t){e.type=uk,e.name=t}function Xy(e,t){e.type=sk,e.name=t,e.raw=Zl[t]}function xc(e,t,n){if(t===K0){const i=n.table;i||n.error(e,oN),Q0(e,e.arguments.length?e.arguments.map(r=>{const s=n.param(r),a=we(s)?i.columnName(s):s;return i.column(a)||n.error(r,th),a}):i.columnNames())}else e.callee={type:ok,name:t}}function Ic(e,t){ae(Bi,e)?t.scope.add(e.name):ae(ek,e)?e.elements.forEach(n=>Ic(n,t)):ae(U0,e)?e.properties.forEach(n=>Ic(n.value,t)):t.error(e.id,nN)}const mN={[ca]:1,[j0]:1};function De(e,t={}){const n=t.generate||Io,i=t.compiler||Ul,r=gN(t),s={},a={},o=[],u=[];let c=0,l=-1;const h=t.join?i.join:t.index==1?i.expr2:i.expr,p={op(g){const S=yN(g);return a[S]||(g.id=++l,a[S]=g)},field(g){const S=n(g);return s[S]||(s[S]=++c)},param(g){return ae(os,g)?g.value:i.param(n(g),r)},value(g,S){o.push(g);const I=S.escape||(t.ast?aT(S):h(n(S),r));u.push(I),mN[S.type]&&I!==S&&ye(I)&&(I.field=S.name)},error(g,S,I=""){const k=g.start-6,j=g.end-6,F=String(p.spec).slice(k,j);et(`${S}: "${F}"${I}`)}};Object.assign(p,t,{params:r});for(const[g,S]of Qo(e))p.value(g+"",S.escape?lT(p,S,r):uN(p,S));if(t.ast)return{names:o,exprs:u};const m=[];for(const g in s)m[s[g]]=i.expr(g,r);const b=Object.values(a);return b.forEach(g=>g.fields=g.fields.map(S=>m[S])),{names:o,exprs:u,ops:b}}function yN(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(i=>Number.isFinite(i)?Math.abs(i):-1);t+=`[${n},${!!e.peers}]`}return t}function gN(e){return(e.table?Hu(e.table):e.join?{...Hu(e.join[1]),...Hu(e.join[0])}:{})||{}}function Hu(e){return e&&Ut(e.params)?e.params():{}}const Zy="Expr",pn="ExprList",tg="ExprNumber",Is="ExprObject",Nr="JoinKeys",No="JoinValues",Ze="Options",nh="OrderKeys",Ni="SelectionList",Zi="TableRef",Or="TableRefList",_N="Descending",vN="Query",bN="Selection",wN="Verb",SN="Window";function ih(e,t){return e&&e.expr?new yd({...e,...t}):new yd(t,e)}class yd{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...Ut(this.expr)?{func:!0}:{}}}}function xN(e){return ih(e,{desc:!0})}function yr(e,t,n=0){const i=n?{field:!0,table:n}:{field:!0};return ih(e,t?{expr:t,...i}:i)}function IN(e,t,n){return ih(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function EN(e){const t=n=>n;return t.toString=()=>e,t}function gd(e,t){return t=t&&Ut(t.query)?t.query():t,t&&Ut(t.evaluate)?t.evaluate(null,e):e(t)}function eg(e){return ye(e)&&(St(e.all)||St(e.matches)||St(e.not)||St(e.range))}function Ks(e){return e&&Ut(e.toObject)?e.toObject():Ut(e)?{expr:String(e),func:!0}:St(e)?e.map(Ks):ye(e)?Xo(e,t=>Ks(t)):e}function rh(e){return St(e)?e.map(rh):ye(e)?St(e.verbs)?da.from(e):St(e.all)?Zr():St(e.range)?eT(...e.range):St(e.match)?nT(RegExp(...e.match)):St(e.not)?ay(e.not.map(Ks)):AN(e):e}function AN(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=yr(n):e.func===!0&&(t=n=EN(n)),ye(e.window)){const{frame:i,peers:r}=e.window;t=n=IN(n,i,r)}e.desc===!0&&(t=xN(n))}return e===t?Xo(e,i=>rh(i)):t}function kN(e){return St(e)?e.map(TN):e}function TN(e){const t=[];return Le(e).forEach(n=>{we(n)?t.push(n):pe(n)?t.push(yr(n,null)):ye(n)&&n.expr||Ut(n)?t.push(n):et(`Invalid key value: ${n+""}`)}),t}function NN(e){return St(e)?e.map(ON):e}function ON(e,t){return t<2?Le(e):e}function CN(e){const t=[];return e.forEach(n=>{const i=n.expr!=null?n.expr:n;if(ye(i)&&!Ut(i))for(const r in i)t.push(i[r]);else n=we(i)?i:pe(i)?yr(n):Ut(i)?n:et(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const RN={[Zy]:sg,[pn]:es,[tg]:PN,[Is]:$i,[Nr]:UN,[No]:VN,[nh]:es,[Ni]:DN};function FN(e,t,n){return t===Zi?_d(e):t===Or?e.map(_d):ng(Ks(e),t,n)}function ng(e,t,n){return t===Ze?e&&BN(e,n):RN[t](e)}function BN(e,t={}){const n={};for(const i in e){const r=e[i];n[i]=t[i]?ng(r,t[i]):r}return n}function LN(e,t){return De({expr:e},{...t,ast:!0}).exprs[0]}function sh(e){return{type:ca,name:e}}function ig(e){return{type:ca,index:e}}function $i(e,t){if(pe(e))return LN(e,t);if(e.expr){let n;if(e.field===!0?n=sh(e.expr):e.func===!0&&(n=$i(e.expr,t)),n)return e.desc&&(n={type:_N,expr:n}),e.window&&(n={type:SN,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...$i(e[n],t),as:n}))}function rg(e){const t=bN;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:es(e.not)}:e.range?{type:t,operator:"range",arguments:es(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:et("Invalid input")}function DN(e){return Le(e).map(MN).flat()}function MN(e){return eg(e)?rg(e):we(e)?ig(e):pe(e)?sh(e):ye(e)?Object.keys(e).map(t=>({type:ca,name:t,as:e[t]})):et("Invalid input")}function sg(e){return eg(e)?rg(e):we(e)?ig(e):pe(e)?sh(e):ye(e)?$i(e):et("Invalid input")}function es(e){return Le(e).map(sg).flat()}function PN(e){return we(e)?e:$i(e)}function UN(e){return St(e)?e.map(es):$i(e,{join:!0})}function VN(e){return St(e)?e.map((t,n)=>n<2?es(t):$i(t,{join:!0})):$i(e,{join:!0})}function _d(e){return e&&Ut(e.toAST)?e.toAST():e}class ag{constructor(t,n=[],i=[]){this.verb=t,this.schema=n,n.forEach((r,s)=>{const a=r.type,o=i[s],u=a===Nr?kN(o):a===No?NN(o):a===nh?CN(o):o;this[r.name]=u!==void 0?u:r.default})}static from(t){const n=Ec[t.verb],i=(n.schema||[]).map(({name:r})=>rh(t[r]));return n(...i)}evaluate(t,n){const i=this.schema.map(({name:r,type:s})=>{const a=this[r];return s===Zi?gd(n,a):s===Or?a.map(o=>gd(n,o)):a});return t[this.verb](...i)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=Ks(this[n])}),t}toAST(){const t={type:wN,verb:this.verb};return this.schema.forEach(({name:n,type:i,props:r})=>{t[n]=FN(this[n],i,r)}),t}}function Tt(e,t){return Object.assign((...n)=>new ag(e,t,n),{schema:t})}const Ec={count:Tt("count",[{name:"options",type:Ze}]),derive:Tt("derive",[{name:"values",type:Is},{name:"options",type:Ze,props:{before:Ni,after:Ni}}]),filter:Tt("filter",[{name:"criteria",type:Is}]),groupby:Tt("groupby",[{name:"keys",type:pn}]),orderby:Tt("orderby",[{name:"keys",type:nh}]),relocate:Tt("relocate",[{name:"columns",type:Ni},{name:"options",type:Ze,props:{before:Ni,after:Ni}}]),rename:Tt("rename",[{name:"columns",type:Ni}]),rollup:Tt("rollup",[{name:"values",type:Is}]),sample:Tt("sample",[{name:"size",type:tg},{name:"options",type:Ze,props:{weight:Zy}}]),select:Tt("select",[{name:"columns",type:Ni}]),ungroup:Tt("ungroup"),unorder:Tt("unorder"),reify:Tt("reify"),dedupe:Tt("dedupe",[{name:"keys",type:pn,default:[]}]),impute:Tt("impute",[{name:"values",type:Is},{name:"options",type:Ze,props:{expand:pn}}]),fold:Tt("fold",[{name:"values",type:pn},{name:"options",type:Ze}]),pivot:Tt("pivot",[{name:"keys",type:pn},{name:"values",type:pn},{name:"options",type:Ze}]),spread:Tt("spread",[{name:"values",type:pn},{name:"options",type:Ze}]),unroll:Tt("unroll",[{name:"values",type:pn},{name:"options",type:Ze,props:{drop:pn}}]),lookup:Tt("lookup",[{name:"table",type:Zi},{name:"on",type:Nr},{name:"values",type:pn}]),join:Tt("join",[{name:"table",type:Zi},{name:"on",type:Nr},{name:"values",type:No},{name:"options",type:Ze}]),cross:Tt("cross",[{name:"table",type:Zi},{name:"values",type:No},{name:"options",type:Ze}]),semijoin:Tt("semijoin",[{name:"table",type:Zi},{name:"on",type:Nr}]),antijoin:Tt("antijoin",[{name:"table",type:Zi},{name:"on",type:Nr}]),concat:Tt("concat",[{name:"tables",type:Or}]),union:Tt("union",[{name:"tables",type:Or}]),intersect:Tt("intersect",[{name:"tables",type:Or}]),except:Tt("except",[{name:"tables",type:Or}])};class da extends E0{constructor(t,n,i){super(n),this._verbs=t||[],this._table=i}static from({verbs:t,table:n,params:i}){return new da(t.map(ag.from),i,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const i of this._verbs)t=i.evaluate(t.params(this._params),n);return t}toObject(){return vd(this,"toObject")}toJSON(){return this.toObject()}toAST(){return vd(this,"toAST",{type:vN})}}function vd(e,t,n){return{...n,verbs:e._verbs.map(i=>i[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function jN(e,t){return new da(e._verbs.concat(t),e._params,e._table)}for(const e in Ec){const t=Ec[e];da.prototype["__"+e]=function(n,...i){return jN(n,t(...i))}}function hs(e,t,...n){const i=["_","$"],r=i.slice(0,n.length);return r.push('"use strict"; const '+n.map((s,a)=>s.map((o,u)=>`${i[a]}${u} = ${i[a]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...r)(...n)}function $N(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function ah(e,t){const n=Ge();return t.forEach((i,r)=>{const s=pe(i)?i:r;if(s){const a=e.column(r)||et(`Unrecognized column: ${r}`);n.add(s,a)}}),e.create(n)}function og(e,t,{before:n,after:i}={}){const r=n!=null,s=i!=null;r||s||et("relocate requires a before or after option."),r&&s&&et("relocate accepts only one of the before or after options."),t=gi(e,t);const a=[...gi(e,r?n:i).keys()],o=r?a[0]:a.pop(),u=new Map;return e.columnNames().forEach(c=>{const l=!t.has(c);if(c===o){s&&l&&u.set(c,c);for(const[h,p]of t)u.set(h,p);if(s)return}l&&u.set(c,c)}),ah(e,u)}function pa(e,t=i=>i,n=""){const i=e.length;if(!i)return"";let r=t(e[0],0);for(let s=1;s<i;++s)r+=n+t(e[s],s);return r}function oh(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function zN(e,t=0,n=e.length){let i=n?e[t++]:vt;for(let r=t;r<n;++r)i>e[r]&&(i=e[r]);return i}function qN(e,t=0,n=e.length){let i=n?e[t++]:vt;for(let r=t;r<n;++r)i<e[r]&&(i=e[r]);return i}function ka(e){return Hs(e)?e:+e}function HN(e,t){const n=e.length;if(!n)return vt;if((t=+t)<=0||n<2)return ka(e[0]);if(t>=1)return ka(e[n-1]);const i=(n-1)*t,r=Math.floor(i),s=ka(e[r]);return Hs(s)?s:s+(ka(e[r+1])-s)*(i-r)}class WN{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:zN(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:qN(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(oh)),HN(this._sorted,t)}}const Oo=(e,t,n)=>hs(t,"{"+pa(e,(i,r)=>`_${r}.${n}(${t});`)+"}",e);function YN(e,t){const{ops:n,output:i}=GN(e,t),r=e[0].fields,s=r.length,a=s===0?uh:s===1?KN:s===2?QN:et("Unsupported field count: "+s);return new a(r,n,i,t)}function GN(e,t){const n={},i=[];function r(a,o=[]){const u=a+":"+o;if(n[u])return n[u];const c=W0(a),l=c.create(...o);return t<0&&c.stream&&c.stream.forEach(h=>r(h,[])),c.req&&c.req.forEach(h=>r(h,[])),n[u]=l,i.push(l),l}const s=e.map(a=>{const o=r(a.name,a.params);return o.output=a.id,o});return{ops:i,output:s}}class uh extends rT{constructor(t,n,i,r){super(i),this._op=n,this._fields=t,this._stream=!!r}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new WN),t}write(t,n,i){const r=this._outputs,s=r.length;for(let a=0;a<s;++a)n[r[a].output][i]=r[a].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class KN extends uh{constructor(t,n,i,r){super(t,n,i,r);const s=["state","v1","v2"];this._add=Oo(n,s,"add"),this._rem=Oo(n,s,"rem")}add(t,n,i){const r=this._fields[0](n,i);++t.count,_n(r)&&(++t.valid,t.list&&t.list.add(r),this._add(t,r))}rem(t,n,i){const r=this._fields[0](n,i);--t.count,_n(r)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,r))}}class QN extends uh{constructor(t,n,i,r){super(t,n,i,r);const s=["state","v1","v2"];this._add=Oo(n,s,"add"),this._rem=Oo(n,s,"rem")}add(t,n,i){const r=this._fields[0](n,i),s=this._fields[1](n,i);++t.count,_n(r)&&_n(s)&&(++t.valid,t.list&&t.list.add([r,s]),this._add(t,r,s))}rem(t,n,i){const r=this._fields[0](n,i),s=this._fields[1](n,i);--t.count,_n(r)&&_n(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,r,s))}}function br(e,t,n){if(t.length){const i=e.data(),{keys:r}=e.groups()||{},s=fs(e,t),a=r?(o,u)=>s[o][r[u]]:o=>s[o][0];n=n.map(o=>u=>o(u,i,a))}return n}function fs(e,t,n){if(!t.length)return n;const i=ug(t),r=e.groups(),s=r?r.size:1;return n=n||Go(t.length,()=>Array(s)),s>1?i.forEach(a=>{const o=lg(e,a,r);for(let u=0;u<s;++u)a.write(o[u],n,u)}):i.forEach(a=>{const o=cg(e,a);a.write(o,n,0)}),n}function ug(e,t){const n=[],i={};for(const r of e){const s=r.fields.map(a=>a+"").join(",");(i[s]||(i[s]=[])).push(r)}for(const r in i)n.push(YN(i[r],t));return n}function cg(e,t){const n=t.init(),i=e.totalRows(),r=e.data(),s=e.mask();if(e.isOrdered()){const a=e.indices();for(let o=0;o<i;++o)t.add(n,a[o],r)}else if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))t.add(n,a,r);else for(let a=0;a<i;++a)t.add(n,a,r);return n}function lg(e,t,n){const{keys:i,size:r}=n,s=Go(r,()=>t.init()),a=e.data();if(e.isOrdered()){const o=e.indices(),u=o.length;for(let c=0;c<u;++c){const l=o[c];t.add(s[i[l]],l,a)}}else if(e.isFiltered()){const o=e.mask();for(let u=o.next(0);u>=0;u=o.next(u+1))t.add(s[i[u]],u,a)}else{const o=e.totalRows();for(let u=0;u<o;++u)t.add(s[i[u]],u,a)}return s}function hg(e,t){const{get:n,names:i,rows:r,size:s}=t,a=i.length;for(let o=0;o<a;++o){const u=e.add(i[o],Array(s)),c=n[o];for(let l=0;l<s;++l)u[l]=c(r[l])}}function fg(e){return{left(t,n,i,r){for(i==null&&(i=0),r==null&&(r=t.length);i<r;){const s=i+r>>>1;e(t[s],n)<0?i=s+1:r=s}return i},right(t,n,i,r){for(i==null&&(i=0),r==null&&(r=t.length);i<r;){const s=i+r>>>1;e(t[s],n)>0?r=s:i=s+1}return i}}}const bd=fg(oh);function JN(e,t,n,i,r){let s,a,o,u,c;const l=g=>a[g-1]===a[g],h=i.length,p=r.length,m=i.length?hs(["w","r","k"],"{"+pa(i,(g,S)=>`r[_${S}.id][k]=_${S}.value(w,_${S}.get);`)+"}",i):()=>{},b={i0:0,i1:0,index:0,size:0,peer:l,init(g,S,I,k){b.index=b.i0=b.i1=0,b.size=S.length,s=g,a=S,u=I,c=k,o=r?r.map(j=>j.init()):null;for(let j=0;j<h;++j)i[j].init();return b},value(g,S){return S(s[g],e)},step(g){const[S,I]=t,k=b.size,j=b.i0,F=b.i1;b.i0=S!=null?Math.max(0,g-Math.abs(S)):0,b.i1=I!=null?Math.min(k,g+Math.abs(I)+1):k,b.index=g,n&&(b.i0>0&&l(b.i0)&&(b.i0=bd.left(a,a[b.i0])),b.i1<k&&l(b.i1)&&(b.i1=bd.right(a,a[b.i1-1])));for(let Ot=0;Ot<p;++Ot){const rt=r[Ot],Qt=o[Ot];for(let gt=j;gt<b.i0;++gt)rt.rem(Qt,s[gt],e);for(let gt=F;gt<b.i1;++gt)rt.add(Qt,s[gt],e);rt.write(Qt,u,c)}return m(b,u,c),u}};return b}const XN=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),ZN=e=>!!e.peers;function tO(e){const{id:t,name:n,fields:i=[],params:r=[]}=e,s=Y0(n).create(...r);return i.length&&(s.get=i[0]),s.id=t,s}function eO(e,t,n,i={},r){const s=e.data(),a=nO(r,s),o=a.length,u=hs(["r","d","op"],"{"+pa(t,(c,l)=>`_${l}[r] = $${l}(r, d, op);`)+"}",t,n);e.partitions().forEach((c,l)=>{const h=c.length,p=iO(e,c);for(let b=0;b<o;++b)a[b].init(c,p,i,l);const m=b=>i[b][l];for(let b=0;b<h;++b){for(let g=0;g<o;++g)a[g].step(b);u(c[b],s,m)}})}function nO(e,t){const n={};return e.forEach(i=>{const r=XN(i),s=ZN(i),a=`${r},${s}`,{aggOps:o,winOps:u}=n[a]||(n[a]={frame:r,peers:s,aggOps:[],winOps:[]});Ml(i.name)?o.push(i):u.push(tO(i))}),Object.values(n).map(i=>JN(t,i.frame,i.peers,i.winOps,ug(i.aggOps,i.frame[0]!=null?-1:1)))}function iO(e,t){if(e.isOrdered()){const n=e.comparator(),i=e.data(),r=t.length,s=new Uint32Array(r);for(let a=1,o=0;a<r;++a)s[a]=n(t[a-1],t[a],i)?++o:o;return s}else return t}function rO(e){return Pl(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function ch(e,{names:t,exprs:n,ops:i},r={}){const s=e.totalRows(),a=Ge(r.drop?null:e),o=t.map(p=>a.add(p,Array(s))),[u,c]=sO(i),l=e.isGrouped()?e.groups().size:1,h=fs(e,u,Go(i.length,()=>Array(l)));return c.length?eO(e,o,n,h,c):aO(e,o,n,h),e.create(a)}function sO(e){const t=[],n=[],i=e.length;for(let r=0;r<i;++r){const s=e[r];s.id=r,(rO(s)?n:t).push(s)}return[t,n]}function aO(e,t,n,i){const r=e.mask(),s=e.data(),{keys:a}=e.groups()||{},o=a?(c,l)=>i[c][a[l]]:c=>i[c][0],u=t.length;for(let c=0;c<u;++c){const l=n[c],h=t[c];if(r)for(let p=r.next(0);p>=0;p=r.next(p+1))h[p]=l(p,s,o);else{const p=e.totalRows();for(let m=0;m<p;++m)h[m]=l(m,s,o)}}}function oO(e,t,n={}){const i=ch(e,De(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?i:og(i,Object.keys(t).filter(r=>!e.column(r)),n)}function uO(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((i,r)=>i.antijoin(r.select(n)),e).dedupe()}const Ta=2147483648,cO=4294967295;class dg{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let i=0;i<t;++i)for(let r=this._bits[i];r;++n)r&=r-1;return n}get(t){return this._bits[t>>5]&Ta>>>t}set(t){this._bits[t>>5]|=Ta>>>t}clear(t){this._bits[t>>5]&=~(Ta>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,i=n.length;let r=t>>5,s=n[r]&cO>>>t;for(;r<i;s=n[++r])if(s!==0)return(r<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let r=0;r<n;++r)t[r]=~t[r];const i=this._size%32;return i&&(t[n-1]&=Ta>>i-1),this}and(t){if(t){const n=this._bits,i=t._bits,r=n.length;for(let s=0;s<r;++s)n[s]&=i[s]}return this}or(t){if(t){const n=this._bits,i=t._bits,r=n.length;for(let s=0;s<r;++s)n[s]|=i[s]}return this}}function lO(e,t){const n=e.totalRows(),i=e.mask(),r=e.data(),s=new dg(n);if(i)for(let a=i.next(0);a>=0;a=i.next(a+1))t(a,r)&&s.set(a);else for(let a=0;a<n;++a)t(a,r)&&s.set(a);return e.create({filter:s})}function hO(e,t){const n=De({p:t},{table:e});let i=n.exprs[0];if(n.ops.length){const{data:r}=ch(e,n,{drop:!0}).column("p");i=s=>r[s]}return lO(e,i)}function pg(e,{names:t=[],exprs:n=[],ops:i=[]},r={}){if(!t.length)return e;const s=r.limit>0?+r.limit:1/0,a=r.index?r.index===!0?"index":r.index+"":null,o=new Set(r.drop),u=br(e,i,n),c=Ge(),l=new Set(t),h=[],p=[],m=[];e.columnNames().forEach(F=>{if(!o.has(F)){const Ot=c.add(F,[]);l.has(F)||(h.push(e.column(F)),p.push(Ot))}}),t.forEach(F=>{o.has(F)||(c.has(F)||c.add(F,[]),m.push(c.data[F]))});const b=a?c.add(a,[]):null;let g=0;const S=h.length,I=m.length,k=(F,Ot)=>{for(let rt=0;rt<S;++rt)p[rt].length=g+Ot,p[rt].fill(h[rt].get(F),g,g+Ot)},j=b?(F,Ot)=>{for(let rt=0;rt<Ot;++rt)b[F+rt]=rt}:()=>{};if(I===1){const F=u[0],Ot=m[0];e.scan((rt,Qt)=>{const gt=Le(F(rt,Qt)),ge=Math.min(gt.length,s);k(rt,ge);for(let Ke=0;Ke<ge;++Ke)Ot[g+Ke]=gt[Ke];j(g,ge),g+=ge})}else e.scan((F,Ot)=>{let rt=0;const Qt=u.map(gt=>{const ge=Le(gt(F,Ot));return rt=Math.min(Math.max(rt,ge.length),s),ge});k(F,rt);for(let gt=0;gt<I;++gt){const ge=m[gt],Ke=Qt[gt];for(let Ue=0;Ue<rt;++Ue)ge[g+Ue]=Ke[Ue]}j(g,rt),g+=rt});return e.create(c.new())}function fO(e,{names:t=[],exprs:n=[],ops:i=[]},r={}){if(t.length===0)return e;const[s="key",a="value"]=r.as||[],o=br(e,i,n);return pg(e,{names:[s,a],exprs:[()=>t,(u,c)=>o.map(l=>l(u,c))]},{...r,drop:t})}function kn(e,t,n,i={window:!1}){const r=new Map,s=a=>{a=we(a)?t.columnName(a):a,pe(a)?r.set(a,yr(a)):Ut(a)?gi(t,a).forEach(s):ye(a)?ry(r,a):et(`Invalid ${e} value: ${a+""}`)};return Le(n).forEach(s),i.preparse&&i.preparse(r),De(r,{table:t,...i})}function dO(e,t,n){return fO(e,kn("fold",e,t),n)}function wd(e,t,n,i){const r=n&&n.length;return pO(r?mO(e,n,i):e,t,r)}function pO(e,{names:t,exprs:n,ops:i},r){const s=br(e,i,n),a=r?null:Ge(e),o=e.totalRows();return t.forEach((u,c)=>{const l=e.column(u),h=r?l.data:a.add(u,Array(o)),p=s[c];e.scan(m=>{const b=l.get(m);h[m]=_n(b)?b:p(m)})}),r?e:e.create(a)}function mO(e,t,n){const i=e.groups(),r=e.data(),s=(i?i.names:[]).concat(t),a=(i?i.get:[]).concat(t.map(b=>e.getter(b))),o=new Set,u=Eo(a);e.scan((b,g)=>o.add(u(b,g)));const c=e.columnNames(),l=Ge(),h=c.map(b=>l.add(b,[]));c.forEach((b,g)=>{const S=r[b],I=h[g];e.scan(k=>I.push(S.get(k)))});const p=Eo(a.map((b,g)=>S=>S[g])),m=hs("v","{"+h.map((b,g)=>`_${g}.push(v[$${g}]);`).join("")+"}",h,c.map(b=>s.indexOf(b)));if(i){let b=i.keys.length;const g=n.reduce((I,k)=>I*k.length,i.size),S=new Uint32Array(g+(b-o.size));S.set(i.keys),Sd(i,n,(I,k)=>{o.has(p(I))||(m(I),S[b++]=k[0])}),l.groupby({...i,keys:S})}else Sd(i,n,b=>{o.has(p(b))||m(b)});return e.create(l.new())}function Sd(e,t,n){const i=e?e.get.length:0,r=e?1:0,s=r+t.length,a=new Int32Array(s),o=new Int32Array(s),u=[];if(e){const{get:l,rows:h,size:p}=e;a[0]=p,u.push((m,b)=>{const g=h[b];for(let S=0;S<i;++S)m[S]=l[S](g)})}t.forEach((l,h)=>{const p=h+i;a[h+r]=l.length,u.push((m,b)=>m[p]=l[b])});const c=Array(i+t.length);for(let l=0;l<s;++l)u[l](c,0);n(c,o);for(let l=s-1;l>=0;){const h=++o[l];h<a[l]?(u[l](c,h),n(c,o),l=s-1):(o[l]=0,u[l](c,0),--l)}}function lh(e,{names:t,exprs:n,ops:i}){const r=Ge(),s=e.groups();return s&&hg(r,s),yO(t,n,s,fs(e,i),r),e.create(r.new())}function yO(e,t,n,i=[],r){if(!t.length)return;const s=n?n.size:1,a=(u,c)=>i[u][c],o=e.length;for(let u=0;u<o;++u){const c=t[u];if(c.field!=null)r.add(e[u],i[c.field]);else if(s>1){const l=r.add(e[u],Array(s));for(let h=0;h<s;++h)l[h]=c(h,null,a)}else r.add(e[u],[c(0,null,a)])}}function gO(e,t,n={}){if(t=De(t,{table:e}),t.names.forEach(i=>e.column(i)?0:et(`Invalid impute column ${Qn(i)}`)),n.expand){const i={preparse:_O,aggronly:!0},r=kn("impute",e,n.expand,i),s=lh(e.ungroup(),r);return wd(e,t,r.names,r.names.map(a=>s.get(a,0)))}else return wd(e,t)}function _O(e){e.forEach((t,n)=>t.field?e.set(n,B0(t+"")):0)}function vO(e,t){const n=e.columnNames();return t.length?t.reduce((i,r)=>i.semijoin(r.select(n)),e).dedupe():e.reify([])}function mg(e,t){const n=new Map;return e.scan((i,r)=>{const s=t(i,r);s!=null&&s===s&&n.set(s,i)}),n}function bO(e,t,n){const i=new Map,r=e.length;for(let s=0;s<r;++s){const a=e[s],o=n(a,t);o!=null&&o===o&&(i.has(o)?i.get(o).push(s):i.set(o,[s]))}return i}function wO(e,t){const n=["i","a","j","b"];return hs(n,"{"+pa(e,(i,r)=>`_${r}.push($${r}(${n}));`)+"}",e,t)}function SO(e,t,n,{names:i,exprs:r},s={}){const a=e.data(),o=e.indices(!1),u=o.length,c=new Int32Array(u),l=t.data(),h=t.indices(!1),p=h.length,m=new Int32Array(p),b=i.length,g=Ge(),S=Array(b),I=Array(b);for(let F=0;F<i.length;++F)S[F]=g.add(i[F],[]),I[F]=r[F];const k=wO(S,I);if((St(n)?IO:xO)(k,n,a,l,o,h,c,m,u,p),s.left)for(let F=0;F<u;++F)c[F]||k(o[F],a,-1,l);if(s.right)for(let F=0;F<p;++F)m[F]||k(-1,a,h[F],l);return e.create(g.new())}function xO(e,t,n,i,r,s,a,o,u,c){for(let l=0;l<u;++l){const h=r[l];for(let p=0;p<c;++p){const m=s[p];t(h,n,m,i)&&(e(h,n,m,i),a[l]=1,o[p]=1)}}}function IO(e,[t,n],i,r,s,a,o,u,c,l){let h,p,m,b,g,S,I,k,j=e;c>=l?(h=i,p=t,m=o,b=s,g=r,S=n,I=u,k=a):(h=r,p=n,m=u,b=a,g=i,S=t,I=o,k=s,j=(rt,Qt,gt,ge)=>e(gt,ge,rt,Qt));const F=bO(k,g,S),Ot=b.length;for(let rt=0;rt<Ot;++rt){const Qt=b[rt],gt=F.get(p(Qt,h));if(gt){const ge=gt.length;for(let Ke=0;Ke<ge;++Ke){const Ue=gt[Ke];j(Qt,h,k[Ue],g),I[Ue]=1}m[rt]=1}}}function Co(e,t,n){const i=new Map;Le(n).forEach((s,a)=>{s=we(s)?t.columnName(s):s,pe(s)?i.set(a,yr(s)):Ut(s)||ye(s)&&s.expr?i.set(a,s):et(`Invalid ${e} key value: ${s+""}`)});const r=De(i,{table:t,aggregate:!1,window:!1});return Eo(r.exprs,!0)}function EO(e,t){const n=new Set(t);return e.filter(i=>n.has(i))}function hh(e,t,n){if(n)pe(n)?n=[n,n]:St(n)&&n.length===1&&(n=[n[0],n[0]]);else{const i=EO(e.columnNames(),t.columnNames());i.length||et("Natural join requires shared column names."),n=[i,i]}return n}function yg(e,t,n,i){return n.length!==i.length&&et("Mismatched number of join keys"),[Co("join",e,n),Co("join",t,i)]}const AO={aggregate:!1,window:!1},kO={...AO,index:1};function xd(e,t,n,i,r={}){n=hh(e,t,n);const s={join:[e,t]};let a;if(St(n)){const[o,u]=n.map(Le);a=yg(e,t,o,u),i||(i=TO(e,o,u,r))}else a=De({on:n},s).exprs[0],i||(i=[Zr(),Zr()]);return SO(e,t,a,NO(e,t,i,s,r&&r.suffix),r)}function TO(e,t,n,i){const r=[];t.forEach((a,o)=>pe(a)&&a===n[o]?r.push(a):0);const s=ay(r);if(i.left&&i.right){const a=new Set(r);return[e.columnNames().map(o=>{const u=`[${Qn(o)}]`;return a.has(o)?{[o]:`(a, b) => a${u} == null ? b${u} : a${u}`}:o}),s]}return i.right?[s,Zr()]:[Zr(),s]}function NO(e,t,n,i,r=[]){if(St(n)){let s,a,o,u=n.length;s=a=o={names:[],exprs:[]},u--&&(s=kn("join",e,n[0],i)),u--&&(a=kn("join",t,n[1],kO)),u--&&(o=De(n[2],i));const c=new Set,l=new Set(s.names);return a.names.forEach(h=>{l.has(h)&&c.add(h)}),c.size&&(Id(s.names,c,r[0]||"_1"),Id(a.names,c,r[1]||"_2")),{names:s.names.concat(a.names,o.names),exprs:s.exprs.concat(a.exprs,o.exprs)}}else return De(n,i)}function Id(e,t,n){e.forEach((i,r)=>t.has(i)?e[r]=i+n:0)}function OO(e,t,n,i={}){const r=new dg(e.totalRows());return(St(n)?CO:RO)(r,e,t,n),i.anti&&r.not().and(e.mask()),e.create({filter:r})}function CO(e,t,n,[i,r]){const s=mg(n,r);t.scan((a,o)=>{s.get(i(a,o))>=0&&e.set(a)})}function RO(e,t,n,i){const r=t.numRows(),s=n.numRows(),a=t.data(),o=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),c=n.indices(!1);for(let l=0;l<r;++l){const h=u[l];for(let p=0;p<s;++p)if(i(h,a,c[p],o)){e.set(h);break}}}else for(let u=0;u<r;++u)for(let c=0;c<s;++c)if(i(u,a,c,o)){e.set(u);break}}function Ed(e,t,n,i){n=hh(e,t,n);const r=St(n)?yg(e,t,...n.map(Le)):De({on:n},{join:[e,t]}).exprs[0];return OO(e,t,r,i)}function FO(e,t,[n,i],{names:r,exprs:s,ops:a}){const o=Ge(e),u=e.totalRows();r.forEach(p=>o.add(p,Array(u).fill(vt)));const c=mg(t,i),l=hs(["lr","rr","data"],"{"+pa(r,(p,m)=>`_[${m}][lr] = $[${m}](rr, data);`)+"}",r.map(p=>o.data[p]),br(t,a,s)),h=t.data();return e.scan((p,m)=>{const b=c.get(n(p,m));b>=0&&l(p,b,h)}),e.create(o)}function BO(e,t,n,i){return n=hh(e,t,n),FO(e,t,[Co("lookup",e,n[0]),Co("lookup",t,n[1])],kn("lookup",t,i))}const Ac=(e,t)=>e??t;function LO(e,t,n,i={}){const{keys:r,keyColumn:s}=DO(e,t,i),a=Ac(i.valueSeparator,"_"),o=n.names.length>1?(c,l)=>l+a+r[c]:c=>r[c],u=r.map(c=>fs(e,n.ops.map(l=>{if(l.name==="count"){const p=m=>c===s[m]?1:NaN;return p.toString=()=>c+":1",{...l,name:"sum",fields:[p]}}const h=l.fields.map(p=>{const m=(b,g)=>c===s[b]?p(b,g):NaN;return m.toString=()=>c+":"+p,m});return{...l,fields:h}})));return e.create(MO(n,o,e.groups(),u))}function DO(e,t,n){const i=n.limit>0?+n.limit:1/0,r=Ac(n.sort,!0),s=Ac(n.keySeparator,"_"),a=br(e,t.ops,t.exprs),o=a.length===1?a[0]:(h,p)=>a.map(m=>m(h,p)).join(s),u=Array(e.totalRows());e.scan((h,p)=>u[h]=o(h,p));const c=fs(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[h=>u[h]],params:[]}])[0][0],l=r?c.sort():c;return{keys:Number.isFinite(i)?l.slice(0,i):l,keyColumn:u}}function MO({names:e,exprs:t},n,i,r){const s=i?i.size:1,a=Ge(),o=r.length,u=e.length;let c;const l=(h,p)=>c[h][p];i&&hg(a,i);for(let h=0;h<u;++h){const p=t[h];if(p.field!=null)for(let m=0;m<o;++m)a.add(n(m,e[h]),r[m][p.field]);else if(s>1)for(let m=0;m<o;++m){c=r[m];const b=a.add(n(m,e[h]),Array(s));for(let g=0;g<s;++g)b[g]=p(g,null,l)}else for(let m=0;m<o;++m)c=r[m],a.add(n(m,e[h]),[p(0,null,l)])}return a.new()}function PO(e,t,n,i){return LO(e,kn("fold",e,t),kn("fold",e,n,{preparse:UO,aggronly:!0}),i)}function UO(e){e.forEach((t,n)=>t.field?e.set(n,C0(t+"")):0)}function VO(e,t){const n=new Map;return e.columnNames(i=>(n.set(i,i),0)),ah(e,gi(e,t,n))}function Ad(e,t){return lh(e,De(t,{table:e,aggronly:!0,window:!1}))}function jO(e,t,n,i){return(t?i?zO:$O:i?HO:qO)(e.length,e,n,i)}function $O(e,t,n){const i=n.length;for(let r=0;r<e;++r)t[r]=n[i*as()|0];return t}function zO(e,t,n,i){const r=n.length,s=new Float64Array(r);let a=0;for(let u=0;u<r;++u)s[u]=a+=i(n[u]);const o=fg(oh).right;for(let u=0;u<e;++u)t[u]=n[o(s,a*as())];return t}function qO(e,t,n){const i=n.length;if(e>=i)return n;for(let r=0;r<e;++r)t[r]=n[r];for(let r=e;r<i;++r){const s=r*as();s<e&&(t[s|0]=n[r])}return t}function HO(e,t,n,i){const r=n.length;if(e>=r)return n;const s=new Float32Array(r),a=new Uint32Array(r);for(let o=0;o<r;++o)a[o]=o,s[o]=-Math.log(as())/i(n[o]);a.sort((o,u)=>s[o]-s[u]);for(let o=0;o<e;++o)t[o]=n[a[o]];return t}function WO(e,t=0,n=e.length){let i=n-(t=+t);for(;i;){const r=as()*i--|0,s=e[i+t];e[i+t]=e[r+t],e[r+t]=s}return e}function YO(e,t,n,i={}){const{replace:r,shuffle:s}=i,a=e.partitions(!1);let o=0;t=a.map((l,h)=>{let p=t(h);return o+=p=r?p:Math.min(l.length,p),p});const u=new Uint32Array(o);let c=0;return a.forEach((l,h)=>{const p=t[h],m=u.subarray(c,c+=p);!r&&p===l.length?m.set(l):jO(m,r,l,n)}),s!==!1&&(a.length>1||!r)&&WO(u),e.reify(u)}function GO(e,t,n={}){return YO(e,KO(e,t),QO(e,n.weight),n)}const gg=e=>t=>e.get(t)||0;function KO(e,t){return we(t)?()=>t:gg(lh(e,De({size:t},{table:e,window:!1})).column("size"))}function QO(e,t){return t==null?null:(t=we(t)?e.columnName(t):t,gg(pe(t)?e.column(t):ch(e,De({w:t},{table:e}),{drop:!0}).column("w")))}function JO(e,t){return ah(e,gi(e,t))}function XO(e,{names:t,exprs:n,ops:i=[]},r={}){if(t.length===0)return e;const s=t.length===1&&r.as||[],a=r.drop==null?!0:!!r.drop,o=r.limit==null?s.length||1/0:Math.max(1,+r.limit||1),u=br(e,i,n),c=Ge(),l=t.reduce((p,m,b)=>p.set(m,b),new Map),h=(p,m)=>{const b=ZO(e,u[p],o),g=b.length;for(let S=0;S<g;++S)c.add(s[S]||`${m}_${S+1}`,b[S])};return e.columnNames().forEach(p=>{l.has(p)?(a||c.add(p,e.column(p)),h(l.get(p),p),l.delete(p)):c.add(p,e.column(p))}),l.forEach(h),e.create(c)}function ZO(e,t,n){const i=e.totalRows(),r=[];return e.scan((s,a)=>{const o=Le(t(s,a)),u=Math.min(o.length,n);for(;r.length<u;)r.push(Array(i).fill(vt));for(let c=0;c<u;++c)r[c][s]=o[c]}),r}function tC(e,t,n){return XO(e,kn("spread",e,t),n)}function eC(e,t){return e.concat(t).dedupe()}function nC(e,t,n){return pg(e,kn("unroll",e,t),n&&n.drop?{...n,drop:kn("unroll",e,n.drop).names}:n)}function iC(e,t){return e.create({groups:rC(e,t)})}function rC(e,{names:t=[],exprs:n=[],ops:i=[]}){const r=t.length;if(r===0)return null;if(r===1&&!e.isFiltered()&&n[0].field){const m=e.column(n[0].field);if(m.groups)return m.groups(t)}let s=br(e,i,n);const a=Eo(s),o=e.totalRows(),u=new Uint32Array(o),c={},l=[],h=e.data(),p=e.mask();if(p)for(let m=p.next(0);m>=0;m=p.next(m+1)){const b=a(m,h)+"",g=c[b];u[m]=g??(c[b]=l.push(m)-1)}else for(let m=0;m<o;++m){const b=a(m,h)+"",g=c[b];u[m]=g??(c[b]=l.push(m)-1)}return i.length||(s=s.map(m=>b=>m(b,h))),{keys:u,get:s,names:t,rows:l,size:l.length}}function sC(e,t){return iC(e,kn("groupby",e,t))}function aC(e,t){return e.create({order:t})}const oC=(e,t,n,i)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${i}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${i} : `;function uC(e,t){const n=[],i=[],r=[];let s=null,a="0",o="0";e.isGrouped()&&(s=e.groups().keys,a="ka",o="kb");const{ops:u}=De(t,{table:e,value:(m,b)=>{if(n.push(m),b.escape){const g=S=>`fn[${r.length}](${S}, data)`;i.push([g("a"),g("b")]),r.push(b.escape)}else i.push([Io(b,{index:"a",op:a}),Io(b,{index:"b",op:o})])},window:!1}),c=fs(e,u),l=(m,b)=>c[m][b],h=n.length;let p="return (a, b) => {"+(l&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let m=0;m<h;++m){const b=t.get(n[m]).desc?-1:1,[g,S]=i[m];p+=oC(g,S,-b,b)}return p+="0;};",Function("op","keys","fn","data",p)(l,s,r,e.data())}function cC(e,t){return aC(e,lC(e,t))}function lC(e,t){let n=-1;const i=new Map,r=s=>i.set(++n+"",s);return t.forEach(s=>{const a=s.expr!=null?s.expr:s;if(ye(a)&&!Ut(a))for(const o in a)r(a[o]);else r(we(a)?yr(s,e.columnName(a)):pe(a)?yr(s):Ut(a)?s:et(`Invalid orderby field: ${s+""}`))}),uC(e,i)}function hC(e,t){const n=e.numRows(),i=n+t.reduce((a,o)=>a+o.numRows(),0);if(n===i)return e;const r=[e,...t],s=Ge();return e.columnNames().forEach(a=>{const o=Array(i);let u=0;r.forEach(c=>{const l=c.column(a)||{get:()=>vt};c.scan(h=>o[u++]=l.get(h))}),s.add(a,o)}),e.create(s.new())}function fC(e,t){const n=Ge(),i=e.groups(),{get:r,names:s=[],rows:a,size:o=1}=i||{},u=new Uint32Array(o+1);s.forEach(p=>n.add(p,null));const c=i?lg(e,t,i):[cg(e,t)];t.outputs().map(p=>n.add(p,[]));const l=u.length-1;let h=0;for(let p=0;p<l;++p)h+=u[p+1]=t.write(c[p],n.data,u[p]);if(i){const p=e.data();s.forEach((m,b)=>{const g=n.data[m]=Array(h),S=r[b];for(let I=0,k=0;I<o;++I)g.fill(S(a[I],p),k,k+=u[I+1])})}return e.create(n.new())}function dC(e){return e.isGrouped()?e.create({groups:null}):e}function pC(e){return e.isOrdered()?e.create({order:null}):e}const mC={__antijoin:(e,t,n)=>Ed(e,t,n,{anti:!0}),__count:(e,t={})=>Ad(e,{[t.as||"count"]:R0()}),__cross:(e,t,n,i)=>xd(e,t,()=>!0,n,{...i,left:!0,right:!0}),__concat:hC,__dedupe:$N,__derive:oO,__except:uO,__filter:hO,__fold:dO,__impute:gO,__intersect:vO,__join:xd,__lookup:BO,__pivot:PO,__relocate:og,__rename:VO,__rollup:Ad,__sample:GO,__select:JO,__semijoin:Ed,__spread:tC,__union:eC,__unroll:nC,__groupby:sC,__orderby:cC,__ungroup:dC,__unorder:pC,__reduce:fC};Object.assign(ci.prototype,mC);function yC(e,t){return ci.from(e,t)}ci.prototype;class gC extends wi{constructor(t){super(),this.main_data_name=t.main_data_name,this.main_data=t.main_data_default,this.function_store=t.function_store,this.func_elected=t.default_func}async execute(t=[]){var o;console.log("args received back matching table backend",t),this.func_elected=((o=t[0])==null?void 0:o.func_elected)??this.func_elected;let n=yC(this.main_data);console.log("data for render",n.print());let i=n.columnNames();i=mv(i,["year","gid","value"]);let r=Vv(i,i);console.log("function store is :",this.function_store," and func elected is: ",this.func_elected);let s=this.function_store[0][this.func_elected];console.log("func is: ",s);let a=[];console.log("years in matching table backend are before passing to stats calculation: ",n.array("year")),r.forEach(([u,c])=>{let l=s(u,n.array(u),c,n.array(c));a.push({x:u,y:c,value:l})}),console.log("final information for rendering: ",a),this.emit("data",a,"matching_table")}render(t,n){console.log("updating matching table data with received _data, name,",t,n),console.log("matching table update for main data"),this.main_data=t??this.main_data,this.execute([])}}class _C extends wi{constructor(){super(),this.overlays={}}async execute(t,n){this.overlays=Fo(this.overlays,t);let i=Q_(r=>({key:r,left:this.overlays[r].left,right:this.overlays[r].right}),an(this.overlays));this.emit("data",i,"overlay")}}let vC={ArrayBackend:bx,URLBackend:wx,DuckDBBackend:d2,ClientDiffTreeBackend:m2,IdentityBackend:y2,RandomBackend:g2,QueryBackend:_2,MatchingTableBackend:gC,OverlayBackend:_C};class bC extends Map{get backends(){return Dd(this)}createBackends(t){for(const n of t)this.createBackend(n)}createBackend(t){let n=vC[t.type];if(!n)throw new Error(`Backend type ${t.type} not found`);let i=new n(t);return this[t.id]=i,console.info("createBackend",t.id,i),i}}const wC=[{name:"admin_raw",parquet:"admin_raw.parquet"},{name:"badyear_raw",parquet:"badyear_raw.parquet"},{name:"chirps_raw",parquet:"chirps_raw.parquet"},{name:"crop_cal_raw",parquet:"crop_cal_raw.parquet"},{name:"evi_raw",parquet:"evi_raw.parquet"}],SC=new bC;let kd=SC.createBackend({id:"duckdb1",type:"DuckDBBackend",name:null,url:null,schema:[]});async function QC(){console.log("dbGoLive started");let e=Date.now();await kd.init(!1),await kd.loadParquets(wC);let t=Date.now();return console.log("db go live time is,",t-e),t-e}export{an as A,Wu as B,ea as C,Cv as D,Ha as E,Dd as F,kd as G,bC as H,Hd as I,Wh as J,YS as K,Ud as L,mv as M,Q_ as N,Dv as O,Pv as P,bn as Q,Oe as R,In as S,yC as T,gS as U,TC as V,Fo as W,kC as X,NC as Y,Mt as _,Fd as a,dv as b,Pr as c,QC as d,Tc as e,Rd as f,Bc as g,np as h,rv as i,R1 as j,Ya as k,Bs as l,Ld as m,Lc as n,Oi as o,Ds as p,ef as q,w1 as r,$1 as s,B1 as t,sp as u,EC as v,AC as w,Ga as x,Bv as y,ev as z};
