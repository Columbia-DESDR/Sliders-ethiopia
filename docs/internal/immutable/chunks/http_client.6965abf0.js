import{B as an,S as xt,i as Tt,T as D,s as Nt,g as L,l as F,m as X,d as N,r as T,a as q,v as z,n as nt,f as le,Y as Kn,Z as rr,k as At,q as Et,_ as O,P as G,$ as ne,a0 as de,Q as Kt,y as rt,z as at,A as ht,e as ie,H as Mn,t as ce,F as ar,b as Ie,C as or,a1 as lr,j as Wi,p as Gi,w as Zi,x as Yi,U as Ht,a2 as ur,a3 as hr,a4 as cr,R as gt,N as fr,a5 as Wn,c as dr,a6 as _r,O as Gn}from"./index.9400ea7e.js";import{c as H,n as Zn,o as Qi,_ as me,p as Jt,q as Ke,r as se,k as zt,s as bn,t as mr,u as $i,g as qt,w as vn,x as gr,y as pr,h as yr,z as ts,j as et,A as br,C as vr,D as es,i as wn,E as wr,F as Me,G as kr,H as Yn,e as ct,f as It,l as ft,I as Sr,m as Ar,d as Qn,J as Er,K as xr}from"./index.42def3d2.js";import{w as dt}from"./paths.63f0d854.js";import{s as $n,j as te,r as ns,k as is,l as Mt,o as Tr,q as ti,P as Nr,t as ei,u as Cr,i as ss,v as Dr,x as Ir,y as Mr,z as rs,A as Or,B as ni,C as Br,D as jr,E as Ne,F as Pr,I as as,G as Oe,H as _e,J as kn,K as On,L as Lr,N as Fr,M as We,O as os,c as Ge,a as Ze,b as Ye,d as Qe,Q as zr,e as Bn,R as Xr,g as ls,S as $t,T as Ft,U as Be,V as je,W as us,X as Vr,Y as Rr,Z as qr,_ as Ur,$ as hs,a0 as Hr,a1 as Jr,a2 as be,h as Kr,a3 as $e,a4 as jn,a5 as cs,a6 as fs,a7 as Sn,a8 as Wr,a9 as Gr,aa as Zr,ab as ds,ac as Yr}from"./dot.333a6b60.js";import{_ as Qr}from"./preload-helper.41c905a7.js";var $r=H(function(t,n){return Number(t)+Number(n)});function _s(e,t,n){return function(){for(var i=[],s=0,r=e,a=0;a<t.length||s<arguments.length;){var l;a<t.length&&(!Zn(t[a])||s>=arguments.length)?l=t[a]:(l=arguments[s],s+=1),i[a]=l,Zn(l)||(r-=1),a+=1}return r<=0?n.apply(this,i):Qi(r,_s(e,i,n))}}var re=H(function(t,n){return t===1?me(n):Qi(t,_s(t,[],n))});function ta(e){return e&&e["@@transducer/reduced"]?e:{"@@transducer/value":e,"@@transducer/reduced":!0}}var ea=H(function(t,n){return n>t?n:t});function Ce(e,t){for(var n=0,i=t.length,s=Array(i);n<i;)s[n]=e(t[n]),n+=1;return s}var na=function(){function e(t,n){this.xf=n,this.f=t}return e.prototype["@@transducer/init"]=Jt.init,e.prototype["@@transducer/result"]=Jt.result,e.prototype["@@transducer/step"]=function(t,n){return this.xf["@@transducer/step"](t,this.f(n))},e}(),ia=H(function(t,n){return new na(t,n)}),sa=H(Ke(["fantasy-land/map","map"],ia,function(t,n){switch(Object.prototype.toString.call(n)){case"[object Function]":return re(n.length,function(){return t.call(this,n.apply(this,arguments))});case"[object Object]":return se(function(i,s){return i[s]=t(n[s]),i},{},zt(n));default:return Ce(t,n)}}));const Xt=sa,ra=Number.isInteger||function(t){return t<<0===t};var aa=H(function(t,n){var i=t<0?n.length+t:t;return bn(n)?n.charAt(i):n[i]});const ms=aa;var oa=H(function(t,n){if(n!=null)return ra(t)?ms(t,n):n[t]});const An=oa;var la=H(function(t,n){return Xt(An(t),n)});const Pn=la;var ua=function(){function e(t,n){this.xf=n,this.f=t,this.any=!1}return e.prototype["@@transducer/init"]=Jt.init,e.prototype["@@transducer/result"]=function(t){return this.any||(t=this.xf["@@transducer/step"](t,!1)),this.xf["@@transducer/result"](t)},e.prototype["@@transducer/step"]=function(t,n){return this.f(n)&&(this.any=!0,t=ta(this.xf["@@transducer/step"](t,!0))),t},e}(),ha=H(function(t,n){return new ua(t,n)}),ca=H(Ke(["any"],ha,function(t,n){for(var i=0;i<n.length;){if(t(n[i]))return!0;i+=1}return!1}));const gs=ca;var fa=H(function(t,n){return typeof n["fantasy-land/ap"]=="function"?n["fantasy-land/ap"](t):typeof t.ap=="function"?t.ap(n):typeof t=="function"?function(i){return t(i)(n(i))}:se(function(i,s){return mr(i,Xt(s,n))},[],t)}),da=H(function(t,n){return t.apply(this,n)});function ii(e,t){return vn(t)?t.map(e):zt(t).reduce(function(n,i){return n[i]=e(t[i]),n},{})}var _a=me(function e(t){return t=ii(function(n){return typeof n=="function"?n:e(n)},t),re($i(ea,0,Pn("length",qt(t))),function(){var n=arguments;return ii(function(i){return da(i,n)},t)})});const si=_a;function En(e){var t=Object.prototype.toString.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"}var ma=H(function(t,n){var i=re(t,n);return re(t,function(){return se(fa,Xt(i,arguments[0]),Array.prototype.slice.call(arguments,1))})}),ga=me(function(t){return ma(t.length,t)});function pa(e){return{"@@transducer/value":e,"@@transducer/reduced":!0}}var ya=function(e){return{"@@transducer/init":Jt.init,"@@transducer/result":function(t){return e["@@transducer/result"](t)},"@@transducer/step":function(t,n){var i=e["@@transducer/step"](t,n);return i["@@transducer/reduced"]?pa(i):i}}},ba=function(t){var n=ya(t);return{"@@transducer/init":Jt.init,"@@transducer/result":function(i){return n["@@transducer/result"](i)},"@@transducer/step":function(i,s){return gr(s)?se(n,i,s):se(n,i,[s])}}},va=H(function(t,n){return Xt(t,ba(n))}),wa=H(Ke(["fantasy-land/chain","chain"],va,function(t,n){return typeof n=="function"?function(i){return t(n(i))(i)}:pr(!1)(Xt(t,n))}));const ps=wa;function on(e){var t=e.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+t.replace(/"/g,'\\"')+'"'}var he=function(t){return(t<10?"0":"")+t},ka=typeof Date.prototype.toISOString=="function"?function(t){return t.toISOString()}:function(t){return t.getUTCFullYear()+"-"+he(t.getUTCMonth()+1)+"-"+he(t.getUTCDate())+"T"+he(t.getUTCHours())+":"+he(t.getUTCMinutes())+":"+he(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function Sa(e){return function(){return!e.apply(this,arguments)}}var Aa=H(function(t,n){return yr(Sa(t),n)});const Ea=Aa;function ys(e,t){var n=function(a){var l=t.concat([e]);return ts(a,l)?"<Circular>":ys(a,l)},i=function(r,a){return Ce(function(l){return on(l)+": "+n(r[l])},a.slice().sort())};switch(Object.prototype.toString.call(e)){case"[object Arguments]":return"(function() { return arguments; }("+Ce(n,e).join(", ")+"))";case"[object Array]":return"["+Ce(n,e).concat(i(e,Ea(function(r){return/^\d+$/.test(r)},zt(e)))).join(", ")+"]";case"[object Boolean]":return typeof e=="object"?"new Boolean("+n(e.valueOf())+")":e.toString();case"[object Date]":return"new Date("+(isNaN(e.valueOf())?n(NaN):on(ka(e)))+")";case"[object Null]":return"null";case"[object Number]":return typeof e=="object"?"new Number("+n(e.valueOf())+")":1/e===-1/0?"-0":e.toString(10);case"[object String]":return typeof e=="object"?"new String("+n(e.valueOf())+")":on(e);case"[object Undefined]":return"undefined";default:if(typeof e.toString=="function"){var s=e.toString();if(s!=="[object Object]")return s}return"{"+i(e,zt(e)).join(", ")+"}"}}var ln=me(function(t){return ys(t,[])}),xa=H(function(t,n){if(vn(t)){if(vn(n))return t.concat(n);throw new TypeError(ln(n)+" is not an array")}if(bn(t)){if(bn(n))return t+n;throw new TypeError(ln(n)+" is not a string")}if(t!=null&&En(t["fantasy-land/concat"]))return t["fantasy-land/concat"](n);if(t!=null&&En(t.concat))return t.concat(n);throw new TypeError(ln(t)+' does not have a method named "concat" or "fantasy-land/concat"')});const Pe=xa;var Ta=ms(-1);const un=Ta;var Na=H(function(t,n){return t||n}),Ca=H(function(t,n){return En(t)?function(){return t.apply(this,arguments)||n.apply(this,arguments)}:ga(Na)(t,n)});const Da=Ca;var Ia=me(function(t){return re(t.length,function(n,i){var s=Array.prototype.slice.call(arguments,0);return s[0]=i,s[1]=n,t.apply(this,s)})}),Ma=H(function(t,n){if(t.length===0||et(n))return!1;for(var i=n,s=0;s<t.length;)if(!et(i)&&br(t[s],i))i=i[t[s]],s+=1;else return!1;return!0}),Oa=H(function(t,n){return Ma([t],n)});const Le=Oa;var Ba=vr(function(t,n,i){return re(Math.max(t.length,n.length,i.length),function(){return t.apply(this,arguments)?n.apply(this,arguments):i.apply(this,arguments)})});const ri=Ba;var ja=function(){function e(t,n){this.xf=n,this.f=t,this.set=new es}return e.prototype["@@transducer/init"]=Jt.init,e.prototype["@@transducer/result"]=Jt.result,e.prototype["@@transducer/step"]=function(t,n){return this.set.add(this.f(n))?this.xf["@@transducer/step"](t,n):t},e}(),Pa=H(function(t,n){return new ja(t,n)}),La=H(Ke([],Pa,function(e,t){for(var n=new es,i=[],s=0,r,a;s<t.length;)a=t[s],r=e(a),n.add(r)&&i.push(a),s+=1;return i})),Fa=La(wn),za=H(function(t,n){var i,s;return t.length>n.length?(i=t,s=n):(i=n,s=t),Fa(wr(Ia(ts)(i),s))});const Xa=za;var Va=H(function(t,n){return se(function(i,s){return i[s]=t(n[s],s,n),i},{},zt(n))});const Ra=Va;var qa=$i($r,0);const Ua=qa;var Ha=H(function(t,n){for(var i={},s=0;s<t.length;)t[s]in n&&(i[t[s]]=n[t[s]]),s+=1;return i});const Ja=Ha;var Ka=H(function(t,n){return Array.prototype.slice.call(n,0).sort(t)});const Wa=Ka;var Ga=H(function(t,n){return Pe(Me(t,n),Me(n,t))});const Za=Ga;function Ya(e,t){var n=0,i=0;return Float64Array.from(e,t===void 0?s=>n+=+s||0:s=>n+=+t(s,i++,e)||0)}function Ln(e,t,n){return(t.length!==2?$n(ns(e,t,n),([i,s],[r,a])=>te(s,a)||te(i,r)):$n(is(e,n),([i,s],[r,a])=>t(s,a)||te(i,r))).map(([i])=>i)}function bs(e,t=te){let n,i=!1;if(t.length===1){let s;for(const r of e){const a=t(r);(i?te(a,s)>0:te(a,a)===0)&&(n=r,s=a,i=!0)}}else for(const s of e)(i?t(s,n)>0:t(s,s)===0)&&(n=s,i=!0);return n}const xn={capture:!0,passive:!1};function Tn(e){e.preventDefault(),e.stopImmediatePropagation()}function Qa(e){var t=e.document.documentElement,n=Mt(e).on("dragstart.drag",Tn,xn);"onselectstart"in t?n.on("selectstart.drag",Tn,xn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function $a(e,t){var n=e.document.documentElement,i=Mt(e).on("dragstart.drag",null);t&&(i.on("click.drag",Tn,xn),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const hn=e=>()=>e;function to(e,{sourceEvent:t,target:n,selection:i,mode:s,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:s,enumerable:!0,configurable:!0},_:{value:r}})}function eo(e){e.stopImmediatePropagation()}function cn(e){e.preventDefault(),e.stopImmediatePropagation()}var ai={name:"drag"},fn={name:"space"},Wt={name:"handle"},Gt={name:"center"};const{abs:oi,max:lt,min:ut}=Math;function li(e){return[+e[0],+e[1]]}function ui(e){return[li(e[0]),li(e[1])]}var De={name:"x",handles:["w","e"].map(Fe),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},dn={name:"y",handles:["n","s"].map(Fe),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Dt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},hi={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},ci={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},no={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},io={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Fe(e){return{type:e}}function so(e){return!e.ctrlKey&&!e.button}function ro(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function ao(){return navigator.maxTouchPoints||"ontouchstart"in this}function _n(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function oo(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function lo(){return uo(De)}function uo(e){var t=ro,n=so,i=ao,s=!0,r=kr("start","brush","end"),a=6,l;function u(m){var d=m.property("__brush",y).selectAll(".overlay").data([Fe("overlay")]);d.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Dt.overlay).merge(d).each(function(){var v=_n(this).extent;Mt(this).attr("x",v[0][0]).attr("y",v[0][1]).attr("width",v[1][0]-v[0][0]).attr("height",v[1][1]-v[0][1])}),m.selectAll(".selection").data([Fe("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Dt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var w=m.selectAll(".handle").data(e.handles,function(v){return v.type});w.exit().remove(),w.enter().append("rect").attr("class",function(v){return"handle handle--"+v.type}).attr("cursor",function(v){return Dt[v.type]}),m.each(h).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",p).filter(i).on("touchstart.brush",p).on("touchmove.brush",g).on("touchend.brush touchcancel.brush",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(m,d,w){m.tween?m.on("start.brush",function(v){f(this,arguments).beforestart().start(v)}).on("interrupt.brush end.brush",function(v){f(this,arguments).end(v)}).tween("brush",function(){var v=this,k=v.__brush,A=f(v,arguments),B=k.selection,C=e.input(typeof d=="function"?d.apply(this,arguments):d,k.extent),j=Tr(B,C);function W(S){k.selection=S===1&&C===null?null:j(S),h.call(v),A.brush()}return B!==null&&C!==null?W:W(1)}):m.each(function(){var v=this,k=arguments,A=v.__brush,B=e.input(typeof d=="function"?d.apply(v,k):d,A.extent),C=f(v,k).beforestart();Yn(v),A.selection=B===null?null:B,h.call(v),C.start(w).brush(w).end(w)})},u.clear=function(m,d){u.move(m,null,d)};function h(){var m=Mt(this),d=_n(this).selection;d?(m.selectAll(".selection").style("display",null).attr("x",d[0][0]).attr("y",d[0][1]).attr("width",d[1][0]-d[0][0]).attr("height",d[1][1]-d[0][1]),m.selectAll(".handle").style("display",null).attr("x",function(w){return w.type[w.type.length-1]==="e"?d[1][0]-a/2:d[0][0]-a/2}).attr("y",function(w){return w.type[0]==="s"?d[1][1]-a/2:d[0][1]-a/2}).attr("width",function(w){return w.type==="n"||w.type==="s"?d[1][0]-d[0][0]+a:a}).attr("height",function(w){return w.type==="e"||w.type==="w"?d[1][1]-d[0][1]+a:a})):m.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function f(m,d,w){var v=m.__brush.emitter;return v&&(!w||!v.clean)?v:new c(m,d,w)}function c(m,d,w){this.that=m,this.args=d,this.state=m.__brush,this.active=0,this.clean=w}c.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(m,d){return this.starting?(this.starting=!1,this.emit("start",m,d)):this.emit("brush",m),this},brush:function(m,d){return this.emit("brush",m,d),this},end:function(m,d){return--this.active===0&&(delete this.state.emitter,this.emit("end",m,d)),this},emit:function(m,d,w){var v=Mt(this.that).datum();r.call(m,this.that,new to(m,{sourceEvent:d,target:u,selection:e.output(this.state.selection),mode:w,dispatch:r}),v)}};function p(m){if(l&&!m.touches||!n.apply(this,arguments))return;var d=this,w=m.target.__data__.type,v=(s&&m.metaKey?w="overlay":w)==="selection"?ai:s&&m.altKey?Gt:Wt,k=e===dn?null:no[w],A=e===De?null:io[w],B=_n(d),C=B.extent,j=B.selection,W=C[0][0],S,x,R=C[0][1],I,U,E=C[1][0],V,it,_t=C[1][1],Q,$,Y=0,J=0,vt,pt=k&&A&&s&&m.shiftKey,Ot,ot,st=Array.from(m.touches||[m],P=>{const tt=P.identifier;return P=ti(P,d),P.point0=P.slice(),P.identifier=tt,P});Yn(d);var yt=f(d,arguments,!0).beforestart();if(w==="overlay"){j&&(vt=!0);const P=[st[0],st[1]||st[0]];B.selection=j=[[S=e===dn?W:ut(P[0][0],P[1][0]),I=e===De?R:ut(P[0][1],P[1][1])],[V=e===dn?E:lt(P[0][0],P[1][0]),Q=e===De?_t:lt(P[0][1],P[1][1])]],st.length>1&&wt(m)}else S=j[0][0],I=j[0][1],V=j[1][0],Q=j[1][1];x=S,U=I,it=V,$=Q;var Bt=Mt(d).attr("pointer-events","none"),bt=Bt.selectAll(".overlay").attr("cursor",Dt[w]);if(m.touches)yt.moved=pe,yt.ended=ye;else{var ge=Mt(m.view).on("mousemove.brush",pe,!0).on("mouseup.brush",ye,!0);s&&ge.on("keydown.brush",ue,!0).on("keyup.brush",jt,!0),Qa(m.view)}h.call(d),yt.start(m,v.name);function pe(P){for(const tt of P.changedTouches||[P])for(const Rt of st)Rt.identifier===tt.identifier&&(Rt.cur=ti(tt,d));if(pt&&!Ot&&!ot&&st.length===1){const tt=st[0];oi(tt.cur[0]-tt[0])>oi(tt.cur[1]-tt[1])?ot=!0:Ot=!0}for(const tt of st)tt.cur&&(tt[0]=tt.cur[0],tt[1]=tt.cur[1]);vt=!0,cn(P),wt(P)}function wt(P){const tt=st[0],Rt=tt.point0;var kt;switch(Y=tt[0]-Rt[0],J=tt[1]-Rt[1],v){case fn:case ai:{k&&(Y=lt(W-S,ut(E-V,Y)),x=S+Y,it=V+Y),A&&(J=lt(R-I,ut(_t-Q,J)),U=I+J,$=Q+J);break}case Wt:{st[1]?(k&&(x=lt(W,ut(E,st[0][0])),it=lt(W,ut(E,st[1][0])),k=1),A&&(U=lt(R,ut(_t,st[0][1])),$=lt(R,ut(_t,st[1][1])),A=1)):(k<0?(Y=lt(W-S,ut(E-S,Y)),x=S+Y,it=V):k>0&&(Y=lt(W-V,ut(E-V,Y)),x=S,it=V+Y),A<0?(J=lt(R-I,ut(_t-I,J)),U=I+J,$=Q):A>0&&(J=lt(R-Q,ut(_t-Q,J)),U=I,$=Q+J));break}case Gt:{k&&(x=lt(W,ut(E,S-Y*k)),it=lt(W,ut(E,V+Y*k))),A&&(U=lt(R,ut(_t,I-J*A)),$=lt(R,ut(_t,Q+J*A)));break}}it<x&&(k*=-1,kt=S,S=V,V=kt,kt=x,x=it,it=kt,w in hi&&bt.attr("cursor",Dt[w=hi[w]])),$<U&&(A*=-1,kt=I,I=Q,Q=kt,kt=U,U=$,$=kt,w in ci&&bt.attr("cursor",Dt[w=ci[w]])),B.selection&&(j=B.selection),Ot&&(x=j[0][0],it=j[1][0]),ot&&(U=j[0][1],$=j[1][1]),(j[0][0]!==x||j[0][1]!==U||j[1][0]!==it||j[1][1]!==$)&&(B.selection=[[x,U],[it,$]],h.call(d),yt.brush(P,v.name))}function ye(P){if(eo(P),P.touches){if(P.touches.length)return;l&&clearTimeout(l),l=setTimeout(function(){l=null},500)}else $a(P.view,vt),ge.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Bt.attr("pointer-events","all"),bt.attr("cursor",Dt.overlay),B.selection&&(j=B.selection),oo(j)&&(B.selection=null,h.call(d)),yt.end(P,v.name)}function ue(P){switch(P.keyCode){case 16:{pt=k&&A;break}case 18:{v===Wt&&(k&&(V=it-Y*k,S=x+Y*k),A&&(Q=$-J*A,I=U+J*A),v=Gt,wt(P));break}case 32:{(v===Wt||v===Gt)&&(k<0?V=it-Y:k>0&&(S=x-Y),A<0?Q=$-J:A>0&&(I=U-J),v=fn,bt.attr("cursor",Dt.selection),wt(P));break}default:return}cn(P)}function jt(P){switch(P.keyCode){case 16:{pt&&(Ot=ot=pt=!1,wt(P));break}case 18:{v===Gt&&(k<0?V=it:k>0&&(S=x),A<0?Q=$:A>0&&(I=U),v=Wt,wt(P));break}case 32:{v===fn&&(P.altKey?(k&&(V=it-Y*k,S=x+Y*k),A&&(Q=$-J*A,I=U+J*A),v=Gt):(k<0?V=it:k>0&&(S=x),A<0?Q=$:A>0&&(I=U),v=Wt),bt.attr("cursor",Dt[w]),wt(P));break}default:return}cn(P)}}function g(m){f(this,arguments).moved(m)}function b(m){f(this,arguments).ended(m)}function y(){var m=this.__brush||{selection:null};return m.extent=ui(t.apply(this,arguments)),m.dim=e,m}return u.extent=function(m){return arguments.length?(t=typeof m=="function"?m:hn(ui(m)),u):t},u.filter=function(m){return arguments.length?(n=typeof m=="function"?m:hn(!!m),u):n},u.touchable=function(m){return arguments.length?(i=typeof m=="function"?m:hn(!!m),u):i},u.handleSize=function(m){return arguments.length?(a=+m,u):a},u.keyModifiers=function(m){return arguments.length?(s=!!m,u):s},u.on=function(){var m=r.on.apply(r,arguments);return m===r?u:m},u}function Zt(e){return function(){return e}}function ho(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new Nr(t)}function co(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function vs(e){this._context=e}vs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function tn(e){return new vs(e)}function fo(e){return e[0]}function _o(e){return e[1]}function mo(e,t){var n=Zt(!0),i=null,s=tn,r=null,a=ho(l);e=typeof e=="function"?e:e===void 0?fo:Zt(e),t=typeof t=="function"?t:t===void 0?_o:Zt(t);function l(u){var h,f=(u=co(u)).length,c,p=!1,g;for(i==null&&(r=s(g=a())),h=0;h<=f;++h)!(h<f&&n(c=u[h],h,u))===p&&((p=!p)?r.lineStart():r.lineEnd()),p&&r.point(+e(c,h,u),+t(c,h,u));if(g)return r=null,g+""||null}return l.x=function(u){return arguments.length?(e=typeof u=="function"?u:Zt(+u),l):e},l.y=function(u){return arguments.length?(t=typeof u=="function"?u:Zt(+u),l):t},l.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Zt(!!u),l):n},l.curve=function(u){return arguments.length?(s=u,i!=null&&(r=s(i)),l):s},l.context=function(u){return arguments.length?(u==null?i=r=null:r=s(i=u),l):i},l}class ws{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function go(e){return new ws(e,!0)}function po(e){return new ws(e,!1)}function Vt(){}function ze(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function en(e){this._context=e}en.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ze(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ze(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function yo(e){return new en(e)}function ks(e){this._context=e}ks.prototype={areaStart:Vt,areaEnd:Vt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ze(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function bo(e){return new ks(e)}function Ss(e){this._context=e}Ss.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:ze(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function vo(e){return new Ss(e)}function As(e,t){this._basis=new en(e),this._beta=t}As.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],s=t[0],r=e[n]-i,a=t[n]-s,l=-1,u;++l<=n;)u=l/n,this._basis.point(this._beta*e[l]+(1-this._beta)*(i+u*r),this._beta*t[l]+(1-this._beta)*(s+u*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const wo=function e(t){function n(i){return t===1?new en(i):new As(i,t)}return n.beta=function(i){return e(+i)},n}(.85);function Xe(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Fn(e,t){this._context=e,this._k=(1-t)/6}Fn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Xe(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Xe(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ko=function e(t){function n(i){return new Fn(i,t)}return n.tension=function(i){return e(+i)},n}(0);function zn(e,t){this._context=e,this._k=(1-t)/6}zn.prototype={areaStart:Vt,areaEnd:Vt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Xe(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const So=function e(t){function n(i){return new zn(i,t)}return n.tension=function(i){return e(+i)},n}(0);function Xn(e,t){this._context=e,this._k=(1-t)/6}Xn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Xe(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Ao=function e(t){function n(i){return new Xn(i,t)}return n.tension=function(i){return e(+i)},n}(0);function Vn(e,t,n){var i=e._x1,s=e._y1,r=e._x2,a=e._y2;if(e._l01_a>ei){var l=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*l-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,s=(s*l-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>ei){var h=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,f=3*e._l23_a*(e._l23_a+e._l12_a);r=(r*h+e._x1*e._l23_2a-t*e._l12_2a)/f,a=(a*h+e._y1*e._l23_2a-n*e._l12_2a)/f}e._context.bezierCurveTo(i,s,r,a,e._x2,e._y2)}function Es(e,t){this._context=e,this._alpha=t}Es.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Vn(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Eo=function e(t){function n(i){return t?new Es(i,t):new Fn(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function xs(e,t){this._context=e,this._alpha=t}xs.prototype={areaStart:Vt,areaEnd:Vt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Vn(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const xo=function e(t){function n(i){return t?new xs(i,t):new zn(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function Ts(e,t){this._context=e,this._alpha=t}Ts.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Vn(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const To=function e(t){function n(i){return t?new Ts(i,t):new Xn(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function Ns(e){this._context=e}Ns.prototype={areaStart:Vt,areaEnd:Vt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function No(e){return new Ns(e)}function fi(e){return e<0?-1:1}function di(e,t,n){var i=e._x1-e._x0,s=t-e._x1,r=(e._y1-e._y0)/(i||s<0&&-0),a=(n-e._y1)/(s||i<0&&-0),l=(r*s+a*i)/(i+s);return(fi(r)+fi(a))*Math.min(Math.abs(r),Math.abs(a),.5*Math.abs(l))||0}function _i(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function mn(e,t,n){var i=e._x0,s=e._y0,r=e._x1,a=e._y1,l=(r-i)/3;e._context.bezierCurveTo(i+l,s+l*t,r-l,a-l*n,r,a)}function Ve(e){this._context=e}Ve.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:mn(this,this._t0,_i(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,mn(this,_i(this,n=di(this,e,t)),n);break;default:mn(this,this._t0,n=di(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Cs(e){this._context=new Ds(e)}(Cs.prototype=Object.create(Ve.prototype)).point=function(e,t){Ve.prototype.point.call(this,t,e)};function Ds(e){this._context=e}Ds.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,s,r){this._context.bezierCurveTo(t,e,i,n,r,s)}};function Co(e){return new Ve(e)}function Do(e){return new Cs(e)}function Is(e){this._context=e}Is.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=mi(e),s=mi(t),r=0,a=1;a<n;++r,++a)this._context.bezierCurveTo(i[0][r],s[0][r],i[1][r],s[1][r],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function mi(e){var t,n=e.length-1,i,s=new Array(n),r=new Array(n),a=new Array(n);for(s[0]=0,r[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)s[t]=1,r[t]=4,a[t]=4*e[t]+2*e[t+1];for(s[n-1]=2,r[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=s[t]/r[t-1],r[t]-=i,a[t]-=i*a[t-1];for(s[n-1]=a[n-1]/r[n-1],t=n-2;t>=0;--t)s[t]=(a[t]-s[t+1])/r[t];for(r[n-1]=(e[n]+s[n-1])/2,t=0;t<n-1;++t)r[t]=2*e[t+1]-s[t+1];return[s,r]}function Io(e){return new Is(e)}function nn(e,t){this._context=e,this._t=t}nn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Mo(e){return new nn(e,.5)}function Oo(e){return new nn(e,0)}function Bo(e){return new nn(e,1)}const jo=new Map([["basis",yo],["basis-closed",bo],["basis-open",vo],["bundle",wo],["bump-x",go],["bump-y",po],["cardinal",ko],["cardinal-closed",So],["cardinal-open",Ao],["catmull-rom",Eo],["catmull-rom-closed",xo],["catmull-rom-open",To],["linear",tn],["linear-closed",No],["monotone-x",Co],["monotone-y",Do],["natural",Io],["step",Mo],["step-after",Bo],["step-before",Oo]]);function Po(e=tn,t){if(typeof e=="function")return e;const n=jo.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function Ms(e=ae,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?ae:Po(e,t)}function ae(e){return tn(e)}function Lo(e={}){return Cr(e)?e:{...e,x:ss}}function Fo(e={},t={}){arguments.length===1&&([e,t]=Xo(e));const{y1:n,y:i=n,x:s,...r}=t,[a,l,u,h]=Ro(i,s,"y","x",e,r);return{...a,y1:n,y:l,x1:u,x2:h,x:Mr(u,h)}}function zo({x:e,x1:t,x2:n,...i}={}){return i=Dr(i,"y"),t===void 0&&n===void 0?Fo({x:e,...i}):([t,n]=Ir(e,t,n),{...i,x1:t,x2:n})}function Xo(e){const{offset:t,order:n,reverse:i,...s}=e;return[{offset:t,order:n,reverse:i},s]}const Vo={length:!0};function Ro(e,t=Pr,n,i,{offset:s,order:r,reverse:a},l){const u=rs(l),[h,f]=Or(e),[c,p]=ni(t),[g,b]=ni(t);return c.hint=g.hint=Vo,s=qo(s),r=Jo(r,s,i),[Br(l,(y,m,d)=>{const w=e==null?void 0:f(jr(Ne(y,e),d==null?void 0:d[n])),v=Ne(y,t,Float64Array),k=Ne(y,u),A=r&&r(y,w,v,k),B=y.length,C=p(new Float64Array(B)),j=b(new Float64Array(B)),W=[];for(const S of m){const x=w?Array.from(is(S,R=>w[R]).values()):[S];A&&Qo(x,A);for(const R of x){let I=0,U=0;a&&R.reverse();for(const E of R){const V=v[E];V<0?I=j[E]=(C[E]=I)+V:V>0?U=j[E]=(C[E]=U)+V:j[E]=C[E]=U}}W.push(x)}return s&&s(W,C,j,k),{data:y,facets:m}}),h,c,g]}function qo(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return Uo;case"center":case"silhouette":return Ho;case"wiggle":return Bs}throw new Error(`unknown offset: ${e}`)}}function Os(e,t){let n=0,i=0;for(const s of e){const r=t[s];r<n&&(n=r),r>i&&(i=r)}return[n,i]}function Uo(e,t,n){for(const i of e)for(const s of i){const[r,a]=Os(s,n);for(const l of s){const u=1/(a-r||1);t[l]=u*(t[l]-r),n[l]=u*(n[l]-r)}}}function Ho(e,t,n){for(const i of e){for(const s of i){const[r,a]=Os(s,n);for(const l of s){const u=(a+r)/2;t[l]-=u,n[l]-=u}}js(i,t,n)}Ps(e,t,n)}function Bs(e,t,n,i){for(const s of e){const r=new as;let a=0;for(const l of s){let u=-1;const h=l.map(g=>Math.abs(n[g]-t[g])),f=l.map(g=>{u=i?i[g]:++u;const b=n[g]-t[g],y=r.has(u)?b-r.get(u):0;return r.set(u,b),y}),c=[0,...Ya(f)];for(const g of l)t[g]+=a,n[g]+=a;const p=Oe(h);p&&(a-=Oe(h,(g,b)=>(f[b]/2+c[b])*g)/p)}js(s,t,n)}Ps(e,t,n)}function js(e,t,n){const i=_e(e,s=>_e(s,r=>t[r]));for(const s of e)for(const r of s)t[r]-=i,n[r]-=i}function Ps(e,t,n){const i=e.length;if(i===1)return;const s=e.map(l=>l.flat()),r=s.map(l=>(_e(l,u=>t[u])+kn(l,u=>n[u]))/2),a=_e(r);for(let l=0;l<i;l++){const u=a-r[l];for(const h of s[l])t[h]+=u,n[h]+=u}}function Jo(e,t,n){if(e===void 0&&t===Bs)return gi;if(e!=null){if(typeof e=="string"){switch(e.toLowerCase()){case"value":case n:return Ko;case"z":return Wo;case"sum":return Go;case"appearance":return Zo;case"inside-out":return gi}return pi(Fr(e))}if(typeof e=="function")return pi(e);if(Array.isArray(e))return Yo(e);throw new Error(`invalid order: ${e}`)}}function Ko(e,t,n){return n}function Wo(e,t,n,i){return i}function Go(e,t,n,i){return sn(i,Ln(On(e),s=>Oe(s,r=>n[r]),s=>i[s]))}function Zo(e,t,n,i){return sn(i,Ln(On(e),s=>t[bs(s,r=>n[r])],s=>i[s]))}function gi(e,t,n,i){const s=On(e),r=Ln(s,f=>t[bs(f,c=>n[c])],f=>i[f]),a=ns(s,f=>Oe(f,c=>n[c]),f=>i[f]),l=[],u=[];let h=0;for(const f of r)h<0?(h+=a.get(f),l.push(f)):(h-=a.get(f),u.push(f));return sn(i,u.reverse().concat(l))}function pi(e){return t=>Ne(t,e)}function Yo(e){return(t,n,i,s)=>sn(s,e)}function sn(e,t){if(!e)throw new Error("missing channel: z");return t=new as(t.map((n,i)=>[n,i])),e.map(n=>t.get(n))}function Qo(e,t){for(const n of e)n.sort((i,s)=>Lr(t[i],t[s]))}const $o={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class tl extends We{constructor(t,n={}){const{x1:i,y1:s,x2:r,y2:a,curve:l,tension:u}=n;super(t,{x1:{value:i,scale:"x"},y1:{value:s,scale:"y"},x2:{value:r,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},n,$o),this.curve=Ms(l,u),os(this,n)}project(t,n,i){this.curve!==ae&&super.project(t,n,i)}render(t,n,i,s,r){const{x1:a,y1:l,x2:u=a,y2:h=l}=i,{curve:f}=this;return Ge("svg:g",r).call(Ze,this,s,r).call(Ye,this,n).call(c=>c.selectAll().data(t).enter().append("path").call(Qe,this).attr("d",f===ae&&r.projection?el(r.projection,a,l,u,h):p=>{const g=zr(),b=f(g);return b.lineStart(),b.point(a[p],l[p]),b.point(u[p],h[p]),b.lineEnd(),g}).call(Bn,this,i).call(Xr,this,i,r)).node()}}function el(e,t,n,i,s){const r=ls(e);return t=$t(t),n=$t(n),i=$t(i),s=$t(s),a=>r({type:"LineString",coordinates:[[t[a],n[a]],[i[a],s[a]]]})}function Nn(e,{x:t,x1:n,x2:i,y:s,y1:r,y2:a,...l}={}){return[n,i]=yi(t,n,i),[r,a]=yi(s,r,a),new tl(e,{...l,x1:n,x2:i,y1:r,y2:a})}function yi(e,t,n){if(e===void 0){if(t===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[t]}else{if(t===void 0)return n===void 0?[e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}class nl extends We{constructor(t,n,i={},s){super(t,n,i,s);const{inset:r=0,insetTop:a=r,insetRight:l=r,insetBottom:u=r,insetLeft:h=r,rx:f,ry:c}=i;this.insetTop=Ft(a),this.insetRight=Ft(l),this.insetBottom=Ft(u),this.insetLeft=Ft(h),this.rx=Be(f,"auto"),this.ry=Be(c,"auto")}render(t,n,i,s,r){const{rx:a,ry:l}=this;return Ge("svg:g",r).call(Ze,this,s,r).call(this._transform,this,n).call(u=>u.selectAll().data(t).enter().append("rect").call(Qe,this).attr("x",this._x(n,i,s)).attr("width",this._width(n,i,s)).attr("y",this._y(n,i,s)).attr("height",this._height(n,i,s)).call(je,"rx",a).call(je,"ry",l).call(Bn,this,i)).node()}_x(t,{x:n},{marginLeft:i}){const{insetLeft:s}=this;return n?r=>n[r]+s:i+s}_y(t,{y:n},{marginTop:i}){const{insetTop:s}=this;return n?r=>n[r]+s:i+s}_width({x:t},{x:n},{marginRight:i,marginLeft:s,width:r}){const{insetLeft:a,insetRight:l}=this,u=n&&t?t.bandwidth():r-i-s;return Math.max(0,u-a-l)}_height({y:t},{y:n},{marginTop:i,marginBottom:s,height:r}){const{insetTop:a,insetBottom:l}=this,u=n&&t?t.bandwidth():r-i-s;return Math.max(0,u-a-l)}}const il={ariaLabel:"cell"};class sl extends nl{constructor(t,{x:n,y:i,...s}={}){super(t,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:i,scale:"y",type:"band",optional:!0}},s,il)}_transform(t,n){t.call(Ye,n,{},0,0)}}function rl(e,{x:t,y:n,...i}={}){return[t,n]=us(t,n),new sl(e,{...i,x:t,y:n})}const al={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};let ol=class extends We{constructor(t,n={}){const{x:i,y:s,z:r,curve:a,tension:l}=n;super(t,{x:{value:i,scale:"x"},y:{value:s,scale:"y"},z:{value:rs(n),optional:!0}},n,al),this.z=r,this.curve=Ms(a,l),os(this,n)}filter(t){return t}project(t,n,i){this.curve!==ae&&super.project(t,n,i)}render(t,n,i,s,r){const{x:a,y:l}=i,{curve:u}=this;return Ge("svg:g",r).call(Ze,this,s,r).call(Ye,this,n).call(h=>h.selectAll().data(Vr(t,[a,l],this,i)).enter().append("path").call(Qe,this).call(Rr,this,i).call(qr,this,i,r).attr("d",u===ae&&r.projection?ll(r.projection,a,l):mo().curve(u).defined(f=>f>=0).x(f=>a[f]).y(f=>l[f]))).node()}};function ll(e,t,n){const i=ls(e);return t=$t(t),n=$t(n),s=>{let r=[];const a=[r];for(const l of s)l===-1?(r=[],a.push(r)):r.push([t[l],n[l]]);return i({type:"MultiLineString",coordinates:a})}}function ul(e,{x:t,y:n,...i}={}){return[t,n]=us(t,n),new ol(e,{...i,x:t,y:n})}const hl={ariaLabel:"rect"};class Ls extends We{constructor(t,n={}){const{x1:i,y1:s,x2:r,y2:a,inset:l=0,insetTop:u=l,insetRight:h=l,insetBottom:f=l,insetLeft:c=l,rx:p,ry:g}=n;super(t,{x1:{value:i,scale:"x",optional:!0},y1:{value:s,scale:"y",optional:!0},x2:{value:r,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},n,hl),this.insetTop=Ft(u),this.insetRight=Ft(h),this.insetBottom=Ft(f),this.insetLeft=Ft(c),this.rx=Be(p,"auto"),this.ry=Be(g,"auto")}render(t,n,i,s,r){const{x:a,y:l}=n,{x1:u,y1:h,x2:f,y2:c}=i,{marginTop:p,marginRight:g,marginBottom:b,marginLeft:y,width:m,height:d}=s,{projection:w}=r,{insetTop:v,insetRight:k,insetBottom:A,insetLeft:B,rx:C,ry:j}=this;return Ge("svg:g",r).call(Ze,this,s,r).call(Ye,this,{x:u&&f&&a,y:h&&c&&l},0,0).call(W=>W.selectAll().data(t).enter().append("rect").call(Qe,this).attr("x",u&&f&&(w||!be(a))?S=>Math.min(u[S],f[S])+B:y+B).attr("y",h&&c&&(w||!be(l))?S=>Math.min(h[S],c[S])+v:p+v).attr("width",u&&f&&(w||!be(a))?S=>Math.max(0,Math.abs(f[S]-u[S])-B-k):m-g-y-k-B).attr("height",h&&c&&(w||!be(l))?S=>Math.max(0,Math.abs(h[S]-c[S])-v-A):d-p-b-v-A).call(je,"rx",C).call(je,"ry",j).call(Bn,this,i)).node()}}function cl(e,t){return new Ls(e,Ur(hs(t)))}function Rn(e,t={}){return Hr(t)||(t={...t,y:Jr,x2:ss,interval:1}),new Ls(e,zo(hs(Lo(t))))}function fl(e,t={}){if(!e||e.length===0)return[];let n=zt(e[0]),i=t.include?t.include:n;i=Me(t.include||n,t.exclude||[]);let s=Me(n,i);return console.log(i,s),ps(r=>i.map(a=>{let l=Ja(s,r);return l[t.key||"key"]=a,l[t.value||"value"]=r[a],l}),e)}class dl{add(t,n,i){let s=`${i.view.id}::${i.eventname}`;return et(this[s])?this[s]={iact:i,oldVal:t,newVal:n}:this[s].newVal=n,console.log("WriteSet.add",s,this[s]),this}forEach(t){qt(this).forEach(t)}merge(t){if(et(t))return this;t.forEach(({iact:n,oldVal:i,newVal:s})=>{this.add(i,s,n)})}}const Lt=ct(Array),bi=()=>null;function ee(e,t,n){if(ct(String,t))e[t]=n;else if(Lt(t)){let[i,...s]=t;et(e[i])&&(e[i]={}),ft(s)?ee(e,i,n):ee(e[i],s,n)}}function Re(e,t,n){if(ct(String,t))et(e[t])&&(e[t]=[]),e[t].push(n);else if(Lt(t)){let[i,...s]=t;et(e[i])&&(e[i]=ft(s)?[]:{}),ft(s)?Re(e,i,n):Re(e[i],s,n)}}function Pt(e,t,n){if(ct(String,t))return e[t]||(ct(Function,n)?n():n);if(Lt(t)){let[i,...s]=t;return et(e[i])?ct(Function,n)?n():n:ft(s)?Pt(e,i,n):Pt(e[i],s,n)}}class _l{constructor(){this.defaults={},this.dependencies={},this.view2iacts={},this.states={},this.viewData={}}add(t,n,i=bi,s){if(!t.attr)return this;let r=t.view.id,a=t.eventname;return Re(this.dependencies,[r,a],{view:n,domainfunction:i}),Re(this.view2iacts,n.id,t),this.setDefault(n,s),this}dependentViews(t){let n=t.eventname;return Pt(this.dependencies,[t.view.id,n],[])}cmp(t,n){return this.isDependentOn(t.view,n)?1:this.isDependentOn(n.view,t)?-1:0}isDependentOn(t,n){let i=this.getAncestorIacts(t);return gs(s=>(s.store??s)==n,i)}setDefault(t,n){return et(n)||(this.defaults[t.id]=n),this}getDefault(t,n){return(Pt(this.defaults,t.id)??bi)(n,this.getAncestorIacts(t))}getAncestorIacts(t){let n=[];return Pt(this.view2iacts,t.id,[]).forEach(i=>{n.push(i),n=Pe(n,this.getAncestorIacts(i.view))}),n}getStatesKey(t){let n=this.getAncestorIacts(t),i=Pe([t.id],n.map(s=>[s.id,s.val()]));return console.debug("ancestorStates",i,JSON.stringify(i)),JSON.stringify(i)}saveState(t,n,i){let s=this.getStatesKey(n.view);!et(i)&&et(i.states[s])&&ee(i.states,[s,n.eventname],{old:Pt(this.states,[s,n.eventname]),iact:n}),console.debug("saveState",s,n.eventname,Pt(this.states,[s,n.eventname]),t),ee(this.states,[s,n.eventname],t)}restoreStates(t){It((n,i)=>{It(({iact:s,old:r},a)=>{console.debug("restoreState",i,s.eventname,r),ee(this.states,[i,s.eventname],r)},n)},t.states)}getState(t,n,i=!0){let s=this.getStatesKey(t);return et(n)?this.states[s]:Pt(this.states,[s,n],()=>i?this.getDefault(t,n):void 0)}}class _u{constructor(t){this.interactions={},this.views={},this.backends={},this.i2b={},this.dependencies=new _l,this.transactions=[],this._isaborting=!1,this.backends=t,this._iactid=0,this._xid=0;const n=i=>s=>this.backends.createBackend({...s,type:i});this.backend=i=>this.backends.createBackend(i),this.backend.array=n("array"),this.backend.duckdb=n("duckdb"),this.backend.identity=n("identity"),this.backend.overlay=n("overlay"),this.backend.query=n("query"),this.backend.matching=n("matching")}view(t){if(this.views[t.id]=t,Lt(t)){t.forEach(n=>this.view(n));return}this.interactions[t.id]=this.interactions[t.id]??{_attrs:{}},t.magic=this,It((n,i)=>{if(!et(this.interactions[t.id][i]))return;let s=r=>{t.load(o,event)};Object.assign(n,{start:(...r)=>this.start(n,...r),end:()=>this.end(n),abort:()=>this.abort(n),val:()=>an(n)??{},load:s,id:this._iactid++,view:t,eventname:i,isActive:!1}),n.get=(r,a=null)=>{if(!et(this.interactions[t.id]._attrs[r]))return this.interactions[t.id]._attrs[r];let l={store:n,attr:r,view:t,eventname:i,load:s,default:a,id:this._iactid++,val:()=>{let u=an(n);return Le(r)(u)?u[r]:(ft(u)||console.error("could not find attr:",zt(an(n)).length),ct(Function,a)?a():a)},start:()=>this.start(l),end:()=>this.end(l),abort:()=>this.abort(l)};return this.interactions[t.id]._attrs[r]=l,l},this.interactions[t.id][i]=n},t.interactions)}render(t,n,i,s={}){return t=Lt(t)?t:[t],n=Lt(n)?n:[n],t.map(a=>{if(ct(Sr,a))return a;let l=this.backend.identity();return this.connect(l,a),l}).forEach(a=>{n.forEach(l=>a.registerView(l,i,s))}),this}saveBackends(t){console.debug("save backends invoked on: ",t),t=Lt(t)?t:[t],t.forEach(n=>{n.registerView((i,s)=>{console.debug("saveBackend",this,n,i,s),It((r,a)=>{It((l,u)=>{l.forEach(h=>{console.debug("saveBackend.DependencyLeaf.ViewIact",h.view.id,this.i2b[h.view.id]);let f=this.dependencies.getAncestorIacts(h.view),c=Pe([n.id],f.map(p=>[p.id,p.val()]));ft(Xa(zt(this.i2b[h.view.id]),n.id))||(console.debug("saveBackend.View",n.id,h.view.id),this.dependencies.viewData[c]=i)})},r)},this.dependencies.dependencies)})})}connect(t,n,i){var a;if(Lt(n)){n.forEach(l=>this.connect(t,l,i));return}let s=n,r=s.view;et(this.i2b[r.id])&&(s.subscribe(l=>{console.log("iact.subscribe.handleEvent",r.id,s.id),this.handleEvent(l,s)}),s.store?s.store.isActive=!0:s.isActive=!0,(a=r.registerInteraction)==null||a.call(r,s),this.i2b[r.id]={}),et(t)||ee(this.i2b,[r.id,t.id],this.processBindings(i))}processBindings(t){if(et(t)||ft(t))return wn;if(ct(Function,t))return t;let n=ri(Da(ct(Array),ct(Object)),Xt(i=>this.processBindings(i)),ri(ct(Function),wn,i=>()=>i))(t);return Le("*",t)?i=>Ar(i,si(n)(i)):si(n)}saveIactState(t,n,i){this.dependencies.saveState(t,n,i),this.dependencies.dependentViews(n).forEach(({view:s,domainfunction:r})=>{if(r){let l=this.dependencies.getAncestorIacts(s);s.render(r(t,l))}let a=this.dependencies.getState(s);It((l,u)=>{l=l??this.dependencies.getDefault(s,u),l&&(console.debug("saveIactState.load",s.id,u,l),s.load(l,u))},a),(et(a)||ft(a))&&(console.debug("saveIactState.load.default",s.id),s.load(this.dependencies.getDefault(s)))})}handleEvent(t,n){if(!et(t))if(console.log("handleEvent",this._isaborting,n.view.id,t),this._isaborting)this.dependencies.saveState(t,n,null),this.sendEventToBackends(t,n);else if(this.transactions.length==0||un(this.transactions).iact!=n)n.start(),this.handleEvent(t,n),n.end();else{let i=un(this.transactions),s=this.dependencies.getState(n.view,n.eventname,!1);i.writeSet.add(s,t,n),i.visible&&this.sendEventToBackends(t,n)}}sendEventToBackends(t,n){It((i,s)=>{let r=i(t);this.backends[s].execute(r,n)},this.i2b[n.view.id])}snapshot(){return Ra(t=>t.snapshot(),this.backends)}restoreSnapshot(t){It((n,i)=>{et(n)||this.backends[i].restoreSnapshot(n)},t.snapshot)}start(t,n=!0){this.transactions.push({xid:this._xid++,iact:t,visible:n,snapshot:this.snapshot(),states:{},writeSet:new dl}),console.log("magic.start",this.transactions)}end(t){if(!gs(r=>r.iact=t,this.transactions)){console.log("magic.end: can't find interaction",t);return}let n=this.transactions.pop();console.log("magic.end[",n.writeSet),n.writeSet.forEach(({newVal:r,iact:a})=>{this.saveIactState(r,a,n),n.visible||this.sendEventToBackends(r,a)});let i=qt(n.writeSet).map(({iact:r})=>r.id),s=ps(r=>qt(r).map(({iact:a})=>a.id),qt(n.states));if(ft(Za(i,s))||console.error("writeset != statesids",i,s),this.transactions.length>0){let r=un(this.transactions);r.snapshot=Qn(r.snapshot,n.snapshot),r.states=Qn(r.states,n.states),r.writeSet.merge(n.writeSet)}console.log("magic.end]",this.dependencies.states,this.transactions)}abort(t){try{this._isaborting=!0;let n=this.transactions.pop();console.log("magic.abort",n.states,n.writeSet),this.restoreSnapshot(n),console.log("magic.abort.restoredStates.before",Er(this.dependencies.states)),this.dependencies.restoreStates(n),console.log("magic.abort.restoredStates.after",this.dependencies.states),Wa((s,r)=>this.dependencies.cmp(s.iact,r.iact),qt(n.writeSet)).forEach(({iact:s})=>{let r=this.dependencies.getState(s.view,s.eventname);r&&s.view.load&&(console.log("magic.abort.load",r,s),s.view.load(r,s.eventname))})}finally{this._isaborting=!1}}importState(t){let n=JSON.parse(t);this.dependencies.states=n,It((i,s)=>{let r=this.views[s];this.walkViews(r)},this.dependencies.dependencies)}walkViews(t){let n=this.dependencies.getStatesKey(t),i=this.dependencies.states[n],s=qt(i);if(s.length>1){console.error("unexpected behavior, multiple values for state");return}t.load(s[0])}exportState(){return JSON.stringify(this.dependencies.states)}exportData(){return JSON.stringify(this.dependencies.viewData)}}const qe="_theplot_",ml={top:30,right:20,bottom:50,left:40};function rn(e,t){e.className=e.className||qe,et(e.width);let n=Kr(e),i=null;return n.tagName=="svg"&&n.classList.contains(e.className)?i=n:i=n.querySelector(`svg.${e.className}`),i.classList.add(qe),e.width||i.setAttribute("width","100%"),e.height||i.setAttribute("height","100%"),t.innerHTML="",t.appendChild(n),n}class qn{constructor({iact:t,magic:n,plot:i=null}){this.x=null,this.y=null,this.defaultSelection,this.brush,this.el,this.iact=t,this.magic=n,this.plot=i,i&&this.init(i)}load(t){if(!(!this.el||!this.brush)&&this.iact.isActive){if(!t||ft(t)){this.el.call(this.brush.clear);return}const{left:n,right:i}=t;this.el.call(this.brush.move,[this.x.apply(n),this.x.apply(i)])}}brushed({selection:t}){if(this.iact.isActive)if(!t)this.iact.set(this.defaultSelection);else{const[n,i]=t;this.iact.set({left:this.x.invert(n),right:this.x.invert(i)})}}brushstart({selection:t,sourceEvent:n}){this.iact.isActive&&n&&this.magic.start(this.iact)}brushended({selection:t,sourceEvent:n}){this.iact.isActive&&(t||this.iact.set({left:this.x.domain[0],right:this.x.domain[1]}),n&&this.magic.end(this.iact))}init(t){if(!this.iact.isActive)return;if(this.plot=t,this.x=t.scale("x"),this.y=t.scale("y"),this.y.range[0]<this.y.range[1]){let i=this.y.range[0];this.y.range[0]=this.y.range[1],this.y.range[1]=i}this.defaultSelection={left:this.x.domain[0],right:this.x.domain[1]};let n=t.classList.contains(qe)?Mt(t):Mt(t.querySelector(`.${qe}`));this.brush=lo().extent([[this.x.range[0],this.y.range[1]],[this.x.range[1],this.y.range[0]]]).on("brush",i=>this.brushed(i)).on("start",i=>this.brushstart(i)).on("end",i=>this.brushended(i)),this.el=n.append("g").attr("class","brush").call(this.brush)}}function gl(e){let t,n;return{c(){t=L("div"),n=L("div"),this.h()},l(i){t=F(i,"DIV",{id:!0});var s=X(t);n=F(s,"DIV",{}),X(n).forEach(N),s.forEach(N),this.h()},h(){T(t,"id",e[0])},m(i,s){q(i,t,s),z(t,n),e[15](n)},p(i,[s]){s&1&&T(t,"id",i[0])},i:nt,o:nt,d(i){i&&N(t),e[15](null)}}}function pl(e,t,n){let{id:i,name:s,magic:r,description:a,xAttr:l,yAttr:u,xDomainMin:h=null,xDomainMax:f=null,brushX:c=dt({}),interactions:p={brushX:c}}=t,g,b=null,y={},m=[],d;function w(C,j){return j==="overlay"?(y=C,!0):!1}function v(C,j){!C||C.length===0||typeof j=="object"||(w(C,j)?console.debug("overlays"):m=C,A())}let{load:k=C=>d==null?void 0:d.load(C)}=t;function A(){n(2,h=h??_e(Xt(An(l),m))),n(3,f=f??kn(Xt(An(l),m)));const C=Math.max(36,Math.min(m.length,20));let j={x:{domain:[+h,+f]},height:200,marginBottom:50,color:{scheme:"Tableau10",legend:!0,style:{"font-size":10,"margin-left":"2rem"}},marks:[$e({ticks:C,fontSize:10}),jn({fontSize:10}),cs([h]),fs([0]),ul(m,{x:l,y:u,marker:!0,strokeWidth:3}),Rn(y,{x1:"left",x2:"right",y2:kn(Pn(u,m)),fill:"key",color:"key",opacity:.2})]};b=rn(j,g),c.isActive&&(d=d??new qn({iact:c,magic:r}),d.init(b))}function B(C){le[C?"unshift":"push"](()=>{g=C,n(1,g)})}return e.$$set=C=>{"id"in C&&n(4,i=C.id),"name"in C&&n(0,s=C.name),"magic"in C&&n(5,r=C.magic),"description"in C&&n(6,a=C.description),"xAttr"in C&&n(7,l=C.xAttr),"yAttr"in C&&n(8,u=C.yAttr),"xDomainMin"in C&&n(2,h=C.xDomainMin),"xDomainMax"in C&&n(3,f=C.xDomainMax),"brushX"in C&&n(9,c=C.brushX),"interactions"in C&&n(10,p=C.interactions),"load"in C&&n(13,k=C.load)},[s,g,h,f,i,r,a,l,u,c,p,w,v,k,A,B]}class mu extends xt{constructor(t){super(),Tt(this,t,pl,gl,Nt,{id:4,name:0,magic:5,description:6,xAttr:7,yAttr:8,xDomainMin:2,xDomainMax:3,brushX:9,interactions:10,overlay:11,render:12,load:13,update:14})}get id(){return this.$$.ctx[4]}set id(t){this.$$set({id:t}),D()}get name(){return this.$$.ctx[0]}set name(t){this.$$set({name:t}),D()}get magic(){return this.$$.ctx[5]}set magic(t){this.$$set({magic:t}),D()}get description(){return this.$$.ctx[6]}set description(t){this.$$set({description:t}),D()}get xAttr(){return this.$$.ctx[7]}set xAttr(t){this.$$set({xAttr:t}),D()}get yAttr(){return this.$$.ctx[8]}set yAttr(t){this.$$set({yAttr:t}),D()}get xDomainMin(){return this.$$.ctx[2]}set xDomainMin(t){this.$$set({xDomainMin:t}),D()}get xDomainMax(){return this.$$.ctx[3]}set xDomainMax(t){this.$$set({xDomainMax:t}),D()}get brushX(){return this.$$.ctx[9]}set brushX(t){this.$$set({brushX:t}),D()}get interactions(){return this.$$.ctx[10]}set interactions(t){this.$$set({interactions:t}),D()}get overlay(){return this.$$.ctx[11]}get render(){return this.$$.ctx[12]}get load(){return this.$$.ctx[13]}set load(t){this.$$set({load:t}),D()}get update(){return this.$$.ctx[14]}}function vi(e){return Object.prototype.toString.call(e)==="[object Date]"}function Cn(e,t,n,i){if(typeof n=="number"||vi(n)){const s=i-n,r=(n-t)/(e.dt||1/60),a=e.opts.stiffness*s,l=e.opts.damping*r,u=(a-l)*e.inv_mass,h=(r+u)*e.dt;return Math.abs(h)<e.opts.precision&&Math.abs(s)<e.opts.precision?i:(e.settled=!1,vi(n)?new Date(n.getTime()+h):n+h)}else{if(Array.isArray(n))return n.map((s,r)=>Cn(e,t[r],n[r],i[r]));if(typeof n=="object"){const s={};for(const r in n)s[r]=Cn(e,t[r],n[r],i[r]);return s}else throw new Error(`Cannot spring ${typeof n} values`)}}function yl(e,t={}){const n=dt(e),{stiffness:i=.15,damping:s=.8,precision:r=.01}=t;let a,l,u,h=e,f=e,c=1,p=0,g=!1;function b(m,d={}){f=m;const w=u={};return e==null||d.hard||y.stiffness>=1&&y.damping>=1?(g=!0,a=Kn(),h=m,n.set(e=f),Promise.resolve()):(d.soft&&(p=1/((d.soft===!0?.5:+d.soft)*60),c=0),l||(a=Kn(),g=!1,l=rr(v=>{if(g)return g=!1,l=null,!1;c=Math.min(c+p,1);const k={inv_mass:c,opts:y,settled:!0,dt:(v-a)*60/1e3},A=Cn(k,h,e,f);return a=v,h=e,n.set(e=A),k.settled&&(l=null),!k.settled})),new Promise(v=>{l.promise.then(()=>{w===u&&v()})}))}const y={set:b,update:(m,d)=>b(m(f,e),d),subscribe:n.subscribe,stiffness:i,damping:s,precision:r};return y}function wi(e,t,n){const i=e.slice();return i[28]=t[n],i[30]=n,i}function ki(e){let t,n,i,s,r=(e[6]==="label"||e[7]==="label")&&Si(e);return{c(){t=L("span"),r&&r.c(),this.h()},l(a){t=F(a,"SPAN",{class:!0,style:!0});var l=X(t);r&&r.l(l),l.forEach(N),this.h()},h(){T(t,"class","pip first"),T(t,"style",n=e[14]+": 0%;"),O(t,"selected",e[18](e[0])),O(t,"in-range",e[17](e[0]))},m(a,l){q(a,t,l),r&&r.m(t,null),i||(s=[G(t,"click",function(){ne(e[21](e[0]))&&e[21](e[0]).apply(this,arguments)}),G(t,"touchend",de(function(){ne(e[21](e[0]))&&e[21](e[0]).apply(this,arguments)}))],i=!0)},p(a,l){e=a,e[6]==="label"||e[7]==="label"?r?r.p(e,l):(r=Si(e),r.c(),r.m(t,null)):r&&(r.d(1),r=null),l&16384&&n!==(n=e[14]+": 0%;")&&T(t,"style",n),l&262145&&O(t,"selected",e[18](e[0])),l&131073&&O(t,"in-range",e[17](e[0]))},d(a){a&&N(t),r&&r.d(),i=!1,Kt(s)}}}function Si(e){let t,n=e[12](e[16](e[0]),0,0)+"",i,s=e[10]&&Ai(e),r=e[11]&&Ei(e);return{c(){t=L("span"),s&&s.c(),i=rt(n),r&&r.c(),this.h()},l(a){t=F(a,"SPAN",{class:!0});var l=X(t);s&&s.l(l),i=at(l,n),r&&r.l(l),l.forEach(N),this.h()},h(){T(t,"class","pipVal")},m(a,l){q(a,t,l),s&&s.m(t,null),z(t,i),r&&r.m(t,null)},p(a,l){a[10]?s?s.p(a,l):(s=Ai(a),s.c(),s.m(t,i)):s&&(s.d(1),s=null),l&69633&&n!==(n=a[12](a[16](a[0]),0,0)+"")&&ht(i,n),a[11]?r?r.p(a,l):(r=Ei(a),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},d(a){a&&N(t),s&&s.d(),r&&r.d()}}}function Ai(e){let t,n;return{c(){t=L("span"),n=rt(e[10]),this.h()},l(i){t=F(i,"SPAN",{class:!0});var s=X(t);n=at(s,e[10]),s.forEach(N),this.h()},h(){T(t,"class","pipVal-prefix")},m(i,s){q(i,t,s),z(t,n)},p(i,s){s&1024&&ht(n,i[10])},d(i){i&&N(t)}}}function Ei(e){let t,n;return{c(){t=L("span"),n=rt(e[11]),this.h()},l(i){t=F(i,"SPAN",{class:!0});var s=X(t);n=at(s,e[11]),s.forEach(N),this.h()},h(){T(t,"class","pipVal-suffix")},m(i,s){q(i,t,s),z(t,n)},p(i,s){s&2048&&ht(n,i[11])},d(i){i&&N(t)}}}function xi(e){let t,n=Array(e[20]+1),i=[];for(let s=0;s<n.length;s+=1)i[s]=Ii(wi(e,n,s));return{c(){for(let s=0;s<i.length;s+=1)i[s].c();t=ie()},l(s){for(let r=0;r<i.length;r+=1)i[r].l(s);t=ie()},m(s,r){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(s,r);q(s,t,r)},p(s,r){if(r&4120131){n=Array(s[20]+1);let a;for(a=0;a<n.length;a+=1){const l=wi(s,n,a);i[a]?i[a].p(l,r):(i[a]=Ii(l),i[a].c(),i[a].m(t.parentNode,t))}for(;a<i.length;a+=1)i[a].d(1);i.length=n.length}},d(s){Mn(i,s),s&&N(t)}}}function Ti(e){let t,n,i,s,r,a=(e[6]==="label"||e[9]==="label")&&Ni(e);return{c(){t=L("span"),a&&a.c(),n=At(),this.h()},l(l){t=F(l,"SPAN",{class:!0,style:!0});var u=X(t);a&&a.l(u),n=Et(u),u.forEach(N),this.h()},h(){T(t,"class","pip"),T(t,"style",i=e[14]+": "+e[15](e[19](e[30]))+"%;"),O(t,"selected",e[18](e[19](e[30]))),O(t,"in-range",e[17](e[19](e[30])))},m(l,u){q(l,t,u),a&&a.m(t,null),z(t,n),s||(r=[G(t,"click",function(){ne(e[21](e[19](e[30])))&&e[21](e[19](e[30])).apply(this,arguments)}),G(t,"touchend",de(function(){ne(e[21](e[19](e[30])))&&e[21](e[19](e[30])).apply(this,arguments)}))],s=!0)},p(l,u){e=l,e[6]==="label"||e[9]==="label"?a?a.p(e,u):(a=Ni(e),a.c(),a.m(t,n)):a&&(a.d(1),a=null),u&573440&&i!==(i=e[14]+": "+e[15](e[19](e[30]))+"%;")&&T(t,"style",i),u&786432&&O(t,"selected",e[18](e[19](e[30]))),u&655360&&O(t,"in-range",e[17](e[19](e[30])))},d(l){l&&N(t),a&&a.d(),s=!1,Kt(r)}}}function Ni(e){let t,n=e[12](e[19](e[30]),e[30],e[15](e[19](e[30])))+"",i,s=e[10]&&Ci(e),r=e[11]&&Di(e);return{c(){t=L("span"),s&&s.c(),i=rt(n),r&&r.c(),this.h()},l(a){t=F(a,"SPAN",{class:!0});var l=X(t);s&&s.l(l),i=at(l,n),r&&r.l(l),l.forEach(N),this.h()},h(){T(t,"class","pipVal")},m(a,l){q(a,t,l),s&&s.m(t,null),z(t,i),r&&r.m(t,null)},p(a,l){a[10]?s?s.p(a,l):(s=Ci(a),s.c(),s.m(t,i)):s&&(s.d(1),s=null),l&561152&&n!==(n=a[12](a[19](a[30]),a[30],a[15](a[19](a[30])))+"")&&ht(i,n),a[11]?r?r.p(a,l):(r=Di(a),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},d(a){a&&N(t),s&&s.d(),r&&r.d()}}}function Ci(e){let t,n;return{c(){t=L("span"),n=rt(e[10]),this.h()},l(i){t=F(i,"SPAN",{class:!0});var s=X(t);n=at(s,e[10]),s.forEach(N),this.h()},h(){T(t,"class","pipVal-prefix")},m(i,s){q(i,t,s),z(t,n)},p(i,s){s&1024&&ht(n,i[10])},d(i){i&&N(t)}}}function Di(e){let t,n;return{c(){t=L("span"),n=rt(e[11]),this.h()},l(i){t=F(i,"SPAN",{class:!0});var s=X(t);n=at(s,e[11]),s.forEach(N),this.h()},h(){T(t,"class","pipVal-suffix")},m(i,s){q(i,t,s),z(t,n)},p(i,s){s&2048&&ht(n,i[11])},d(i){i&&N(t)}}}function Ii(e){let t=e[19](e[30])!==e[0]&&e[19](e[30])!==e[1],n,i=t&&Ti(e);return{c(){i&&i.c(),n=ie()},l(s){i&&i.l(s),n=ie()},m(s,r){i&&i.m(s,r),q(s,n,r)},p(s,r){r&524291&&(t=s[19](s[30])!==s[0]&&s[19](s[30])!==s[1]),t?i?i.p(s,r):(i=Ti(s),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},d(s){i&&i.d(s),s&&N(n)}}}function Mi(e){let t,n,i,s,r=(e[6]==="label"||e[8]==="label")&&Oi(e);return{c(){t=L("span"),r&&r.c(),this.h()},l(a){t=F(a,"SPAN",{class:!0,style:!0});var l=X(t);r&&r.l(l),l.forEach(N),this.h()},h(){T(t,"class","pip last"),T(t,"style",n=e[14]+": 100%;"),O(t,"selected",e[18](e[1])),O(t,"in-range",e[17](e[1]))},m(a,l){q(a,t,l),r&&r.m(t,null),i||(s=[G(t,"click",function(){ne(e[21](e[1]))&&e[21](e[1]).apply(this,arguments)}),G(t,"touchend",de(function(){ne(e[21](e[1]))&&e[21](e[1]).apply(this,arguments)}))],i=!0)},p(a,l){e=a,e[6]==="label"||e[8]==="label"?r?r.p(e,l):(r=Oi(e),r.c(),r.m(t,null)):r&&(r.d(1),r=null),l&16384&&n!==(n=e[14]+": 100%;")&&T(t,"style",n),l&262146&&O(t,"selected",e[18](e[1])),l&131074&&O(t,"in-range",e[17](e[1]))},d(a){a&&N(t),r&&r.d(),i=!1,Kt(s)}}}function Oi(e){let t,n=e[12](e[16](e[1]),e[20],100)+"",i,s=e[10]&&Bi(e),r=e[11]&&ji(e);return{c(){t=L("span"),s&&s.c(),i=rt(n),r&&r.c(),this.h()},l(a){t=F(a,"SPAN",{class:!0});var l=X(t);s&&s.l(l),i=at(l,n),r&&r.l(l),l.forEach(N),this.h()},h(){T(t,"class","pipVal")},m(a,l){q(a,t,l),s&&s.m(t,null),z(t,i),r&&r.m(t,null)},p(a,l){a[10]?s?s.p(a,l):(s=Bi(a),s.c(),s.m(t,i)):s&&(s.d(1),s=null),l&1118210&&n!==(n=a[12](a[16](a[1]),a[20],100)+"")&&ht(i,n),a[11]?r?r.p(a,l):(r=ji(a),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},d(a){a&&N(t),s&&s.d(),r&&r.d()}}}function Bi(e){let t,n;return{c(){t=L("span"),n=rt(e[10]),this.h()},l(i){t=F(i,"SPAN",{class:!0});var s=X(t);n=at(s,e[10]),s.forEach(N),this.h()},h(){T(t,"class","pipVal-prefix")},m(i,s){q(i,t,s),z(t,n)},p(i,s){s&1024&&ht(n,i[10])},d(i){i&&N(t)}}}function ji(e){let t,n;return{c(){t=L("span"),n=rt(e[11]),this.h()},l(i){t=F(i,"SPAN",{class:!0});var s=X(t);n=at(s,e[11]),s.forEach(N),this.h()},h(){T(t,"class","pipVal-suffix")},m(i,s){q(i,t,s),z(t,n)},p(i,s){s&2048&&ht(n,i[11])},d(i){i&&N(t)}}}function bl(e){let t,n,i,s=(e[6]&&e[7]!==!1||e[7])&&ki(e),r=(e[6]&&e[9]!==!1||e[9])&&xi(e),a=(e[6]&&e[8]!==!1||e[8])&&Mi(e);return{c(){t=L("div"),s&&s.c(),n=At(),r&&r.c(),i=At(),a&&a.c(),this.h()},l(l){t=F(l,"DIV",{class:!0});var u=X(t);s&&s.l(u),n=Et(u),r&&r.l(u),i=Et(u),a&&a.l(u),u.forEach(N),this.h()},h(){T(t,"class","rangePips"),O(t,"disabled",e[5]),O(t,"hoverable",e[4]),O(t,"vertical",e[2]),O(t,"reversed",e[3]),O(t,"focus",e[13])},m(l,u){q(l,t,u),s&&s.m(t,null),z(t,n),r&&r.m(t,null),z(t,i),a&&a.m(t,null)},p(l,[u]){l[6]&&l[7]!==!1||l[7]?s?s.p(l,u):(s=ki(l),s.c(),s.m(t,n)):s&&(s.d(1),s=null),l[6]&&l[9]!==!1||l[9]?r?r.p(l,u):(r=xi(l),r.c(),r.m(t,i)):r&&(r.d(1),r=null),l[6]&&l[8]!==!1||l[8]?a?a.p(l,u):(a=Mi(l),a.c(),a.m(t,null)):a&&(a.d(1),a=null),u&32&&O(t,"disabled",l[5]),u&16&&O(t,"hoverable",l[4]),u&4&&O(t,"vertical",l[2]),u&8&&O(t,"reversed",l[3]),u&8192&&O(t,"focus",l[13])},i:nt,o:nt,d(l){l&&N(t),s&&s.d(),r&&r.d(),a&&a.d()}}}function vl(e,t,n){let i,s,r,a,l,{range:u=!1}=t,{min:h=0}=t,{max:f=100}=t,{step:c=1}=t,{values:p=[(f+h)/2]}=t,{vertical:g=!1}=t,{reversed:b=!1}=t,{hoverable:y=!0}=t,{disabled:m=!1}=t,{pipstep:d=void 0}=t,{all:w=!0}=t,{first:v=void 0}=t,{last:k=void 0}=t,{rest:A=void 0}=t,{prefix:B=""}=t,{suffix:C=""}=t,{formatter:j=(E,V)=>E}=t,{focus:W=void 0}=t,{orientationStart:S=void 0}=t,{percentOf:x=void 0}=t,{moveHandle:R=void 0}=t,{fixFloat:I=void 0}=t;function U(E){m||R(void 0,E)}return e.$$set=E=>{"range"in E&&n(22,u=E.range),"min"in E&&n(0,h=E.min),"max"in E&&n(1,f=E.max),"step"in E&&n(23,c=E.step),"values"in E&&n(24,p=E.values),"vertical"in E&&n(2,g=E.vertical),"reversed"in E&&n(3,b=E.reversed),"hoverable"in E&&n(4,y=E.hoverable),"disabled"in E&&n(5,m=E.disabled),"pipstep"in E&&n(25,d=E.pipstep),"all"in E&&n(6,w=E.all),"first"in E&&n(7,v=E.first),"last"in E&&n(8,k=E.last),"rest"in E&&n(9,A=E.rest),"prefix"in E&&n(10,B=E.prefix),"suffix"in E&&n(11,C=E.suffix),"formatter"in E&&n(12,j=E.formatter),"focus"in E&&n(13,W=E.focus),"orientationStart"in E&&n(14,S=E.orientationStart),"percentOf"in E&&n(15,x=E.percentOf),"moveHandle"in E&&n(26,R=E.moveHandle),"fixFloat"in E&&n(16,I=E.fixFloat)},e.$$.update=()=>{e.$$.dirty&41943047&&n(27,i=d||((f-h)/c>=(g?50:100)?(f-h)/(g?10:20):1)),e.$$.dirty&142606339&&n(20,s=parseInt((f-h)/(c*i),10)),e.$$.dirty&142671873&&n(19,r=function(E){return I(h+E*c*i)}),e.$$.dirty&16842752&&n(18,a=function(E){return p.some(V=>I(V)===I(E))}),e.$$.dirty&20971520&&n(17,l=function(E){if(u==="min")return p[0]>E;if(u==="max")return p[0]<E;if(u)return p[0]<E&&p[1]>E})},[h,f,g,b,y,m,w,v,k,A,B,C,j,W,S,x,I,l,a,r,s,U,u,c,p,d,R,i]}class wl extends xt{constructor(t){super(),Tt(this,t,vl,bl,Nt,{range:22,min:0,max:1,step:23,values:24,vertical:2,reversed:3,hoverable:4,disabled:5,pipstep:25,all:6,first:7,last:8,rest:9,prefix:10,suffix:11,formatter:12,focus:13,orientationStart:14,percentOf:15,moveHandle:26,fixFloat:16})}}function Pi(e,t,n){const i=e.slice();return i[64]=t[n],i[66]=n,i}function Li(e){let t,n=e[21](e[64],e[66],e[23](e[64]))+"",i,s=e[18]&&Fi(e),r=e[19]&&zi(e);return{c(){t=L("span"),s&&s.c(),i=rt(n),r&&r.c(),this.h()},l(a){t=F(a,"SPAN",{class:!0});var l=X(t);s&&s.l(l),i=at(l,n),r&&r.l(l),l.forEach(N),this.h()},h(){T(t,"class","rangeFloat")},m(a,l){q(a,t,l),s&&s.m(t,null),z(t,i),r&&r.m(t,null)},p(a,l){a[18]?s?s.p(a,l):(s=Fi(a),s.c(),s.m(t,i)):s&&(s.d(1),s=null),l[0]&10485761&&n!==(n=a[21](a[64],a[66],a[23](a[64]))+"")&&ht(i,n),a[19]?r?r.p(a,l):(r=zi(a),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},d(a){a&&N(t),s&&s.d(),r&&r.d()}}}function Fi(e){let t,n;return{c(){t=L("span"),n=rt(e[18]),this.h()},l(i){t=F(i,"SPAN",{class:!0});var s=X(t);n=at(s,e[18]),s.forEach(N),this.h()},h(){T(t,"class","rangeFloat-prefix")},m(i,s){q(i,t,s),z(t,n)},p(i,s){s[0]&262144&&ht(n,i[18])},d(i){i&&N(t)}}}function zi(e){let t,n;return{c(){t=L("span"),n=rt(e[19]),this.h()},l(i){t=F(i,"SPAN",{class:!0});var s=X(t);n=at(s,e[19]),s.forEach(N),this.h()},h(){T(t,"class","rangeFloat-suffix")},m(i,s){q(i,t,s),z(t,n)},p(i,s){s[0]&524288&&ht(n,i[19])},d(i){i&&N(t)}}}function Xi(e){let t,n,i,s,r,a,l,u,h,f,c,p,g=e[7]&&Li(e);return{c(){t=L("span"),n=L("span"),i=At(),g&&g.c(),this.h()},l(b){t=F(b,"SPAN",{role:!0,class:!0,"data-handle":!0,style:!0,"aria-valuemin":!0,"aria-valuemax":!0,"aria-valuenow":!0,"aria-valuetext":!0,"aria-orientation":!0,"aria-disabled":!0,disabled:!0,tabindex:!0});var y=X(t);n=F(y,"SPAN",{class:!0}),X(n).forEach(N),i=Et(y),g&&g.l(y),y.forEach(N),this.h()},h(){T(n,"class","rangeNub"),T(t,"role","slider"),T(t,"class","rangeHandle"),T(t,"data-handle",e[66]),T(t,"style",s=e[28]+": "+e[29][e[66]]+"%; z-index: "+(e[26]===e[66]?3:2)+";"),T(t,"aria-valuemin",r=e[2]===!0&&e[66]===1?e[0][0]:e[3]),T(t,"aria-valuemax",a=e[2]===!0&&e[66]===0?e[0][1]:e[4]),T(t,"aria-valuenow",l=e[64]),T(t,"aria-valuetext",u=""+(e[18]+e[21](e[64],e[66],e[23](e[64]))+e[19])),T(t,"aria-orientation",h=e[6]?"vertical":"horizontal"),T(t,"aria-disabled",e[10]),T(t,"disabled",e[10]),T(t,"tabindex",f=e[10]?-1:0),O(t,"active",e[24]&&e[26]===e[66]),O(t,"press",e[25]&&e[26]===e[66])},m(b,y){q(b,t,y),z(t,n),z(t,i),g&&g.m(t,null),c||(p=[G(t,"blur",e[34]),G(t,"focus",e[35]),G(t,"keydown",e[36])],c=!0)},p(b,y){b[7]?g?g.p(b,y):(g=Li(b),g.c(),g.m(t,null)):g&&(g.d(1),g=null),y[0]&872415232&&s!==(s=b[28]+": "+b[29][b[66]]+"%; z-index: "+(b[26]===b[66]?3:2)+";")&&T(t,"style",s),y[0]&13&&r!==(r=b[2]===!0&&b[66]===1?b[0][0]:b[3])&&T(t,"aria-valuemin",r),y[0]&21&&a!==(a=b[2]===!0&&b[66]===0?b[0][1]:b[4])&&T(t,"aria-valuemax",a),y[0]&1&&l!==(l=b[64])&&T(t,"aria-valuenow",l),y[0]&11272193&&u!==(u=""+(b[18]+b[21](b[64],b[66],b[23](b[64]))+b[19]))&&T(t,"aria-valuetext",u),y[0]&64&&h!==(h=b[6]?"vertical":"horizontal")&&T(t,"aria-orientation",h),y[0]&1024&&T(t,"aria-disabled",b[10]),y[0]&1024&&T(t,"disabled",b[10]),y[0]&1024&&f!==(f=b[10]?-1:0)&&T(t,"tabindex",f),y[0]&83886080&&O(t,"active",b[24]&&b[26]===b[66]),y[0]&100663296&&O(t,"press",b[25]&&b[26]===b[66])},d(b){b&&N(t),g&&g.d(),c=!1,Kt(p)}}}function Vi(e){let t,n;return{c(){t=L("span"),this.h()},l(i){t=F(i,"SPAN",{class:!0,style:!0}),X(t).forEach(N),this.h()},h(){T(t,"class","rangeBar"),T(t,"style",n=e[28]+": "+e[32](e[29])+"%; "+e[27]+": "+e[33](e[29])+"%;")},m(i,s){q(i,t,s)},p(i,s){s[0]&939524096&&n!==(n=i[28]+": "+i[32](i[29])+"%; "+i[27]+": "+i[33](i[29])+"%;")&&T(t,"style",n)},d(i){i&&N(t)}}}function Ri(e){let t,n;return t=new wl({props:{values:e[0],min:e[3],max:e[4],step:e[5],range:e[2],vertical:e[6],reversed:e[8],orientationStart:e[28],hoverable:e[9],disabled:e[10],all:e[13],first:e[14],last:e[15],rest:e[16],pipstep:e[12],prefix:e[18],suffix:e[19],formatter:e[20],focus:e[24],percentOf:e[23],moveHandle:e[31],fixFloat:e[30]}}),{c(){Wi(t.$$.fragment)},l(i){Gi(t.$$.fragment,i)},m(i,s){Zi(t,i,s),n=!0},p(i,s){const r={};s[0]&1&&(r.values=i[0]),s[0]&8&&(r.min=i[3]),s[0]&16&&(r.max=i[4]),s[0]&32&&(r.step=i[5]),s[0]&4&&(r.range=i[2]),s[0]&64&&(r.vertical=i[6]),s[0]&256&&(r.reversed=i[8]),s[0]&268435456&&(r.orientationStart=i[28]),s[0]&512&&(r.hoverable=i[9]),s[0]&1024&&(r.disabled=i[10]),s[0]&8192&&(r.all=i[13]),s[0]&16384&&(r.first=i[14]),s[0]&32768&&(r.last=i[15]),s[0]&65536&&(r.rest=i[16]),s[0]&4096&&(r.pipstep=i[12]),s[0]&262144&&(r.prefix=i[18]),s[0]&524288&&(r.suffix=i[19]),s[0]&1048576&&(r.formatter=i[20]),s[0]&16777216&&(r.focus=i[24]),s[0]&8388608&&(r.percentOf=i[23]),t.$set(r)},i(i){n||(ce(t.$$.fragment,i),n=!0)},o(i){Ie(t.$$.fragment,i),n=!1},d(i){Yi(t,i)}}}function kl(e){let t,n,i,s,r,a,l=e[0],u=[];for(let c=0;c<l.length;c+=1)u[c]=Xi(Pi(e,l,c));let h=e[2]&&Vi(e),f=e[11]&&Ri(e);return{c(){t=L("div");for(let c=0;c<u.length;c+=1)u[c].c();n=At(),h&&h.c(),i=At(),f&&f.c(),this.h()},l(c){t=F(c,"DIV",{id:!0,class:!0});var p=X(t);for(let g=0;g<u.length;g+=1)u[g].l(p);n=Et(p),h&&h.l(p),i=Et(p),f&&f.l(p),p.forEach(N),this.h()},h(){T(t,"id",e[17]),T(t,"class","rangeSlider"),O(t,"range",e[2]),O(t,"disabled",e[10]),O(t,"hoverable",e[9]),O(t,"vertical",e[6]),O(t,"reversed",e[8]),O(t,"focus",e[24]),O(t,"min",e[2]==="min"),O(t,"max",e[2]==="max"),O(t,"pips",e[11]),O(t,"pip-labels",e[13]==="label"||e[14]==="label"||e[15]==="label"||e[16]==="label")},m(c,p){q(c,t,p);for(let g=0;g<u.length;g+=1)u[g]&&u[g].m(t,null);z(t,n),h&&h.m(t,null),z(t,i),f&&f.m(t,null),e[50](t),s=!0,r||(a=[G(window,"mousedown",e[39]),G(window,"touchstart",e[39]),G(window,"mousemove",e[40]),G(window,"touchmove",e[40]),G(window,"mouseup",e[41]),G(window,"touchend",e[42]),G(window,"keydown",e[43]),G(t,"mousedown",e[37]),G(t,"mouseup",e[38]),G(t,"touchstart",de(e[37])),G(t,"touchend",de(e[38]))],r=!0)},p(c,p){if(p[0]&934020317|p[1]&56){l=c[0];let g;for(g=0;g<l.length;g+=1){const b=Pi(c,l,g);u[g]?u[g].p(b,p):(u[g]=Xi(b),u[g].c(),u[g].m(t,n))}for(;g<u.length;g+=1)u[g].d(1);u.length=l.length}c[2]?h?h.p(c,p):(h=Vi(c),h.c(),h.m(t,i)):h&&(h.d(1),h=null),c[11]?f?(f.p(c,p),p[0]&2048&&ce(f,1)):(f=Ri(c),f.c(),ce(f,1),f.m(t,null)):f&&(ar(),Ie(f,1,1,()=>{f=null}),or()),(!s||p[0]&131072)&&T(t,"id",c[17]),(!s||p[0]&4)&&O(t,"range",c[2]),(!s||p[0]&1024)&&O(t,"disabled",c[10]),(!s||p[0]&512)&&O(t,"hoverable",c[9]),(!s||p[0]&64)&&O(t,"vertical",c[6]),(!s||p[0]&256)&&O(t,"reversed",c[8]),(!s||p[0]&16777216)&&O(t,"focus",c[24]),(!s||p[0]&4)&&O(t,"min",c[2]==="min"),(!s||p[0]&4)&&O(t,"max",c[2]==="max"),(!s||p[0]&2048)&&O(t,"pips",c[11]),(!s||p[0]&122880)&&O(t,"pip-labels",c[13]==="label"||c[14]==="label"||c[15]==="label"||c[16]==="label")},i(c){s||(ce(f),s=!0)},o(c){Ie(f),s=!1},d(c){c&&N(t),Mn(u,c),h&&h.d(),f&&f.d(),e[50](null),r=!1,Kt(a)}}}function qi(e){if(!e)return-1;for(var t=0;e=e.previousElementSibling;)t++;return t}function gn(e){return e.type.includes("touch")?e.touches[0]:e}function Sl(e,t,n){let i,s,r,a,l,u,h=nt,f=()=>(h(),h=Ht(Bt,_=>n(29,u=_)),Bt);e.$$.on_destroy.push(()=>h());let{slider:c=void 0}=t,{range:p=!1}=t,{pushy:g=!1}=t,{min:b=0}=t,{max:y=100}=t,{step:m=1}=t,{values:d=[(y+b)/2]}=t,{vertical:w=!1}=t,{float:v=!1}=t,{reversed:k=!1}=t,{hoverable:A=!0}=t,{disabled:B=!1}=t,{pips:C=!1}=t,{pipstep:j=void 0}=t,{all:W=void 0}=t,{first:S=void 0}=t,{last:x=void 0}=t,{rest:R=void 0}=t,{id:I=void 0}=t,{prefix:U=""}=t,{suffix:E=""}=t,{formatter:V=(_,M,Z)=>_}=t,{handleFormatter:it=V}=t,{precision:_t=2}=t,{springValues:Q={stiffness:.15,damping:.4}}=t;const $=lr();let Y=0,J=!1,vt=!1,pt=!1,Ot=!1,ot=d.length-1,st,yt,Bt;const bt=_=>parseFloat(_.toFixed(_t));function ge(_){const M=c.querySelectorAll(".handle"),Z=Array.prototype.includes.call(M,_),K=Array.prototype.some.call(M,Ct=>Ct.contains(_));return Z||K}function pe(_){return p==="min"||p==="max"?_.slice(0,1):p?_.slice(0,2):_}function wt(){return c.getBoundingClientRect()}function ye(_){const M=wt();let Z=0,K=0,Ct=0;w?(Z=_.clientY-M.top,K=Z/M.height*100,K=k?K:100-K):(Z=_.clientX-M.left,K=Z/M.width*100,K=k?100-K:K),Ct=(y-b)/100*K+b;let Jn;return p===!0&&d[0]===d[1]?Ct>d[1]?1:0:(Jn=d.indexOf([...d].sort((ir,sr)=>Math.abs(Ct-ir)-Math.abs(Ct-sr))[0]),Jn)}function ue(_){const M=wt();let Z=0,K=0,Ct=0;w?(Z=_.clientY-M.top,K=Z/M.height*100,K=k?K:100-K):(Z=_.clientX-M.left,K=Z/M.width*100,K=k?100-K:K),Ct=(y-b)/100*K+b,jt(ot,Ct)}function jt(_,M){return M=r(M),typeof _>"u"&&(_=ot),p&&(_===0&&M>d[1]?g?n(0,d[1]=M,d):M=d[1]:_===1&&M<d[0]&&(g?n(0,d[0]=M,d):M=d[0])),d[_]!==M&&n(0,d[_]=M,d),yt!==M&&(er(),yt=M),M}function P(_){return p==="min"?0:_[0]}function tt(_){return p==="max"?0:p==="min"?100-_[0]:100-_[1]}function Rt(_){Ot&&(n(24,J=!1),vt=!1,n(25,pt=!1))}function kt(_){B||(n(26,ot=qi(_.target)),n(24,J=!0))}function Js(_){if(!B){const M=qi(_.target);let Z=_.ctrlKey||_.metaKey||_.shiftKey?m*10:m,K=!1;switch(_.key){case"PageDown":Z*=10;case"ArrowRight":case"ArrowUp":jt(M,d[M]+Z),K=!0;break;case"PageUp":Z*=10;case"ArrowLeft":case"ArrowDown":jt(M,d[M]-Z),K=!0;break;case"Home":jt(M,b),K=!0;break;case"End":jt(M,y),K=!0;break}K&&(_.preventDefault(),_.stopPropagation())}}function Ks(_){if(!B){const M=_.target,Z=gn(_);n(24,J=!0),vt=!0,n(25,pt=!0),n(26,ot=ye(Z)),st=yt=r(d[ot]),tr(),_.type==="touchstart"&&!M.matches(".pipVal")&&ue(Z)}}function Ws(_){_.type==="touchend"&&Hn(),n(25,pt=!1)}function Gs(_){Ot=!1,J&&_.target!==c&&!c.contains(_.target)&&n(24,J=!1)}function Zs(_){B||vt&&ue(gn(_))}function Ys(_){if(!B){const M=_.target;vt&&((M===c||c.contains(M))&&(n(24,J=!0),!ge(M)&&!M.matches(".pipVal")&&ue(gn(_))),Hn())}vt=!1,n(25,pt=!1)}function Qs(_){vt=!1,n(25,pt=!1)}function $s(_){B||(_.target===c||c.contains(_.target))&&(Ot=!0)}function tr(){!B&&$("start",{activeHandle:ot,value:st,values:d.map(_=>r(_))})}function Hn(){!B&&$("stop",{activeHandle:ot,startValue:st,value:d[ot],values:d.map(_=>r(_))})}function er(){!B&&$("change",{activeHandle:ot,startValue:st,previousValue:typeof yt>"u"?st:yt,value:d[ot],values:d.map(_=>r(_))})}function nr(_){le[_?"unshift":"push"](()=>{c=_,n(1,c)})}return e.$$set=_=>{"slider"in _&&n(1,c=_.slider),"range"in _&&n(2,p=_.range),"pushy"in _&&n(44,g=_.pushy),"min"in _&&n(3,b=_.min),"max"in _&&n(4,y=_.max),"step"in _&&n(5,m=_.step),"values"in _&&n(0,d=_.values),"vertical"in _&&n(6,w=_.vertical),"float"in _&&n(7,v=_.float),"reversed"in _&&n(8,k=_.reversed),"hoverable"in _&&n(9,A=_.hoverable),"disabled"in _&&n(10,B=_.disabled),"pips"in _&&n(11,C=_.pips),"pipstep"in _&&n(12,j=_.pipstep),"all"in _&&n(13,W=_.all),"first"in _&&n(14,S=_.first),"last"in _&&n(15,x=_.last),"rest"in _&&n(16,R=_.rest),"id"in _&&n(17,I=_.id),"prefix"in _&&n(18,U=_.prefix),"suffix"in _&&n(19,E=_.suffix),"formatter"in _&&n(20,V=_.formatter),"handleFormatter"in _&&n(21,it=_.handleFormatter),"precision"in _&&n(45,_t=_.precision),"springValues"in _&&n(46,Q=_.springValues)},e.$$.update=()=>{e.$$.dirty[0]&24&&n(49,s=function(_){return _<=b?b:_>=y?y:_}),e.$$.dirty[0]&56|e.$$.dirty[1]&262144&&n(48,r=function(_){if(_<=b)return bt(b);if(_>=y)return bt(y);let M=(_-b)%m,Z=_-M;return Math.abs(M)*2>=m&&(Z+=M>0?m:-m),Z=s(Z),bt(Z)}),e.$$.dirty[0]&24&&n(23,i=function(_){let M=(_-b)/(y-b)*100;return isNaN(M)||M<=0?0:M>=100?100:bt(M)}),e.$$.dirty[0]&12582937|e.$$.dirty[1]&229376&&(Array.isArray(d)||(n(0,d=[(y+b)/2]),console.error("'values' prop should be an Array (https://github.com/simeydotme/svelte-range-slider-pips#slider-props)")),n(0,d=pe(d.map(_=>r(_)))),Y!==d.length?f(n(22,Bt=yl(d.map(_=>i(_)),Q))):Bt.set(d.map(_=>i(_))),n(47,Y=d.length)),e.$$.dirty[0]&320&&n(28,a=w?k?"top":"bottom":k?"right":"left"),e.$$.dirty[0]&320&&n(27,l=w?k?"bottom":"top":k?"left":"right")},[d,c,p,b,y,m,w,v,k,A,B,C,j,W,S,x,R,I,U,E,V,it,Bt,i,J,pt,ot,l,a,u,bt,jt,P,tt,Rt,kt,Js,Ks,Ws,Gs,Zs,Ys,Qs,$s,g,_t,Q,Y,r,s,nr]}class Al extends xt{constructor(t){super(),Tt(this,t,Sl,kl,Nt,{slider:1,range:2,pushy:44,min:3,max:4,step:5,values:0,vertical:6,float:7,reversed:8,hoverable:9,disabled:10,pips:11,pipstep:12,all:13,first:14,last:15,rest:16,id:17,prefix:18,suffix:19,formatter:20,handleFormatter:21,precision:45,springValues:46},null,[-1,-1,-1])}}function Ui(e){let t,n;return{c(){t=L("p"),n=rt(e[2])},l(i){t=F(i,"P",{});var s=X(t);n=at(s,e[2]),s.forEach(N)},m(i,s){q(i,t,s),z(t,n)},p(i,s){s&4&&ht(n,i[2])},d(i){i&&N(t)}}}function El(e){let t,n,i,s,r,a=e[2]&&Ui(e);function l(h){e[14](h)}let u={min:+e[0],max:+e[1],pips:!0,range:!0,float:!0,first:"label",last:"label",springValues:!0,id:"slider"};return e[6]!==void 0&&(u.values=e[6]),i=new Al({props:u}),le.push(()=>ur(i,"values",l)),i.$on("start",e[8]),i.$on("change",e[7]),i.$on("stop",e[9]),{c(){t=L("div"),a&&a.c(),n=At(),Wi(i.$$.fragment),this.h()},l(h){t=F(h,"DIV",{class:!0,id:!0});var f=X(t);a&&a.l(f),n=Et(f),Gi(i.$$.fragment,f),f.forEach(N),this.h()},h(){T(t,"class","px-[1%] py-[1%] ml-[2.1%]"),T(t,"id","slider")},m(h,f){q(h,t,f),a&&a.m(t,null),z(t,n),Zi(i,t,null),r=!0},p(h,[f]){h[2]?a?a.p(h,f):(a=Ui(h),a.c(),a.m(t,n)):a&&(a.d(1),a=null);const c={};f&1&&(c.min=+h[0]),f&2&&(c.max=+h[1]),!s&&f&64&&(s=!0,c.values=h[6],hr(()=>s=!1)),i.$set(c)},i(h){r||(ce(i.$$.fragment,h),r=!0)},o(h){Ie(i.$$.fragment,h),r=!1},d(h){h&&N(t),a&&a.d(),Yi(i)}}}function xl(e,t,n){let i,s=nt,r=()=>(s(),s=Ht(w,x=>n(15,i=x)),w),a,l=nt,u=()=>(l(),l=Ht(m,x=>n(16,a=x)),m),h,f=nt,c=()=>(f(),f=Ht(d,x=>n(17,h=x)),d);e.$$.on_destroy.push(()=>s()),e.$$.on_destroy.push(()=>l()),e.$$.on_destroy.push(()=>f());let{min:p=0,max:g=100,id:b,description:y}=t,{change:m=dt({})}=t;u();let{stop:d=dt({})}=t;c();let{drag:w=dt({})}=t;r();let{interactions:v={change:m,stop:d,drag:w}}=t;cr("dims");let k=[p,g];[...k];function A(x){console.log("Slider.render",x),x&&ct(Array,x)&&ft(x.filter(R=>R===void 0))&&(n(6,k=[+x[0].min,+x[0].max]),n(0,[p,g]=k,p,n(1,g)),console.log("Slider.render.to",k)),k&&k.length>=2&&C()}function B(x,R){console.log("Slider.load",x,R),!(!Le("left")(x)||!Le("right")(x))&&(x=x??{left:p,right:g},n(6,k=[x.left??p,x.right??g]),C())}function C(){m.isActive&&gt(m,a={left:k[0],right:k[1]},a),w.isActive&&gt(w,i={left:k[0],right:k[1]},i)}function j(){w.isActive&&gt(w,i={left:k[0],right:k[1]},i)}function W(){d.isActive&&gt(d,h={left:k[0],right:k[1]},h),m.isActive&&gt(m,a={left:k[0],right:k[1]},a),w.isActive&&gt(w,i={left:k[0],right:k[1]},i)}function S(x){k=x,n(6,k)}return e.$$set=x=>{"min"in x&&n(0,p=x.min),"max"in x&&n(1,g=x.max),"id"in x&&n(10,b=x.id),"description"in x&&n(2,y=x.description),"change"in x&&u(n(3,m=x.change)),"stop"in x&&c(n(4,d=x.stop)),"drag"in x&&r(n(5,w=x.drag)),"interactions"in x&&n(11,v=x.interactions)},[p,g,y,m,d,w,k,C,j,W,b,v,A,B,S]}class gu extends xt{constructor(t){super(),Tt(this,t,xl,El,Nt,{min:0,max:1,id:10,description:2,change:3,stop:4,drag:5,interactions:11,render:12,load:13})}get min(){return this.$$.ctx[0]}set min(t){this.$$set({min:t}),D()}get max(){return this.$$.ctx[1]}set max(t){this.$$set({max:t}),D()}get id(){return this.$$.ctx[10]}set id(t){this.$$set({id:t}),D()}get description(){return this.$$.ctx[2]}set description(t){this.$$set({description:t}),D()}get change(){return this.$$.ctx[3]}set change(t){this.$$set({change:t}),D()}get stop(){return this.$$.ctx[4]}set stop(t){this.$$set({stop:t}),D()}get drag(){return this.$$.ctx[5]}set drag(t){this.$$set({drag:t}),D()}get interactions(){return this.$$.ctx[11]}set interactions(t){this.$$set({interactions:t}),D()}get render(){return this.$$.ctx[12]}get load(){return this.$$.ctx[13]}}function Tl(e){let t,n;return{c(){t=L("div"),n=L("div"),this.h()},l(i){t=F(i,"DIV",{id:!0});var s=X(t);n=F(s,"DIV",{}),X(n).forEach(N),s.forEach(N),this.h()},h(){T(t,"id",e[0])},m(i,s){q(i,t,s),z(t,n),e[18](n)},p(i,[s]){s&1&&T(t,"id",i[0])},i:nt,o:nt,d(i){i&&N(t),e[18](null)}}}function Nl(e,t,n){let{id:i,name:s,groupNames:r=[],title:a="",xAttr:l,yAttr:u="val",yMax:h,magic:f,xDomainMin:c=null,xDomainMax:p=null,theplot:g=null}=t,b={},{brushX:y=dt({}),interactions:m={brushX:y}}=t,d,w=null,v=[],k=[{},{}];function A(S,x){return x!="overlay"?!1:(b=S,!0)}function B(S,x){return x!="badyear"?!1:(S.forEach((R,I)=>{R.rank=I+1,R[l]=Number(R[l])}),k=S,!0)}function C(S,x){!S||S.length===0||typeof x=="object"||(B(S,x)||A(S,x)?console.debug("overlay or badyear"):(v=fl(S,{include:r}),v.forEach(R=>R[l]=Number(R[l]))),j())}function j(){n(2,c=+c),n(3,p=+p);let S=Sn({x:{type:"linear",domain:[c-1,p]}}),x=I=>(k.length-I.rank)*(.3/k.length)+.7,R={x:S,color:{domain:r,range:Wr,legend:!0,style:{"font-size":10,"margin-left":"2em"}},height:200,marginBottom:50,marks:[$e({ticks:xr(I=>I+c,p-c),tickRotate:-90,fontSize:10,tickFormat:I=>(I+"").slice(-2)}),jn({fontSize:10,label:"Payout"}),fs([0]),cs([S.domain[0]]),Nn(k,{x1:I=>I[l]-.5,x2:I=>I[l]+.5,y:x,stroke:"black",opacity:.8,strokeWidth:1}),cl(k,{x1:I=>I[l]-.5,x2:I=>I[l]+.5,y1:0,y2:x,fill:"gray",opacity:.1}),Rn(b,{x1:"left",x2:"right",y2:1,fill:"key",color:"key",opacity:.2}),Gr(v,{filter:I=>I.key==r[3]&&I[l]>=c&&I[l]<=p&&+I[u]==0,x:I=>+I[l],y:0,stroke:"red",strokeWidth:1})]};r.forEach((I,U)=>{let E=(1+U)/r.length*.7;R.marks.push(Nn(v,{filter:V=>V.key==I&&V[l]>=c&&V[l]<=p,x:V=>+V[l]+E-.35,y1:0,y2:u,stroke:"key",strokeWidth:4}))}),n(4,g=rn(R,w)),y.isActive&&(d=d??new qn({iact:y,magic:f}),d.init(g))}function W(S){le[S?"unshift":"push"](()=>{w=S,n(1,w)})}return e.$$set=S=>{"id"in S&&n(5,i=S.id),"name"in S&&n(0,s=S.name),"groupNames"in S&&n(6,r=S.groupNames),"title"in S&&n(7,a=S.title),"xAttr"in S&&n(8,l=S.xAttr),"yAttr"in S&&n(9,u=S.yAttr),"yMax"in S&&n(10,h=S.yMax),"magic"in S&&n(11,f=S.magic),"xDomainMin"in S&&n(2,c=S.xDomainMin),"xDomainMax"in S&&n(3,p=S.xDomainMax),"theplot"in S&&n(4,g=S.theplot),"brushX"in S&&n(12,y=S.brushX),"interactions"in S&&n(13,m=S.interactions)},[s,w,c,p,g,i,r,a,l,u,h,f,y,m,A,B,C,j,W]}class pu extends xt{constructor(t){super(),Tt(this,t,Nl,Tl,Nt,{id:5,name:0,groupNames:6,title:7,xAttr:8,yAttr:9,yMax:10,magic:11,xDomainMin:2,xDomainMax:3,theplot:4,brushX:12,interactions:13,overlay:14,badyear:15,render:16,update:17})}get id(){return this.$$.ctx[5]}set id(t){this.$$set({id:t}),D()}get name(){return this.$$.ctx[0]}set name(t){this.$$set({name:t}),D()}get groupNames(){return this.$$.ctx[6]}set groupNames(t){this.$$set({groupNames:t}),D()}get title(){return this.$$.ctx[7]}set title(t){this.$$set({title:t}),D()}get xAttr(){return this.$$.ctx[8]}set xAttr(t){this.$$set({xAttr:t}),D()}get yAttr(){return this.$$.ctx[9]}set yAttr(t){this.$$set({yAttr:t}),D()}get yMax(){return this.$$.ctx[10]}set yMax(t){this.$$set({yMax:t}),D()}get magic(){return this.$$.ctx[11]}set magic(t){this.$$set({magic:t}),D()}get xDomainMin(){return this.$$.ctx[2]}set xDomainMin(t){this.$$set({xDomainMin:t}),D()}get xDomainMax(){return this.$$.ctx[3]}set xDomainMax(t){this.$$set({xDomainMax:t}),D()}get theplot(){return this.$$.ctx[4]}set theplot(t){this.$$set({theplot:t}),D()}get brushX(){return this.$$.ctx[12]}set brushX(t){this.$$set({brushX:t}),D()}get interactions(){return this.$$.ctx[13]}set interactions(t){this.$$set({interactions:t}),D()}get overlay(){return this.$$.ctx[14]}get badyear(){return this.$$.ctx[15]}get render(){return this.$$.ctx[16]}get update(){return this.$$.ctx[17]}}function Cl(e){let t,n;return{c(){t=L("div"),n=L("div"),this.h()},l(i){t=F(i,"DIV",{id:!0});var s=X(t);n=F(s,"DIV",{}),X(n).forEach(N),s.forEach(N),this.h()},h(){T(t,"id",e[0])},m(i,s){q(i,t,s),z(t,n),e[11](n)},p(i,[s]){s&1&&T(t,"id",i[0])},i:nt,o:nt,d(i){i&&N(t),e[11](null)}}}function Dl(e,t,n){let{id:i,name:s,xDomainMin:r,xDomainMax:a,magic:l}=t,{brushX:u=dt({})}=t,{interactions:h={brushX:u}}=t,f,c,p,g={},b=[];function y(v,k){return k!="overlay"?!1:(g=v,!0)}function m(v,k){!v||v.length===0||typeof k=="object"||(y(v,k)?console.debug("overlay"):b=v,d())}function d(){let v={x:{domain:[+r,+a],type:"linear"},y:{axis:null},marginBottom:50,height:300,fy:{label:null,tickRotate:-90,labelAnchor:"center"},color:{style:{"font-size":10,"margin-left":"2rem"},scheme:"Tableau10",legend:!0},marks:[$e({ticks:36,fontSize:10}),Zr(),Nn(b,{x1:"start_time",x2:"end_time",y:"activity",strokeWidth:3,fy:"crop"}),ds(b,{x:k=>{let A=(k.end_time-k.start_time)/2+k.start_time;return console.log("yy",k,A),A},y:"activity",dy:3,lineAnchor:"top",fy:"crop",fontSize:10,color:"gray",text:"activity"}),Rn(g,{x1:"left",x2:"right",y2:1,fill:"key",color:"key",opacity:.2})]};f=rn(v,c),u.isActive&&(p=p??new qn({iact:u,magic:l}),p.init(f))}function w(v){le[v?"unshift":"push"](()=>{c=v,n(1,c)})}return e.$$set=v=>{"id"in v&&n(2,i=v.id),"name"in v&&n(0,s=v.name),"xDomainMin"in v&&n(3,r=v.xDomainMin),"xDomainMax"in v&&n(4,a=v.xDomainMax),"magic"in v&&n(5,l=v.magic),"brushX"in v&&n(6,u=v.brushX),"interactions"in v&&n(7,h=v.interactions)},[s,c,i,r,a,l,u,h,y,m,d,w]}class yu extends xt{constructor(t){super(),Tt(this,t,Dl,Cl,Nt,{id:2,name:0,xDomainMin:3,xDomainMax:4,magic:5,brushX:6,interactions:7,overlay:8,render:9,update:10})}get id(){return this.$$.ctx[2]}set id(t){this.$$set({id:t}),D()}get name(){return this.$$.ctx[0]}set name(t){this.$$set({name:t}),D()}get xDomainMin(){return this.$$.ctx[3]}set xDomainMin(t){this.$$set({xDomainMin:t}),D()}get xDomainMax(){return this.$$.ctx[4]}set xDomainMax(t){this.$$set({xDomainMax:t}),D()}get magic(){return this.$$.ctx[5]}set magic(t){this.$$set({magic:t}),D()}get brushX(){return this.$$.ctx[6]}set brushX(t){this.$$set({brushX:t}),D()}get interactions(){return this.$$.ctx[7]}set interactions(t){this.$$set({interactions:t}),D()}get overlay(){return this.$$.ctx[8]}get render(){return this.$$.ctx[9]}get update(){return this.$$.ctx[10]}}function Il(e){let t,n;return{c(){t=L("div"),n=L("div"),this.h()},l(i){t=F(i,"DIV",{id:!0});var s=X(t);n=F(s,"DIV",{}),X(n).forEach(N),s.forEach(N),this.h()},h(){T(t,"id",e[0])},m(i,s){q(i,t,s),z(t,n),e[6](n)},p(i,[s]){s&1&&T(t,"id",i[0])},i:nt,o:nt,d(i){i&&N(t),e[6](null)}}}function Ml(e,t,n){let{name:i,id:s,interactions:r={}}=t,a,l=[];function u(c,p){!c||c.length===0||(l=c,h())}function h(){let c=Sn({color:{type:"linear",scheme:"greens"}}),p=Sn({color:{type:"quantile",range:["#fff","#000"],domain:[0,60,100]}}),g=l.map(y=>p.apply(Yr(c.apply(+y.value)).l)),b={padding:0,marginLeft:150,height:300,color:c,marks:[$e({fontSize:10,label:null}),jn({fontSize:10,label:null}),rl(l,{x:"x",y:"y",fill:y=>+y.value,stroke:"white"}),ds(l,{x:"x",y:"y",text:y=>y.value,fill:g,fontSize:10,fontWeight:"bold",textAnchor:"middle"})]};rn(b,a)}function f(c){le[c?"unshift":"push"](()=>{a=c,n(1,a)})}return e.$$set=c=>{"name"in c&&n(0,i=c.name),"id"in c&&n(2,s=c.id),"interactions"in c&&n(3,r=c.interactions)},[i,a,s,r,u,h,f]}class bu extends xt{constructor(t){super(),Tt(this,t,Ml,Il,Nt,{name:0,id:2,interactions:3,render:4,update:5})}get name(){return this.$$.ctx[0]}set name(t){this.$$set({name:t}),D()}get id(){return this.$$.ctx[2]}set id(t){this.$$set({id:t}),D()}get interactions(){return this.$$.ctx[3]}set interactions(t){this.$$set({interactions:t}),D()}get render(){return this.$$.ctx[4]}get update(){return this.$$.ctx[5]}}const Ol=dt({w:window.innerWidth*.8,h:window.innerHeight*.8,margin:ml}),vu=dt([]),wu=dt({});function Hi(e,t,n){const i=e.slice();return i[15]=t[n],i[17]=n,i}function Bl(e){let t,n=e[15][e[2]]+"",i;return{c(){t=L("option"),i=rt(n),this.h()},l(s){t=F(s,"OPTION",{});var r=X(t);i=at(r,n),r.forEach(N),this.h()},h(){t.__value=e[17],t.value=t.__value},m(s,r){q(s,t,r),z(t,i)},p(s,r){r&36&&n!==(n=s[15][s[2]]+"")&&ht(i,n)},d(s){s&&N(t)}}}function jl(e){let t,n=e[15][e[2]]+"",i;return{c(){t=L("option"),i=rt(n),this.h()},l(s){t=F(s,"OPTION",{});var r=X(t);i=at(r,n),r.forEach(N),this.h()},h(){t.__value=e[17],t.value=t.__value,t.selected=!0},m(s,r){q(s,t,r),z(t,i)},p(s,r){r&36&&n!==(n=s[15][s[2]]+"")&&ht(i,n)},d(s){s&&N(t)}}}function Ji(e){let t;function n(r,a){return r[17]===r[1]?jl:Bl}let i=n(e),s=i(e);return{c(){s.c(),t=ie()},l(r){s.l(r),t=ie()},m(r,a){s.m(r,a),q(r,t,a)},p(r,a){i===(i=n(r))&&s?s.p(r,a):(s.d(1),s=i(r),s&&(s.c(),s.m(t.parentNode,t)))},d(r){s.d(r),r&&N(t)}}}function Pl(e){let t,n,i,s,r=e[5],a=[];for(let l=0;l<r.length;l+=1)a[l]=Ji(Hi(e,r,l));return{c(){t=L("div"),n=L("select");for(let l=0;l<a.length;l+=1)a[l].c();this.h()},l(l){t=F(l,"DIV",{class:!0,id:!0});var u=X(t);n=F(u,"SELECT",{class:!0});var h=X(n);for(let f=0;f<a.length;f+=1)a[f].l(h);h.forEach(N),u.forEach(N),this.h()},h(){T(n,"class","form-select appearance-none block w-full px-5 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding bg-no-repeat border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"),e[4]===void 0&&fr(()=>e[10].call(n)),T(t,"class","px-[1%] py-[1%]"),T(t,"id",e[0])},m(l,u){q(l,t,u),z(t,n);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(n,null);Wn(n,e[4],!0),i||(s=[G(n,"change",e[10]),G(n,"change",e[6])],i=!0)},p(l,[u]){if(u&38){r=l[5];let h;for(h=0;h<r.length;h+=1){const f=Hi(l,r,h);a[h]?a[h].p(f,u):(a[h]=Ji(f),a[h].c(),a[h].m(n,null))}for(;h<a.length;h+=1)a[h].d(1);a.length=r.length}u&16&&Wn(n,l[4]),u&1&&T(t,"id",l[0])},i:nt,o:nt,d(l){l&&N(t),Mn(a,l),i=!1,Kt(s)}}}function Ll(e,t,n){let i,s=nt,r=()=>(s(),s=Ht(f,w=>n(11,i=w)),f),a;dr(e,Ol,w=>n(12,a=w)),e.$$.on_destroy.push(()=>s());let{id:l,index:u,dropdown_key:h}=t,{change:f=dt({})}=t;r();let{interactions:c={change:f}}=t,p=null,g=[];a.margin;function b(w,v){n(5,g=w??g),n(4,p=p??u),console.log("Dropdown.render",g,p,v),m()}function y(w){console.log("Dropdown.load",w),n(4,p=w.idx),b()}function m(){f.isActive&&gt(f,i={...g[p],idx:p},i)}function d(){p=_r(this),n(4,p)}return e.$$set=w=>{"id"in w&&n(0,l=w.id),"index"in w&&n(1,u=w.index),"dropdown_key"in w&&n(2,h=w.dropdown_key),"change"in w&&r(n(3,f=w.change)),"interactions"in w&&n(7,c=w.interactions)},[l,u,h,f,p,g,m,c,b,y,d]}class ku extends xt{constructor(t){super(),Tt(this,t,Ll,Pl,Nt,{id:0,index:1,dropdown_key:2,change:3,interactions:7,render:8,load:9})}get id(){return this.$$.ctx[0]}set id(t){this.$$set({id:t}),D()}get index(){return this.$$.ctx[1]}set index(t){this.$$set({index:t}),D()}get dropdown_key(){return this.$$.ctx[2]}set dropdown_key(t){this.$$set({dropdown_key:t}),D()}get change(){return this.$$.ctx[3]}set change(t){this.$$set({change:t}),D()}get interactions(){return this.$$.ctx[7]}set interactions(t){this.$$set({interactions:t}),D()}get render(){return this.$$.ctx[8]}get load(){return this.$$.ctx[9]}}function Fl(e){let t,n,i,s,r,a,l,u,h,f,c,p,g,b;return{c(){t=L("form"),n=L("div"),i=L("input"),s=At(),r=L("button"),a=rt("Login"),l=At(),u=L("button"),h=rt("Save"),f=At(),c=L("button"),p=rt("Logout"),this.h()},l(y){t=F(y,"FORM",{class:!0});var m=X(t);n=F(m,"DIV",{class:!0});var d=X(n);i=F(d,"INPUT",{class:!0,type:!0,placeholder:!0,"aria-label":!0}),s=Et(d),r=F(d,"BUTTON",{class:!0,type:!0});var w=X(r);a=at(w,"Login"),w.forEach(N),l=Et(d),u=F(d,"BUTTON",{class:!0,type:!0});var v=X(u);h=at(v,"Save"),v.forEach(N),f=Et(d),c=F(d,"BUTTON",{class:!0,type:!0});var k=X(c);p=at(k,"Logout"),k.forEach(N),d.forEach(N),m.forEach(N),this.h()},h(){T(i,"class","appearance-none bg-transparent border-none w-full text-gray-700 mr-3 py-1 px-2 leading-tight focus:outline-none"),T(i,"type","text"),T(i,"placeholder","Login..."),T(i,"aria-label","username"),T(r,"class","flex-shrink-0 bg-slate-500 hover:bg-slate-700 border-slate-500 hover:border-slate-700 text-sm border-4 text-white py-1 px-2 rounded"),T(r,"type","button"),T(u,"class","flex-shrink-0 bg-slate-500 hover:bg-slate-900 border-slate-500 hover:border-slate-900 text-sm border-4 text-white py-1 px-2 rounded"),T(u,"type","button"),T(c,"class","flex-shrink-0 bg-slate-500 hover:bg-slate-900 border-slate-500 hover:border-slate-900 text-sm border-4 text-white py-1 px-2 rounded"),T(c,"type","button"),T(n,"class","flex items-center border-b border-slate-500 py-2 space-x-4"),T(t,"class","w-full max-w-sm mx-auto")},m(y,m){q(y,t,m),z(t,n),z(n,i),Gn(i,e[1]),z(n,s),z(n,r),z(r,a),z(n,l),z(n,u),z(u,h),z(n,f),z(n,c),z(c,p),g||(b=[G(i,"input",e[14]),G(r,"click",e[2]),G(u,"click",e[3]),G(c,"click",e[4])],g=!0)},p(y,[m]){m&2&&i.value!==y[1]&&Gn(i,y[1])},i:nt,o:nt,d(y){y&&N(t),g=!1,Kt(b)}}}function Fs(e,t){console.debug("login invoked",e,t)}function zl(e,t,n){let i,s=nt,r=()=>(s(),s=Ht(a,A=>n(16,i=A)),a);e.$$.on_destroy.push(()=>s());let{status:a=dt({}),interactions:l={status:a}}=t;r();let{id:u,magic:h,client:f,exportFunc:c,importFunc:p,dataTable:g,stateTable:b}=t,y,m;const d=async()=>{console.debug("login user: ",y),m=h.exportState();const A=await f.query(p,{table:b,user:y});if(!A){alert("there is no data for this user"),gt(a,i={user:y,loggedin:!0},i);return}gt(a,i={user:y,loggedin:!0},i),h.importState(A.data)},w=async()=>{let A=h.exportData();await f.mutation(c,{data:A,table:g,user:y}),A=h.exportState(),await f.mutation(c,{data:A,table:b,user:y}),alert("save function executed")},v=async()=>{h.importState(m),n(1,y=null)};function k(){y=this.value,n(1,y)}return e.$$set=A=>{"status"in A&&r(n(0,a=A.status)),"interactions"in A&&n(5,l=A.interactions),"id"in A&&n(6,u=A.id),"magic"in A&&n(7,h=A.magic),"client"in A&&n(8,f=A.client),"exportFunc"in A&&n(9,c=A.exportFunc),"importFunc"in A&&n(10,p=A.importFunc),"dataTable"in A&&n(11,g=A.dataTable),"stateTable"in A&&n(12,b=A.stateTable)},[a,y,d,w,v,l,u,h,f,c,p,g,b,Fs,k]}class Su extends xt{constructor(t){super(),Tt(this,t,zl,Fl,Nt,{status:0,interactions:5,id:6,magic:7,client:8,exportFunc:9,importFunc:10,dataTable:11,stateTable:12,render:13})}get status(){return this.$$.ctx[0]}set status(t){this.$$set({status:t}),D()}get interactions(){return this.$$.ctx[5]}set interactions(t){this.$$set({interactions:t}),D()}get id(){return this.$$.ctx[6]}set id(t){this.$$set({id:t}),D()}get magic(){return this.$$.ctx[7]}set magic(t){this.$$set({magic:t}),D()}get client(){return this.$$.ctx[8]}set client(t){this.$$set({client:t}),D()}get exportFunc(){return this.$$.ctx[9]}set exportFunc(t){this.$$set({exportFunc:t}),D()}get importFunc(){return this.$$.ctx[10]}set importFunc(t){this.$$set({importFunc:t}),D()}get dataTable(){return this.$$.ctx[11]}set dataTable(t){this.$$set({dataTable:t}),D()}get stateTable(){return this.$$.ctx[12]}set stateTable(t){this.$$set({stateTable:t}),D()}get render(){return Fs}}function Xl(e,t,n){let i,s=nt,r=()=>(s(),s=Ht(l,y=>n(8,i=y)),l);e.$$.on_destroy.push(()=>s());let{id:a,valid:l=dt({}),interactions:u={valid:l},key:h,threshold_string:f}=t;r();let c=[],p=Number(f);function g(y,m){if(console.debug("trigger alert render"),c=y??c,ft(c)||!ct(Array,c))return;const w=Pn(h)(c);if(ft(w)){alert("warning, alert tried to find data for a key that returns an empty list, alert will not be used");return}Ua(w)<p?(gt(l,i={valid:!1},i),alert("warning, slider selection has too low variance in rainfall,invalid results")):gt(l,i={valid:!0},i)}function b(y,m){ft(y)||gt(l,i=y,i)}return e.$$set=y=>{"id"in y&&n(1,a=y.id),"valid"in y&&r(n(0,l=y.valid)),"interactions"in y&&n(2,u=y.interactions),"key"in y&&n(3,h=y.key),"threshold_string"in y&&n(4,f=y.threshold_string)},[l,a,u,h,f,g,b]}class Au extends xt{constructor(t){super(),Tt(this,t,Xl,null,Nt,{id:1,valid:0,interactions:2,key:3,threshold_string:4,render:5,load:6})}get id(){return this.$$.ctx[1]}set id(t){this.$$set({id:t}),D()}get valid(){return this.$$.ctx[0]}set valid(t){this.$$set({valid:t}),D()}get interactions(){return this.$$.ctx[2]}set interactions(t){this.$$set({interactions:t}),D()}get key(){return this.$$.ctx[3]}set key(t){this.$$set({key:t}),D()}get threshold_string(){return this.$$.ctx[4]}set threshold_string(t){this.$$set({threshold_string:t}),D()}get render(){return this.$$.ctx[5]}get load(){return this.$$.ctx[6]}}class Ue{constructor(t){this.compPos=function(n){for(var i=[],s=0;s<this._array.length;s++){let r=+(this._array[s]>0&&n[s]>0);i.push(r)}return i},this.isNegative=function(n){return n===0||n===null},this.compZero=function(n){for(var i=[],s=0;s<this._array.length;s++){let r=+(this.isNegative(this._array[s])&&this.isNegative(n[s]));i.push(r)}return i},this.getPos=function(){for(var n=[],i=0;i<this._array.length;i++)+(this._array[i]>0),n.push(+(this._array[i]>0));return n},this.getZero=function(){for(var n=[],i=0;i<this._array.length;i++)+this.isNegative(this._array[i]),n.push(+(this._array[i]===0));return n},this._array=t}get array(){return this._array}}const zs=function(e,t,n,i){let s=t.map(Number),r=i.map(Number),a=new Ue(s),l=new Ue(r),u=a.compPos(l.array),h=l.getPos(),f=u.filter(g=>g>0).length,c=h.filter(g=>g>0).length;return(f/c).toFixed(2)},Xs=function(e,t,n,i){let s=t.map(Number),r=i.map(Number),a=new Ue(s),l=new Ue(r),u=a.compZero(l.array),h=l.getZero(),f=u.filter(g=>g>0).length,c=h.filter(g=>g>0).length;return(f/c).toFixed(2)},Vl=function(e,t,n,i){return zs(e,t,n,i)},Rl=function(e,t,n,i){return Xs(e,t,n,i)},ql=function(e,t,n,i){let s=Number(zs(e,t,n,i)),r=Number(Xs(e,t,n,i));return((s+r)/2).toFixed(2)};let Eu=[{"true positive":Vl,"true negative":Rl,"average matching":ql}];const ve="1.0.3";var St=[],mt=[],Ul=Uint8Array,pn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Yt=0,Hl=pn.length;Yt<Hl;++Yt)St[Yt]=pn[Yt],mt[pn.charCodeAt(Yt)]=Yt;mt["-".charCodeAt(0)]=62;mt["_".charCodeAt(0)]=63;function Jl(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var i=n===t?0:4-n%4;return[n,i]}function Kl(e,t,n){return(t+n)*3/4-n}function He(e){var t,n=Jl(e),i=n[0],s=n[1],r=new Ul(Kl(e,i,s)),a=0,l=s>0?i-4:i,u;for(u=0;u<l;u+=4)t=mt[e.charCodeAt(u)]<<18|mt[e.charCodeAt(u+1)]<<12|mt[e.charCodeAt(u+2)]<<6|mt[e.charCodeAt(u+3)],r[a++]=t>>16&255,r[a++]=t>>8&255,r[a++]=t&255;return s===2&&(t=mt[e.charCodeAt(u)]<<2|mt[e.charCodeAt(u+1)]>>4,r[a++]=t&255),s===1&&(t=mt[e.charCodeAt(u)]<<10|mt[e.charCodeAt(u+1)]<<4|mt[e.charCodeAt(u+2)]>>2,r[a++]=t>>8&255,r[a++]=t&255),r}function Wl(e){return St[e>>18&63]+St[e>>12&63]+St[e>>6&63]+St[e&63]}function Gl(e,t,n){for(var i,s=[],r=t;r<n;r+=3)i=(e[r]<<16&16711680)+(e[r+1]<<8&65280)+(e[r+2]&255),s.push(Wl(i));return s.join("")}function Je(e){for(var t,n=e.length,i=n%3,s=[],r=16383,a=0,l=n-i;a<l;a+=r)s.push(Gl(e,a,a+r>l?l:a+r));return i===1?(t=e[n-1],s.push(St[t>>2]+St[t<<4&63]+"==")):i===2&&(t=(e[n-2]<<8)+e[n-1],s.push(St[t>>10]+St[t>>4&63]+St[t<<2&63]+"=")),s.join("")}function we(e){if(e===void 0)return{};if(!Vs(e))throw new Error(`The arguments to a Convex function must be an object. Received: ${e}`);return e}function Zl(e){if(typeof e>"u")throw new Error("Client created with undefined deployment address. If you used an environment variable, check that it's set.");if(typeof e!="string")throw new Error(`Invalid deployment address: found ${e}".`);if(!(e.startsWith("http:")||e.startsWith("https:")))throw new Error(`Invalid deployment address: Must start with "https://" or "http://". Found "${e}".`);if(!(e.indexOf("127.0.0.1")!==-1||e.indexOf("localhost")!==-1)&&!e.endsWith(".convex.cloud"))throw new Error(`Invalid deployment address: Must end with ".convex.cloud". Found "${e}".`)}function Vs(e){var s;const t=typeof e=="object",n=Object.getPrototypeOf(e),i=n===null||n===Object.prototype||((s=n==null?void 0:n.constructor)==null?void 0:s.name)==="Object";return t&&i}const Rs=!0,oe=BigInt("-9223372036854775808"),Un=BigInt("9223372036854775807"),Dn=BigInt("0"),Yl=BigInt("8"),Ql=BigInt("256");function qs(e){return Number.isNaN(e)||!Number.isFinite(e)||Object.is(e,-0)}function $l(e){e<Dn&&(e-=oe+oe);let t=e.toString(16);t.length%2===1&&(t="0"+t);const n=new Uint8Array(new ArrayBuffer(8));let i=0;for(const s of t.match(/.{2}/g).reverse())n.set([parseInt(s,16)],i++),e>>=Yl;return Je(n)}function tu(e){const t=He(e);if(t.byteLength!==8)throw new Error(`Received ${t.byteLength} bytes, expected 8 for $integer`);let n=Dn,i=Dn;for(const s of t)n+=BigInt(s)*Ql**i,i++;return n>Un&&(n+=oe+oe),n}function eu(e){if(e<oe||Un<e)throw new Error(`BigInt ${e} does not fit into a 64-bit signed integer.`);const t=new ArrayBuffer(8);return new DataView(t).setBigInt64(0,e,!0),Je(new Uint8Array(t))}function nu(e){const t=He(e);if(t.byteLength!==8)throw new Error(`Received ${t.byteLength} bytes, expected 8 for $integer`);return new DataView(t.buffer).getBigInt64(0,!0)}const iu=DataView.prototype.setBigInt64?eu:$l,su=DataView.prototype.getBigInt64?nu:tu,Ki=1024;function In(e){if(e.length===0)throw new Error("Empty field names are disallowed.");if(e.length>Ki)throw new Error(`Field name ${e} exceeds maximum field name length ${Ki}.`);if(e.startsWith("$"))throw new Error(`Field name ${e} starts with a '$', which is reserved.`);for(let t=0;t<e.length;t+=1){const n=e.charCodeAt(t);if(n<32||n>=127)throw new Error(`Field name ${e} has invalid character '${e[t]}': Field names can only contain non-control ASCII characters`)}}function Qt(e,t){if(e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string")return e;if(Array.isArray(e))return e.map(s=>Qt(s,t));if(typeof e!="object")throw new Error(`Unexpected type of ${e}`);const n=Object.entries(e);if(n.length===1){const s=n[0][0];if(s==="$bytes"){if(typeof e.$bytes!="string")throw new Error(`Malformed $bytes field on ${e}`);return He(e.$bytes).buffer}if(s==="$integer"){if(typeof e.$integer!="string")throw new Error(`Malformed $integer field on ${e}`);return su(e.$integer)}if(s==="$float"){if(typeof e.$float!="string")throw new Error(`Malformed $float field on ${e}`);const r=He(e.$float);if(r.byteLength!==8)throw new Error(`Received ${r.byteLength} bytes, expected 8 for $float`);const l=new DataView(r.buffer).getFloat64(0,Rs);if(!qs(l))throw new Error(`Float ${l} should be encoded as a number`);return l}if(s==="$set"){if(!Array.isArray(e.$set))throw new Error(`Malformed $set field on ${e}`);if(!t)throw new Error(`Received a Set which is no longer supported as a Convex type, with values: ${e.$set}.`);return new Set(e.$set.map(r=>Qt(r,t)))}if(s==="$map"){if(!Array.isArray(e.$map))throw new Error(`Malformed $map field on ${e}`);if(!t)throw new Error(`Received a Map which is no longer supported as a Convex type, with entries: ${e.$map}.`);const r=new Map;for(const a of e.$map){if(!Array.isArray(a)||a.length!==2)throw new Error(`Malformed pair in $map ${e}`);const l=Qt(a[0],t),u=Qt(a[1],t);r.set(l,u)}return r}}const i={};for(const[s,r]of Object.entries(e))In(s),i[s]=Qt(r,t);return i}function ke(e,t=!1){return Qt(e,t)}function fe(e){return JSON.stringify(e,(t,n)=>n===void 0?"undefined":typeof n=="bigint"?`${n.toString()}n`:n)}function Ut(e,t,n,i,s){var a;if(e===void 0){const l=n&&` (present at path ${n} in original object ${fe(t)})`;throw new Error(`undefined is not a valid Convex value${l}. To learn about Convex's supported types, see https://docs.convex.dev/using/types.`)}if(e===null)return e;if(typeof e=="bigint"){if(e<oe||Un<e)throw new Error(`BigInt ${e} does not fit into a 64-bit signed integer.`);return{$integer:iu(e)}}if(typeof e=="number")if(qs(e)){const l=new ArrayBuffer(8);return new DataView(l).setFloat64(0,e,Rs),{$float:Je(new Uint8Array(l))}}else return e;if(typeof e=="boolean"||typeof e=="string")return e;if(e instanceof ArrayBuffer)return{$bytes:Je(new Uint8Array(e))};if(Array.isArray(e))return e.map((l,u)=>Ut(l,t,n+`[${u}]`,!1,s));if(e instanceof Set){if(!s)throw new Error(yn(n,"Set",[...e],t));return{$set:[...e].map((l,u)=>Ut(l,t,n+`.keys()[${u}]`,!1,s))}}if(e instanceof Map){if(!s)throw new Error(yn(n,"Map",[...e],t));return{$map:[...e].map(([l,u],h)=>{const f=Ut(l,t,n+`.keys()[${h}]`,!1,s),c=Ut(u,t,n+`.values()[${h}]`,!1,s);return[f,c]})}}if(!Vs(e)){const l=(a=e==null?void 0:e.constructor)==null?void 0:a.name,u=l?`${l} `:"";throw new Error(yn(n,u,e,t))}const r={};for(const[l,u]of Object.entries(e))u!==void 0?(In(l),r[l]=Ut(u,t,n+`.${l}`,!1,s)):i&&(In(l),r[l]=ru(u,t,n+`.${l}`));return r}function yn(e,t,n,i){return e?`${t}${fe(n)} is not a supported Convex type (present at path ${e} in original object ${fe(i)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`:`${t}${fe(n)} is not a supported Convex type.`}function ru(e,t,n){if(e===void 0)return{$undefined:null};if(t===void 0)throw new Error(`Programming error. Current value is ${fe(e)} but original value is undefined`);return Ut(e,t,n,!1,!1)}function Se(e,t=!1){return Ut(e,e,"",!1,t)}const au="color:rgb(0, 145, 255)";function ou(e){switch(e){case"query":return"Q";case"mutation":return"M";case"action":return"A";case"any":return"?"}}function Ae(e,t,n,i){const s=ou(t);if(e==="info"){const r=i.match(/^\[.*?\] /);if(r===null){console.error(`[CONVEX ${s}(${n})] Could not parse console.log`);return}const a=i.slice(1,r[0].length-2),l=i.slice(r[0].length);console.log(`%c[CONVEX ${s}(${n})] [${a}]`,au,l)}else console.error(`[CONVEX ${s}(${n})] ${i}`)}const Us=Symbol.for("functionName");function Ee(e){if(typeof e=="string")return e;const t=e[Us];if(!t)throw new Error(`${e} is not a functionReference`);return t}function Hs(e=[]){const t={get(n,i){if(typeof i=="string"){const s=[...e,i];return Hs(s)}else if(i===Us){if(e.length<2)throw new Error("API path must include at least 2 parts (module name and function name). Found: "+e);const s=e.slice(0,-1).join("/"),r=e[e.length-1];return r==="default"?s:s+":"+r}else return i===Symbol.toStringTag?"FunctionReference":void 0}};return new Proxy({},t)}Hs();const xe=560,Te=globalThis.fetch||((...e)=>Qr(()=>import("./index.27f495c4.js"),["./index.27f495c4.js","./_commonjsHelpers.4c03ca81.js"],import.meta.url).then(({default:t})=>t(...e)));class xu{constructor(t){Zl(t),this.address=`${t}/api`,this.debug=!0}backendUrl(){return this.address}setAuth(t){this.clearAuth(),this.auth=t}setAdminAuth(t){this.clearAuth(),this.adminAuth=t}clearAuth(){this.auth=void 0,this.adminAuth=void 0}setDebug(t){this.debug=t}async query(t,...n){const i=we(n[0]),s=Ee(t),r=JSON.stringify({path:s,args:[Se(i)]}),a={"Content-Type":"application/json","Convex-Client":`npm-${ve}`};this.adminAuth?a.Authorization=`Convex ${this.adminAuth}`:this.auth&&(a.Authorization=`Bearer ${this.auth}`);const l=await Te(`${this.address}/query`,{body:r,method:"POST",headers:a,credentials:"include"});if(!l.ok&&l.status!==xe)throw new Error(await l.text());const u=await l.json();if(this.debug)for(const h of u.logLines??[])Ae("info","query",s,h);switch(u.status){case"success":return ke(u.value,!0);case"error":throw new Error(u.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(u)}`)}}async mutation(t,...n){const i=we(n[0]),s=Ee(t),r=JSON.stringify({path:s,args:[Se(i)]}),a={"Content-Type":"application/json","Convex-Client":`npm-${ve}`};this.adminAuth?a.Authorization=`Convex ${this.adminAuth}`:this.auth&&(a.Authorization=`Bearer ${this.auth}`);const l=await Te(`${this.address}/mutation`,{body:r,method:"POST",headers:a,credentials:"include"});if(!l.ok&&l.status!==xe)throw new Error(await l.text());const u=await l.json();if(this.debug)for(const h of u.logLines??[])Ae("info","mutation",s,h);switch(u.status){case"success":return ke(u.value,!0);case"error":throw new Error(u.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(u)}`)}}async action(t,...n){const i=we(n[0]),s=Ee(t),r=JSON.stringify({path:s,args:[Se(i)]}),a={"Content-Type":"application/json","Convex-Client":`npm-${ve}`};this.adminAuth?a.Authorization=`Convex ${this.adminAuth}`:this.auth&&(a.Authorization=`Bearer ${this.auth}`);const l=await Te(`${this.address}/action`,{body:r,method:"POST",headers:a,credentials:"include"});if(!l.ok&&l.status!==xe)throw new Error(await l.text());const u=await l.json();if(this.debug)for(const h of u.logLines??[])Ae("info","action",s,h);switch(u.status){case"success":return ke(u.value,!0);case"error":throw new Error(u.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(u)}`)}}async function(t,...n){const i=we(n[0]),s=typeof t=="string"?t:Ee(t),r=JSON.stringify({path:s,args:[Se(i)]}),a={"Content-Type":"application/json","Convex-Client":`npm-${ve}`};this.adminAuth?a.Authorization=`Convex ${this.adminAuth}`:this.auth&&(a.Authorization=`Bearer ${this.auth}`);const l=await Te(`${this.address}/function`,{body:r,method:"POST",headers:a,credentials:"include"});if(!l.ok&&l.status!==xe)throw new Error(await l.text());const u=await l.json();if(this.debug)for(const h of u.logLines??[])Ae("info","any",s,h);switch(u.status){case"success":return ke(u.value,!0);case"error":throw new Error(u.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(u)}`)}}}export{Au as A,pu as B,xu as C,ku as D,Su as L,_u as M,gu as S,mu as a,yu as b,bu as c,re as d,Da as e,Eu as f,Pe as g,gs as h,ri as i,Le as j,Xt as m,wu as q,Ea as r,vu as w};
