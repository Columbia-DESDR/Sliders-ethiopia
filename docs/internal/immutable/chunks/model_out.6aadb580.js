import{b as vg}from"./paths.48744069.js";import{S as Ue,i as Ve,s as je,k as tt,l as et,m as ot,h as C,n as B,b as Tt,g as We,f as Ws,d as wn,X as fr,Y as Ad,x as Ua,a8 as Va,y as As,a as Fe,z as xc,c as Le,A as ks,D as V,v as Ks,B as Ts,w as $i,I as Rt,J as Qs,K as Sn,a1 as bg,a2 as Th,T as gn,a9 as wg,q as ae,r as oe,u as xn,a3 as Sg,aa as xg,p as Rs,a4 as ja,W as kd,o as Td,a0 as Ns,ab as Ig,V as Eg,Z as Ag,e as Rh,ac as $u}from"./index.c742ee74.js";import{w as bi}from"./index.ab7c113e.js";var zu="http://www.w3.org/1999/xhtml";const Nh={svg:"http://www.w3.org/2000/svg",xhtml:zu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ro(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Nh.hasOwnProperty(t)?{space:Nh[t],local:e}:e}function kg(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===zu&&t.documentElement.namespaceURI===zu?t.createElement(e):t.createElementNS(n,e)}}function Tg(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Rd(e){var t=Ro(e);return(t.local?Tg:kg)(t)}function Rg(){}function Ic(e){return e==null?Rg:function(){return this.querySelector(e)}}function Ng(e){typeof e!="function"&&(e=Ic(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],a=s.length,o=i[r]=new Array(a),u,c,l=0;l<a;++l)(u=s[l])&&(c=e.call(u,u.__data__,l,s))&&("__data__"in u&&(c.__data__=u.__data__),o[l]=c);return new In(i,this._parents)}function Og(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Cg(){return[]}function Nd(e){return e==null?Cg:function(){return this.querySelectorAll(e)}}function Fg(e){return function(){return Og(e.apply(this,arguments))}}function Lg(e){typeof e=="function"?e=Fg(e):e=Nd(e);for(var t=this._groups,n=t.length,i=[],r=[],s=0;s<n;++s)for(var a=t[s],o=a.length,u,c=0;c<o;++c)(u=a[c])&&(i.push(e.call(u,u.__data__,c,a)),r.push(u));return new In(i,r)}function Od(e){return function(){return this.matches(e)}}function Cd(e){return function(t){return t.matches(e)}}var Bg=Array.prototype.find;function Dg(e){return function(){return Bg.call(this.children,e)}}function Mg(){return this.firstElementChild}function Pg(e){return this.select(e==null?Mg:Dg(typeof e=="function"?e:Cd(e)))}var Ug=Array.prototype.filter;function Vg(){return Array.from(this.children)}function jg(e){return function(){return Ug.call(this.children,e)}}function $g(e){return this.selectAll(e==null?Vg:jg(typeof e=="function"?e:Cd(e)))}function zg(e){typeof e!="function"&&(e=Od(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],a=s.length,o=i[r]=[],u,c=0;c<a;++c)(u=s[c])&&e.call(u,u.__data__,c,s)&&o.push(u);return new In(i,this._parents)}function Fd(e){return new Array(e.length)}function qg(){return new In(this._enter||this._groups.map(Fd),this._parents)}function $a(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}$a.prototype={constructor:$a,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Gg(e){return function(){return e}}function Yg(e,t,n,i,r,s){for(var a=0,o,u=t.length,c=s.length;a<c;++a)(o=t[a])?(o.__data__=s[a],i[a]=o):n[a]=new $a(e,s[a]);for(;a<u;++a)(o=t[a])&&(r[a]=o)}function Hg(e,t,n,i,r,s,a){var o,u,c=new Map,l=t.length,h=s.length,p=new Array(l),m;for(o=0;o<l;++o)(u=t[o])&&(p[o]=m=a.call(u,u.__data__,o,t)+"",c.has(m)?r[o]=u:c.set(m,u));for(o=0;o<h;++o)m=a.call(e,s[o],o,s)+"",(u=c.get(m))?(i[o]=u,u.__data__=s[o],c.delete(m)):n[o]=new $a(e,s[o]);for(o=0;o<l;++o)(u=t[o])&&c.get(p[o])===u&&(r[o]=u)}function Wg(e){return e.__data__}function Kg(e,t){if(!arguments.length)return Array.from(this,Wg);var n=t?Hg:Yg,i=this._parents,r=this._groups;typeof e!="function"&&(e=Gg(e));for(var s=r.length,a=new Array(s),o=new Array(s),u=new Array(s),c=0;c<s;++c){var l=i[c],h=r[c],p=h.length,m=Qg(e.call(l,l&&l.__data__,c,i)),b=m.length,y=o[c]=new Array(b),S=a[c]=new Array(b),I=u[c]=new Array(p);n(l,h,y,S,I,m,t);for(var k=0,$=0,L,Ct;k<b;++k)if(L=y[k]){for(k>=$&&($=k+1);!(Ct=S[$])&&++$<b;);L._next=Ct||null}}return a=new In(a,i),a._enter=o,a._exit=u,a}function Qg(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Xg(){return new In(this._exit||this._groups.map(Fd),this._parents)}function Jg(e,t,n){var i=this.enter(),r=this,s=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function Zg(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,s=i.length,a=Math.min(r,s),o=new Array(r),u=0;u<a;++u)for(var c=n[u],l=i[u],h=c.length,p=o[u]=new Array(h),m,b=0;b<h;++b)(m=c[b]||l[b])&&(p[b]=m);for(;u<r;++u)o[u]=n[u];return new In(o,this._parents)}function tv(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,s=i[r],a;--r>=0;)(a=i[r])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function ev(e){e||(e=nv);function t(h,p){return h&&p?e(h.__data__,p.__data__):!h-!p}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var a=n[s],o=a.length,u=r[s]=new Array(o),c,l=0;l<o;++l)(c=a[l])&&(u[l]=c);u.sort(t)}return new In(r,this._parents).order()}function nv(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function iv(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function rv(){return Array.from(this)}function sv(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length;r<s;++r){var a=i[r];if(a)return a}return null}function av(){let e=0;for(const t of this)++e;return e}function ov(){return!this.node()}function uv(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],s=0,a=r.length,o;s<a;++s)(o=r[s])&&e.call(o,o.__data__,s,r);return this}function cv(e){return function(){this.removeAttribute(e)}}function lv(e){return function(){this.removeAttributeNS(e.space,e.local)}}function hv(e,t){return function(){this.setAttribute(e,t)}}function fv(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function dv(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function pv(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function mv(e,t){var n=Ro(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?lv:cv:typeof t=="function"?n.local?pv:dv:n.local?fv:hv)(n,t))}function Ld(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function _v(e){return function(){this.style.removeProperty(e)}}function yv(e,t,n){return function(){this.style.setProperty(e,t,n)}}function gv(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function vv(e,t,n){return arguments.length>1?this.each((t==null?_v:typeof t=="function"?gv:yv)(e,t,n??"")):Pr(this.node(),e)}function Pr(e,t){return e.style.getPropertyValue(t)||Ld(e).getComputedStyle(e,null).getPropertyValue(t)}function bv(e){return function(){delete this[e]}}function wv(e,t){return function(){this[e]=t}}function Sv(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function xv(e,t){return arguments.length>1?this.each((t==null?bv:typeof t=="function"?Sv:wv)(e,t)):this.node()[e]}function Bd(e){return e.trim().split(/^|\s+/)}function Ec(e){return e.classList||new Dd(e)}function Dd(e){this._node=e,this._names=Bd(e.getAttribute("class")||"")}Dd.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Md(e,t){for(var n=Ec(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function Pd(e,t){for(var n=Ec(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function Iv(e){return function(){Md(this,e)}}function Ev(e){return function(){Pd(this,e)}}function Av(e,t){return function(){(t.apply(this,arguments)?Md:Pd)(this,e)}}function kv(e,t){var n=Bd(e+"");if(arguments.length<2){for(var i=Ec(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Av:t?Iv:Ev)(n,t))}function Tv(){this.textContent=""}function Rv(e){return function(){this.textContent=e}}function Nv(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Ov(e){return arguments.length?this.each(e==null?Tv:(typeof e=="function"?Nv:Rv)(e)):this.node().textContent}function Cv(){this.innerHTML=""}function Fv(e){return function(){this.innerHTML=e}}function Lv(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Bv(e){return arguments.length?this.each(e==null?Cv:(typeof e=="function"?Lv:Fv)(e)):this.node().innerHTML}function Dv(){this.nextSibling&&this.parentNode.appendChild(this)}function Mv(){return this.each(Dv)}function Pv(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Uv(){return this.each(Pv)}function Vv(e){var t=typeof e=="function"?e:Rd(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function jv(){return null}function $v(e,t){var n=typeof e=="function"?e:Rd(e),i=t==null?jv:typeof t=="function"?t:Ic(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function zv(){var e=this.parentNode;e&&e.removeChild(this)}function qv(){return this.each(zv)}function Gv(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Yv(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Hv(e){return this.select(e?Yv:Gv)}function Wv(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Kv(e){return function(t){e.call(this,t,this.__data__)}}function Qv(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function Xv(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,r=t.length,s;n<r;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++i]=s;++i?t.length=i:delete this.__on}}}function Jv(e,t,n){return function(){var i=this.__on,r,s=Kv(t);if(i){for(var a=0,o=i.length;a<o;++a)if((r=i[a]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=t;return}}this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},i?i.push(r):this.__on=[r]}}function Zv(e,t,n){var i=Qv(e+""),r,s=i.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var u=0,c=o.length,l;u<c;++u)for(r=0,l=o[u];r<s;++r)if((a=i[r]).type===l.type&&a.name===l.name)return l.value}return}for(o=t?Jv:Xv,r=0;r<s;++r)this.each(o(i[r],t,n));return this}function Ud(e,t,n){var i=Ld(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function tb(e,t){return function(){return Ud(this,e,t)}}function eb(e,t){return function(){return Ud(this,e,t.apply(this,arguments))}}function nb(e,t){return this.each((typeof t=="function"?eb:tb)(e,t))}function*ib(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length,a;r<s;++r)(a=i[r])&&(yield a)}var rb=[null];function In(e,t){this._groups=e,this._parents=t}function Xs(){return new In([[document.documentElement]],rb)}function sb(){return this}In.prototype=Xs.prototype={constructor:In,select:Ng,selectAll:Lg,selectChild:Pg,selectChildren:$g,filter:zg,data:Kg,enter:qg,exit:Xg,join:Jg,merge:Zg,selection:sb,order:tv,sort:ev,call:iv,nodes:rv,node:sv,size:av,empty:ov,each:uv,attr:mv,style:vv,property:xv,classed:kv,text:Ov,html:Bv,raise:Mv,lower:Uv,append:Vv,insert:$v,remove:qv,clone:Hv,datum:Wv,on:Zv,dispatch:nb,[Symbol.iterator]:ib};function Ac(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Vd(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Js(){}var Os=.7,za=1/Os,Or="\\s*([+-]?\\d+)\\s*",Cs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ab=/^#([0-9a-f]{3,8})$/,ob=new RegExp(`^rgb\\(${Or},${Or},${Or}\\)$`),ub=new RegExp(`^rgb\\(${Gn},${Gn},${Gn}\\)$`),cb=new RegExp(`^rgba\\(${Or},${Or},${Or},${Cs}\\)$`),lb=new RegExp(`^rgba\\(${Gn},${Gn},${Gn},${Cs}\\)$`),hb=new RegExp(`^hsl\\(${Cs},${Gn},${Gn}\\)$`),fb=new RegExp(`^hsla\\(${Cs},${Gn},${Gn},${Cs}\\)$`),Oh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ac(Js,Fs,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ch,formatHex:Ch,formatHex8:db,formatHsl:pb,formatRgb:Fh,toString:Fh});function Ch(){return this.rgb().formatHex()}function db(){return this.rgb().formatHex8()}function pb(){return jd(this).formatHsl()}function Fh(){return this.rgb().formatRgb()}function Fs(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ab.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Lh(t):n===3?new Ce(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ya(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ya(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ob.exec(e))?new Ce(t[1],t[2],t[3],1):(t=ub.exec(e))?new Ce(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=cb.exec(e))?ya(t[1],t[2],t[3],t[4]):(t=lb.exec(e))?ya(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=hb.exec(e))?Mh(t[1],t[2]/100,t[3]/100,1):(t=fb.exec(e))?Mh(t[1],t[2]/100,t[3]/100,t[4]):Oh.hasOwnProperty(e)?Lh(Oh[e]):e==="transparent"?new Ce(NaN,NaN,NaN,0):null}function Lh(e){return new Ce(e>>16&255,e>>8&255,e&255,1)}function ya(e,t,n,i){return i<=0&&(e=t=n=NaN),new Ce(e,t,n,i)}function mb(e){return e instanceof Js||(e=Fs(e)),e?(e=e.rgb(),new Ce(e.r,e.g,e.b,e.opacity)):new Ce}function qa(e,t,n,i){return arguments.length===1?mb(e):new Ce(e,t,n,i??1)}function Ce(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Ac(Ce,qa,Vd(Js,{brighter(e){return e=e==null?za:Math.pow(za,e),new Ce(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Os:Math.pow(Os,e),new Ce(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ce(cr(this.r),cr(this.g),cr(this.b),Ga(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Bh,formatHex:Bh,formatHex8:_b,formatRgb:Dh,toString:Dh}));function Bh(){return`#${tr(this.r)}${tr(this.g)}${tr(this.b)}`}function _b(){return`#${tr(this.r)}${tr(this.g)}${tr(this.b)}${tr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Dh(){const e=Ga(this.opacity);return`${e===1?"rgb(":"rgba("}${cr(this.r)}, ${cr(this.g)}, ${cr(this.b)}${e===1?")":`, ${e})`}`}function Ga(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function cr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function tr(e){return e=cr(e),(e<16?"0":"")+e.toString(16)}function Mh(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new mn(e,t,n,i)}function jd(e){if(e instanceof mn)return new mn(e.h,e.s,e.l,e.opacity);if(e instanceof Js||(e=Fs(e)),!e)return new mn;if(e instanceof mn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),s=Math.max(t,n,i),a=NaN,o=s-r,u=(s+r)/2;return o?(t===s?a=(n-i)/o+(n<i)*6:n===s?a=(i-t)/o+2:a=(t-n)/o+4,o/=u<.5?s+r:2-s-r,a*=60):o=u>0&&u<1?0:a,new mn(a,o,u,e.opacity)}function yb(e,t,n,i){return arguments.length===1?jd(e):new mn(e,t,n,i??1)}function mn(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Ac(mn,yb,Vd(Js,{brighter(e){return e=e==null?za:Math.pow(za,e),new mn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Os:Math.pow(Os,e),new mn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Ce(mu(e>=240?e-240:e+120,r,i),mu(e,r,i),mu(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new mn(Ph(this.h),ga(this.s),ga(this.l),Ga(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ga(this.opacity);return`${e===1?"hsl(":"hsla("}${Ph(this.h)}, ${ga(this.s)*100}%, ${ga(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ph(e){return e=(e||0)%360,e<0?e+360:e}function ga(e){return Math.max(0,Math.min(1,e||0))}function mu(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function gb(e,t,n,i,r){var s=e*e,a=s*e;return((1-3*e+3*s-a)*t+(4-6*s+3*a)*n+(1+3*e+3*s-3*a)*i+a*r)/6}function vb(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],s=e[i+1],a=i>0?e[i-1]:2*r-s,o=i<t-1?e[i+2]:2*s-r;return gb((n-i/t)*t,a,r,s,o)}}const kc=e=>()=>e;function $d(e,t){return function(n){return e+n*t}}function bb(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function _O(e,t){var n=t-e;return n?$d(e,n>180||n<-180?n-360*Math.round(n/360):n):kc(isNaN(e)?t:e)}function wb(e){return(e=+e)==1?zd:function(t,n){return n-t?bb(t,n,e):kc(isNaN(t)?n:t)}}function zd(e,t){var n=t-e;return n?$d(e,n):kc(isNaN(e)?t:e)}const Uh=function e(t){var n=wb(t);function i(r,s){var a=n((r=qa(r)).r,(s=qa(s)).r),o=n(r.g,s.g),u=n(r.b,s.b),c=zd(r.opacity,s.opacity);return function(l){return r.r=a(l),r.g=o(l),r.b=u(l),r.opacity=c(l),r+""}}return i.gamma=e,i}(1);function Sb(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),s=new Array(n),a,o;for(a=0;a<n;++a)o=qa(t[a]),i[a]=o.r||0,r[a]=o.g||0,s[a]=o.b||0;return i=e(i),r=e(r),s=e(s),o.opacity=1,function(u){return o.r=i(u),o.g=r(u),o.b=s(u),o+""}}}var yO=Sb(vb);function Ri(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var qu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_u=new RegExp(qu.source,"g");function xb(e){return function(){return e}}function Ib(e){return function(t){return e(t)+""}}function Eb(e,t){var n=qu.lastIndex=_u.lastIndex=0,i,r,s,a=-1,o=[],u=[];for(e=e+"",t=t+"";(i=qu.exec(e))&&(r=_u.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(i=i[0])===(r=r[0])?o[a]?o[a]+=r:o[++a]=r:(o[++a]=null,u.push({i:a,x:Ri(i,r)})),n=_u.lastIndex;return n<t.length&&(s=t.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?u[0]?Ib(u[0].x):xb(t):(t=u.length,function(c){for(var l=0,h;l<t;++l)o[(h=u[l]).i]=h.x(c);return o.join("")})}var Vh=180/Math.PI,Gu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qd(e,t,n,i,r,s){var a,o,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*i)&&(n-=e*u,i-=t*u),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,u/=o),e*i<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*Vh,skewX:Math.atan(u)*Vh,scaleX:a,scaleY:o}}var va;function Ab(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Gu:qd(t.a,t.b,t.c,t.d,t.e,t.f)}function kb(e){return e==null||(va||(va=document.createElementNS("http://www.w3.org/2000/svg","g")),va.setAttribute("transform",e),!(e=va.transform.baseVal.consolidate()))?Gu:(e=e.matrix,qd(e.a,e.b,e.c,e.d,e.e,e.f))}function Gd(e,t,n,i){function r(c){return c.length?c.pop()+" ":""}function s(c,l,h,p,m,b){if(c!==h||l!==p){var y=m.push("translate(",null,t,null,n);b.push({i:y-4,x:Ri(c,h)},{i:y-2,x:Ri(l,p)})}else(h||p)&&m.push("translate("+h+t+p+n)}function a(c,l,h,p){c!==l?(c-l>180?l+=360:l-c>180&&(c+=360),p.push({i:h.push(r(h)+"rotate(",null,i)-2,x:Ri(c,l)})):l&&h.push(r(h)+"rotate("+l+i)}function o(c,l,h,p){c!==l?p.push({i:h.push(r(h)+"skewX(",null,i)-2,x:Ri(c,l)}):l&&h.push(r(h)+"skewX("+l+i)}function u(c,l,h,p,m,b){if(c!==h||l!==p){var y=m.push(r(m)+"scale(",null,",",null,")");b.push({i:y-4,x:Ri(c,h)},{i:y-2,x:Ri(l,p)})}else(h!==1||p!==1)&&m.push(r(m)+"scale("+h+","+p+")")}return function(c,l){var h=[],p=[];return c=e(c),l=e(l),s(c.translateX,c.translateY,l.translateX,l.translateY,h,p),a(c.rotate,l.rotate,h,p),o(c.skewX,l.skewX,h,p),u(c.scaleX,c.scaleY,l.scaleX,l.scaleY,h,p),c=l=null,function(m){for(var b=-1,y=p.length,S;++b<y;)h[(S=p[b]).i]=S.x(m);return h.join("")}}}var Tb=Gd(Ab,"px, ","px)","deg)"),Rb=Gd(kb,", ",")",")"),jh={},yu={},gu=34,ds=10,vu=13;function Yd(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Nb(e,t){var n=Yd(e);return function(i,r){return t(n(i),r,e)}}function $h(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function ke(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function Ob(e){return e<0?"-"+ke(-e,6):e>9999?"+"+ke(e,6):ke(e,4)}function Cb(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Ob(e.getUTCFullYear())+"-"+ke(e.getUTCMonth()+1,2)+"-"+ke(e.getUTCDate(),2)+(r?"T"+ke(t,2)+":"+ke(n,2)+":"+ke(i,2)+"."+ke(r,3)+"Z":i?"T"+ke(t,2)+":"+ke(n,2)+":"+ke(i,2)+"Z":n||t?"T"+ke(t,2)+":"+ke(n,2)+"Z":"")}function Fb(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(h,p){var m,b,y=r(h,function(S,I){if(m)return m(S,I-1);b=S,m=p?Nb(S,p):Yd(S)});return y.columns=b||[],y}function r(h,p){var m=[],b=h.length,y=0,S=0,I,k=b<=0,$=!1;h.charCodeAt(b-1)===ds&&--b,h.charCodeAt(b-1)===vu&&--b;function L(){if(k)return yu;if($)return $=!1,jh;var at,Kt=y,yt;if(h.charCodeAt(Kt)===gu){for(;y++<b&&h.charCodeAt(y)!==gu||h.charCodeAt(++y)===gu;);return(at=y)>=b?k=!0:(yt=h.charCodeAt(y++))===ds?$=!0:yt===vu&&($=!0,h.charCodeAt(y)===ds&&++y),h.slice(Kt+1,at-1).replace(/""/g,'"')}for(;y<b;){if((yt=h.charCodeAt(at=y++))===ds)$=!0;else if(yt===vu)$=!0,h.charCodeAt(y)===ds&&++y;else if(yt!==n)continue;return h.slice(Kt,at)}return k=!0,h.slice(Kt,b)}for(;(I=L())!==yu;){for(var Ct=[];I!==jh&&I!==yu;)Ct.push(I),I=L();p&&(Ct=p(Ct,S++))==null||m.push(Ct)}return m}function s(h,p){return h.map(function(m){return p.map(function(b){return l(m[b])}).join(e)})}function a(h,p){return p==null&&(p=$h(h)),[p.map(l).join(e)].concat(s(h,p)).join(`
`)}function o(h,p){return p==null&&(p=$h(h)),s(h,p).join(`
`)}function u(h){return h.map(c).join(`
`)}function c(h){return h.map(l).join(e)}function l(h){return h==null?"":h instanceof Date?Cb(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:i,parseRows:r,format:a,formatBody:o,formatRows:u,formatRow:c,formatValue:l}}var Lb=Fb(","),Bb=Lb.parse;function Db(e){for(var t in e){var n=e[t].trim(),i,r;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(i=+n))n=i;else if(r=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))Mb&&r[4]&&!r[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;e[t]=n}return e}const Mb=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Pb(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Ub(e,t){return fetch(e,t).then(Pb)}function Vb(e){return function(t,n,i){return arguments.length===2&&typeof n=="function"&&(i=n,n=void 0),Ub(t,n).then(function(r){return e(r,i)})}}var jb=Vb(Bb),$b=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function gO(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function i(){if(this instanceof i){var r=[null];r.push.apply(r,arguments);var s=Function.bind.apply(t,r);return new s}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var r=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return e[i]}})}),n}let zh=bi(null),Hd=bi(null),qb=bi(null),vO=bi(null);function qt(e){return e!=null&&typeof e=="object"&&e["@@functional/placeholder"]===!0}function te(e){return function t(n){return arguments.length===0||qt(n)?t:e.apply(this,arguments)}}function Zt(e){return function t(n,i){switch(arguments.length){case 0:return t;case 1:return qt(n)?t:te(function(r){return e(n,r)});default:return qt(n)&&qt(i)?t:qt(n)?te(function(r){return e(r,i)}):qt(i)?te(function(r){return e(n,r)}):e(n,i)}}}function Gb(e,t){e=e||[],t=t||[];var n,i=e.length,r=t.length,s=[];for(n=0;n<i;)s[s.length]=e[n],n+=1;for(n=0;n<r;)s[s.length]=t[n],n+=1;return s}function Tc(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(n){return t.apply(this,arguments)};case 2:return function(n,i){return t.apply(this,arguments)};case 3:return function(n,i,r){return t.apply(this,arguments)};case 4:return function(n,i,r,s){return t.apply(this,arguments)};case 5:return function(n,i,r,s,a){return t.apply(this,arguments)};case 6:return function(n,i,r,s,a,o){return t.apply(this,arguments)};case 7:return function(n,i,r,s,a,o,u){return t.apply(this,arguments)};case 8:return function(n,i,r,s,a,o,u,c){return t.apply(this,arguments)};case 9:return function(n,i,r,s,a,o,u,c,l){return t.apply(this,arguments)};case 10:return function(n,i,r,s,a,o,u,c,l,h){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function Wd(e){return function t(n,i,r){switch(arguments.length){case 0:return t;case 1:return qt(n)?t:Zt(function(s,a){return e(n,s,a)});case 2:return qt(n)&&qt(i)?t:qt(n)?Zt(function(s,a){return e(s,i,a)}):qt(i)?Zt(function(s,a){return e(n,s,a)}):te(function(s){return e(n,i,s)});default:return qt(n)&&qt(i)&&qt(r)?t:qt(n)&&qt(i)?Zt(function(s,a){return e(s,a,r)}):qt(n)&&qt(r)?Zt(function(s,a){return e(s,i,a)}):qt(i)&&qt(r)?Zt(function(s,a){return e(n,s,a)}):qt(n)?te(function(s){return e(s,i,r)}):qt(i)?te(function(s){return e(n,s,r)}):qt(r)?te(function(s){return e(n,i,s)}):e(n,i,r)}}}const No=Array.isArray||function(t){return t!=null&&t.length>=0&&Object.prototype.toString.call(t)==="[object Array]"};function Yb(e){return e!=null&&typeof e["@@transducer/step"]=="function"}function Hb(e,t,n){return function(){if(arguments.length===0)return n();var i=arguments[arguments.length-1];if(!No(i)){for(var r=0;r<e.length;){if(typeof i[e[r]]=="function")return i[e[r]].apply(i,Array.prototype.slice.call(arguments,0,-1));r+=1}if(Yb(i)){var s=t.apply(null,Array.prototype.slice.call(arguments,0,-1));return s(i)}}return n.apply(this,arguments)}}const qh={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}};function Kd(e){return Object.prototype.toString.call(e)==="[object String]"}var Qd=te(function(t){return No(t)?!0:!t||typeof t!="object"||Kd(t)?!1:t.length===0?!0:t.length>0?t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1):!1}),Wb=function(){function e(t){this.f=t}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(t){return t},e.prototype["@@transducer/step"]=function(t,n){return this.f(t,n)},e}();function Kb(e){return new Wb(e)}var Qb=Zt(function(t,n){return Tc(t.length,function(){return t.apply(n,arguments)})});function Xb(e,t,n){for(var i=0,r=n.length;i<r;){if(t=e["@@transducer/step"](t,n[i]),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}i+=1}return e["@@transducer/result"](t)}function Gh(e,t,n){for(var i=n.next();!i.done;){if(t=e["@@transducer/step"](t,i.value),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}i=n.next()}return e["@@transducer/result"](t)}function Yh(e,t,n,i){return e["@@transducer/result"](n[i](Qb(e["@@transducer/step"],e),t))}var Hh=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function Xd(e,t,n){if(typeof e=="function"&&(e=Kb(e)),Qd(n))return Xb(e,t,n);if(typeof n["fantasy-land/reduce"]=="function")return Yh(e,t,n,"fantasy-land/reduce");if(n[Hh]!=null)return Gh(e,t,n[Hh]());if(typeof n.next=="function")return Gh(e,t,n);if(typeof n.reduce=="function")return Yh(e,t,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}function Ls(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var Wh=Object.prototype.toString,Jd=function(){return Wh.call(arguments)==="[object Arguments]"?function(t){return Wh.call(t)==="[object Arguments]"}:function(t){return Ls("callee",t)}}(),Jb=!{toString:null}.propertyIsEnumerable("toString"),Kh=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Qh=function(){return arguments.propertyIsEnumerable("length")}(),Zb=function(t,n){for(var i=0;i<t.length;){if(t[i]===n)return!0;i+=1}return!1},tw=te(typeof Object.keys=="function"&&!Qh?function(t){return Object(t)!==t?[]:Object.keys(t)}:function(t){if(Object(t)!==t)return[];var n,i,r=[],s=Qh&&Jd(t);for(n in t)Ls(n,t)&&(!s||n!=="length")&&(r[r.length]=n);if(Jb)for(i=Kh.length-1;i>=0;)n=Kh[i],Ls(n,t)&&!Zb(r,n)&&(r[r.length]=n),i-=1;return r});const Yn=tw;var ew=Wd(Xd);const nw=ew;var iw=te(function(t){for(var n=Yn(t),i=n.length,r=[],s=0;s<i;)r[s]=t[n[s]],s+=1;return r});const Zd=iw;var rw=te(function(t){return t==null});const tp=rw;function sw(e){return function t(n){for(var i,r,s,a=[],o=0,u=n.length;o<u;){if(Qd(n[o]))for(i=e?t(n[o]):n[o],s=0,r=i.length;s<r;)a[a.length]=i[s],s+=1;else a[a.length]=n[o];o+=1}return a}}var Xh=te(function(t){return t===null?"Null":t===void 0?"Undefined":Object.prototype.toString.call(t).slice(8,-1)});function aw(e,t){return function(){return t.call(this,e.apply(this,arguments))}}function ep(e,t){return function(){var n=arguments.length;if(n===0)return t();var i=arguments[n-1];return No(i)||typeof i[e]!="function"?t.apply(this,arguments):i[e].apply(i,Array.prototype.slice.call(arguments,0,n-1))}}var ow=Wd(ep("slice",function(t,n,i){return Array.prototype.slice.call(i,t,n)}));const Yu=ow;var uw=te(ep("tail",Yu(1,1/0)));const cw=uw;function lw(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return Tc(arguments[0].length,nw(aw,arguments[0],cw(arguments)))}function hw(e){return e}var fw=te(hw);const np=fw;function Jh(e){for(var t=[],n;!(n=e.next()).done;)t.push(n.value);return t}function Zh(e,t,n){for(var i=0,r=n.length;i<r;){if(e(t,n[i]))return!0;i+=1}return!1}function dw(e){var t=String(e).match(/^function (\w*)/);return t==null?"":t[1]}function pw(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}const bu=typeof Object.is=="function"?Object.is:pw;function tf(e,t,n,i){var r=Jh(e),s=Jh(t);function a(o,u){return Rc(o,u,n.slice(),i.slice())}return!Zh(function(o,u){return!Zh(a,u,o)},s,r)}function Rc(e,t,n,i){if(bu(e,t))return!0;var r=Xh(e);if(r!==Xh(t))return!1;if(typeof e["fantasy-land/equals"]=="function"||typeof t["fantasy-land/equals"]=="function")return typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](t)&&typeof t["fantasy-land/equals"]=="function"&&t["fantasy-land/equals"](e);if(typeof e.equals=="function"||typeof t.equals=="function")return typeof e.equals=="function"&&e.equals(t)&&typeof t.equals=="function"&&t.equals(e);switch(r){case"Arguments":case"Array":case"Object":if(typeof e.constructor=="function"&&dw(e.constructor)==="Promise")return e===t;break;case"Boolean":case"Number":case"String":if(!(typeof e==typeof t&&bu(e.valueOf(),t.valueOf())))return!1;break;case"Date":if(!bu(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(!(e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.sticky===t.sticky&&e.unicode===t.unicode))return!1;break}for(var s=n.length-1;s>=0;){if(n[s]===e)return i[s]===t;s-=1}switch(r){case"Map":return e.size!==t.size?!1:tf(e.entries(),t.entries(),n.concat([e]),i.concat([t]));case"Set":return e.size!==t.size?!1:tf(e.values(),t.values(),n.concat([e]),i.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var a=Yn(e);if(a.length!==Yn(t).length)return!1;var o=n.concat([e]),u=i.concat([t]);for(s=a.length-1;s>=0;){var c=a[s];if(!(Ls(c,t)&&Rc(t[c],e[c],o,u)))return!1;s-=1}return!0}var ip=Zt(function(t,n){return Rc(t,n,[],[])});function mw(e,t,n){var i,r;if(typeof e.indexOf=="function")switch(typeof t){case"number":if(t===0){for(i=1/t;n<e.length;){if(r=e[n],r===0&&1/r===i)return n;n+=1}return-1}else if(t!==t){for(;n<e.length;){if(r=e[n],typeof r=="number"&&r!==r)return n;n+=1}return-1}return e.indexOf(t,n);case"string":case"boolean":case"function":case"undefined":return e.indexOf(t,n);case"object":if(t===null)return e.indexOf(t,n)}for(;n<e.length;){if(ip(e[n],t))return n;n+=1}return-1}function Hu(e,t){return mw(t,e,0)>=0}function _w(e,t){for(var n=0,i=t.length,r=[];n<i;)e(t[n])&&(r[r.length]=t[n]),n+=1;return r}function rp(e){return Object.prototype.toString.call(e)==="[object Object]"}var yw=function(){function e(t,n){this.xf=n,this.f=t}return e.prototype["@@transducer/init"]=qh.init,e.prototype["@@transducer/result"]=qh.result,e.prototype["@@transducer/step"]=function(t,n){return this.f(n)?this.xf["@@transducer/step"](t,n):t},e}(),gw=Zt(function(t,n){return new yw(t,n)}),vw=Zt(Hb(["fantasy-land/filter","filter"],gw,function(e,t){return rp(t)?Xd(function(n,i){return e(t[i])&&(n[i]=t[i]),n},{},Yn(t)):_w(e,t)}));const bw=vw;var ww=function(){function e(){this._nativeSet=typeof Set=="function"?new Set:null,this._items={}}return e.prototype.add=function(t){return!ef(t,!0,this)},e.prototype.has=function(t){return ef(t,!1,this)},e}();function ef(e,t,n){var i=typeof e,r,s;switch(i){case"string":case"number":return e===0&&1/e===-1/0?n._items["-0"]?!0:(t&&(n._items["-0"]=!0),!1):n._nativeSet!==null?t?(r=n._nativeSet.size,n._nativeSet.add(e),s=n._nativeSet.size,s===r):n._nativeSet.has(e):i in n._items?e in n._items[i]?!0:(t&&(n._items[i][e]=!0),!1):(t&&(n._items[i]={},n._items[i][e]=!0),!1);case"boolean":if(i in n._items){var a=e?1:0;return n._items[i][a]?!0:(t&&(n._items[i][a]=!0),!1)}else return t&&(n._items[i]=e?[!1,!0]:[!0,!1]),!1;case"function":return n._nativeSet!==null?t?(r=n._nativeSet.size,n._nativeSet.add(e),s=n._nativeSet.size,s===r):n._nativeSet.has(e):i in n._items?Hu(e,n._items[i])?!0:(t&&n._items[i].push(e),!1):(t&&(n._items[i]=[e]),!1);case"undefined":return n._items[i]?!0:(t&&(n._items[i]=!0),!1);case"object":if(e===null)return n._items.null?!0:(t&&(n._items.null=!0),!1);default:return i=Object.prototype.toString.call(e),i in n._items?Hu(e,n._items[i])?!0:(t&&n._items[i].push(e),!1):(t&&(n._items[i]=[e]),!1)}}var Sw=Zt(function(t,n){for(var i=[],r=0,s=t.length,a=n.length,o=new ww,u=0;u<a;u+=1)o.add(n[u]);for(;r<s;)o.add(t[r])&&(i[i.length]=t[r]),r+=1;return i});const xw=Sw;function Iw(e){var t=Object.prototype.toString.call(e);return t==="[object Uint8ClampedArray]"||t==="[object Int8Array]"||t==="[object Uint8Array]"||t==="[object Int16Array]"||t==="[object Uint16Array]"||t==="[object Int32Array]"||t==="[object Uint32Array]"||t==="[object Float32Array]"||t==="[object Float64Array]"||t==="[object BigInt64Array]"||t==="[object BigUint64Array]"}var Ew=te(function(t){return t!=null&&typeof t["fantasy-land/empty"]=="function"?t["fantasy-land/empty"]():t!=null&&t.constructor!=null&&typeof t.constructor["fantasy-land/empty"]=="function"?t.constructor["fantasy-land/empty"]():t!=null&&typeof t.empty=="function"?t.empty():t!=null&&t.constructor!=null&&typeof t.constructor.empty=="function"?t.constructor.empty():No(t)?[]:Kd(t)?"":rp(t)?{}:Jd(t)?function(){return arguments}():Iw(t)?t.constructor.from(""):void 0}),Aw=te(sw(!0));const kw=Aw;var Tw=te(function(t){for(var n={},i=0;i<t.length;)n[t[i][0]]=t[i][1],i+=1;return n});const sp=Tw;var Rw=Zt(Hu);const Nw=Rw;function Ow(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1,i=arguments.length;n<i;){var r=arguments[n];if(r!=null)for(var s in r)Ls(s,r)&&(t[s]=r[s]);n+=1}return t}const Nc=typeof Object.assign=="function"?Object.assign:Ow;var Cw=Zt(function(t,n){return n instanceof t||n!=null&&(n.constructor===t||t.name==="Object"&&typeof n=="object")});const Ya=Cw;var Fw=te(function(t){return t!=null&&ip(t,Ew(t))});const Lw=Fw;var Bw=te(function(t){return Nc.apply(null,[{}].concat(t))});const ap=Bw;var Dw=Zt(function(t,n){return Nc({},n,t)});const op=Dw;var Mw=Zt(function(t,n){return Nc({},t,n)});const Oc=Mw;var Pw=Zt(function(t,n){for(var i={},r={},s=0,a=t.length;s<a;)r[t[s]]=1,s+=1;for(var o in n)r.hasOwnProperty(o)||(i[o]=n[o]);return i});const Uw=Pw;function Vw(e){return Zt(function(t,n){return Tc(Math.max(0,t.length-n.length),function(){return t.apply(this,e(n,arguments))})})}var jw=Vw(Gb);const $w=jw;var zw=Zt(function(t,n){for(var i={},r=0;r<t.length;)t[r]in n&&(i[t[r]]=n[t[r]]),r+=1;return i});const qw=zw;var Gw=Zt(function(t,n){var i=Number(n),r=0,s;if(i<0||isNaN(i))throw new RangeError("n must be a non-negative number");for(s=new Array(i);r<i;)s[r]=t(r),r+=1;return s});const Yw=Gw;var Hw=Zt(function(t,n){for(var i=0,r=t.length,s,a=n.length,o=[];i<r;){for(s=0;s<a;)o[o.length]=[t[i],n[s]],s+=1;i+=1}return o});const Ww=Hw;var Kw={value:()=>{}};function up(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Aa(n)}function Aa(e){this._=e}function Qw(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Aa.prototype=up.prototype={constructor:Aa,on:function(e,t){var n=this._,i=Qw(e+"",n),r,s=-1,a=i.length;if(arguments.length<2){for(;++s<a;)if((r=(e=i[s]).type)&&(r=Xw(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(r=(e=i[s]).type)n[r]=nf(n[r],e.name,t);else if(t==null)for(r in n)n[r]=nf(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Aa(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,r=s.length;i<r;++i)s[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)}};function Xw(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function nf(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=Kw,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ur=0,vs=0,ps=0,cp=1e3,Ha,bs,Wa=0,dr=0,Oo=0,Bs=typeof performance=="object"&&performance.now?performance:Date,lp=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Cc(){return dr||(lp(Jw),dr=Bs.now()+Oo)}function Jw(){dr=0}function Ka(){this._call=this._time=this._next=null}Ka.prototype=hp.prototype={constructor:Ka,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Cc():+n)+(t==null?0:+t),!this._next&&bs!==this&&(bs?bs._next=this:Ha=this,bs=this),this._call=e,this._time=n,Wu()},stop:function(){this._call&&(this._call=null,this._time=1/0,Wu())}};function hp(e,t,n){var i=new Ka;return i.restart(e,t,n),i}function Zw(){Cc(),++Ur;for(var e=Ha,t;e;)(t=dr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ur}function rf(){dr=(Wa=Bs.now())+Oo,Ur=vs=0;try{Zw()}finally{Ur=0,e1(),dr=0}}function t1(){var e=Bs.now(),t=e-Wa;t>cp&&(Oo-=t,Wa=e)}function e1(){for(var e,t=Ha,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ha=n);bs=e,Wu(i)}function Wu(e){if(!Ur){vs&&(vs=clearTimeout(vs));var t=e-dr;t>24?(e<1/0&&(vs=setTimeout(rf,e-Bs.now()-Oo)),ps&&(ps=clearInterval(ps))):(ps||(Wa=Bs.now(),ps=setInterval(t1,cp)),Ur=1,lp(rf))}}function sf(e,t,n){var i=new Ka;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var n1=up("start","end","cancel","interrupt"),i1=[],fp=0,af=1,Ku=2,ka=3,of=4,Qu=5,Ta=6;function Co(e,t,n,i,r,s){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;r1(e,n,{name:t,index:i,group:r,on:n1,tween:i1,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:fp})}function Fc(e,t){var n=Tn(e,t);if(n.state>fp)throw new Error("too late; already scheduled");return n}function Jn(e,t){var n=Tn(e,t);if(n.state>ka)throw new Error("too late; already running");return n}function Tn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function r1(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=hp(s,0,n.time);function s(c){n.state=af,n.timer.restart(a,n.delay,n.time),n.delay<=c&&a(c-n.delay)}function a(c){var l,h,p,m;if(n.state!==af)return u();for(l in i)if(m=i[l],m.name===n.name){if(m.state===ka)return sf(a);m.state===of?(m.state=Ta,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete i[l]):+l<t&&(m.state=Ta,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete i[l])}if(sf(function(){n.state===ka&&(n.state=of,n.timer.restart(o,n.delay,n.time),o(c))}),n.state=Ku,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ku){for(n.state=ka,r=new Array(p=n.tween.length),l=0,h=-1;l<p;++l)(m=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++h]=m);r.length=h+1}}function o(c){for(var l=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=Qu,1),h=-1,p=r.length;++h<p;)r[h].call(e,l);n.state===Qu&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Ta,n.timer.stop(),delete i[t];for(var c in i)return;delete e.__transition}}function s1(e,t){var n=e.__transition,i,r,s=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((i=n[a]).name!==t){s=!1;continue}r=i.state>Ku&&i.state<Qu,i.state=Ta,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[a]}s&&delete e.__transition}}function a1(e){return this.each(function(){s1(this,e)})}function o1(e,t){var n,i;return function(){var r=Jn(this,e),s=r.tween;if(s!==n){i=n=s;for(var a=0,o=i.length;a<o;++a)if(i[a].name===t){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function u1(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=Jn(this,e),a=s.tween;if(a!==i){r=(i=a).slice();for(var o={name:t,value:n},u=0,c=r.length;u<c;++u)if(r[u].name===t){r[u]=o;break}u===c&&r.push(o)}s.tween=r}}function c1(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Tn(this.node(),n).tween,r=0,s=i.length,a;r<s;++r)if((a=i[r]).name===e)return a.value;return null}return this.each((t==null?o1:u1)(n,e,t))}function Lc(e,t,n){var i=e._id;return e.each(function(){var r=Jn(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Tn(r,i).value[t]}}function dp(e,t){var n;return(typeof t=="number"?Ri:t instanceof Fs?Uh:(n=Fs(t))?(t=n,Uh):Eb)(e,t)}function l1(e){return function(){this.removeAttribute(e)}}function h1(e){return function(){this.removeAttributeNS(e.space,e.local)}}function f1(e,t,n){var i,r=n+"",s;return function(){var a=this.getAttribute(e);return a===r?null:a===i?s:s=t(i=a,n)}}function d1(e,t,n){var i,r=n+"",s;return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===i?s:s=t(i=a,n)}}function p1(e,t,n){var i,r,s;return function(){var a,o=n(this),u;return o==null?void this.removeAttribute(e):(a=this.getAttribute(e),u=o+"",a===u?null:a===i&&u===r?s:(r=u,s=t(i=a,o)))}}function m1(e,t,n){var i,r,s;return function(){var a,o=n(this),u;return o==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),u=o+"",a===u?null:a===i&&u===r?s:(r=u,s=t(i=a,o)))}}function _1(e,t){var n=Ro(e),i=n==="transform"?Rb:dp;return this.attrTween(e,typeof t=="function"?(n.local?m1:p1)(n,i,Lc(this,"attr."+e,t)):t==null?(n.local?h1:l1)(n):(n.local?d1:f1)(n,i,t))}function y1(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function g1(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function v1(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&g1(e,s)),n}return r._value=t,r}function b1(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&y1(e,s)),n}return r._value=t,r}function w1(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=Ro(e);return this.tween(n,(i.local?v1:b1)(i,t))}function S1(e,t){return function(){Fc(this,e).delay=+t.apply(this,arguments)}}function x1(e,t){return t=+t,function(){Fc(this,e).delay=t}}function I1(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?S1:x1)(t,e)):Tn(this.node(),t).delay}function E1(e,t){return function(){Jn(this,e).duration=+t.apply(this,arguments)}}function A1(e,t){return t=+t,function(){Jn(this,e).duration=t}}function k1(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?E1:A1)(t,e)):Tn(this.node(),t).duration}function T1(e,t){if(typeof t!="function")throw new Error;return function(){Jn(this,e).ease=t}}function R1(e){var t=this._id;return arguments.length?this.each(T1(t,e)):Tn(this.node(),t).ease}function N1(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Jn(this,e).ease=n}}function O1(e){if(typeof e!="function")throw new Error;return this.each(N1(this._id,e))}function C1(e){typeof e!="function"&&(e=Od(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],a=s.length,o=i[r]=[],u,c=0;c<a;++c)(u=s[c])&&e.call(u,u.__data__,c,s)&&o.push(u);return new di(i,this._parents,this._name,this._id)}function F1(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,s=Math.min(i,r),a=new Array(i),o=0;o<s;++o)for(var u=t[o],c=n[o],l=u.length,h=a[o]=new Array(l),p,m=0;m<l;++m)(p=u[m]||c[m])&&(h[m]=p);for(;o<i;++o)a[o]=t[o];return new di(a,this._parents,this._name,this._id)}function L1(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function B1(e,t,n){var i,r,s=L1(t)?Fc:Jn;return function(){var a=s(this,e),o=a.on;o!==i&&(r=(i=o).copy()).on(t,n),a.on=r}}function D1(e,t){var n=this._id;return arguments.length<2?Tn(this.node(),n).on.on(e):this.each(B1(n,e,t))}function M1(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function P1(){return this.on("end.remove",M1(this._id))}function U1(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ic(e));for(var i=this._groups,r=i.length,s=new Array(r),a=0;a<r;++a)for(var o=i[a],u=o.length,c=s[a]=new Array(u),l,h,p=0;p<u;++p)(l=o[p])&&(h=e.call(l,l.__data__,p,o))&&("__data__"in l&&(h.__data__=l.__data__),c[p]=h,Co(c[p],t,n,p,c,Tn(l,n)));return new di(s,this._parents,t,n)}function V1(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Nd(e));for(var i=this._groups,r=i.length,s=[],a=[],o=0;o<r;++o)for(var u=i[o],c=u.length,l,h=0;h<c;++h)if(l=u[h]){for(var p=e.call(l,l.__data__,h,u),m,b=Tn(l,n),y=0,S=p.length;y<S;++y)(m=p[y])&&Co(m,t,n,y,p,b);s.push(p),a.push(l)}return new di(s,a,t,n)}var j1=Xs.prototype.constructor;function $1(){return new j1(this._groups,this._parents)}function z1(e,t){var n,i,r;return function(){var s=Pr(this,e),a=(this.style.removeProperty(e),Pr(this,e));return s===a?null:s===n&&a===i?r:r=t(n=s,i=a)}}function pp(e){return function(){this.style.removeProperty(e)}}function q1(e,t,n){var i,r=n+"",s;return function(){var a=Pr(this,e);return a===r?null:a===i?s:s=t(i=a,n)}}function G1(e,t,n){var i,r,s;return function(){var a=Pr(this,e),o=n(this),u=o+"";return o==null&&(u=o=(this.style.removeProperty(e),Pr(this,e))),a===u?null:a===i&&u===r?s:(r=u,s=t(i=a,o))}}function Y1(e,t){var n,i,r,s="style."+t,a="end."+s,o;return function(){var u=Jn(this,e),c=u.on,l=u.value[s]==null?o||(o=pp(t)):void 0;(c!==n||r!==l)&&(i=(n=c).copy()).on(a,r=l),u.on=i}}function H1(e,t,n){var i=(e+="")=="transform"?Tb:dp;return t==null?this.styleTween(e,z1(e,i)).on("end.style."+e,pp(e)):typeof t=="function"?this.styleTween(e,G1(e,i,Lc(this,"style."+e,t))).each(Y1(this._id,e)):this.styleTween(e,q1(e,i,t),n).on("end.style."+e,null)}function W1(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function K1(e,t,n){var i,r;function s(){var a=t.apply(this,arguments);return a!==r&&(i=(r=a)&&W1(e,a,n)),i}return s._value=t,s}function Q1(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,K1(e,t,n??""))}function X1(e){return function(){this.textContent=e}}function J1(e){return function(){var t=e(this);this.textContent=t??""}}function Z1(e){return this.tween("text",typeof e=="function"?J1(Lc(this,"text",e)):X1(e==null?"":e+""))}function tS(e){return function(t){this.textContent=e.call(this,t)}}function eS(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&tS(r)),t}return i._value=e,i}function nS(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,eS(e))}function iS(){for(var e=this._name,t=this._id,n=mp(),i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],o=a.length,u,c=0;c<o;++c)if(u=a[c]){var l=Tn(u,t);Co(u,e,n,c,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new di(i,this._parents,e,n)}function rS(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(s,a){var o={value:a},u={value:function(){--r===0&&s()}};n.each(function(){var c=Jn(this,i),l=c.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(u)),c.on=t}),r===0&&s()})}var sS=0;function di(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function mp(){return++sS}var ii=Xs.prototype;di.prototype={constructor:di,select:U1,selectAll:V1,selectChild:ii.selectChild,selectChildren:ii.selectChildren,filter:C1,merge:F1,selection:$1,transition:iS,call:ii.call,nodes:ii.nodes,node:ii.node,size:ii.size,empty:ii.empty,each:ii.each,on:D1,attr:_1,attrTween:w1,style:H1,styleTween:Q1,text:Z1,textTween:nS,remove:P1,tween:c1,delay:I1,duration:k1,ease:R1,easeVarying:O1,end:rS,[Symbol.iterator]:ii[Symbol.iterator]};function aS(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var oS={time:null,delay:0,duration:250,ease:aS};function uS(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function cS(e){var t,n;e instanceof di?(t=e._id,e=e._name):(t=mp(),(n=oS).time=Cc(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],o=a.length,u,c=0;c<o;++c)(u=a[c])&&Co(u,e,t,c,a,n||uS(u,t));return new di(i,this._parents,e,t)}Xs.prototype.interrupt=a1;Xs.prototype.transition=cS;function ws(e,t,n){this.k=e,this.x=t,this.y=n}ws.prototype={constructor:ws,scale:function(e){return e===1?this:new ws(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ws(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};ws.prototype;function uf(e,t,n){const i=e.slice();return i[8]=t[n],i[10]=n,i}function cf(e){let t,n,i,r,s;var a=Qa(e[8]);function o(u){return{props:{spec:u[8]}}}return a&&(n=Ua(a,o(e)),n.$on("load",Va(e[2])),n.$on("state",e[3])),{c(){t=tt("div"),n&&As(n.$$.fragment),i=Fe(),this.h()},l(u){t=et(u,"DIV",{class:!0});var c=ot(t);n&&xc(n.$$.fragment,c),i=Le(c),c.forEach(C),this.h()},h(){B(t,"class",r="col-md-"+Math.max(12/e[0].children.length,2))},m(u,c){Tt(u,t,c),n&&ks(n,t,null),V(t,i),s=!0},p(u,c){const l={};if(c&1&&(l.spec=u[8]),c&1&&a!==(a=Qa(u[8]))){if(n){Ks();const h=n;wn(h.$$.fragment,1,0,()=>{Ts(h,1)}),Ws()}a?(n=Ua(a,o(u)),n.$on("load",Va(u[2])),n.$on("state",u[3]),As(n.$$.fragment),We(n.$$.fragment,1),ks(n,t,i)):n=null}else a&&n.$set(l);(!s||c&1&&r!==(r="col-md-"+Math.max(12/u[0].children.length,2)))&&B(t,"class",r)},i(u){s||(n&&We(n.$$.fragment,u),s=!0)},o(u){n&&wn(n.$$.fragment,u),s=!1},d(u){u&&C(t),n&&Ts(n)}}}function lS(e){let t,n,i,r,s=e[0].children,a=[];for(let u=0;u<s.length;u+=1)a[u]=cf(uf(e,s,u));const o=u=>wn(a[u],1,1,()=>{a[u]=null});return{c(){t=tt("div");for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){t=et(u,"DIV",{id:!0,class:!0});var c=ot(t);for(let l=0;l<a.length;l+=1)a[l].l(c);c.forEach(C),this.h()},h(){B(t,"id",n=e[0].id),B(t,"class",i="row "+e[0].type+" gx-4 layout")},m(u,c){Tt(u,t,c);for(let l=0;l<a.length;l+=1)a[l]&&a[l].m(t,null);e[5](t),r=!0},p(u,[c]){if(c&13){s=u[0].children;let l;for(l=0;l<s.length;l+=1){const h=uf(u,s,l);a[l]?(a[l].p(h,c),We(a[l],1)):(a[l]=cf(h),a[l].c(),We(a[l],1),a[l].m(t,null))}for(Ks(),l=s.length;l<a.length;l+=1)o(l);Ws()}(!r||c&1&&n!==(n=u[0].id))&&B(t,"id",n),(!r||c&1&&i!==(i="row "+u[0].type+" gx-4 layout"))&&B(t,"class",i)},i(u){if(!r){for(let c=0;c<s.length;c+=1)We(a[c]);r=!0}},o(u){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)wn(a[c]);r=!1},d(u){u&&C(t),fr(a,u),e[5](null)}}}function hS(e,t,n){let{spec:i}=t,r,s=Ad(),{state:a={}}=t;function o(l){}function u(l){n(4,a=ap(childComponents.map(h=>h.state))),s("state",a)}function c(l){$i[l?"unshift":"push"](()=>{r=l,n(1,r)})}return e.$$set=l=>{"spec"in l&&n(0,i=l.spec),"state"in l&&n(4,a=l.state)},[i,r,o,u,a,c]}class fS extends Ue{constructor(t){super(),Ve(this,t,hS,lS,je,{spec:0,state:4})}}function lf(e,t,n){const i=e.slice();return i[7]=t[n],i}function hf(e){let t,n,i,r;var s=Qa(e[7]);function a(o){return{props:{spec:o[7]}}}return s&&(n=Ua(s,a(e)),n.$on("load",Va(e[2])),n.$on("state",e[1])),{c(){t=tt("div"),n&&As(n.$$.fragment),i=Fe(),this.h()},l(o){t=et(o,"DIV",{class:!0});var u=ot(t);n&&xc(n.$$.fragment,u),i=Le(u),u.forEach(C),this.h()},h(){B(t,"class","col-md-12")},m(o,u){Tt(o,t,u),n&&ks(n,t,null),V(t,i),r=!0},p(o,u){const c={};if(u&1&&(c.spec=o[7]),u&1&&s!==(s=Qa(o[7]))){if(n){Ks();const l=n;wn(l.$$.fragment,1,0,()=>{Ts(l,1)}),Ws()}s?(n=Ua(s,a(o)),n.$on("load",Va(o[2])),n.$on("state",o[1]),As(n.$$.fragment),We(n.$$.fragment,1),ks(n,t,i)):n=null}else s&&n.$set(c)},i(o){r||(n&&We(n.$$.fragment,o),r=!0)},o(o){n&&wn(n.$$.fragment,o),r=!1},d(o){o&&C(t),n&&Ts(n)}}}function dS(e){let t,n,i,r,s=e[0].children,a=[];for(let u=0;u<s.length;u+=1)a[u]=hf(lf(e,s,u));const o=u=>wn(a[u],1,1,()=>{a[u]=null});return{c(){t=tt("div");for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){t=et(u,"DIV",{id:!0,class:!0});var c=ot(t);for(let l=0;l<a.length;l+=1)a[l].l(c);c.forEach(C),this.h()},h(){B(t,"id",n=e[0].id),B(t,"class",i="row "+e[0].type+" layout gy-4")},m(u,c){Tt(u,t,c);for(let l=0;l<a.length;l+=1)a[l]&&a[l].m(t,null);r=!0},p(u,[c]){if(c&7){s=u[0].children;let l;for(l=0;l<s.length;l+=1){const h=lf(u,s,l);a[l]?(a[l].p(h,c),We(a[l],1)):(a[l]=hf(h),a[l].c(),We(a[l],1),a[l].m(t,null))}for(Ks(),l=s.length;l<a.length;l+=1)o(l);Ws()}(!r||c&1&&n!==(n=u[0].id))&&B(t,"id",n),(!r||c&1&&i!==(i="row "+u[0].type+" layout gy-4"))&&B(t,"class",i)},i(u){if(!r){for(let c=0;c<s.length;c+=1)We(a[c]);r=!0}},o(u){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)wn(a[c]);r=!1},d(u){u&&C(t),fr(a,u)}}}function pS(e,t,n){let{spec:i}=t,r=Ad(),{state:s={}}=t,a=u=>{n(3,s=ap(childComponents.map(c=>c.state))),r("state",s)};function o(u){}return e.$$set=u=>{"spec"in u&&n(0,i=u.spec),"state"in u&&n(3,s=u.state)},[i,a,o,s]}class mS extends Ue{constructor(t){super(),Ve(this,t,pS,dS,je,{spec:0,state:3})}}function _S(e){let t,n,i;return{c(){t=tt("div"),this.h()},l(r){t=et(r,"DIV",{id:!0,class:!0}),ot(t).forEach(C),this.h()},h(){B(t,"id",n=e[0].id),B(t,"class",i=e[0].type+" layout")},m(r,s){Tt(r,t,s),e[2](t)},p(r,[s]){s&1&&n!==(n=r[0].id)&&B(t,"id",n),s&1&&i!==(i=r[0].type+" layout")&&B(t,"class",i)},i:Rt,o:Rt,d(r){r&&C(t),e[2](null)}}}function yS(e,t,n){let i;Qs(e,zh,a=>n(1,i=a));let{spec:r={}}=t;function s(a){$i[a?"unshift":"push"](()=>{i[r.id]=a,zh.set(i)})}return e.$$set=a=>{"spec"in a&&n(0,r=a.spec)},[r,i,s]}class gS extends Ue{constructor(t){super(),Ve(this,t,yS,_S,je,{spec:0})}}let vS={Ref:gS,HLayout:fS,VLayout:mS},he,bS;function vn(e,t,n){let i={};i[t]=n,e.forEach(r=>r.trigger(i))}let Cr=null;function wS(){return Cr||(Cr={x:he.x,y:he.y,color:he.color,key:he.key}),Cr}function SS(e,t,n){return wS(),Yn(n).forEach(i=>{const r=n[i]??i,s=t[i].type;let a=null;s==="ordinal"?a=Cr[i]().fieldN(i).title(r):s==="date"?a=Cr[i]().fieldT(i).title(r):a=Cr[i]().fieldQ(i).title(r).scale({zero:!1}),e=e.encode(a)}),e}function xS(e,t,n){return e.map((i,r)=>{for(const s in i)if(t[s].type==="quantitative"?n[s]!=="date"&&(i[s]=parseFloat(i[s])):t[s].type==="geojson"&&(i=Oc(JSON.parse(i[s]),Uw(["geography"],i))),s==="color"){let a=parseInt(i[s]);isNaN(a)||(i[s]=a)}return i})}function IS(e){switch(e){case"SINGLE":return he.selectSingle().nearest(!0);case"MULTI":return he.selectMulti().toggle(!1).nearest(!0);case"BRUSHX":return he.selectInterval().encodings(["x"]);case"BRUSHY":return he.selectInterval().encodings(["y"]);case"BRUSHXY":return he.selectInterval().encodings(["x","y"]);case"PANX":return he.selectInterval().bind("scales").encodings(["x"]).zoom(!1);case"PANY":return he.selectInterval().bind("scales").encodings(["y"]).zoom(!1);case"PANXY":return he.selectInterval().bind("scales").encodings(["x","y"]).zoom(!1);case"ZOOMX":return he.selectInterval().bind("scales").encodings(["x"]).zoom(!0);case"ZOOMY":return he.selectInterval().bind("scales").encodings(["y"]).zoom(!0);case"ZOOMXY":return he.selectInterval().bind("scales").encodings(["x","y"]).zoom(!0);default:alert("interaction not supported "+e)}}function ES(e,t,n,i){if(!i.datum)return null;let r=[i.datum.datum];"key"in r[0]&&(r[0].key=parseInt(r[0].key).toString());for(var s in r[0])r[0][s]=r[0][s].toString();return r}function AS(e,t,n,i){let r=t.data(e.sel.name+"_store"),s=t.data("source_0");return r.length==0?null:r.map((a,o)=>{let u=s[r[o].values[0]-1];"key"in u&&(u.key=parseInt(u.key).toString());for(var c in u)u[c]=u[c].toString()})}function ff(e,t,n,i){let r=t.data(e.sel.name+"_store");return!r||r.length==0?[]:(["BRUSHXY","ZOOMXY","PANXY"].includes(e.type)?r=r[0].values[0].concat(r[0].values[1]):r=r[0].values[0],r)}function kS(e,t,n){if(!n)return;let i=t.view;i.addDataListener("source_0",(r,s)=>{}),i.addEventListener("click",(r,s)=>{let a=null;e.type=="SINGLE"?a=ES(e,i,r,s):e.type=="MULTI"?a=AS(e,i):a=ff(e,i),a&&n(e.type,a)}),i.addEventListener("wheel",(r,s)=>{let a=null;["SINGLE","MULTI"].includes(e.type)?s.datum!=null&&(a=[s.datum]):(a=ff(e,i),a=i.data(e.sel.name+"_store"),a.length||(a=null)),a&&n(e.type,a)})}let TS=(e,t)=>{let n=e.toSpec();n.axis={titleFontSize:15,labelFontSize:15,labelOverlap:"parity"};for(let r in n.encoding)n.encoding[r].axis={titleFontSize:15,labelFontSize:15,labelOverlap:"parity",...r==="x"&&{labelAngle:0}};let i=n.encoding;return i&&i.x&&i.x.scale&&i.x.type==="quantitative"&&(i.x.scale.padding=15,i.x.scale.nice=!0),i&&i.y&&i.y.scale&&i.y.type==="quantitative"&&(i.y.scale.padding=15,i.y.scale.nice=!0),t&&(n.data={name:"source_0",values:t}),n};function df(e,t,n){const i=e.slice();return i[8]=t[n],i[10]=n,i}function pf(e){let t,n=(e[8].label??e[8].value)+"",i;return{c(){t=tt("option"),i=ae(n),this.h()},l(r){t=et(r,"OPTION",{});var s=ot(t);i=oe(s,n),s.forEach(C),this.h()},h(){t.__value=e[10],t.value=t.__value},m(r,s){Tt(r,t,s),V(t,i)},p(r,s){s&1&&n!==(n=(r[8].label??r[8].value)+"")&&xn(i,n)},d(r){r&&C(t)}}}function RS(e){let t,n,i,r=e[0],s=[];for(let a=0;a<r.length;a+=1)s[a]=pf(df(e,r,a));return{c(){t=tt("select");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){t=et(a,"SELECT",{class:!0});var o=ot(t);for(let u=0;u<s.length;u+=1)s[u].l(o);o.forEach(C),this.h()},h(){B(t,"class","form-select"),e[1]===void 0&&bg(()=>e[6].call(t))},m(a,o){Tt(a,t,o);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(t,null);Th(t,e[1],!0),n||(i=gn(t,"change",e[6]),n=!0)},p(a,[o]){if(o&1){r=a[0];let u;for(u=0;u<r.length;u+=1){const c=df(a,r,u);s[u]?s[u].p(c,o):(s[u]=pf(c),s[u].c(),s[u].m(t,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=r.length}o&2&&Th(t,a[1])},i:Rt,o:Rt,d(a){a&&C(t),fr(s,a),n=!1,i()}}}function NS(e,t,n){let i,{spec:r={}}=t,s=[],a=bi(0);Qs(e,a,h=>n(1,i=h));let o=[];function u(h){n(0,s=h)}function c(h){o.push(h)}a.subscribe(h=>vn(o,r.id,s[h])),wg(()=>{});function l(){i=Sg(this),a.set(i)}return e.$$set=h=>{"spec"in h&&n(3,r=h.spec)},[s,i,a,r,u,c,l]}class OS extends Ue{constructor(t){super(),Ve(this,t,NS,RS,je,{spec:3,render:4,addSourceIact:5})}get spec(){return this.$$.ctx[3]}set spec(t){this.$$set({spec:t}),Sn()}get render(){return this.$$.ctx[4]}get addSourceIact(){return this.$$.ctx[5]}}function mf(e,t,n){const i=e.slice();return i[13]=t[n],i[15]=n,i}function _f(e){let t,n,i,r,s=e[13].label+"",a,o,u,c,l;return u=xg(e[9][0]),{c(){t=tt("div"),n=tt("input"),i=Fe(),r=tt("label"),a=ae(s),o=Fe(),this.h()},l(h){t=et(h,"DIV",{class:!0});var p=ot(t);n=et(p,"INPUT",{class:!0,type:!0,id:!0,name:!0}),i=Le(p),r=et(p,"LABEL",{class:!0,for:!0});var m=ot(r);a=oe(m,s),m.forEach(C),o=Le(p),p.forEach(C),this.h()},h(){B(n,"class","form-check-input input"),B(n,"type","radio"),B(n,"id","radio-"+e[2]+"-"+e[15]),B(n,"name",e[2]),n.__value=e[15],n.value=n.__value,B(r,"class","form-check-label"),B(r,"for","radio-"+e[2]+"-"+e[15]),B(t,"class",e[3]),u.p(n)},m(h,p){Tt(h,t,p),V(t,n),n.checked=n.__value===e[1],V(t,i),V(t,r),V(r,a),V(t,o),c||(l=gn(n,"change",e[8]),c=!0)},p(h,p){p&3&&(n.checked=n.__value===h[1]),p&1&&s!==(s=h[13].label+"")&&xn(a,s)},d(h){h&&C(t),u.r(),c=!1,l()}}}function CS(e){let t,n=e[0],i=[];for(let r=0;r<n.length;r+=1)i[r]=_f(mf(e,n,r));return{c(){t=tt("div");for(let r=0;r<i.length;r+=1)i[r].c()},l(r){t=et(r,"DIV",{});var s=ot(t);for(let a=0;a<i.length;a+=1)i[a].l(s);s.forEach(C)},m(r,s){Tt(r,t,s);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(t,null)},p(r,[s]){if(s&15){n=r[0];let a;for(a=0;a<n.length;a+=1){const o=mf(r,n,a);i[a]?i[a].p(o,s):(i[a]=_f(o),i[a].c(),i[a].m(t,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=n.length}},i:Rt,o:Rt,d(r){r&&C(t),fr(i,r)}}}function FS(e,t,n){let i,{spec:r={}}=t,s=[],a=r.id,u=(r.orientation??"V")=="V"?"form-check":"form-check-inline",c=[],l=bi(0);Qs(e,l,y=>n(1,i=y));function h(y){n(0,s=y)}function p(y){c.push(y)}l.subscribe(y=>vn(c,a,s[y]));const m=[[]];function b(){i=this.__value,l.set(i)}return e.$$set=y=>{"spec"in y&&n(5,r=y.spec)},[s,i,a,u,l,r,h,p,b,m]}class LS extends Ue{constructor(t){super(),Ve(this,t,FS,CS,je,{spec:5,render:6,addSourceIact:7})}get spec(){return this.$$.ctx[5]}set spec(t){this.$$set({spec:t}),Sn()}get render(){return this.$$.ctx[6]}get addSourceIact(){return this.$$.ctx[7]}}function BS(e){let t,n,i,r,s,a,o,u,c;return{c(){t=tt("div"),n=tt("div"),i=tt("label"),r=ae(e[1]),s=Fe(),a=tt("div"),o=tt("input"),this.h()},l(l){t=et(l,"DIV",{class:!0});var h=ot(t);n=et(h,"DIV",{class:!0});var p=ot(n);i=et(p,"LABEL",{for:!0,class:!0});var m=ot(i);r=oe(m,e[1]),m.forEach(C),p.forEach(C),s=Le(h),a=et(h,"DIV",{class:!0});var b=ot(a);o=et(b,"INPUT",{type:!0,class:!0,id:!0,min:!0,max:!0,step:!0}),b.forEach(C),h.forEach(C),this.h()},h(){B(i,"for","range-"+e[2]),B(i,"class","form-label"),B(n,"class","col-md-1 text-end"),B(o,"type","range"),B(o,"class","form-range"),B(o,"id","range-"+e[2]),B(o,"min",""),B(o,"max",""),B(o,"step",""),Rs(o,"position","relative"),B(a,"class","col-md-10"),B(t,"class","row")},m(l,h){Tt(l,t,h),V(t,n),V(n,i),V(i,r),V(t,s),V(t,a),V(a,o),ja(o,e[1]),e[7](o),u||(c=[gn(o,"change",e[6]),gn(o,"input",e[6])],u=!0)},p(l,[h]){h&2&&xn(r,l[1]),h&2&&ja(o,l[1])},i:Rt,o:Rt,d(l){l&&C(t),e[7](null),u=!1,kd(c)}}}function DS(e,t,n){let i,{spec:r={}}=t,s=r.id;+(r.min??0),+(r.max??10),+(r.step??1);let a,o=bi(null);Qs(e,o,p=>n(1,i=p));let u=[];function c(p){u.push(p)}o.subscribe(p=>vn(u,s,{value:p})),Td(()=>{Ns(o,i=a.value,i)});function l(){i=Ig(this.value),o.set(i)}function h(p){$i[p?"unshift":"push"](()=>{a=p,n(0,a)})}return e.$$set=p=>{"spec"in p&&n(4,r=p.spec)},[a,i,s,o,r,c,l,h]}class MS extends Ue{constructor(t){super(),Ve(this,t,DS,BS,je,{spec:4,addSourceIact:5})}get spec(){return this.$$.ctx[4]}set spec(t){this.$$set({spec:t}),Sn()}get addSourceIact(){return this.$$.ctx[5]}}var Xu={exports:{}};(function(e,t){(function(n,i){i(t)})($b,function(n){n.PipsMode=void 0,function(v){v.Range="range",v.Steps="steps",v.Positions="positions",v.Count="count",v.Values="values"}(n.PipsMode||(n.PipsMode={})),n.PipsType=void 0,function(v){v[v.None=-1]="None",v[v.NoValue=0]="NoValue",v[v.LargeValue=1]="LargeValue",v[v.SmallValue=2]="SmallValue"}(n.PipsType||(n.PipsType={}));function i(v){return r(v)&&typeof v.from=="function"}function r(v){return typeof v=="object"&&typeof v.to=="function"}function s(v){v.parentElement.removeChild(v)}function a(v){return v!=null}function o(v){v.preventDefault()}function u(v){return v.filter(function(f){return this[f]?!1:this[f]=!0},{})}function c(v,f){return Math.round(v/f)*f}function l(v,f){var A=v.getBoundingClientRect(),N=v.ownerDocument,O=N.documentElement,ut=$(N);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(ut.x=0),f?A.top+ut.y-O.clientTop:A.left+ut.x-O.clientLeft}function h(v){return typeof v=="number"&&!isNaN(v)&&isFinite(v)}function p(v,f,A){A>0&&(S(v,f),setTimeout(function(){I(v,f)},A))}function m(v){return Math.max(Math.min(v,100),0)}function b(v){return Array.isArray(v)?v:[v]}function y(v){v=String(v);var f=v.split(".");return f.length>1?f[1].length:0}function S(v,f){v.classList&&!/\s/.test(f)?v.classList.add(f):v.className+=" "+f}function I(v,f){v.classList&&!/\s/.test(f)?v.classList.remove(f):v.className=v.className.replace(new RegExp("(^|\\b)"+f.split(" ").join("|")+"(\\b|$)","gi")," ")}function k(v,f){return v.classList?v.classList.contains(f):new RegExp("\\b"+f+"\\b").test(v.className)}function $(v){var f=window.pageXOffset!==void 0,A=(v.compatMode||"")==="CSS1Compat",N=f?window.pageXOffset:A?v.documentElement.scrollLeft:v.body.scrollLeft,O=f?window.pageYOffset:A?v.documentElement.scrollTop:v.body.scrollTop;return{x:N,y:O}}function L(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function Ct(){var v=!1;try{var f=Object.defineProperty({},"passive",{get:function(){v=!0}});window.addEventListener("test",null,f)}catch{}return v}function at(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function Kt(v,f){return 100/(f-v)}function yt(v,f,A){return f*100/(v[A+1]-v[A])}function ve(v,f){return yt(v,v[0]<0?f+Math.abs(v[0]):f-v[0],0)}function Je(v,f){return f*(v[1]-v[0])/100+v[0]}function qe(v,f){for(var A=1;v>=f[A];)A+=1;return A}function g0(v,f,A){if(A>=v.slice(-1)[0])return 100;var N=qe(A,v),O=v[N-1],ut=v[N],nt=f[N-1],Vt=f[N];return nt+ve([O,ut],A)/Kt(nt,Vt)}function v0(v,f,A){if(A>=100)return v.slice(-1)[0];var N=qe(A,f),O=v[N-1],ut=v[N],nt=f[N-1],Vt=f[N];return Je([O,ut],(A-nt)*Kt(nt,Vt))}function b0(v,f,A,N){if(N===100)return N;var O=qe(N,v),ut=v[O-1],nt=v[O];return A?N-ut>(nt-ut)/2?nt:ut:f[O-1]?v[O-1]+c(N-v[O-1],f[O-1]):N}var uh=function(){function v(f,A,N){this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[N||!1],this.xNumSteps=[!1],this.snap=A;var O,ut=[];for(Object.keys(f).forEach(function(nt){ut.push([b(f[nt]),nt])}),ut.sort(function(nt,Vt){return nt[0][0]-Vt[0][0]}),O=0;O<ut.length;O++)this.handleEntryPoint(ut[O][1],ut[O][0]);for(this.xNumSteps=this.xSteps.slice(0),O=0;O<this.xNumSteps.length;O++)this.handleStepPoint(O,this.xNumSteps[O])}return v.prototype.getDistance=function(f){for(var A=[],N=0;N<this.xNumSteps.length-1;N++)A[N]=yt(this.xVal,f,N);return A},v.prototype.getAbsoluteDistance=function(f,A,N){var O=0;if(f<this.xPct[this.xPct.length-1])for(;f>this.xPct[O+1];)O++;else f===this.xPct[this.xPct.length-1]&&(O=this.xPct.length-2);!N&&f===this.xPct[O+1]&&O++,A===null&&(A=[]);var ut,nt=1,Vt=A[O],H=0,be=0,hn=0,ne=0;for(N?ut=(f-this.xPct[O])/(this.xPct[O+1]-this.xPct[O]):ut=(this.xPct[O+1]-f)/(this.xPct[O+1]-this.xPct[O]);Vt>0;)H=this.xPct[O+1+ne]-this.xPct[O+ne],A[O+ne]*nt+100-ut*100>100?(be=H*ut,nt=(Vt-100*ut)/A[O+ne],ut=1):(be=A[O+ne]*H/100*nt,nt=0),N?(hn=hn-be,this.xPct.length+ne>=1&&ne--):(hn=hn+be,this.xPct.length-ne>=1&&ne++),Vt=A[O+ne]*nt;return f+hn},v.prototype.toStepping=function(f){return f=g0(this.xVal,this.xPct,f),f},v.prototype.fromStepping=function(f){return v0(this.xVal,this.xPct,f)},v.prototype.getStep=function(f){return f=b0(this.xPct,this.xSteps,this.snap,f),f},v.prototype.getDefaultStep=function(f,A,N){var O=qe(f,this.xPct);return(f===100||A&&f===this.xPct[O-1])&&(O=Math.max(O-1,1)),(this.xVal[O]-this.xVal[O-1])/N},v.prototype.getNearbySteps=function(f){var A=qe(f,this.xPct);return{stepBefore:{startValue:this.xVal[A-2],step:this.xNumSteps[A-2],highestStep:this.xHighestCompleteStep[A-2]},thisStep:{startValue:this.xVal[A-1],step:this.xNumSteps[A-1],highestStep:this.xHighestCompleteStep[A-1]},stepAfter:{startValue:this.xVal[A],step:this.xNumSteps[A],highestStep:this.xHighestCompleteStep[A]}}},v.prototype.countStepDecimals=function(){var f=this.xNumSteps.map(y);return Math.max.apply(null,f)},v.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},v.prototype.convert=function(f){return this.getStep(this.toStepping(f))},v.prototype.handleEntryPoint=function(f,A){var N;if(f==="min"?N=0:f==="max"?N=100:N=parseFloat(f),!h(N)||!h(A[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(N),this.xVal.push(A[0]);var O=Number(A[1]);N?this.xSteps.push(isNaN(O)?!1:O):isNaN(O)||(this.xSteps[0]=O),this.xHighestCompleteStep.push(0)},v.prototype.handleStepPoint=function(f,A){if(A){if(this.xVal[f]===this.xVal[f+1]){this.xSteps[f]=this.xHighestCompleteStep[f]=this.xVal[f];return}this.xSteps[f]=yt([this.xVal[f],this.xVal[f+1]],A,0)/Kt(this.xPct[f],this.xPct[f+1]);var N=(this.xVal[f+1]-this.xVal[f])/this.xNumSteps[f],O=Math.ceil(Number(N.toFixed(3))-1),ut=this.xVal[f]+this.xNumSteps[f]*O;this.xHighestCompleteStep[f]=ut}},v}(),ch={to:function(v){return v===void 0?"":v.toFixed(2)},from:Number},tu={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},Ei={tooltips:".__tooltips",aria:".__aria"};function w0(v,f){if(!h(f))throw new Error("noUiSlider: 'step' is not numeric.");v.singleStep=f}function S0(v,f){if(!h(f))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");v.keyboardPageMultiplier=f}function x0(v,f){if(!h(f))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");v.keyboardMultiplier=f}function I0(v,f){if(!h(f))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");v.keyboardDefaultStep=f}function E0(v,f){if(typeof f!="object"||Array.isArray(f))throw new Error("noUiSlider: 'range' is not an object.");if(f.min===void 0||f.max===void 0)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");v.spectrum=new uh(f,v.snap||!1,v.singleStep)}function A0(v,f){if(f=b(f),!Array.isArray(f)||!f.length)throw new Error("noUiSlider: 'start' option is incorrect.");v.handles=f.length,v.start=f}function k0(v,f){if(typeof f!="boolean")throw new Error("noUiSlider: 'snap' option must be a boolean.");v.snap=f}function T0(v,f){if(typeof f!="boolean")throw new Error("noUiSlider: 'animate' option must be a boolean.");v.animate=f}function R0(v,f){if(typeof f!="number")throw new Error("noUiSlider: 'animationDuration' option must be a number.");v.animationDuration=f}function N0(v,f){var A=[!1],N;if(f==="lower"?f=[!0,!1]:f==="upper"&&(f=[!1,!0]),f===!0||f===!1){for(N=1;N<v.handles;N++)A.push(f);A.push(!1)}else{if(!Array.isArray(f)||!f.length||f.length!==v.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");A=f}v.connect=A}function O0(v,f){switch(f){case"horizontal":v.ort=0;break;case"vertical":v.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function lh(v,f){if(!h(f))throw new Error("noUiSlider: 'margin' option must be numeric.");f!==0&&(v.margin=v.spectrum.getDistance(f))}function C0(v,f){if(!h(f))throw new Error("noUiSlider: 'limit' option must be numeric.");if(v.limit=v.spectrum.getDistance(f),!v.limit||v.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function F0(v,f){var A;if(!h(f)&&!Array.isArray(f))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(f)&&!(f.length===2||h(f[0])||h(f[1])))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(f!==0){for(Array.isArray(f)||(f=[f,f]),v.padding=[v.spectrum.getDistance(f[0]),v.spectrum.getDistance(f[1])],A=0;A<v.spectrum.xNumSteps.length-1;A++)if(v.padding[0][A]<0||v.padding[1][A]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var N=f[0]+f[1],O=v.spectrum.xVal[0],ut=v.spectrum.xVal[v.spectrum.xVal.length-1];if(N/(ut-O)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function L0(v,f){switch(f){case"ltr":v.dir=0;break;case"rtl":v.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function B0(v,f){if(typeof f!="string")throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var A=f.indexOf("tap")>=0,N=f.indexOf("drag")>=0,O=f.indexOf("fixed")>=0,ut=f.indexOf("snap")>=0,nt=f.indexOf("hover")>=0,Vt=f.indexOf("unconstrained")>=0,H=f.indexOf("drag-all")>=0,be=f.indexOf("smooth-steps")>=0;if(O){if(v.handles!==2)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");lh(v,v.start[1]-v.start[0])}if(Vt&&(v.margin||v.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");v.events={tap:A||ut,drag:N,dragAll:H,smoothSteps:be,fixed:O,snap:ut,hover:nt,unconstrained:Vt}}function D0(v,f){if(f!==!1)if(f===!0||r(f)){v.tooltips=[];for(var A=0;A<v.handles;A++)v.tooltips.push(f)}else{if(f=b(f),f.length!==v.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");f.forEach(function(N){if(typeof N!="boolean"&&!r(N))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}),v.tooltips=f}}function M0(v,f){if(f.length!==v.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");v.handleAttributes=f}function P0(v,f){if(!r(f))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");v.ariaFormat=f}function U0(v,f){if(!i(f))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");v.format=f}function V0(v,f){if(typeof f!="boolean")throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");v.keyboardSupport=f}function j0(v,f){v.documentElement=f}function $0(v,f){if(typeof f!="string"&&f!==!1)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");v.cssPrefix=f}function z0(v,f){if(typeof f!="object")throw new Error("noUiSlider: 'cssClasses' must be an object.");typeof v.cssPrefix=="string"?(v.cssClasses={},Object.keys(f).forEach(function(A){v.cssClasses[A]=v.cssPrefix+f[A]})):v.cssClasses=f}function hh(v){var f={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:ch,format:ch},A={step:{r:!1,t:w0},keyboardPageMultiplier:{r:!1,t:S0},keyboardMultiplier:{r:!1,t:x0},keyboardDefaultStep:{r:!1,t:I0},start:{r:!0,t:A0},connect:{r:!0,t:N0},direction:{r:!0,t:L0},snap:{r:!1,t:k0},animate:{r:!1,t:T0},animationDuration:{r:!1,t:R0},range:{r:!0,t:E0},orientation:{r:!1,t:O0},margin:{r:!1,t:lh},limit:{r:!1,t:C0},padding:{r:!1,t:F0},behaviour:{r:!0,t:B0},ariaFormat:{r:!1,t:P0},format:{r:!1,t:U0},tooltips:{r:!1,t:D0},keyboardSupport:{r:!0,t:V0},documentElement:{r:!1,t:j0},cssPrefix:{r:!0,t:$0},cssClasses:{r:!0,t:z0},handleAttributes:{r:!1,t:M0}},N={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:tu,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};v.format&&!v.ariaFormat&&(v.ariaFormat=v.format),Object.keys(A).forEach(function(H){if(!a(v[H])&&N[H]===void 0){if(A[H].r)throw new Error("noUiSlider: '"+H+"' is required.");return}A[H].t(f,a(v[H])?v[H]:N[H])}),f.pips=v.pips;var O=document.createElement("div"),ut=O.style.msTransform!==void 0,nt=O.style.transform!==void 0;f.transformRule=nt?"transform":ut?"msTransform":"webkitTransform";var Vt=[["left","top"],["right","bottom"]];return f.style=Vt[f.dir][f.ort],f}function q0(v,f,A){var N=L(),O=at(),ut=O&&Ct(),nt=v,Vt,H,be,hn,ne,bt=f.spectrum,ti=[],Yt=[],Ee=[],eu=0,ei={},wr=v.ownerDocument,fa=f.documentElement||wr.documentElement,da=wr.body,Y0=wr.dir==="rtl"||f.ort===1?0:100;function ni(g,w){var x=wr.createElement("div");return w&&S(x,w),g.appendChild(x),x}function H0(g,w){var x=ni(g,f.cssClasses.origin),E=ni(x,f.cssClasses.handle);if(ni(E,f.cssClasses.touchArea),E.setAttribute("data-handle",String(w)),f.keyboardSupport&&(E.setAttribute("tabindex","0"),E.addEventListener("keydown",function(T){return cg(T,w)})),f.handleAttributes!==void 0){var R=f.handleAttributes[w];Object.keys(R).forEach(function(T){E.setAttribute(T,R[T])})}return E.setAttribute("role","slider"),E.setAttribute("aria-orientation",f.ort?"vertical":"horizontal"),w===0?S(E,f.cssClasses.handleLower):w===f.handles-1&&S(E,f.cssClasses.handleUpper),x.handle=E,x}function dh(g,w){return w?ni(g,f.cssClasses.connect):!1}function W0(g,w){var x=ni(w,f.cssClasses.connects);H=[],be=[],be.push(dh(x,g[0]));for(var E=0;E<f.handles;E++)H.push(H0(w,E)),Ee[E]=E,be.push(dh(x,g[E+1]))}function K0(g){S(g,f.cssClasses.target),f.dir===0?S(g,f.cssClasses.ltr):S(g,f.cssClasses.rtl),f.ort===0?S(g,f.cssClasses.horizontal):S(g,f.cssClasses.vertical);var w=getComputedStyle(g).direction;return w==="rtl"?S(g,f.cssClasses.textDirectionRtl):S(g,f.cssClasses.textDirectionLtr),ni(g,f.cssClasses.base)}function Q0(g,w){return!f.tooltips||!f.tooltips[w]?!1:ni(g.firstChild,f.cssClasses.tooltip)}function ph(){return nt.hasAttribute("disabled")}function nu(g){var w=H[g];return w.hasAttribute("disabled")}function X0(g){g!=null?(H[g].setAttribute("disabled",""),H[g].handle.removeAttribute("tabindex")):(nt.setAttribute("disabled",""),H.forEach(function(w){w.handle.removeAttribute("tabindex")}))}function J0(g){g!=null?(H[g].removeAttribute("disabled"),H[g].handle.setAttribute("tabindex","0")):(nt.removeAttribute("disabled"),H.forEach(function(w){w.removeAttribute("disabled"),w.handle.setAttribute("tabindex","0")}))}function iu(){ne&&(fs("update"+Ei.tooltips),ne.forEach(function(g){g&&s(g)}),ne=null)}function mh(){iu(),ne=H.map(Q0),uu("update"+Ei.tooltips,function(g,w,x){if(!(!ne||!f.tooltips)&&ne[w]!==!1){var E=g[w];f.tooltips[w]!==!0&&(E=f.tooltips[w].to(x[w])),ne[w].innerHTML=E}})}function Z0(){fs("update"+Ei.aria),uu("update"+Ei.aria,function(g,w,x,E,R){Ee.forEach(function(T){var P=H[T],F=pa(Yt,T,0,!0,!0,!0),Mt=pa(Yt,T,100,!0,!0,!0),Ft=R[T],jt=String(f.ariaFormat.to(x[T]));F=bt.fromStepping(F).toFixed(1),Mt=bt.fromStepping(Mt).toFixed(1),Ft=bt.fromStepping(Ft).toFixed(1),P.children[0].setAttribute("aria-valuemin",F),P.children[0].setAttribute("aria-valuemax",Mt),P.children[0].setAttribute("aria-valuenow",Ft),P.children[0].setAttribute("aria-valuetext",jt)})})}function tg(g){if(g.mode===n.PipsMode.Range||g.mode===n.PipsMode.Steps)return bt.xVal;if(g.mode===n.PipsMode.Count){if(g.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var w=g.values-1,x=100/w,E=[];w--;)E[w]=w*x;return E.push(100),_h(E,g.stepped)}return g.mode===n.PipsMode.Positions?_h(g.values,g.stepped):g.mode===n.PipsMode.Values?g.stepped?g.values.map(function(R){return bt.fromStepping(bt.getStep(bt.toStepping(R)))}):g.values:[]}function _h(g,w){return g.map(function(x){return bt.fromStepping(w?bt.getStep(x):x)})}function eg(g){function w(Ft,jt){return Number((Ft+jt).toFixed(7))}var x=tg(g),E={},R=bt.xVal[0],T=bt.xVal[bt.xVal.length-1],P=!1,F=!1,Mt=0;return x=u(x.slice().sort(function(Ft,jt){return Ft-jt})),x[0]!==R&&(x.unshift(R),P=!0),x[x.length-1]!==T&&(x.push(T),F=!0),x.forEach(function(Ft,jt){var $t,It,Jt,ye=Ft,le=x[jt+1],fe,hu,fu,du,Eh,pu,Ah,kh=g.mode===n.PipsMode.Steps;for(kh&&($t=bt.xNumSteps[jt]),$t||($t=le-ye),le===void 0&&(le=ye),$t=Math.max($t,1e-7),It=ye;It<=le;It=w(It,$t)){for(fe=bt.toStepping(It),hu=fe-Mt,Eh=hu/(g.density||1),pu=Math.round(Eh),Ah=hu/pu,Jt=1;Jt<=pu;Jt+=1)fu=Mt+Jt*Ah,E[fu.toFixed(5)]=[bt.fromStepping(fu),0];du=x.indexOf(It)>-1?n.PipsType.LargeValue:kh?n.PipsType.SmallValue:n.PipsType.NoValue,!jt&&P&&It!==le&&(du=0),It===le&&F||(E[fe.toFixed(5)]=[It,du]),Mt=fe}}),E}function ng(g,w,x){var E,R,T=wr.createElement("div"),P=(E={},E[n.PipsType.None]="",E[n.PipsType.NoValue]=f.cssClasses.valueNormal,E[n.PipsType.LargeValue]=f.cssClasses.valueLarge,E[n.PipsType.SmallValue]=f.cssClasses.valueSub,E),F=(R={},R[n.PipsType.None]="",R[n.PipsType.NoValue]=f.cssClasses.markerNormal,R[n.PipsType.LargeValue]=f.cssClasses.markerLarge,R[n.PipsType.SmallValue]=f.cssClasses.markerSub,R),Mt=[f.cssClasses.valueHorizontal,f.cssClasses.valueVertical],Ft=[f.cssClasses.markerHorizontal,f.cssClasses.markerVertical];S(T,f.cssClasses.pips),S(T,f.ort===0?f.cssClasses.pipsHorizontal:f.cssClasses.pipsVertical);function jt(It,Jt){var ye=Jt===f.cssClasses.value,le=ye?Mt:Ft,fe=ye?P:F;return Jt+" "+le[f.ort]+" "+fe[It]}function $t(It,Jt,ye){if(ye=w?w(Jt,ye):ye,ye!==n.PipsType.None){var le=ni(T,!1);le.className=jt(ye,f.cssClasses.marker),le.style[f.style]=It+"%",ye>n.PipsType.NoValue&&(le=ni(T,!1),le.className=jt(ye,f.cssClasses.value),le.setAttribute("data-value",String(Jt)),le.style[f.style]=It+"%",le.innerHTML=String(x.to(Jt)))}}return Object.keys(g).forEach(function(It){$t(It,g[It][0],g[It][1])}),T}function ru(){hn&&(s(hn),hn=null)}function su(g){ru();var w=eg(g),x=g.filter,E=g.format||{to:function(R){return String(Math.round(R))}};return hn=nt.appendChild(ng(w,x,E)),hn}function yh(){var g=Vt.getBoundingClientRect(),w="offset"+["Width","Height"][f.ort];return f.ort===0?g.width||Vt[w]:g.height||Vt[w]}function Ki(g,w,x,E){var R=function(P){var F=ig(P,E.pageOffset,E.target||w);if(!F||ph()&&!E.doNotReject||k(nt,f.cssClasses.tap)&&!E.doNotReject||g===N.start&&F.buttons!==void 0&&F.buttons>1||E.hover&&F.buttons)return!1;ut||F.preventDefault(),F.calcPoint=F.points[f.ort],x(F,E)},T=[];return g.split(" ").forEach(function(P){w.addEventListener(P,R,ut?{passive:!0}:!1),T.push([P,R])}),T}function ig(g,w,x){var E=g.type.indexOf("touch")===0,R=g.type.indexOf("mouse")===0,T=g.type.indexOf("pointer")===0,P=0,F=0;if(g.type.indexOf("MSPointer")===0&&(T=!0),g.type==="mousedown"&&!g.buttons&&!g.touches)return!1;if(E){var Mt=function($t){var It=$t.target;return It===x||x.contains(It)||g.composed&&g.composedPath().shift()===x};if(g.type==="touchstart"){var Ft=Array.prototype.filter.call(g.touches,Mt);if(Ft.length>1)return!1;P=Ft[0].pageX,F=Ft[0].pageY}else{var jt=Array.prototype.find.call(g.changedTouches,Mt);if(!jt)return!1;P=jt.pageX,F=jt.pageY}}return w=w||$(wr),(R||T)&&(P=g.clientX+w.x,F=g.clientY+w.y),g.pageOffset=w,g.points=[P,F],g.cursor=R||T,g}function gh(g){var w=g-l(Vt,f.ort),x=w*100/yh();return x=m(x),f.dir?100-x:x}function rg(g){var w=100,x=!1;return H.forEach(function(E,R){if(!nu(R)){var T=Yt[R],P=Math.abs(T-g),F=P===100&&w===100,Mt=P<w,Ft=P<=w&&g>T;(Mt||Ft||F)&&(x=R,w=P)}}),x}function sg(g,w){g.type==="mouseout"&&g.target.nodeName==="HTML"&&g.relatedTarget===null&&au(g,w)}function ag(g,w){if(navigator.appVersion.indexOf("MSIE 9")===-1&&g.buttons===0&&w.buttonsProperty!==0)return au(g,w);var x=(f.dir?-1:1)*(g.calcPoint-w.startCalcPoint),E=x*100/w.baseSize;vh(x>0,E,w.locations,w.handleNumbers,w.connect)}function au(g,w){w.handle&&(I(w.handle,f.cssClasses.active),eu-=1),w.listeners.forEach(function(x){fa.removeEventListener(x[0],x[1])}),eu===0&&(I(nt,f.cssClasses.drag),lu(),g.cursor&&(da.style.cursor="",da.removeEventListener("selectstart",o))),f.events.smoothSteps&&(w.handleNumbers.forEach(function(x){Qi(x,Yt[x],!0,!0,!1,!1)}),w.handleNumbers.forEach(function(x){Qt("update",x)})),w.handleNumbers.forEach(function(x){Qt("change",x),Qt("set",x),Qt("end",x)})}function ou(g,w){if(!w.handleNumbers.some(nu)){var x;if(w.handleNumbers.length===1){var E=H[w.handleNumbers[0]];x=E.children[0],eu+=1,S(x,f.cssClasses.active)}g.stopPropagation();var R=[],T=Ki(N.move,fa,ag,{target:g.target,handle:x,connect:w.connect,listeners:R,startCalcPoint:g.calcPoint,baseSize:yh(),pageOffset:g.pageOffset,handleNumbers:w.handleNumbers,buttonsProperty:g.buttons,locations:Yt.slice()}),P=Ki(N.end,fa,au,{target:g.target,handle:x,listeners:R,doNotReject:!0,handleNumbers:w.handleNumbers}),F=Ki("mouseout",fa,sg,{target:g.target,handle:x,listeners:R,doNotReject:!0,handleNumbers:w.handleNumbers});R.push.apply(R,T.concat(P,F)),g.cursor&&(da.style.cursor=getComputedStyle(g.target).cursor,H.length>1&&S(nt,f.cssClasses.drag),da.addEventListener("selectstart",o,!1)),w.handleNumbers.forEach(function(Mt){Qt("start",Mt)})}}function og(g){g.stopPropagation();var w=gh(g.calcPoint),x=rg(w);x!==!1&&(f.events.snap||p(nt,f.cssClasses.tap,f.animationDuration),Qi(x,w,!0,!0),lu(),Qt("slide",x,!0),Qt("update",x,!0),f.events.snap?ou(g,{handleNumbers:[x]}):(Qt("change",x,!0),Qt("set",x,!0)))}function ug(g){var w=gh(g.calcPoint),x=bt.getStep(w),E=bt.fromStepping(x);Object.keys(ei).forEach(function(R){R.split(".")[0]==="hover"&&ei[R].forEach(function(T){T.call(_a,E)})})}function cg(g,w){if(ph()||nu(w))return!1;var x=["Left","Right"],E=["Down","Up"],R=["PageDown","PageUp"],T=["Home","End"];f.dir&&!f.ort?x.reverse():f.ort&&!f.dir&&(E.reverse(),R.reverse());var P=g.key.replace("Arrow",""),F=P===R[0],Mt=P===R[1],Ft=P===E[0]||P===x[0]||F,jt=P===E[1]||P===x[1]||Mt,$t=P===T[0],It=P===T[1];if(!Ft&&!jt&&!$t&&!It)return!0;g.preventDefault();var Jt;if(jt||Ft){var ye=Ft?0:1,le=Ih(w),fe=le[ye];if(fe===null)return!1;fe===!1&&(fe=bt.getDefaultStep(Yt[w],Ft,f.keyboardDefaultStep)),Mt||F?fe*=f.keyboardPageMultiplier:fe*=f.keyboardMultiplier,fe=Math.max(fe,1e-7),fe=(Ft?-1:1)*fe,Jt=ti[w]+fe}else It?Jt=f.spectrum.xVal[f.spectrum.xVal.length-1]:Jt=f.spectrum.xVal[0];return Qi(w,bt.toStepping(Jt),!0,!0),Qt("slide",w),Qt("update",w),Qt("change",w),Qt("set",w),!1}function lg(g){g.fixed||H.forEach(function(w,x){Ki(N.start,w.children[0],ou,{handleNumbers:[x]})}),g.tap&&Ki(N.start,Vt,og,{}),g.hover&&Ki(N.move,Vt,ug,{hover:!0}),g.drag&&be.forEach(function(w,x){if(!(w===!1||x===0||x===be.length-1)){var E=H[x-1],R=H[x],T=[w],P=[E,R],F=[x-1,x];S(w,f.cssClasses.draggable),g.fixed&&(T.push(E.children[0]),T.push(R.children[0])),g.dragAll&&(P=H,F=Ee),T.forEach(function(Mt){Ki(N.start,Mt,ou,{handles:P,handleNumbers:F,connect:w})})}})}function uu(g,w){ei[g]=ei[g]||[],ei[g].push(w),g.split(".")[0]==="update"&&H.forEach(function(x,E){Qt("update",E)})}function hg(g){return g===Ei.aria||g===Ei.tooltips}function fs(g){var w=g&&g.split(".")[0],x=w?g.substring(w.length):g;Object.keys(ei).forEach(function(E){var R=E.split(".")[0],T=E.substring(R.length);(!w||w===R)&&(!x||x===T)&&(!hg(T)||x===T)&&delete ei[E]})}function Qt(g,w,x){Object.keys(ei).forEach(function(E){var R=E.split(".")[0];g===R&&ei[E].forEach(function(T){T.call(_a,ti.map(f.format.to),w,ti.slice(),x||!1,Yt.slice(),_a)})})}function pa(g,w,x,E,R,T,P){var F;return H.length>1&&!f.events.unconstrained&&(E&&w>0&&(F=bt.getAbsoluteDistance(g[w-1],f.margin,!1),x=Math.max(x,F)),R&&w<H.length-1&&(F=bt.getAbsoluteDistance(g[w+1],f.margin,!0),x=Math.min(x,F))),H.length>1&&f.limit&&(E&&w>0&&(F=bt.getAbsoluteDistance(g[w-1],f.limit,!1),x=Math.min(x,F)),R&&w<H.length-1&&(F=bt.getAbsoluteDistance(g[w+1],f.limit,!0),x=Math.max(x,F))),f.padding&&(w===0&&(F=bt.getAbsoluteDistance(0,f.padding[0],!1),x=Math.max(x,F)),w===H.length-1&&(F=bt.getAbsoluteDistance(100,f.padding[1],!0),x=Math.min(x,F))),P||(x=bt.getStep(x)),x=m(x),x===g[w]&&!T?!1:x}function cu(g,w){var x=f.ort;return(x?w:g)+", "+(x?g:w)}function vh(g,w,x,E,R){var T=x.slice(),P=E[0],F=f.events.smoothSteps,Mt=[!g,g],Ft=[g,!g];E=E.slice(),g&&E.reverse(),E.length>1?E.forEach(function($t,It){var Jt=pa(T,$t,T[$t]+w,Mt[It],Ft[It],!1,F);Jt===!1?w=0:(w=Jt-T[$t],T[$t]=Jt)}):Mt=Ft=[!0];var jt=!1;E.forEach(function($t,It){jt=Qi($t,x[$t]+w,Mt[It],Ft[It],!1,F)||jt}),jt&&(E.forEach(function($t){Qt("update",$t),Qt("slide",$t)}),R!=null&&Qt("drag",P))}function bh(g,w){return f.dir?100-g-w:g}function fg(g,w){Yt[g]=w,ti[g]=bt.fromStepping(w);var x=bh(w,0)-Y0,E="translate("+cu(x+"%","0")+")";H[g].style[f.transformRule]=E,wh(g),wh(g+1)}function lu(){Ee.forEach(function(g){var w=Yt[g]>50?-1:1,x=3+(H.length+w*g);H[g].style.zIndex=String(x)})}function Qi(g,w,x,E,R,T){return R||(w=pa(Yt,g,w,x,E,!1,T)),w===!1?!1:(fg(g,w),!0)}function wh(g){if(be[g]){var w=0,x=100;g!==0&&(w=Yt[g-1]),g!==be.length-1&&(x=Yt[g]);var E=x-w,R="translate("+cu(bh(w,E)+"%","0")+")",T="scale("+cu(E/100,"1")+")";be[g].style[f.transformRule]=R+" "+T}}function Sh(g,w){return g===null||g===!1||g===void 0||(typeof g=="number"&&(g=String(g)),g=f.format.from(g),g!==!1&&(g=bt.toStepping(g)),g===!1||isNaN(g))?Yt[w]:g}function ma(g,w,x){var E=b(g),R=Yt[0]===void 0;w=w===void 0?!0:w,f.animate&&!R&&p(nt,f.cssClasses.tap,f.animationDuration),Ee.forEach(function(F){Qi(F,Sh(E[F],F),!0,!1,x)});var T=Ee.length===1?0:1;if(R&&bt.hasNoSize()&&(x=!0,Yt[0]=0,Ee.length>1)){var P=100/(Ee.length-1);Ee.forEach(function(F){Yt[F]=F*P})}for(;T<Ee.length;++T)Ee.forEach(function(F){Qi(F,Yt[F],!0,!0,x)});lu(),Ee.forEach(function(F){Qt("update",F),E[F]!==null&&w&&Qt("set",F)})}function dg(g){ma(f.start,g)}function pg(g,w,x,E){if(g=Number(g),!(g>=0&&g<Ee.length))throw new Error("noUiSlider: invalid handle number, got: "+g);Qi(g,Sh(w,g),!0,!0,E),Qt("update",g),x&&Qt("set",g)}function xh(g){if(g===void 0&&(g=!1),g)return ti.length===1?ti[0]:ti.slice(0);var w=ti.map(f.format.to);return w.length===1?w[0]:w}function mg(){for(fs(Ei.aria),fs(Ei.tooltips),Object.keys(f.cssClasses).forEach(function(g){I(nt,f.cssClasses[g])});nt.firstChild;)nt.removeChild(nt.firstChild);delete nt.noUiSlider}function Ih(g){var w=Yt[g],x=bt.getNearbySteps(w),E=ti[g],R=x.thisStep.step,T=null;if(f.snap)return[E-x.stepBefore.startValue||null,x.stepAfter.startValue-E||null];R!==!1&&E+R>x.stepAfter.startValue&&(R=x.stepAfter.startValue-E),E>x.thisStep.startValue?T=x.thisStep.step:x.stepBefore.step===!1?T=!1:T=E-x.stepBefore.highestStep,w===100?R=null:w===0&&(T=null);var P=bt.countStepDecimals();return R!==null&&R!==!1&&(R=Number(R.toFixed(P))),T!==null&&T!==!1&&(T=Number(T.toFixed(P))),[T,R]}function _g(){return Ee.map(Ih)}function yg(g,w){var x=xh(),E=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];E.forEach(function(T){g[T]!==void 0&&(A[T]=g[T])});var R=hh(A);E.forEach(function(T){g[T]!==void 0&&(f[T]=R[T])}),bt=R.spectrum,f.margin=R.margin,f.limit=R.limit,f.padding=R.padding,f.pips?su(f.pips):ru(),f.tooltips?mh():iu(),Yt=[],ma(a(g.start)?g.start:x,w)}function gg(){Vt=K0(nt),W0(f.connect,Vt),lg(f.events),ma(f.start),f.pips&&su(f.pips),f.tooltips&&mh(),Z0()}gg();var _a={destroy:mg,steps:_g,on:uu,off:fs,get:xh,set:ma,setHandle:pg,reset:dg,disable:X0,enable:J0,__moveHandles:function(g,w,x){vh(g,w,Yt,x)},options:A,updateOptions:yg,target:nt,removePips:ru,removeTooltips:iu,getPositions:function(){return Yt.slice()},getTooltips:function(){return ne},getOrigins:function(){return H},pips:su};return _a}function fh(v,f){if(!v||!v.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+v);if(v.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var A=hh(f),N=q0(v,A,f);return v.noUiSlider=N,N}var G0={__spectrum:uh,cssClasses:tu,create:fh};n.create=fh,n.cssClasses=tu,n.default=G0,Object.defineProperty(n,"__esModule",{value:!0})})})(Xu,Xu.exports);var PS=Xu.exports;const US=zb(PS);function VS(e){let t;return{c(){t=tt("div"),this.h()},l(n){t=et(n,"DIV",{class:!0}),ot(t).forEach(C),this.h()},h(){B(t,"class","doublerange svelte-148o4mi")},m(n,i){Tt(n,t,i),e[4](t)},p:Rt,i:Rt,o:Rt,d(n){n&&C(t),e[4](null)}}}function _p(){console.log("DoubleRange.render called. is Noop")}function jS(e,t,n){let{spec:i={}}=t,r=i.id,s=+(i.min??0),a=+(i.max??10);+(i.step??1);let o,u=[];Td(()=>{US.create(o,{start:[s,a],behaviour:"tap-drag",tooltips:!0,connect:!0,range:{min:s,max:a}}),o.noUiSlider.on("change",([h,p])=>vn(u,r,{left:h,right:p}))});function c(h){u.push(h)}function l(h){$i[h?"unshift":"push"](()=>{o=h,n(0,o)})}return e.$$set=h=>{"spec"in h&&n(1,i=h.spec)},[o,i,_p,c,l]}class $S extends Ue{constructor(t){super(),Ve(this,t,jS,VS,je,{spec:1,render:2,addSourceIact:3})}get spec(){return this.$$.ctx[1]}set spec(t){this.$$set({spec:t}),Sn()}get render(){return _p}get addSourceIact(){return this.$$.ctx[3]}}function yf(e){let t,n=e[2][0].label+"",i;return{c(){t=tt("label"),i=ae(n),this.h()},l(r){t=et(r,"LABEL",{for:!0,class:!0});var s=ot(t);i=oe(s,n),s.forEach(C),this.h()},h(){B(t,"for",e[3]),B(t,"class","form-label")},m(r,s){Tt(r,t,s),V(t,i)},p(r,s){s&4&&n!==(n=r[2][0].label+"")&&xn(i,n)},d(r){r&&C(t)}}}function zS(e){var u;let t,n,i,r,s,a,o=((u=e[2][0])==null?void 0:u.label)&&yf(e);return{c(){t=tt("form"),n=tt("div"),o&&o.c(),i=Fe(),r=tt("input"),this.h()},l(c){t=et(c,"FORM",{});var l=ot(t);n=et(l,"DIV",{class:!0});var h=ot(n);o&&o.l(h),i=Le(h),r=et(h,"INPUT",{type:!0,class:!0,id:!0}),h.forEach(C),l.forEach(C),this.h()},h(){B(r,"type","text"),B(r,"class","form-control"),B(r,"id",e[3]),B(n,"class","mb-3")},m(c,l){Tt(c,t,l),V(t,n),o&&o.m(n,null),V(n,i),V(n,r),e[9](r),ja(r,e[2][0].value),s||(a=[gn(r,"input",e[10]),gn(r,"input",e[4]),gn(t,"submit",Eg(e[5]))],s=!0)},p(c,[l]){var h;(h=c[2][0])!=null&&h.label?o?o.p(c,l):(o=yf(c),o.c(),o.m(n,i)):o&&(o.d(1),o=null),l&4&&r.value!==c[2][0].value&&ja(r,c[2][0].value)},i:Rt,o:Rt,d(c){c&&C(t),o&&o.d(),e[9](null),s=!1,kd(a)}}}function qS(e,t,n){let i,r=Rt,s=()=>(r(),r=Ag(l,I=>n(2,i=I)),l);e.$$.on_destroy.push(()=>r());let{spec:a={}}=t,o=a.id,u,c={INPUT:[],SUBMIT:[]},{table:l=bi([{value:""}])}=t;s();function h(I){Ns(l,i=I,i),i.length<1&&Ns(l,i=[{value:""}],i)}function p(I){(c[I.type]??c.SUBMIT).push(I)}function m(){vn(c.INPUT,o,i[0])}function b(){vn(c.SUBMIT,o,i[0])}function y(I){$i[I?"unshift":"push"](()=>{u=I,n(1,u)})}function S(){i[0].value=this.value,l.set(i)}return e.$$set=I=>{"spec"in I&&n(6,a=I.spec),"table"in I&&s(n(0,l=I.table))},[l,u,i,o,m,b,a,h,p,y,S]}class GS extends Ue{constructor(t){super(),Ve(this,t,qS,zS,je,{spec:6,table:0,render:7,addSourceIact:8})}get spec(){return this.$$.ctx[6]}set spec(t){this.$$set({spec:t}),Sn()}get table(){return this.$$.ctx[0]}set table(t){this.$$set({table:t}),Sn()}get render(){return this.$$.ctx[7]}get addSourceIact(){return this.$$.ctx[8]}}function YS(e){let t,n=e[3][0].label+"",i;return{c(){t=tt("label"),i=ae(n),this.h()},l(r){t=et(r,"LABEL",{class:!0,for:!0,style:!0});var s=ot(t);i=oe(s,n),s.forEach(C),this.h()},h(){B(t,"class","form-check-label label svelte-lf98xr"),B(t,"for",e[2]),Rs(t,"line-height","1.5em"),Rs(t,"vertical-align","middle")},m(r,s){Tt(r,t,s),V(t,i)},p:Rt,d(r){r&&C(t)}}}function HS(e){var o;let t,n,i,r,s,a=((o=e[3][0])==null?void 0:o.label)&&YS(e);return{c(){t=tt("div"),n=tt("input"),i=Fe(),a&&a.c(),this.h()},l(u){t=et(u,"DIV",{class:!0});var c=ot(t);n=et(c,"INPUT",{class:!0,type:!0,role:!0,id:!0,style:!0}),i=Le(c),a&&a.l(c),c.forEach(C),this.h()},h(){B(n,"class","form-check-input toggle svelte-lf98xr"),B(n,"type","checkbox"),B(n,"role","switch"),B(n,"id",e[2]),Rs(n,"width","4em"),Rs(n,"height","1.5em"),B(t,"class","form-check form-switch")},m(u,c){Tt(u,t,c),V(t,n),n.checked=e[1][0].value,V(t,i),a&&a.m(t,null),e[8](t),r||(s=gn(n,"change",e[7]),r=!0)},p(u,[c]){var l;c&2&&(n.checked=u[1][0].value),(l=u[3][0])!=null&&l.label&&a.p(u,c)},i:Rt,o:Rt,d(u){u&&C(t),a&&a.d(),e[8](null),r=!1,s()}}}function WS(e,t,n){let i,{spec:r}=t,s=r.id,a=bi([{value:!1}]);Qs(e,a,m=>n(1,i=m));let o=null,u=[];a.subscribe(m=>vn(u,s,m[0]));function c(m){u.push(m)}function l(m){Ns(a,i=m,i),i.length<1&&Ns(a,i=[{value:!1}],i),console.log("Toggle.render",i)}function h(){i[0].value=this.checked,a.set(i)}function p(m){$i[m?"unshift":"push"](()=>{o=m,n(0,o)})}return e.$$set=m=>{"spec"in m&&n(4,r=m.spec)},[o,i,s,a,r,c,l,h,p]}class KS extends Ue{constructor(t){super(),Ve(this,t,WS,HS,je,{spec:4,addSourceIact:5,render:6})}get spec(){return this.$$.ctx[4]}set spec(t){this.$$set({spec:t}),Sn()}get addSourceIact(){return this.$$.ctx[5]}get render(){return this.$$.ctx[6]}}function gf(e,t,n){const i=e.slice();return i[16]=t[n],i[18]=n,i}function vf(e,t,n){const i=e.slice();return i[19]=t[n],i}function bf(e,t,n){const i=e.slice();return i[19]=t[n],i}function wf(e){let t,n=(e[1][e[19]]??e[19])+"",i,r,s;function a(){return e[8](e[19])}return{c(){t=tt("th"),i=ae(n)},l(o){t=et(o,"TH",{});var u=ot(t);i=oe(u,n),u.forEach(C)},m(o,u){Tt(o,t,u),V(t,i),r||(s=gn(t,"click",a),r=!0)},p(o,u){e=o,u&2&&n!==(n=(e[1][e[19]]??e[19])+"")&&xn(i,n)},d(o){o&&C(t),r=!1,s()}}}function Sf(e){let t,n=(e[16][e[19]]??"")+"",i,r,s;function a(){return e[10](e[18],e[19])}return{c(){t=tt("td"),i=ae(n)},l(o){t=et(o,"TD",{});var u=ot(t);i=oe(u,n),u.forEach(C)},m(o,u){Tt(o,t,u),V(t,i),r||(s=gn(t,"click",a),r=!0)},p(o,u){e=o,u&3&&n!==(n=(e[16][e[19]]??"")+"")&&xn(i,n)},d(o){o&&C(t),r=!1,s()}}}function xf(e){let t,n,i,r,s,a,o;function u(){return e[9](e[18])}let c=Yn(e[1]),l=[];for(let h=0;h<c.length;h+=1)l[h]=Sf(vf(e,c,h));return{c(){t=tt("tr"),n=tt("td"),i=ae(""),r=Fe();for(let h=0;h<l.length;h+=1)l[h].c();s=Fe()},l(h){t=et(h,"TR",{});var p=ot(t);n=et(p,"TD",{});var m=ot(n);i=oe(m,""),m.forEach(C),r=Le(p);for(let b=0;b<l.length;b+=1)l[b].l(p);s=Le(p),p.forEach(C)},m(h,p){Tt(h,t,p),V(t,n),V(n,i),V(t,r);for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(t,null);V(t,s),a||(o=gn(n,"click",u),a=!0)},p(h,p){if(e=h,p&19){c=Yn(e[1]);let m;for(m=0;m<c.length;m+=1){const b=vf(e,c,m);l[m]?l[m].p(b,p):(l[m]=Sf(b),l[m].c(),l[m].m(t,s))}for(;m<l.length;m+=1)l[m].d(1);l.length=c.length}},d(h){h&&C(t),fr(l,h),a=!1,o()}}}function If(e){let t,n=e[0].length-30+"",i,r;return{c(){t=tt("p"),i=ae(n),r=ae(" more rows omitted")},l(s){t=et(s,"P",{});var a=ot(t);i=oe(a,n),r=oe(a," more rows omitted"),a.forEach(C)},m(s,a){Tt(s,t,a),V(t,i),V(t,r)},p(s,a){a&1&&n!==(n=s[0].length-30+"")&&xn(i,n)},d(s){s&&C(t)}}}function QS(e){let t,n,i,r,s,a,o,u,c,l=Yn(e[1]),h=[];for(let y=0;y<l.length;y+=1)h[y]=wf(bf(e,l,y));let p=Yu(0,30,e[0]),m=[];for(let y=0;y<p.length;y+=1)m[y]=xf(gf(e,p,y));let b=e[0].length>30&&If(e);return{c(){t=tt("table"),n=tt("tr"),i=tt("th"),r=ae(""),s=Fe();for(let y=0;y<h.length;y+=1)h[y].c();a=Fe(),o=tt("tbody");for(let y=0;y<m.length;y+=1)m[y].c();u=Fe(),b&&b.c(),c=Rh(),this.h()},l(y){t=et(y,"TABLE",{class:!0});var S=ot(t);n=et(S,"TR",{});var I=ot(n);i=et(I,"TH",{});var k=ot(i);r=oe(k,""),k.forEach(C),s=Le(I);for(let L=0;L<h.length;L+=1)h[L].l(I);I.forEach(C),a=Le(S),o=et(S,"TBODY",{});var $=ot(o);for(let L=0;L<m.length;L+=1)m[L].l($);$.forEach(C),S.forEach(C),u=Le(y),b&&b.l(y),c=Rh(),this.h()},h(){B(t,"class","table table-striped")},m(y,S){Tt(y,t,S),V(t,n),V(n,i),V(i,r),V(n,s);for(let I=0;I<h.length;I+=1)h[I]&&h[I].m(n,null);V(t,a),V(t,o);for(let I=0;I<m.length;I+=1)m[I]&&m[I].m(o,null);Tt(y,u,S),b&&b.m(y,S),Tt(y,c,S)},p(y,[S]){if(S&6){l=Yn(y[1]);let I;for(I=0;I<l.length;I+=1){const k=bf(y,l,I);h[I]?h[I].p(k,S):(h[I]=wf(k),h[I].c(),h[I].m(n,null))}for(;I<h.length;I+=1)h[I].d(1);h.length=l.length}if(S&27){p=Yu(0,30,y[0]);let I;for(I=0;I<p.length;I+=1){const k=gf(y,p,I);m[I]?m[I].p(k,S):(m[I]=xf(k),m[I].c(),m[I].m(o,null))}for(;I<m.length;I+=1)m[I].d(1);m.length=p.length}y[0].length>30?b?b.p(y,S):(b=If(y),b.c(),b.m(c.parentNode,c)):b&&(b.d(1),b=null)},i:Rt,o:Rt,d(y){y&&C(t),fr(h,y),fr(m,y),y&&C(u),b&&b.d(y),y&&C(c)}}}function XS(e,t,n){let{spec:i={}}=t;const r=i.id;let{table:s=[]}=t,a=i.label,o=!1;l();let u={CELL:[],ROW:[],COL:[]};function c(k){n(0,s=k),l(),n(1,a)}function l(){(o||Lw(a)||tp(a))&&(n(1,a=sp(Yn(s[0]).map(k=>[k,k]))),o=!0)}function h(k){var $;($=u[k.type])==null||$.push(k)}function p(k){vn(u.COL,r,{key:k})}function m(k){vn(u.ROW,r,s[k])}function b(k,$){vn(u.CELL,r,qw([$],s[k]))}const y=k=>p(k),S=k=>m(k),I=(k,$)=>b(k,$);return e.$$set=k=>{"spec"in k&&n(5,i=k.spec),"table"in k&&n(0,s=k.table)},[s,a,p,m,b,i,c,h,y,S,I]}let yp=class extends Ue{constructor(t){super(),Ve(this,t,XS,QS,je,{spec:5,table:0,render:6,addSourceIact:7})}get spec(){return this.$$.ctx[5]}set spec(t){this.$$set({spec:t}),Sn()}get table(){return this.$$.ctx[0]}set table(t){this.$$set({table:t}),Sn()}get render(){return this.$$.ctx[6]}get addSourceIact(){return this.$$.ctx[7]}};function JS(e){let t,n=JSON.stringify(e[1])+"",i;return{c(){t=tt("p"),i=ae(n)},l(r){t=et(r,"P",{});var s=ot(t);i=oe(s,n),s.forEach(C)},m(r,s){Tt(r,t,s),V(t,i)},p(r,s){s&2&&n!==(n=JSON.stringify(r[1])+"")&&xn(i,n)},i:Rt,o:Rt,d(r){r&&C(t)}}}function ZS(e){let t,n,i={table:e[1],spec:ex};return t=new yp({props:i}),e[4](t),{c(){As(t.$$.fragment)},l(r){xc(t.$$.fragment,r)},m(r,s){ks(t,r,s),n=!0},p(r,s){const a={};s&2&&(a.table=r[1]),t.$set(a)},i(r){n||(We(t.$$.fragment,r),n=!0)},o(r){wn(t.$$.fragment,r),n=!1},d(r){e[4](null),Ts(t,r)}}}function tx(e){let t,n,i,r=(e[0].id??"")+"",s,a,o,u,c,l,h;const p=[ZS,JS],m=[];function b(y,S){return S&2&&(u=null),u==null&&(u=!!Ya(Array,y[1])),u?0:1}return c=b(e,-1),l=m[c]=p[c](e),{c(){t=tt("div"),n=tt("div"),i=ae("Debug Box "),s=ae(r),a=Fe(),o=tt("div"),l.c(),this.h()},l(y){t=et(y,"DIV",{class:!0});var S=ot(t);n=et(S,"DIV",{class:!0});var I=ot(n);i=oe(I,"Debug Box "),s=oe(I,r),I.forEach(C),a=Le(S),o=et(S,"DIV",{class:!0});var k=ot(o);l.l(k),k.forEach(C),S.forEach(C),this.h()},h(){B(n,"class","card-header"),B(o,"class","debug card-body alert svelte-r1xcj8"),B(t,"class","card")},m(y,S){Tt(y,t,S),V(t,n),V(n,i),V(n,s),V(t,a),V(t,o),m[c].m(o,null),h=!0},p(y,[S]){(!h||S&1)&&r!==(r=(y[0].id??"")+"")&&xn(s,r);let I=c;c=b(y,S),c===I?m[c].p(y,S):(Ks(),wn(m[I],1,1,()=>{m[I]=null}),Ws(),l=m[c],l?l.p(y,S):(l=m[c]=p[c](y),l.c()),We(l,1),l.m(o,null))},i(y){h||(We(l),h=!0)},o(y){wn(l),h=!1},d(y){y&&C(t),m[c].d()}}}const ex=()=>({});function nx(e,t,n){let{spec:i={}}=t,r="",s=null;function a(u){n(1,r=u),s==null||s.render(r)}function o(u){$i[u?"unshift":"push"](()=>{s=u,n(2,s)})}return e.$$set=u=>{"spec"in u&&n(0,i=u.spec)},[i,r,s,a,o]}class ix extends Ue{constructor(t){super(),Ve(this,t,nx,tx,je,{spec:0,render:3})}get spec(){return this.$$.ctx[0]}set spec(t){this.$$set({spec:t}),Sn()}get render(){return this.$$.ctx[3]}}function rx(e){let t;return{c(){t=tt("div")},l(n){t=et(n,"DIV",{});var i=ot(t);i.forEach(C)},m(n,i){Tt(n,t,i),e[4](t)},p:Rt,i:Rt,o:Rt,d(n){n&&C(t),e[4](null)}}}function sx(e,t,n){let{spec:i={}}=t,r=op(i.labels,i.mapping),s=[],a=null,o,u,c=[];const l={x:{type:"quantitative",required:!0},y:{type:"quantitative",required:!0},color:{type:"ordinal",required:!1},key:{type:"ordinal",required:!1}};function h(y){if(y=xS(y,l,r),s=y,!!s)if(o){let S=o.view.changeset().remove(()=>!0).insert(s);o.view.change("source_0",S).run()}else{let S=TS(u,s);bS(a,S,{renderer:"canvas"}).then(I=>{o=I,m()})}}function p(y){c.push(y),c.length==1&&(y.sel=IS(y.type),u=u.select(y.sel).encode(he.size().value(100)),o=null,h(s))}function m(){c.length!=0&&kS(c[0],o,(y,S)=>{vn(c,i.id,S)})}u=he.markPoint({filled:!0,tooltip:{content:"data"}}).width(600).height(400).encode(he.size().value(80)).autosize({type:"fit",resize:!0,contains:"padding"}).data(s),u=SS(u,l,r);function b(y){$i[y?"unshift":"push"](()=>{a=y,n(0,a)})}return e.$$set=y=>{"spec"in y&&n(1,i=y.spec)},[a,i,h,p,b]}class ax extends Ue{constructor(t){super(),Ve(this,t,sx,rx,je,{spec:1,render:2,addSourceIact:3})}get spec(){return this.$$.ctx[1]}set spec(t){this.$$set({spec:t}),Sn()}get render(){return this.$$.ctx[2]}get addSourceIact(){return this.$$.ctx[3]}}let ox={Dropdown:OS,Toggle:KS,Range:MS,DoubleRange:$S,Textbox:GS,Table:yp,Radio:LS,Point:ax,Debug:ix};class ux{constructor(){this.listeners={},this.id=0}on(t,n){let i=this.id++;return this.listeners[t]=this.listeners[t]||{},this.listeners[t][i]=n,()=>{delete this.listeners[t][i]}}emit(t,...n){(Zd(this.listeners[t])??[]).forEach(r=>{r(...n)})}}let cx=op(vS,ox);function Qa(e){return cx[e.type]||null}class zi extends ux{constructor(){super(),this.registeredViews=[],this.on("data",(t,...n)=>{this.registeredViews.forEach(({view:i,postprocessFuncs:r})=>{if(tp(i.render))return;let a=lw(...r)(t);i.render(a,...n)})})}async init(){}registerView(t,n){console.log("Backend.registerView",t,n),n=kw([n??np]),this.registeredViews.push({view:t,postprocessFuncs:n})}addPostprocessing(t,n){this.registeredViews.forEach(({view:i,postprocessFuncs:r})=>{var s;((s=i.spec)==null?void 0:s.id)==t&&r.push(n)})}merge(t,n){return n}async execute(t,n){}}class lx extends zi{constructor(t){super(),this.data=t.data||[]}async execute(t,...n){this.emit("data",this.data,...n)}}class hx extends zi{constructor(t){super(),this.data=null,this.promise=null,this.promise=jb(t.url,Db)}async execute(t,n){this.promise&&(this.data=await this.promise,this.promise=null),this.emit("data",this.data,n)}}function U(e,t,n,i){function r(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(l){try{c(i.next(l))}catch(h){a(h)}}function u(l){try{c(i.throw(l))}catch(h){a(h)}}function c(l){l.done?s(l.value):r(l.value).then(o,u)}c((i=i.apply(e,t||[])).next())})}function Ef(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Z(e){return this instanceof Z?(this.v=e,this):new Z(e)}function zn(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),r,s=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(p){i[p]&&(r[p]=function(m){return new Promise(function(b,y){s.push([p,m,b,y])>1||o(p,m)})})}function o(p,m){try{u(i[p](m))}catch(b){h(s[0][3],b)}}function u(p){p.value instanceof Z?Promise.resolve(p.value.v).then(c,l):h(s[0][2],p)}function c(p){o("next",p)}function l(p){o("throw",p)}function h(p,m){p(m),s.shift(),s.length&&o(s[0][0],s[0][1])}}function Ra(e){var t,n;return t={},i("next"),i("throw",function(r){throw r}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(r,s){t[r]=e[r]?function(a){return(n=!n)?{value:Z(e[r](a)),done:!1}:s?s(a):a}:s}}function lr(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Ef=="function"?Ef(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=e[s]&&function(a){return new Promise(function(o,u){a=e[s](a),r(o,u,a.done,a.value)})}}function r(s,a,o,u){Promise.resolve(u).then(function(c){s({value:c,done:o})},a)}}const fx=new TextDecoder("utf-8"),Ju=e=>fx.decode(e),dx=new TextEncoder,Fo=e=>dx.encode(e),[wO,gp]=(()=>{const e=()=>{throw new Error("BigInt is not available in this environment")};function t(){throw e()}return t.asIntN=()=>{throw e()},t.asUintN=()=>{throw e()},typeof BigInt<"u"?[BigInt,!0]:[t,!1]})(),[yr,SO]=(()=>{const e=()=>{throw new Error("BigInt64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[t,!1]})(),[gr,xO]=(()=>{const e=()=>{throw new Error("BigUint64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[t,!1]})(),px=e=>typeof e=="number",vp=e=>typeof e=="boolean",re=e=>typeof e=="function",Be=e=>e!=null&&Object(e)===e,pr=e=>Be(e)&&re(e.then),Zs=e=>Be(e)&&re(e[Symbol.iterator]),es=e=>Be(e)&&re(e[Symbol.asyncIterator]),Zu=e=>Be(e)&&Be(e.schema),bp=e=>Be(e)&&"done"in e&&"value"in e,wp=e=>Be(e)&&re(e.stat)&&px(e.fd),Sp=e=>Be(e)&&Bc(e.body),Lo=e=>"_getDOMStream"in e&&"_getNodeStream"in e,mx=e=>Be(e)&&re(e.abort)&&re(e.getWriter)&&!Lo(e),Bc=e=>Be(e)&&re(e.cancel)&&re(e.getReader)&&!Lo(e),_x=e=>Be(e)&&re(e.end)&&re(e.write)&&vp(e.writable)&&!Lo(e),xp=e=>Be(e)&&re(e.read)&&re(e.pipe)&&vp(e.readable)&&!Lo(e),yx=e=>Be(e)&&re(e.clear)&&re(e.bytes)&&re(e.position)&&re(e.setPosition)&&re(e.capacity)&&re(e.getBufferIdentifier)&&re(e.createLong),Dc=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function gx(e){const t=e[0]?[e[0]]:[];let n,i,r,s;for(let a,o,u=0,c=0,l=e.length;++u<l;){if(a=t[c],o=e[u],!a||!o||a.buffer!==o.buffer||o.byteOffset<a.byteOffset){o&&(t[++c]=o);continue}if({byteOffset:n,byteLength:r}=a,{byteOffset:i,byteLength:s}=o,n+r<i||i+s<n){o&&(t[++c]=o);continue}t[c]=new Uint8Array(a.buffer,n,i-n+s)}return t}function Xa(e,t,n=0,i=t.byteLength){const r=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,r),a=new Uint8Array(t.buffer,t.byteOffset,Math.min(i,r));return s.set(a,n),e}function Hn(e,t){const n=gx(e),i=n.reduce((l,h)=>l+h.byteLength,0);let r,s,a,o=0,u=-1;const c=Math.min(t||Number.POSITIVE_INFINITY,i);for(const l=n.length;++u<l;){if(r=n[u],s=r.subarray(0,Math.min(r.length,c-o)),c<=o+s.length){s.length<r.length?n[u]=r.subarray(s.length):s.length===r.length&&u++,a?Xa(a,s,o):a=s;break}Xa(a||(a=new Uint8Array(c)),s,o),o+=s.length}return[a||new Uint8Array(0),n.slice(u),i-(a?a.byteLength:0)]}function Lt(e,t){let n=bp(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=Fo(n)),n instanceof ArrayBuffer?new e(n):n instanceof Dc?new e(n):yx(n)?Lt(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const ms=e=>Lt(Int32Array,e),wt=e=>Lt(Uint8Array,e),tc=e=>(e.next(),e);function*vx(e,t){const n=function*(r){yield r},i=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Dc?n(t):Zs(t)?t:n(t);return yield*tc(function*(r){let s=null;do s=r.next(yield Lt(e,s));while(!s.done)}(i[Symbol.iterator]())),new e}const bx=e=>vx(Uint8Array,e);function Ip(e,t){return zn(this,arguments,function*(){if(pr(t))return yield Z(yield Z(yield*Ra(lr(Ip(e,yield Z(t))))));const i=function(a){return zn(this,arguments,function*(){yield yield Z(yield Z(a))})},r=function(a){return zn(this,arguments,function*(){yield Z(yield*Ra(lr(tc(function*(o){let u=null;do u=o.next(yield u==null?void 0:u.value);while(!u.done)}(a[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Dc?i(t):Zs(t)?r(t):es(t)?t:i(t);return yield Z(yield*Ra(lr(tc(function(a){return zn(this,arguments,function*(){let o=null;do o=yield Z(a.next(yield yield Z(Lt(e,o))));while(!o.done)})}(s[Symbol.asyncIterator]()))))),yield Z(new e)})}const wx=e=>Ip(Uint8Array,e);function Mc(e,t,n){if(e!==0){n=n.slice(0,t+1);for(let i=-1;++i<=t;)n[i]+=e}return n}function Sx(e,t){let n=0;const i=e.length;if(i!==t.length)return!1;if(i>0)do if(e[n]!==t[n])return!1;while(++n<i);return!0}const rn={fromIterable(e){return ba(xx(e))},fromAsyncIterable(e){return ba(Ix(e))},fromDOMStream(e){return ba(Ex(e))},fromNodeStream(e){return ba(kx(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},ba=e=>(e.next(),e);function*xx(e){let t,n=!1,i=[],r,s,a,o=0;function u(){return s==="peek"?Hn(i,a)[0]:([r,i,o]=Hn(i,a),r)}({cmd:s,size:a}=yield null);const c=bx(e)[Symbol.iterator]();try{do if({done:t,value:r}=Number.isNaN(a-o)?c.next():c.next(a-o),!t&&r.byteLength>0&&(i.push(r),o+=r.byteLength),t||a<=o)do({cmd:s,size:a}=yield u());while(a<o);while(!t)}catch(l){(n=!0)&&typeof c.throw=="function"&&c.throw(l)}finally{n===!1&&typeof c.return=="function"&&c.return(null)}return null}function Ix(e){return zn(this,arguments,function*(){let n,i=!1,r=[],s,a,o,u=0;function c(){return a==="peek"?Hn(r,o)[0]:([s,r,u]=Hn(r,o),s)}({cmd:a,size:o}=yield yield Z(null));const l=wx(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(o-u)?yield Z(l.next()):yield Z(l.next(o-u)),!n&&s.byteLength>0&&(r.push(s),u+=s.byteLength),n||o<=u)do({cmd:a,size:o}=yield yield Z(c()));while(o<u);while(!n)}catch(h){(i=!0)&&typeof l.throw=="function"&&(yield Z(l.throw(h)))}finally{i===!1&&typeof l.return=="function"&&(yield Z(l.return(new Uint8Array(0))))}return yield Z(null)})}function Ex(e){return zn(this,arguments,function*(){let n=!1,i=!1,r=[],s,a,o,u=0;function c(){return a==="peek"?Hn(r,o)[0]:([s,r,u]=Hn(r,o),s)}({cmd:a,size:o}=yield yield Z(null));const l=new Ax(e);try{do if({done:n,value:s}=Number.isNaN(o-u)?yield Z(l.read()):yield Z(l.read(o-u)),!n&&s.byteLength>0&&(r.push(wt(s)),u+=s.byteLength),n||o<=u)do({cmd:a,size:o}=yield yield Z(c()));while(o<u);while(!n)}catch(h){(i=!0)&&(yield Z(l.cancel(h)))}finally{i===!1?yield Z(l.cancel()):e.locked&&l.releaseLock()}return yield Z(null)})}class Ax{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return U(this,void 0,void 0,function*(){const{reader:n,source:i}=this;n&&(yield n.cancel(t).catch(()=>{})),i&&i.locked&&this.releaseLock()})}read(t){return U(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=wt(n)),n})}}const wu=(e,t)=>{const n=r=>i([t,r]);let i;return[t,n,new Promise(r=>(i=r)&&e.once(t,n))]};function kx(e){return zn(this,arguments,function*(){const n=[];let i="error",r=!1,s=null,a,o,u=0,c=[],l;function h(){return a==="peek"?Hn(c,o)[0]:([l,c,u]=Hn(c,o),l)}if({cmd:a,size:o}=yield yield Z(null),e.isTTY)return yield yield Z(new Uint8Array(0)),yield Z(null);try{n[0]=wu(e,"end"),n[1]=wu(e,"error");do{if(n[2]=wu(e,"readable"),[i,s]=yield Z(Promise.race(n.map(m=>m[2]))),i==="error")break;if((r=i==="end")||(Number.isFinite(o-u)?(l=wt(e.read(o-u)),l.byteLength<o-u&&(l=wt(e.read()))):l=wt(e.read()),l.byteLength>0&&(c.push(l),u+=l.byteLength)),r||o<=u)do({cmd:a,size:o}=yield yield Z(h()));while(o<u)}while(!r)}finally{yield Z(p(n,i==="error"?s:null))}return yield Z(null);function p(m,b){return l=c=null,new Promise((y,S)=>{for(const[I,k]of m)e.off(I,k);try{const I=e.destroy;I&&I.call(e,b),b=void 0}catch(I){b=I||b}finally{b!=null?S(b):y()}})}})}var He;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(He||(He={}));var Ke;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Ke||(Ke={}));var me;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(me||(me={}));var En;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(En||(En={}));var dt;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(dt||(dt={}));var Wn;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Wn||(Wn={}));var Et;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Et||(Et={}));var _;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"})(_||(_={}));var si;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(si||(si={}));const Tx=void 0;function Ci(e){if(e===null)return"null";if(e===Tx)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof yr||e instanceof gr?`[${[...e].map(t=>Ci(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const Rx=Symbol.for("isArrowBigNum");function Rn(e,...t){return t.length===0?Object.setPrototypeOf(Lt(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Rn.prototype[Rx]=!0;Rn.prototype.toJSON=function(){return`"${hr(this)}"`};Rn.prototype.valueOf=function(){return Ep(this)};Rn.prototype.toString=function(){return hr(this)};Rn.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return Ep(this);case"string":return hr(this);case"default":return ec(this)}return hr(this)};function Fr(...e){return Rn.apply(this,e)}function Lr(...e){return Rn.apply(this,e)}function Ds(...e){return Rn.apply(this,e)}Object.setPrototypeOf(Fr.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Lr.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(Ds.prototype,Object.create(Uint32Array.prototype));Object.assign(Fr.prototype,Rn.prototype,{constructor:Fr,signed:!0,TypedArray:Int32Array,BigIntArray:yr});Object.assign(Lr.prototype,Rn.prototype,{constructor:Lr,signed:!1,TypedArray:Uint32Array,BigIntArray:gr});Object.assign(Ds.prototype,Rn.prototype,{constructor:Ds,signed:!0,TypedArray:Uint32Array,BigIntArray:gr});function Ep(e){const{buffer:t,byteOffset:n,length:i,signed:r}=e,s=new gr(t,n,i),a=r&&s[s.length-1]&BigInt(1)<<BigInt(63);let o=BigInt(a?1:0),u=BigInt(0);if(a){for(const c of s)o+=~c*(BigInt(1)<<BigInt(32)*u++);o*=BigInt(-1)}else for(const c of s)o+=c*(BigInt(1)<<BigInt(32)*u++);return o}let hr,ec;gp?(ec=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:Su(e),hr=e=>e.byteLength===8?`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`:Su(e)):(hr=Su,ec=hr);function Su(e){let t="";const n=new Uint32Array(2);let i=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const r=new Uint32Array((i=new Uint16Array(i).reverse()).buffer);let s=-1;const a=i.length-1;do{for(n[0]=i[s=0];s<a;)i[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+i[s];i[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(r[0]||r[1]||r[2]||r[3]);return t??"0"}class Pc{static new(t,n){switch(n){case!0:return new Fr(t);case!1:return new Lr(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case yr:return new Fr(t)}return t.byteLength===16?new Ds(t):new Lr(t)}static signed(t){return new Fr(t)}static unsigned(t){return new Lr(t)}static decimal(t){return new Ds(t)}constructor(t,n){return Pc.new(t,n)}}var Ap,kp,Tp,Rp,Np,Op,Cp,Fp,Lp,Bp,Dp,Mp,Pp,Up,Vp,jp,$p,zp,qp;class j{static isNull(t){return(t==null?void 0:t.typeId)===_.Null}static isInt(t){return(t==null?void 0:t.typeId)===_.Int}static isFloat(t){return(t==null?void 0:t.typeId)===_.Float}static isBinary(t){return(t==null?void 0:t.typeId)===_.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===_.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===_.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===_.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===_.Date}static isTime(t){return(t==null?void 0:t.typeId)===_.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===_.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===_.Interval}static isList(t){return(t==null?void 0:t.typeId)===_.List}static isStruct(t){return(t==null?void 0:t.typeId)===_.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===_.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===_.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===_.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===_.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===_.Dictionary}static isDenseUnion(t){return j.isUnion(t)&&t.mode===Ke.Dense}static isSparseUnion(t){return j.isUnion(t)&&t.mode===Ke.Sparse}get typeId(){return _.NONE}}Ap=Symbol.toStringTag;j[Ap]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(j.prototype);let pi=class extends j{toString(){return"Null"}get typeId(){return _.Null}};kp=Symbol.toStringTag;pi[kp]=(e=>e[Symbol.toStringTag]="Null")(pi.prototype);class Se extends j{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return _.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?yr:gr}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}Tp=Symbol.toStringTag;Se[Tp]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Se.prototype);class Uc extends Se{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class Vc extends Se{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class Li extends Se{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}let jc=class extends Se{constructor(){super(!0,64)}get ArrayType(){return yr}};class $c extends Se{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class zc extends Se{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class qc extends Se{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}let Gc=class extends Se{constructor(){super(!1,64)}get ArrayType(){return gr}};Object.defineProperty(Uc.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(Vc.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(Li.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(jc.prototype,"ArrayType",{value:yr});Object.defineProperty($c.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(zc.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(qc.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(Gc.prototype,"ArrayType",{value:gr});class Bi extends j{constructor(t){super(),this.precision=t}get typeId(){return _.Float}get ArrayType(){switch(this.precision){case me.HALF:return Uint16Array;case me.SINGLE:return Float32Array;case me.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}Rp=Symbol.toStringTag;Bi[Rp]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(Bi.prototype);class Gp extends Bi{constructor(){super(me.HALF)}}class Yc extends Bi{constructor(){super(me.SINGLE)}}class Hc extends Bi{constructor(){super(me.DOUBLE)}}Object.defineProperty(Gp.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(Yc.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(Hc.prototype,"ArrayType",{value:Float64Array});let Ms=class extends j{constructor(){super()}get typeId(){return _.Binary}toString(){return"Binary"}};Np=Symbol.toStringTag;Ms[Np]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(Ms.prototype);let Vr=class extends j{constructor(){super()}get typeId(){return _.Utf8}toString(){return"Utf8"}};Op=Symbol.toStringTag;Vr[Op]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(Vr.prototype);let Ps=class extends j{constructor(){super()}get typeId(){return _.Bool}toString(){return"Bool"}};Cp=Symbol.toStringTag;Ps[Cp]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(Ps.prototype);let Ja=class extends j{constructor(t,n,i=128){super(),this.scale=t,this.precision=n,this.bitWidth=i}get typeId(){return _.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};Fp=Symbol.toStringTag;Ja[Fp]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(Ja.prototype);class jr extends j{constructor(t){super(),this.unit=t}get typeId(){return _.Date}toString(){return`Date${(this.unit+1)*32}<${En[this.unit]}>`}}Lp=Symbol.toStringTag;jr[Lp]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(jr.prototype);class Nx extends jr{constructor(){super(En.DAY)}}class Ox extends jr{constructor(){super(En.MILLISECOND)}}class mi extends j{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return _.Time}toString(){return`Time${this.bitWidth}<${dt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return yr}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}Bp=Symbol.toStringTag;mi[Bp]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(mi.prototype);class Cx extends mi{constructor(){super(dt.SECOND,32)}}class Fx extends mi{constructor(){super(dt.MILLISECOND,32)}}class Lx extends mi{constructor(){super(dt.MICROSECOND,64)}}class Bx extends mi{constructor(){super(dt.NANOSECOND,64)}}class Za extends j{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return _.Timestamp}toString(){return`Timestamp<${dt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}Dp=Symbol.toStringTag;Za[Dp]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(Za.prototype);class $r extends j{constructor(t){super(),this.unit=t}get typeId(){return _.Interval}toString(){return`Interval<${Wn[this.unit]}>`}}Mp=Symbol.toStringTag;$r[Mp]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))($r.prototype);class Dx extends $r{constructor(){super(Wn.DAY_TIME)}}class Mx extends $r{constructor(){super(Wn.YEAR_MONTH)}}let zr=class extends j{constructor(t){super(),this.children=[t]}get typeId(){return _.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};Pp=Symbol.toStringTag;zr[Pp]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(zr.prototype);class pe extends j{constructor(t){super(),this.children=t}get typeId(){return _.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}Up=Symbol.toStringTag;pe[Up]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(pe.prototype);class Us extends j{constructor(t,n,i){super(),this.mode=t,this.children=i,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((r,s,a)=>(r[s]=a)&&r||r,Object.create(null))}get typeId(){return _.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}Vp=Symbol.toStringTag;Us[Vp]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(Us.prototype);let to=class extends j{constructor(t){super(),this.byteWidth=t}get typeId(){return _.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};jp=Symbol.toStringTag;to[jp]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(to.prototype);let qr=class extends j{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return _.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};$p=Symbol.toStringTag;qr[$p]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(qr.prototype);class Vs extends j{constructor(t,n=!1){super(),this.children=[t],this.keysSorted=n}get typeId(){return _.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}zp=Symbol.toStringTag;Vs[zp]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(Vs.prototype);const Px=(e=>()=>++e)(-1);let Di=class extends j{constructor(t,n,i,r){super(),this.indices=n,this.dictionary=t,this.isOrdered=r||!1,this.id=i==null?Px():typeof i=="number"?i:i.low}get typeId(){return _.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}};qp=Symbol.toStringTag;Di[qp]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(Di.prototype);function Mn(e){const t=e;switch(e.typeId){case _.Decimal:return e.bitWidth/32;case _.Timestamp:return 2;case _.Date:return 1+t.unit;case _.Interval:return 1+t.unit;case _.FixedSizeList:return t.listSize;case _.FixedSizeBinary:return t.byteWidth;default:return 1}}class lt{visitMany(t,...n){return t.map((i,r)=>this.visit(i,...n.map(s=>s[r])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return Ux(this,t,n)}getVisitFnByTypeId(t,n=!0){return xr(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function Ux(e,t,n=!0){return typeof t=="number"?xr(e,t,n):typeof t=="string"&&t in _?xr(e,_[t],n):t&&t instanceof j?xr(e,Af(t),n):t!=null&&t.type&&t.type instanceof j?xr(e,Af(t.type),n):xr(e,_.NONE,n)}function xr(e,t,n=!0){let i=null;switch(t){case _.Null:i=e.visitNull;break;case _.Bool:i=e.visitBool;break;case _.Int:i=e.visitInt;break;case _.Int8:i=e.visitInt8||e.visitInt;break;case _.Int16:i=e.visitInt16||e.visitInt;break;case _.Int32:i=e.visitInt32||e.visitInt;break;case _.Int64:i=e.visitInt64||e.visitInt;break;case _.Uint8:i=e.visitUint8||e.visitInt;break;case _.Uint16:i=e.visitUint16||e.visitInt;break;case _.Uint32:i=e.visitUint32||e.visitInt;break;case _.Uint64:i=e.visitUint64||e.visitInt;break;case _.Float:i=e.visitFloat;break;case _.Float16:i=e.visitFloat16||e.visitFloat;break;case _.Float32:i=e.visitFloat32||e.visitFloat;break;case _.Float64:i=e.visitFloat64||e.visitFloat;break;case _.Utf8:i=e.visitUtf8;break;case _.Binary:i=e.visitBinary;break;case _.FixedSizeBinary:i=e.visitFixedSizeBinary;break;case _.Date:i=e.visitDate;break;case _.DateDay:i=e.visitDateDay||e.visitDate;break;case _.DateMillisecond:i=e.visitDateMillisecond||e.visitDate;break;case _.Timestamp:i=e.visitTimestamp;break;case _.TimestampSecond:i=e.visitTimestampSecond||e.visitTimestamp;break;case _.TimestampMillisecond:i=e.visitTimestampMillisecond||e.visitTimestamp;break;case _.TimestampMicrosecond:i=e.visitTimestampMicrosecond||e.visitTimestamp;break;case _.TimestampNanosecond:i=e.visitTimestampNanosecond||e.visitTimestamp;break;case _.Time:i=e.visitTime;break;case _.TimeSecond:i=e.visitTimeSecond||e.visitTime;break;case _.TimeMillisecond:i=e.visitTimeMillisecond||e.visitTime;break;case _.TimeMicrosecond:i=e.visitTimeMicrosecond||e.visitTime;break;case _.TimeNanosecond:i=e.visitTimeNanosecond||e.visitTime;break;case _.Decimal:i=e.visitDecimal;break;case _.List:i=e.visitList;break;case _.Struct:i=e.visitStruct;break;case _.Union:i=e.visitUnion;break;case _.DenseUnion:i=e.visitDenseUnion||e.visitUnion;break;case _.SparseUnion:i=e.visitSparseUnion||e.visitUnion;break;case _.Dictionary:i=e.visitDictionary;break;case _.Interval:i=e.visitInterval;break;case _.IntervalDayTime:i=e.visitIntervalDayTime||e.visitInterval;break;case _.IntervalYearMonth:i=e.visitIntervalYearMonth||e.visitInterval;break;case _.FixedSizeList:i=e.visitFixedSizeList;break;case _.Map:i=e.visitMap;break}if(typeof i=="function")return i;if(!n)return()=>null;throw new Error(`Unrecognized type '${_[t]}'`)}function Af(e){switch(e.typeId){case _.Null:return _.Null;case _.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?_.Int8:_.Uint8;case 16:return n?_.Int16:_.Uint16;case 32:return n?_.Int32:_.Uint32;case 64:return n?_.Int64:_.Uint64}return _.Int}case _.Float:switch(e.precision){case me.HALF:return _.Float16;case me.SINGLE:return _.Float32;case me.DOUBLE:return _.Float64}return _.Float;case _.Binary:return _.Binary;case _.Utf8:return _.Utf8;case _.Bool:return _.Bool;case _.Decimal:return _.Decimal;case _.Time:switch(e.unit){case dt.SECOND:return _.TimeSecond;case dt.MILLISECOND:return _.TimeMillisecond;case dt.MICROSECOND:return _.TimeMicrosecond;case dt.NANOSECOND:return _.TimeNanosecond}return _.Time;case _.Timestamp:switch(e.unit){case dt.SECOND:return _.TimestampSecond;case dt.MILLISECOND:return _.TimestampMillisecond;case dt.MICROSECOND:return _.TimestampMicrosecond;case dt.NANOSECOND:return _.TimestampNanosecond}return _.Timestamp;case _.Date:switch(e.unit){case En.DAY:return _.DateDay;case En.MILLISECOND:return _.DateMillisecond}return _.Date;case _.Interval:switch(e.unit){case Wn.DAY_TIME:return _.IntervalDayTime;case Wn.YEAR_MONTH:return _.IntervalYearMonth}return _.Interval;case _.Map:return _.Map;case _.List:return _.List;case _.Struct:return _.Struct;case _.Union:switch(e.mode){case Ke.Dense:return _.DenseUnion;case Ke.Sparse:return _.SparseUnion}return _.Union;case _.FixedSizeBinary:return _.FixedSizeBinary;case _.FixedSizeList:return _.FixedSizeList;case _.Dictionary:return _.Dictionary}throw new Error(`Unrecognized type '${_[e.typeId]}'`)}lt.prototype.visitInt8=null;lt.prototype.visitInt16=null;lt.prototype.visitInt32=null;lt.prototype.visitInt64=null;lt.prototype.visitUint8=null;lt.prototype.visitUint16=null;lt.prototype.visitUint32=null;lt.prototype.visitUint64=null;lt.prototype.visitFloat16=null;lt.prototype.visitFloat32=null;lt.prototype.visitFloat64=null;lt.prototype.visitDateDay=null;lt.prototype.visitDateMillisecond=null;lt.prototype.visitTimestampSecond=null;lt.prototype.visitTimestampMillisecond=null;lt.prototype.visitTimestampMicrosecond=null;lt.prototype.visitTimestampNanosecond=null;lt.prototype.visitTimeSecond=null;lt.prototype.visitTimeMillisecond=null;lt.prototype.visitTimeMicrosecond=null;lt.prototype.visitTimeNanosecond=null;lt.prototype.visitDenseUnion=null;lt.prototype.visitSparseUnion=null;lt.prototype.visitIntervalDayTime=null;lt.prototype.visitIntervalYearMonth=null;const Yp=new Float64Array(1),Sr=new Uint32Array(Yp.buffer);function Hp(e){const t=(e&31744)>>10,n=(e&1023)/1024,i=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return i*(n?Number.NaN:1/0);case 0:return i*(n?6103515625e-14*n:0)}return i*Math.pow(2,t-15)*(1+n)}function Wp(e){if(e!==e)return 32256;Yp[0]=e;const t=(Sr[1]&2147483648)>>16&65535;let n=Sr[1]&2146435072,i=0;return n>=1089470464?Sr[0]>0?n=31744:(n=(n&2080374784)>>16,i=(Sr[1]&1048575)>>10):n<=1056964608?(i=1048576+(Sr[1]&1048575),i=1048576+(i<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,i=(Sr[1]&1048575)+512>>10),t|n|i&65535}class W extends lt{}function J(e){return(t,n,i)=>{if(t.setValid(n,i!=null))return e(t,n,i)}}const Vx=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},Wc=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},jx=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},$x=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},Kp=(e,t,n,i)=>{if(n+1<t.length){const{[n]:r,[n+1]:s}=t;e.set(i.subarray(0,s-r),r)}},zx=({offset:e,values:t},n,i)=>{const r=e+n;i?t[r>>3]|=1<<r%8:t[r>>3]&=~(1<<r%8)},wi=({values:e},t,n)=>{e[t]=n},Kc=({values:e},t,n)=>{e[t]=n},Qp=({values:e},t,n)=>{e[t]=Wp(n)},qx=(e,t,n)=>{switch(e.type.precision){case me.HALF:return Qp(e,t,n);case me.SINGLE:case me.DOUBLE:return Kc(e,t,n)}},Qc=({values:e},t,n)=>{Vx(e,t,n.valueOf())},Xc=({values:e},t,n)=>{Wc(e,t*2,n.valueOf())},Xp=({stride:e,values:t},n,i)=>{t.set(i.subarray(0,e),e*n)},Gx=({values:e,valueOffsets:t},n,i)=>Kp(e,t,n,i),Yx=({values:e,valueOffsets:t},n,i)=>{Kp(e,t,n,Fo(i))},Jp=(e,t,n)=>{e.type.unit===En.DAY?Qc(e,t,n):Xc(e,t,n)},Jc=({values:e},t,n)=>Wc(e,t*2,n/1e3),Zc=({values:e},t,n)=>Wc(e,t*2,n),tl=({values:e},t,n)=>jx(e,t*2,n),el=({values:e},t,n)=>$x(e,t*2,n),Zp=(e,t,n)=>{switch(e.type.unit){case dt.SECOND:return Jc(e,t,n);case dt.MILLISECOND:return Zc(e,t,n);case dt.MICROSECOND:return tl(e,t,n);case dt.NANOSECOND:return el(e,t,n)}},nl=({values:e},t,n)=>{e[t]=n},il=({values:e},t,n)=>{e[t]=n},rl=({values:e},t,n)=>{e[t]=n},sl=({values:e},t,n)=>{e[t]=n},tm=(e,t,n)=>{switch(e.type.unit){case dt.SECOND:return nl(e,t,n);case dt.MILLISECOND:return il(e,t,n);case dt.MICROSECOND:return rl(e,t,n);case dt.NANOSECOND:return sl(e,t,n)}},em=({values:e,stride:t},n,i)=>{e.set(i.subarray(0,t),t*n)},Hx=(e,t,n)=>{const i=e.children[0],r=e.valueOffsets,s=cn.getVisitFn(i);if(Array.isArray(n))for(let a=-1,o=r[t],u=r[t+1];o<u;)s(i,o++,n[++a]);else for(let a=-1,o=r[t],u=r[t+1];o<u;)s(i,o++,n.get(++a))},Wx=(e,t,n)=>{const i=e.children[0],{valueOffsets:r}=e,s=cn.getVisitFn(i);let{[t]:a,[t+1]:o}=r;const u=n instanceof Map?n.entries():Object.entries(n);for(const c of u)if(s(i,a,c),++a>=o)break},Kx=(e,t)=>(n,i,r,s)=>i&&n(i,e,t[s]),Qx=(e,t)=>(n,i,r,s)=>i&&n(i,e,t.get(s)),Xx=(e,t)=>(n,i,r,s)=>i&&n(i,e,t.get(r.name)),Jx=(e,t)=>(n,i,r,s)=>i&&n(i,e,t[r.name]),Zx=(e,t,n)=>{const i=e.type.children.map(s=>cn.getVisitFn(s.type)),r=n instanceof Map?Xx(t,n):n instanceof _t?Qx(t,n):Array.isArray(n)?Kx(t,n):Jx(t,n);e.type.children.forEach((s,a)=>r(i[a],e.children[a],s,a))},tI=(e,t,n)=>{e.type.mode===Ke.Dense?nm(e,t,n):im(e,t,n)},nm=(e,t,n)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[i];cn.visit(r,e.valueOffsets[t],n)},im=(e,t,n)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[i];cn.visit(r,t,n)},eI=(e,t,n)=>{var i;(i=e.dictionary)===null||i===void 0||i.set(e.values[t],n)},rm=(e,t,n)=>{e.type.unit===Wn.DAY_TIME?al(e,t,n):ol(e,t,n)},al=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},ol=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},nI=(e,t,n)=>{const{stride:i}=e,r=e.children[0],s=cn.getVisitFn(r);if(Array.isArray(n))for(let a=-1,o=t*i;++a<i;)s(r,o+a,n[a]);else for(let a=-1,o=t*i;++a<i;)s(r,o+a,n.get(a))};W.prototype.visitBool=J(zx);W.prototype.visitInt=J(wi);W.prototype.visitInt8=J(wi);W.prototype.visitInt16=J(wi);W.prototype.visitInt32=J(wi);W.prototype.visitInt64=J(wi);W.prototype.visitUint8=J(wi);W.prototype.visitUint16=J(wi);W.prototype.visitUint32=J(wi);W.prototype.visitUint64=J(wi);W.prototype.visitFloat=J(qx);W.prototype.visitFloat16=J(Qp);W.prototype.visitFloat32=J(Kc);W.prototype.visitFloat64=J(Kc);W.prototype.visitUtf8=J(Yx);W.prototype.visitBinary=J(Gx);W.prototype.visitFixedSizeBinary=J(Xp);W.prototype.visitDate=J(Jp);W.prototype.visitDateDay=J(Qc);W.prototype.visitDateMillisecond=J(Xc);W.prototype.visitTimestamp=J(Zp);W.prototype.visitTimestampSecond=J(Jc);W.prototype.visitTimestampMillisecond=J(Zc);W.prototype.visitTimestampMicrosecond=J(tl);W.prototype.visitTimestampNanosecond=J(el);W.prototype.visitTime=J(tm);W.prototype.visitTimeSecond=J(nl);W.prototype.visitTimeMillisecond=J(il);W.prototype.visitTimeMicrosecond=J(rl);W.prototype.visitTimeNanosecond=J(sl);W.prototype.visitDecimal=J(em);W.prototype.visitList=J(Hx);W.prototype.visitStruct=J(Zx);W.prototype.visitUnion=J(tI);W.prototype.visitDenseUnion=J(nm);W.prototype.visitSparseUnion=J(im);W.prototype.visitDictionary=J(eI);W.prototype.visitInterval=J(rm);W.prototype.visitIntervalDayTime=J(al);W.prototype.visitIntervalYearMonth=J(ol);W.prototype.visitFixedSizeList=J(nI);W.prototype.visitMap=J(Wx);const cn=new W,pn=Symbol.for("parent"),Br=Symbol.for("rowIndex");class ul{constructor(t,n){return this[pn]=t,this[Br]=n,new Proxy(this,new rI)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Br],n=this[pn],i=n.type.children,r={};for(let s=-1,a=i.length;++s<a;)r[i[s].name]=De.visit(n.children[s],t);return r}toString(){return`{${[...this].map(([t,n])=>`${Ci(t)}: ${Ci(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new iI(this[pn],this[Br])}}class iI{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,De.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(ul.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[pn]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Br]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class rI{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[pn].type.children.map(n=>n.name)}has(t,n){return t[pn].type.children.findIndex(i=>i.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[pn].type.children.findIndex(i=>i.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const i=t[pn].type.children.findIndex(r=>r.name===n);if(i!==-1){const r=De.visit(t[pn].children[i],t[Br]);return Reflect.set(t,n,r),r}}set(t,n,i){const r=t[pn].type.children.findIndex(s=>s.name===n);return r!==-1?(cn.visit(t[pn].children[r],t[Br],i),Reflect.set(t,n,i)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,i):!1}}class z extends lt{}function K(e){return(t,n)=>t.getValid(n)?e(t,n):null}const sI=(e,t)=>864e5*e[t],cl=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),aI=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,oI=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,sm=e=>new Date(e),uI=(e,t)=>sm(sI(e,t)),cI=(e,t)=>sm(cl(e,t)),lI=(e,t)=>null,am=(e,t,n)=>{if(n+1>=t.length)return null;const i=t[n],r=t[n+1];return e.subarray(i,r)},hI=({offset:e,values:t},n)=>{const i=e+n;return(t[i>>3]&1<<i%8)!==0},om=({values:e},t)=>uI(e,t),um=({values:e},t)=>cI(e,t*2),qi=({stride:e,values:t},n)=>t[e*n],fI=({stride:e,values:t},n)=>Hp(t[e*n]),cm=({values:e},t)=>e[t],dI=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),pI=({values:e,valueOffsets:t},n)=>am(e,t,n),mI=({values:e,valueOffsets:t},n)=>{const i=am(e,t,n);return i!==null?Ju(i):null},_I=({values:e},t)=>e[t],yI=({type:e,values:t},n)=>e.precision!==me.HALF?t[n]:Hp(t[n]),gI=(e,t)=>e.type.unit===En.DAY?om(e,t):um(e,t),lm=({values:e},t)=>1e3*cl(e,t*2),hm=({values:e},t)=>cl(e,t*2),fm=({values:e},t)=>aI(e,t*2),dm=({values:e},t)=>oI(e,t*2),vI=(e,t)=>{switch(e.type.unit){case dt.SECOND:return lm(e,t);case dt.MILLISECOND:return hm(e,t);case dt.MICROSECOND:return fm(e,t);case dt.NANOSECOND:return dm(e,t)}},pm=({values:e},t)=>e[t],mm=({values:e},t)=>e[t],_m=({values:e},t)=>e[t],ym=({values:e},t)=>e[t],bI=(e,t)=>{switch(e.type.unit){case dt.SECOND:return pm(e,t);case dt.MILLISECOND:return mm(e,t);case dt.MICROSECOND:return _m(e,t);case dt.NANOSECOND:return ym(e,t)}},wI=({values:e,stride:t},n)=>Pc.decimal(e.subarray(t*n,t*(n+1))),SI=(e,t)=>{const{valueOffsets:n,stride:i,children:r}=e,{[t*i]:s,[t*i+1]:a}=n,u=r[0].slice(s,a-s);return new _t([u])},xI=(e,t)=>{const{valueOffsets:n,children:i}=e,{[t]:r,[t+1]:s}=n,a=i[0];return new Bo(a.slice(r,s-r))},II=(e,t)=>new ul(e,t),EI=(e,t)=>e.type.mode===Ke.Dense?gm(e,t):vm(e,t),gm=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[n];return De.visit(i,e.valueOffsets[t])},vm=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[n];return De.visit(i,t)},AI=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},kI=(e,t)=>e.type.unit===Wn.DAY_TIME?bm(e,t):wm(e,t),bm=({values:e},t)=>e.subarray(2*t,2*(t+1)),wm=({values:e},t)=>{const n=e[t],i=new Int32Array(2);return i[0]=Math.trunc(n/12),i[1]=Math.trunc(n%12),i},TI=(e,t)=>{const{stride:n,children:i}=e,s=i[0].slice(t*n,n);return new _t([s])};z.prototype.visitNull=K(lI);z.prototype.visitBool=K(hI);z.prototype.visitInt=K(_I);z.prototype.visitInt8=K(qi);z.prototype.visitInt16=K(qi);z.prototype.visitInt32=K(qi);z.prototype.visitInt64=K(cm);z.prototype.visitUint8=K(qi);z.prototype.visitUint16=K(qi);z.prototype.visitUint32=K(qi);z.prototype.visitUint64=K(cm);z.prototype.visitFloat=K(yI);z.prototype.visitFloat16=K(fI);z.prototype.visitFloat32=K(qi);z.prototype.visitFloat64=K(qi);z.prototype.visitUtf8=K(mI);z.prototype.visitBinary=K(pI);z.prototype.visitFixedSizeBinary=K(dI);z.prototype.visitDate=K(gI);z.prototype.visitDateDay=K(om);z.prototype.visitDateMillisecond=K(um);z.prototype.visitTimestamp=K(vI);z.prototype.visitTimestampSecond=K(lm);z.prototype.visitTimestampMillisecond=K(hm);z.prototype.visitTimestampMicrosecond=K(fm);z.prototype.visitTimestampNanosecond=K(dm);z.prototype.visitTime=K(bI);z.prototype.visitTimeSecond=K(pm);z.prototype.visitTimeMillisecond=K(mm);z.prototype.visitTimeMicrosecond=K(_m);z.prototype.visitTimeNanosecond=K(ym);z.prototype.visitDecimal=K(wI);z.prototype.visitList=K(SI);z.prototype.visitStruct=K(II);z.prototype.visitUnion=K(EI);z.prototype.visitDenseUnion=K(gm);z.prototype.visitSparseUnion=K(vm);z.prototype.visitDictionary=K(AI);z.prototype.visitInterval=K(kI);z.prototype.visitIntervalDayTime=K(bm);z.prototype.visitIntervalYearMonth=K(wm);z.prototype.visitFixedSizeList=K(TI);z.prototype.visitMap=K(xI);const De=new z,_n=Symbol.for("keys"),Dr=Symbol.for("vals");class Bo{constructor(t){return this[_n]=new _t([t.children[0]]).memoize(),this[Dr]=t.children[1],new Proxy(this,new NI)}[Symbol.iterator](){return new RI(this[_n],this[Dr])}get size(){return this[_n].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[_n],n=this[Dr],i={};for(let r=-1,s=t.length;++r<s;)i[t.get(r)]=De.visit(n,r);return i}toString(){return`{${[...this].map(([t,n])=>`${Ci(t)}: ${Ci(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class RI{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),De.visit(this.vals,t)]})}}class NI{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[_n].toArray().map(String)}has(t,n){return t[_n].includes(n)}getOwnPropertyDescriptor(t,n){if(t[_n].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const i=t[_n].indexOf(n);if(i!==-1){const r=De.visit(Reflect.get(t,Dr),i);return Reflect.set(t,n,r),r}}set(t,n,i){const r=t[_n].indexOf(n);return r!==-1?(cn.visit(Reflect.get(t,Dr),r,i),Reflect.set(t,n,i)):Reflect.has(t,n)?Reflect.set(t,n,i):!1}}Object.defineProperties(Bo.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[_n]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Dr]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let kf;function Sm(e,t,n,i){const{length:r=0}=e;let s=typeof t!="number"?0:t,a=typeof n!="number"?r:n;return s<0&&(s=(s%r+r)%r),a<0&&(a=(a%r+r)%r),a<s&&(kf=s,s=a,a=kf),a>r&&(a=r),i?i(e,s,a):[s,a]}const Tf=e=>e!==e;function ns(e){if(typeof e!=="object"||e===null)return Tf(e)?Tf:n=>n===e;if(e instanceof Date){const n=e.valueOf();return i=>i instanceof Date?i.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?Sx(e,n):!1:e instanceof Map?CI(e):Array.isArray(e)?OI(e):e instanceof _t?FI(e):LI(e,!0)}function OI(e){const t=[];for(let n=-1,i=e.length;++n<i;)t[n]=ns(e[n]);return Do(t)}function CI(e){let t=-1;const n=[];for(const i of e.values())n[++t]=ns(i);return Do(n)}function FI(e){const t=[];for(let n=-1,i=e.length;++n<i;)t[n]=ns(e.get(n));return Do(t)}function LI(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const i=[];for(let r=-1,s=n.length;++r<s;)i[r]=ns(e[n[r]]);return Do(i,n)}function Do(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return BI(e,n);case Map:return Rf(e,n,n.keys());case Bo:case ul:case Object:case void 0:return Rf(e,n,t||Object.keys(n))}return n instanceof _t?DI(e,n):!1}}function BI(e,t){const n=e.length;if(t.length!==n)return!1;for(let i=-1;++i<n;)if(!e[i](t[i]))return!1;return!0}function DI(e,t){const n=e.length;if(t.length!==n)return!1;for(let i=-1;++i<n;)if(!e[i](t.get(i)))return!1;return!0}function Rf(e,t,n){const i=n[Symbol.iterator](),r=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let a=0;const o=e.length;let u=s.next(),c=i.next(),l=r.next();for(;a<o&&!c.done&&!l.done&&!u.done&&!(c.value!==l.value||!e[a](u.value));++a,c=i.next(),l=r.next(),u=s.next());return a===o&&c.done&&l.done&&u.done?!0:(i.return&&i.return(),r.return&&r.return(),s.return&&s.return(),!1)}function xm(e,t,n,i){return(n&1<<i)!==0}function MI(e,t,n,i){return(n&1<<i)>>i}function ll(e,t,n){const i=n.byteLength+7&-8;if(e>0||n.byteLength<i){const r=new Uint8Array(i);return r.set(e%8===0?n.subarray(e>>3):eo(new hl(n,e,t,null,xm)).subarray(0,i)),r}return n}function eo(e){const t=[];let n=0,i=0,r=0;for(const a of e)a&&(r|=1<<i),++i===8&&(t[n++]=r,r=i=0);(n===0||i>0)&&(t[n++]=r);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class hl{constructor(t,n,i,r,s){this.bytes=t,this.length=i,this.context=r,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function nc(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const a of new hl(e,t,n-t,e,MI))s+=a;return s}const i=n>>3<<3,r=t+(t%8===0?0:8-t%8);return nc(e,t,r)+nc(e,i,n)+PI(e,r>>3,i-r>>3)}function PI(e,t,n){let i=0,r=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),a=n===void 0?e.byteLength:r+n;for(;a-r>=4;)i+=xu(s.getUint32(r)),r+=4;for(;a-r>=2;)i+=xu(s.getUint16(r)),r+=2;for(;a-r>=1;)i+=xu(s.getUint8(r)),r+=1;return i}function xu(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const UI=-1;class Ot{constructor(t,n,i,r,s,a=[],o){this.type=t,this.children=a,this.dictionary=o,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(i||0,0)),this._nullCount=Math.floor(Math.max(r||0,-1));let u;s instanceof Ot?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Mn(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:n,values:i,nullBitmap:r,typeIds:s}=this;return n&&(t+=n.byteLength),i&&(t+=i.byteLength),r&&(t+=r.byteLength),s&&(t+=s.byteLength),this.children.reduce((a,o)=>a+o.byteLength,t)}get nullCount(){let t=this._nullCount,n;return t<=UI&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-nc(n,this.offset,this.offset+this.length)),t}getValid(t){if(this.nullable&&this.nullCount>0){const n=this.offset+t;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(t,n){if(!this.nullable)return n;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:u}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:u,_nullCount:0})}const{nullBitmap:i,offset:r}=this,s=r+t>>3,a=(r+t)%8,o=i[s]>>a&1;return n?o===0&&(i[s]|=1<<a,this._nullCount=this.nullCount+1):o===1&&(i[s]&=~(1<<a),this._nullCount=this.nullCount-1),n}clone(t=this.type,n=this.offset,i=this.length,r=this._nullCount,s=this,a=this.children){return new Ot(t,n,i,r,s,a,this.dictionary)}slice(t,n){const{stride:i,typeId:r,children:s}=this,a=+(this._nullCount===0)-1,o=r===16?i:1,u=this._sliceBuffers(t,n,i,r);return this.clone(this.type,this.offset+t,n,a,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,o*t,o*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===_.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:i}=this,r=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);r[n>>3]=(1<<n-(n&-8))-1,i>0&&r.set(ll(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[si.VALIDITY]=r,this.clone(this.type,0,t,i+(t-n),s)}_sliceBuffers(t,n,i,r){let s;const{buffers:a}=this;return(s=a[si.TYPE])&&(a[si.TYPE]=s.subarray(t,t+n)),(s=a[si.OFFSET])&&(a[si.OFFSET]=s.subarray(t,t+n+1))||(s=a[si.DATA])&&(a[si.DATA]=r===6?s:s.subarray(i*t,i*(t+n))),a}_sliceChildren(t,n,i){return t.map(r=>r.slice(n,i))}}Ot.prototype.children=Object.freeze([]);class Is extends lt{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:i=0,["length"]:r=0}=t;return new Ot(n,i,r,0)}visitBool(t){const{["type"]:n,["offset"]:i=0}=t,r=wt(t.nullBitmap),s=Lt(n.ArrayType,t.data),{["length"]:a=s.length>>3,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Ot(n,i,a,o,[void 0,s,r])}visitInt(t){const{["type"]:n,["offset"]:i=0}=t,r=wt(t.nullBitmap),s=Lt(n.ArrayType,t.data),{["length"]:a=s.length,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Ot(n,i,a,o,[void 0,s,r])}visitFloat(t){const{["type"]:n,["offset"]:i=0}=t,r=wt(t.nullBitmap),s=Lt(n.ArrayType,t.data),{["length"]:a=s.length,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Ot(n,i,a,o,[void 0,s,r])}visitUtf8(t){const{["type"]:n,["offset"]:i=0}=t,r=wt(t.data),s=wt(t.nullBitmap),a=ms(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Ot(n,i,o,u,[a,r,s])}visitBinary(t){const{["type"]:n,["offset"]:i=0}=t,r=wt(t.data),s=wt(t.nullBitmap),a=ms(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Ot(n,i,o,u,[a,r,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:i=0}=t,r=wt(t.nullBitmap),s=Lt(n.ArrayType,t.data),{["length"]:a=s.length/Mn(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Ot(n,i,a,o,[void 0,s,r])}visitDate(t){const{["type"]:n,["offset"]:i=0}=t,r=wt(t.nullBitmap),s=Lt(n.ArrayType,t.data),{["length"]:a=s.length/Mn(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Ot(n,i,a,o,[void 0,s,r])}visitTimestamp(t){const{["type"]:n,["offset"]:i=0}=t,r=wt(t.nullBitmap),s=Lt(n.ArrayType,t.data),{["length"]:a=s.length/Mn(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Ot(n,i,a,o,[void 0,s,r])}visitTime(t){const{["type"]:n,["offset"]:i=0}=t,r=wt(t.nullBitmap),s=Lt(n.ArrayType,t.data),{["length"]:a=s.length/Mn(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Ot(n,i,a,o,[void 0,s,r])}visitDecimal(t){const{["type"]:n,["offset"]:i=0}=t,r=wt(t.nullBitmap),s=Lt(n.ArrayType,t.data),{["length"]:a=s.length/Mn(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Ot(n,i,a,o,[void 0,s,r])}visitList(t){const{["type"]:n,["offset"]:i=0,["child"]:r}=t,s=wt(t.nullBitmap),a=ms(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Ot(n,i,o,u,[a,void 0,s],[r])}visitStruct(t){const{["type"]:n,["offset"]:i=0,["children"]:r=[]}=t,s=wt(t.nullBitmap),{length:a=r.reduce((u,{length:c})=>Math.max(u,c),0),nullCount:o=t.nullBitmap?-1:0}=t;return new Ot(n,i,a,o,[void 0,void 0,s],r)}visitUnion(t){const{["type"]:n,["offset"]:i=0,["children"]:r=[]}=t,s=wt(t.nullBitmap),a=Lt(n.ArrayType,t.typeIds),{["length"]:o=a.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;if(j.isSparseUnion(n))return new Ot(n,i,o,u,[void 0,void 0,s,a],r);const c=ms(t.valueOffsets);return new Ot(n,i,o,u,[c,void 0,s,a],r)}visitDictionary(t){const{["type"]:n,["offset"]:i=0}=t,r=wt(t.nullBitmap),s=Lt(n.indices.ArrayType,t.data),{["dictionary"]:a=new _t([new Is().visit({type:n.dictionary})])}=t,{["length"]:o=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Ot(n,i,o,u,[void 0,s,r],[],a)}visitInterval(t){const{["type"]:n,["offset"]:i=0}=t,r=wt(t.nullBitmap),s=Lt(n.ArrayType,t.data),{["length"]:a=s.length/Mn(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Ot(n,i,a,o,[void 0,s,r])}visitFixedSizeList(t){const{["type"]:n,["offset"]:i=0,["child"]:r=new Is().visit({type:n.valueType})}=t,s=wt(t.nullBitmap),{["length"]:a=r.length/Mn(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Ot(n,i,a,o,[void 0,void 0,s],[r])}visitMap(t){const{["type"]:n,["offset"]:i=0,["child"]:r=new Is().visit({type:n.childType})}=t,s=wt(t.nullBitmap),a=ms(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Ot(n,i,o,u,[a,void 0,s],[r])}}function ct(e){return new Is().visit(e)}class Nf{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function Im(e){return e.reduce((t,n)=>t+n.nullCount,0)}function Em(e){return e.reduce((t,n,i)=>(t[i+1]=t[i]+n.length,t),new Uint32Array(e.length+1))}function Am(e,t,n,i){const r=[];for(let s=-1,a=e.length;++s<a;){const o=e[s],u=t[s],{length:c}=o;if(u>=i)break;if(n>=u+c)continue;if(u>=n&&u+c<=i){r.push(o);continue}const l=Math.max(0,n-u),h=Math.min(i-u,c);r.push(o.slice(l,h-l))}return r.length===0&&r.push(e[0].slice(0,0)),r}function fl(e,t,n,i){let r=0,s=0,a=t.length-1;do{if(r>=a-1)return n<t[a]?i(e,r,n-t[r]):null;s=r+Math.trunc((a-r)*.5),n<t[s]?a=s:r=s}while(r<a)}function dl(e,t){return e.getValid(t)}function Mr(e){function t(n,i,r){return e(n[i],r)}return function(n){const i=this.data;return fl(i,this._offsets,n,t)}}function km(e){let t;function n(i,r,s){return e(i[r],s,t)}return function(i,r){const s=this.data;t=r;const a=fl(s,this._offsets,i,n);return t=void 0,a}}function Tm(e){let t;function n(i,r,s){let a=s,o=0,u=0;for(let c=r-1,l=i.length;++c<l;){const h=i[c];if(~(o=e(h,t,a)))return u+o;a=0,u+=h.length}return-1}return function(i,r){t=i;const s=this.data,a=typeof r!="number"?n(s,0,0):fl(s,this._offsets,r,n);return t=void 0,a}}class q extends lt{}function VI(e,t){return t===null&&e.length>0?0:-1}function jI(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let i=0;for(const r of new hl(n,e.offset+(t||0),e.length,n,xm)){if(!r)return i;++i}return-1}function rt(e,t,n){if(t===void 0)return-1;if(t===null)return jI(e,n);const i=De.getVisitFn(e),r=ns(t);for(let s=(n||0)-1,a=e.length;++s<a;)if(r(i(e,s)))return s;return-1}function Rm(e,t,n){const i=De.getVisitFn(e),r=ns(t);for(let s=(n||0)-1,a=e.length;++s<a;)if(r(i(e,s)))return s;return-1}q.prototype.visitNull=VI;q.prototype.visitBool=rt;q.prototype.visitInt=rt;q.prototype.visitInt8=rt;q.prototype.visitInt16=rt;q.prototype.visitInt32=rt;q.prototype.visitInt64=rt;q.prototype.visitUint8=rt;q.prototype.visitUint16=rt;q.prototype.visitUint32=rt;q.prototype.visitUint64=rt;q.prototype.visitFloat=rt;q.prototype.visitFloat16=rt;q.prototype.visitFloat32=rt;q.prototype.visitFloat64=rt;q.prototype.visitUtf8=rt;q.prototype.visitBinary=rt;q.prototype.visitFixedSizeBinary=rt;q.prototype.visitDate=rt;q.prototype.visitDateDay=rt;q.prototype.visitDateMillisecond=rt;q.prototype.visitTimestamp=rt;q.prototype.visitTimestampSecond=rt;q.prototype.visitTimestampMillisecond=rt;q.prototype.visitTimestampMicrosecond=rt;q.prototype.visitTimestampNanosecond=rt;q.prototype.visitTime=rt;q.prototype.visitTimeSecond=rt;q.prototype.visitTimeMillisecond=rt;q.prototype.visitTimeMicrosecond=rt;q.prototype.visitTimeNanosecond=rt;q.prototype.visitDecimal=rt;q.prototype.visitList=rt;q.prototype.visitStruct=rt;q.prototype.visitUnion=rt;q.prototype.visitDenseUnion=Rm;q.prototype.visitSparseUnion=Rm;q.prototype.visitDictionary=rt;q.prototype.visitInterval=rt;q.prototype.visitIntervalDayTime=rt;q.prototype.visitIntervalYearMonth=rt;q.prototype.visitFixedSizeList=rt;q.prototype.visitMap=rt;const no=new q;class G extends lt{}function Q(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===_.Timestamp||t instanceof Se&&t.bitWidth!==64||t instanceof mi&&t.bitWidth!==64||t instanceof Bi&&t.precision!==me.HALF))return new Nf(e.data.length,i=>{const r=e.data[i];return r.values.subarray(0,r.length)[Symbol.iterator]()});let n=0;return new Nf(e.data.length,i=>{const s=e.data[i].length,a=e.slice(n,n+s);return n+=s,new $I(a)})}class $I{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}G.prototype.visitNull=Q;G.prototype.visitBool=Q;G.prototype.visitInt=Q;G.prototype.visitInt8=Q;G.prototype.visitInt16=Q;G.prototype.visitInt32=Q;G.prototype.visitInt64=Q;G.prototype.visitUint8=Q;G.prototype.visitUint16=Q;G.prototype.visitUint32=Q;G.prototype.visitUint64=Q;G.prototype.visitFloat=Q;G.prototype.visitFloat16=Q;G.prototype.visitFloat32=Q;G.prototype.visitFloat64=Q;G.prototype.visitUtf8=Q;G.prototype.visitBinary=Q;G.prototype.visitFixedSizeBinary=Q;G.prototype.visitDate=Q;G.prototype.visitDateDay=Q;G.prototype.visitDateMillisecond=Q;G.prototype.visitTimestamp=Q;G.prototype.visitTimestampSecond=Q;G.prototype.visitTimestampMillisecond=Q;G.prototype.visitTimestampMicrosecond=Q;G.prototype.visitTimestampNanosecond=Q;G.prototype.visitTime=Q;G.prototype.visitTimeSecond=Q;G.prototype.visitTimeMillisecond=Q;G.prototype.visitTimeMicrosecond=Q;G.prototype.visitTimeNanosecond=Q;G.prototype.visitDecimal=Q;G.prototype.visitList=Q;G.prototype.visitStruct=Q;G.prototype.visitUnion=Q;G.prototype.visitDenseUnion=Q;G.prototype.visitSparseUnion=Q;G.prototype.visitDictionary=Q;G.prototype.visitInterval=Q;G.prototype.visitIntervalDayTime=Q;G.prototype.visitIntervalYearMonth=Q;G.prototype.visitFixedSizeList=Q;G.prototype.visitMap=Q;const pl=new G,zI=(e,t)=>e+t;class Gi extends lt{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===dt.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitStruct(t,n){return t.children.reduce((i,r)=>i+Kn.visit(r,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((i,r)=>i+Kn.visit(r,n),0)}visitDictionary(t,n){var i;return t.type.indices.bitWidth/8+(((i=t.dictionary)===null||i===void 0?void 0:i.getByteLength(t.values[n]))||0)}}const qI=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),GI=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),YI=({valueOffsets:e,stride:t,children:n},i)=>{const r=n[0],{[i*t]:s}=e,{[i*t+1]:a}=e,o=Kn.getVisitFn(r.type),u=r.slice(s,a-s);let c=8;for(let l=-1,h=a-s;++l<h;)c+=o(u,l);return c},HI=({stride:e,children:t},n)=>{const i=t[0],r=i.slice(n*e,e),s=Kn.getVisitFn(i.type);let a=0;for(let o=-1,u=r.length;++o<u;)a+=s(r,o);return a},WI=(e,t)=>e.type.mode===Ke.Dense?Nm(e,t):Om(e,t),Nm=({type:e,children:t,typeIds:n,valueOffsets:i},r)=>{const s=e.typeIdToChildIndex[n[r]];return 8+Kn.visit(t[s],i[r])},Om=({children:e},t)=>4+Kn.visitMany(e,e.map(()=>t)).reduce(zI,0);Gi.prototype.visitUtf8=qI;Gi.prototype.visitBinary=GI;Gi.prototype.visitList=YI;Gi.prototype.visitFixedSizeList=HI;Gi.prototype.visitUnion=WI;Gi.prototype.visitDenseUnion=Nm;Gi.prototype.visitSparseUnion=Om;const Kn=new Gi;var Cm;const Fm={},Lm={};class _t{constructor(t){var n,i,r;const s=t[0]instanceof _t?t.flatMap(o=>o.data):t;if(s.length===0||s.some(o=>!(o instanceof Ot)))throw new TypeError("Vector constructor expects an Array of Data instances.");const a=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:o,set:u,indexOf:c,byteLength:l}=Fm[a.typeId],h=s[0];this.isValid=p=>dl(h,p),this.get=p=>o(h,p),this.set=(p,m)=>u(h,p,m),this.indexOf=p=>c(h,p),this.getByteLength=p=>l(h,p),this._offsets=[0,h.length];break}default:Object.setPrototypeOf(this,Lm[a.typeId]),this._offsets=Em(s);break}this.data=s,this.type=a,this.stride=Mn(a),this.numChildren=(r=(i=a.children)===null||i===void 0?void 0:i.length)!==null&&r!==void 0?r:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((t,n)=>t+n.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=Im(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${_[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>0}getByteLength(t){return 0}[Symbol.iterator](){return pl.visit(this)}concat(...t){return new _t(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new _t(Sm(this,t,n,({data:i,_offsets:r},s,a)=>Am(i,r,s,a)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:i,stride:r,ArrayType:s}=this;switch(t.typeId){case _.Int:case _.Float:case _.Decimal:case _.Time:case _.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,i*r);default:return n.reduce((a,{values:o,length:u})=>(a.array.set(o.subarray(0,u*r),a.offset),a.offset+=u*r,a),{array:new s(i*r),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(i=>i.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new _t(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return j.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(j.isDictionary(this.type)){const t=new io(this.data[0].dictionary),n=this.data.map(i=>{const r=i.clone();return r.dictionary=t,r});return new _t(n)}return new io(this)}unmemoize(){if(j.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(i=>{const r=i.clone();return r.dictionary=t,r});return new _t(n)}return this}}Cm=Symbol.toStringTag;_t[Cm]=(e=>{e.type=j.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._nullCount=-1,e._byteLength=-1,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(_).map(n=>_[n]).filter(n=>typeof n=="number"&&n!==_.NONE);for(const n of t){const i=De.getVisitFnByTypeId(n),r=cn.getVisitFnByTypeId(n),s=no.getVisitFnByTypeId(n),a=Kn.getVisitFnByTypeId(n);Fm[n]={get:i,set:r,indexOf:s,byteLength:a},Lm[n]=Object.create(e,{isValid:{value:Mr(dl)},get:{value:Mr(De.getVisitFnByTypeId(n))},set:{value:km(cn.getVisitFnByTypeId(n))},indexOf:{value:Tm(no.getVisitFnByTypeId(n))},getByteLength:{value:Mr(Kn.getVisitFnByTypeId(n))}})}return"Vector"})(_t.prototype);class io extends _t{constructor(t){super(t.data);const n=this.get,i=this.set,r=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(a){const o=s[a];if(o!==void 0)return o;const u=n.call(this,a);return s[a]=u,u}}),Object.defineProperty(this,"set",{value(a,o){i.call(this,a,o),s[a]=o}}),Object.defineProperty(this,"slice",{value:(a,o)=>new io(r.call(this,a,o))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new _t(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function KI(e){if(!e||e.length<=0)return function(r){return!0};let t="";const n=e.filter(i=>i===i);return n.length>0&&(t=`
    switch (x) {${n.map(i=>`
        case ${QI(i)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function QI(e){return typeof e!="bigint"?Ci(e):gp?`${Ci(e)}n`:`"${Ci(e)}"`}const Iu=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,XI=(e,t=0)=>e.length>=t?e.subarray(0,t):Xa(new e.constructor(t),e,0);class Mo{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,i=this.length*n,r=this.buffer.length;i>=r&&this._resize(r===0?Iu(i*1,this.BYTES_PER_ELEMENT):Iu(i*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=Iu(t*this.stride,this.BYTES_PER_ELEMENT);const n=XI(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=Xa(new this.ArrayType(t),this.buffer)}}Mo.prototype.offset=0;class ta extends Mo{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class Bm extends ta{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:i}=this.reserve(t-this.length+1),r=t>>3,s=t%8,a=i[r]>>s&1;return n?a===0&&(i[r]|=1<<s,++this.numValid):a===1&&(i[r]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class Dm extends ta{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const i=this.length-1,r=this.reserve(t-i+1).buffer;return i<t++&&r.fill(r[i],i,t),r[t]=r[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let $e=class{constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=Mn(t),this._nulls=new Bm,n&&n.length>0&&(this._isValid=KI(n))}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}toVector(){return new _t([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:i,_nulls:r,_typeIds:s,children:a}=this;return n&&(t+=n.byteLength),i&&(t+=i.byteLength),r&&(t+=r.byteLength),s&&(t+=s.byteLength),a.reduce((o,u)=>o+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,i)=>n+i.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,i,r;const{type:s,length:a,nullCount:o,_typeIds:u,_offsets:c,_values:l,_nulls:h}=this;(n=u==null?void 0:u.flush(a))?r=c==null?void 0:c.flush(a):(r=c==null?void 0:c.flush(a))?t=l==null?void 0:l.flush(c.last()):t=l==null?void 0:l.flush(a),o>0&&(i=h==null?void 0:h.flush(a));const p=this.children.map(m=>m.flush());return this.clear(),ct({type:s,length:a,nullCount:o,children:p,child:p[0],data:t,typeIds:n,nullBitmap:i,valueOffsets:r})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,i,r;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(i=this._offsets)===null||i===void 0||i.clear(),(r=this._typeIds)===null||r===void 0||r.clear();for(const s of this.children)s.clear();return this}};$e.prototype.length=1;$e.prototype.stride=1;$e.prototype.children=null;$e.prototype.finished=!1;$e.prototype.nullValues=null;$e.prototype._isValid=()=>!0;class Yi extends $e{constructor(t){super(t),this._values=new ta(new this.ArrayType(0),this.stride)}setValue(t,n){const i=this._values;return i.reserve(t-i.length+1),super.setValue(t,n)}}class Po extends $e{constructor(t){super(t),this._pendingLength=0,this._offsets=new Dm}setValue(t,n){const i=this._pending||(this._pending=new Map),r=i.get(t);r&&(this._pendingLength-=r.length),this._pendingLength+=n instanceof Bo?n[_n].length:n.length,i.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class ic{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,i,r){return t.prep(8,24),t.writeInt64(r),t.pad(4),t.writeInt32(i),t.writeInt64(n),t.offset()}}const Eu=2,Pn=4,ui=4,Bt=4,Ni=new Int32Array(2),Of=new Float32Array(Ni.buffer),Cf=new Float64Array(Ni.buffer),wa=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;let hi=class rc{constructor(t,n){this.low=t|0,this.high=n|0}static create(t,n){return t==0&&n==0?rc.ZERO:new rc(t,n)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(t){return this.low==t.low&&this.high==t.high}};hi.ZERO=new hi(0,0);var sc;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(sc||(sc={}));let Gr=class Mm{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new Mm(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new hi(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new hi(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return Ni[0]=this.readInt32(t),Of[0]}readFloat64(t){return Ni[wa?0:1]=this.readInt32(t),Ni[wa?1:0]=this.readInt32(t+4),Cf[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,n.low),this.writeInt32(t+4,n.high)}writeUint64(t,n){this.writeUint32(t,n.low),this.writeUint32(t+4,n.high)}writeFloat32(t,n){Of[0]=n,this.writeInt32(t,Ni[0])}writeFloat64(t,n){Cf[0]=n,this.writeInt32(t,Ni[wa?0:1]),this.writeInt32(t+4,Ni[wa?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Pn+ui)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<ui;n++)t+=String.fromCharCode(this.readInt8(this.position_+Pn+n));return t}__offset(t,n){const i=t-this.readInt32(t);return n<this.readInt16(i)?this.readInt16(i+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const i=this.readInt32(t);let r="",s=0;if(t+=Pn,n===sc.UTF8_BYTES)return this.bytes_.subarray(t,t+i);for(;s<i;){let a;const o=this.readUint8(t+s++);if(o<192)a=o;else{const u=this.readUint8(t+s++);if(o<224)a=(o&31)<<6|u&63;else{const c=this.readUint8(t+s++);if(o<240)a=(o&15)<<12|(u&63)<<6|c&63;else{const l=this.readUint8(t+s++);a=(o&7)<<18|(u&63)<<12|(c&63)<<6|l&63}}}a<65536?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode((a>>10)+55296,(a&1024-1)+56320))}return r}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Pn}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=ui)throw new Error("FlatBuffers: file identifier must be length "+ui);for(let n=0;n<ui;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Pn+n))return!1;return!0}createLong(t,n){return hi.create(t,n)}createScalarList(t,n){const i=[];for(let r=0;r<n;++r)t(r)!==null&&i.push(t(r));return i}createObjList(t,n){const i=[];for(let r=0;r<n;++r){const s=t(r);s!==null&&i.push(s.unpack())}return i}},Pm=class Um{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let n;t?n=t:n=1024,this.bb=Gr.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const i=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<i+t+n;){const r=this.bb.capacity();this.bb=Um.growByteBuffer(this.bb),this.space+=this.bb.capacity()-r}this.pad(i)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,i){(this.force_defaults||n!=i)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,i){(this.force_defaults||n!=i)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,i){(this.force_defaults||n!=i)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,i){(this.force_defaults||!n.equals(i))&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,i){(this.force_defaults||n!=i)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,i){(this.force_defaults||n!=i)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,i){(this.force_defaults||n!=i)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,i){n!=i&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const i=n<<1,r=Gr.allocate(i);return r.setPosition(i-n),r.bytes().set(t.bytes(),i-n),r}addOffset(t){this.prep(Pn,0),this.writeInt32(this.offset()-t+Pn)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const i=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const r=2;this.addInt16(t-this.object_start);const s=(i+r)*Eu;this.addInt16(s);let a=0;const o=this.space;t:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let c=Eu;c<s;c+=Eu)if(this.bb.readInt16(o+c)!=this.bb.readInt16(u+c))continue t;a=this.vtables[n];break}}return a?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,a-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,i){const r=i?Bt:0;if(n){const s=n;if(this.prep(this.minalign,Pn+ui+r),s.length!=ui)throw new Error("FlatBuffers: file identifier must be length "+ui);for(let a=ui-1;a>=0;a--)this.writeInt8(s.charCodeAt(a))}this.prep(this.minalign,Pn+r),this.addOffset(t),r&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const i=this.bb.capacity()-t,r=i-this.bb.readInt32(i);if(!(this.bb.readInt16(r+n)!=0))throw new Error("FlatBuffers: field "+n+" must be set")}startVector(t,n,i){this.notNested(),this.vector_num_elems=n,this.prep(Pn,t*n),this.prep(i,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(!t)return 0;let n;if(t instanceof Uint8Array)n=t;else{n=[];let i=0;for(;i<t.length;){let r;const s=t.charCodeAt(i++);if(s<55296||s>=56320)r=s;else{const a=t.charCodeAt(i++);r=(s<<10)+a+(65536-56623104-56320)}r<128?n.push(r):(r<2048?n.push(r>>6&31|192):(r<65536?n.push(r>>12&15|224):n.push(r>>18&7|240,r>>12&63|128),n.push(r>>6&63|128)),n.push(r&63|128))}}this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let i=0,r=this.space,s=this.bb.bytes();i<n.length;i++)s[r++]=n[i];return this.endVector()}createLong(t,n){return hi.create(t,n)}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let i=0;i<t.length;++i){const r=t[i];if(r!==null)n.push(this.createObjectOffset(r));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t),this.endVector()}};class se{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new se).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Bt),(n||new se).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,i){return se.startKeyValue(t),se.addKey(t,n),se.addValue(t,i),se.endKeyValue(t)}}var Yr;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Yr||(Yr={}));var Hr;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(Hr||(Hr={}));var ro;(function(e){e[e.DenseArray=0]="DenseArray"})(ro||(ro={}));class Ye{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new Ye).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Bt),(n||new Ye).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,i){return Ye.startInt(t),Ye.addBitWidth(t,n),Ye.addIsSigned(t,i),Ye.endInt(t)}}class ci{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new ci).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Bt),(n||new ci).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Ye).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):ro.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,ro.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class er{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new er).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Bt),(n||new er).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return er.startBinary(t),er.endBinary(t)}}class nr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new nr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Bt),(n||new nr).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return nr.startBool(t),nr.endBool(t)}}var so;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(so||(so={}));let Na=class Ir{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new Ir).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Bt),(n||new Ir).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):so.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,so.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return Ir.startDate(t),Ir.addUnit(t,n),Ir.endDate(t)}};class Re{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new Re).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Bt),(n||new Re).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,i,r){return Re.startDecimal(t),Re.addPrecision(t,n),Re.addScale(t,i),Re.addBitWidth(t,r),Re.endDecimal(t)}}var Wr;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Wr||(Wr={}));class Un{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new Un).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Bt),(n||new Un).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return Un.startFixedSizeBinary(t),Un.addByteWidth(t,n),Un.endFixedSizeBinary(t)}}class Vn{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Vn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Bt),(n||new Vn).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Vn.startFixedSizeList(t),Vn.addListSize(t,n),Vn.endFixedSizeList(t)}}var ao;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(ao||(ao={}));class jn{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new jn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Bt),(n||new jn).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ao.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,ao.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return jn.startFloatingPoint(t),jn.addPrecision(t,n),jn.endFloatingPoint(t)}}var oo;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(oo||(oo={}));class $n{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new $n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Bt),(n||new $n).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):oo.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,oo.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return $n.startInterval(t),$n.addUnit(t,n),$n.endInterval(t)}}class ir{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new ir).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Bt),(n||new ir).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return ir.startList(t),ir.endList(t)}}let Oa=class Er{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new Er).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Bt),(n||new Er).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return Er.startMap(t),Er.addKeysSorted(t,n),Er.endMap(t)}};class rr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new rr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Bt),(n||new rr).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return rr.startNull(t),rr.endNull(t)}}class sr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new sr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Bt),(n||new sr).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return sr.startStruct_(t),sr.endStruct_(t)}}class sn{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new sn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Bt),(n||new sn).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Wr.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Wr.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,i){return sn.startTime(t),sn.addUnit(t,n),sn.addBitWidth(t,i),sn.endTime(t)}}class an{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new an).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Bt),(n||new an).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Wr.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Wr.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,i){return an.startTimestamp(t),an.addUnit(t,n),an.addTimezone(t,i),an.endTimestamp(t)}}var uo;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(uo||(uo={}));class Ne{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new Ne).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Bt),(n||new Ne).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):uo.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,uo.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addInt32(n[i]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,i){return Ne.startUnion(t),Ne.addMode(t,n),Ne.addTypeIds(t,i),Ne.endUnion(t)}}class ar{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new ar).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Bt),(n||new ar).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return ar.startUtf8(t),ar.endUtf8(t)}}var zt;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList"})(zt||(zt={}));let en=class Ca{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new Ca).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Bt),(n||new Ca).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):zt.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new ci).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const i=this.bb.__offset(this.bb_pos,14);return i?(n||new Ca).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,16);return i?(n||new se).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,zt.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Fn=class ri{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new ri).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Bt),(n||new ri).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Hr.Little}fields(t,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new en).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new se).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,Hr.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let i=n.length-1;i>=0;i--)t.addInt64(n[i]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,i,r,s){return ri.startSchema(t),ri.addEndianness(t,n),ri.addFields(t,i),ri.addCustomMetadata(t,r),ri.addFeatures(t,s),ri.endSchema(t)}};class Ge{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new Ge).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Bt),(n||new Ge).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Yr.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Fn).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new ic).__init(this.bb.__vector(this.bb_pos+i)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const i=this.bb.__offset(this.bb_pos,10);return i?(n||new ic).__init(this.bb.__vector(this.bb_pos+i)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new se).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Yr.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class At{constructor(t=[],n,i){this.fields=t||[],this.metadata=n||new Map,i||(i=ac(t)),this.dictionaries=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),i=this.fields.filter(r=>n.has(r.name));return new At(i,this.metadata)}selectAt(t){const n=t.map(i=>this.fields[i]).filter(Boolean);return new At(n,this.metadata)}assign(...t){const n=t[0]instanceof At?t[0]:Array.isArray(t[0])?new At(t[0]):new At(t),i=[...this.fields],r=Sa(Sa(new Map,this.metadata),n.metadata),s=n.fields.filter(o=>{const u=i.findIndex(c=>c.name===o.name);return~u?(i[u]=o.clone({metadata:Sa(Sa(new Map,i[u].metadata),o.metadata)}))&&!1:!0}),a=ac(s,new Map);return new At([...i,...s],r,new Map([...this.dictionaries,...a]))}}At.prototype.fields=null;At.prototype.metadata=null;At.prototype.dictionaries=null;class xt{constructor(t,n,i=!1,r){this.name=t,this.type=n,this.nullable=i,this.metadata=r||new Map}static new(...t){let[n,i,r,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],i===void 0&&(i=t[0].type),r===void 0&&(r=t[0].nullable),s===void 0&&(s=t[0].metadata)),new xt(`${n}`,i,r,s)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,i,r,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,i=this.type,r=this.nullable,s=this.metadata]=t:{name:n=this.name,type:i=this.type,nullable:r=this.nullable,metadata:s=this.metadata}=t[0],xt.new(n,i,r,s)}}xt.prototype.type=null;xt.prototype.name=null;xt.prototype.nullable=null;xt.prototype.metadata=null;function Sa(e,t){return new Map([...e||new Map,...t||new Map])}function ac(e,t=new Map){for(let n=-1,i=e.length;++n<i;){const s=e[n].type;if(j.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&ac(s.children,t)}return t}var Ff=hi,JI=Pm,ZI=Gr;class js{constructor(t,n=He.V4,i,r){this.schema=t,this.version=n,i&&(this._recordBatches=i),r&&(this._dictionaryBatches=r)}static decode(t){t=new ZI(wt(t));const n=Ge.getRootAsFooter(t),i=At.decode(n.schema());return new tE(i,n)}static encode(t){const n=new JI,i=At.encode(n,t.schema);Ge.startRecordBatchesVector(n,t.numRecordBatches);for(const a of[...t.recordBatches()].slice().reverse())Mi.encode(n,a);const r=n.endVector();Ge.startDictionariesVector(n,t.numDictionaries);for(const a of[...t.dictionaryBatches()].slice().reverse())Mi.encode(n,a);const s=n.endVector();return Ge.startFooter(n),Ge.addSchema(n,i),Ge.addVersion(n,He.V4),Ge.addRecordBatches(n,r),Ge.addDictionaries(n,s),Ge.finishFooterBuffer(n,Ge.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,n=-1,i=this.numRecordBatches;++n<i;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,i=this.numDictionaries;++n<i;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class tE extends js{constructor(t,n){super(t,n.version()),this._footer=n}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return Mi.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return Mi.decode(n)}return null}}class Mi{constructor(t,n,i){this.metaDataLength=t,this.offset=typeof i=="number"?i:i.low,this.bodyLength=typeof n=="number"?n:n.low}static decode(t){return new Mi(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:i}=n,r=new Ff(n.offset,0),s=new Ff(n.bodyLength,0);return ic.createBlock(t,r,i,s)}}const Gt=Object.freeze({done:!0,value:void 0});class Lf{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class ml{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class eE extends ml{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return U(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(Gt);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return rn.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return rn.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return U(this,void 0,void 0,function*(){return yield this.abort(t),Gt})}return(t){return U(this,void 0,void 0,function*(){return yield this.close(),Gt})}read(t){return U(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return U(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,i)=>{this.resolvers.push({resolve:n,reject:i})}):Promise.resolve(Gt)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class Fa extends eE{write(t){if((t=wt(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?Ju(this.toUint8Array(!0)):this.toUint8Array(!1).then(Ju)}toUint8Array(t=!1){return t?Hn(this._values)[0]:(()=>U(this,void 0,void 0,function*(){var n,i;const r=[];let s=0;try{for(var a=lr(this),o;o=yield a.next(),!o.done;){const u=o.value;r.push(u),s+=u.byteLength}}catch(u){n={error:u}}finally{try{o&&!o.done&&(i=a.return)&&(yield i.call(a))}finally{if(n)throw n.error}}return Hn(r,s)[0]}))()}}class co{constructor(t){t&&(this.source=new nE(rn.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Kr{constructor(t){t instanceof Kr?this.source=t.source:t instanceof Fa?this.source=new Xi(rn.fromAsyncIterable(t)):xp(t)?this.source=new Xi(rn.fromNodeStream(t)):Bc(t)?this.source=new Xi(rn.fromDOMStream(t)):Sp(t)?this.source=new Xi(rn.fromDOMStream(t.body)):Zs(t)?this.source=new Xi(rn.fromIterable(t)):pr(t)?this.source=new Xi(rn.fromAsyncIterable(t)):es(t)&&(this.source=new Xi(rn.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class nE{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,n="read"){return this.source.next({cmd:n,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||Gt)}return(t){return Object.create(this.source.return&&this.source.return(t)||Gt)}}class Xi{constructor(t){this.source=t,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(t){return U(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return U(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return U(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t,n="read"){return U(this,void 0,void 0,function*(){return yield this.source.next({cmd:n,size:t})})}throw(t){return U(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(t))||Gt;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(t){return U(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(t))||Gt;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}}class Bf extends co{constructor(t,n){super(),this.position=0,this.buffer=wt(t),this.size=typeof n>"u"?this.buffer.byteLength:n}readInt32(t){const{buffer:n,byteOffset:i}=this.readAt(t,4);return new DataView(n,i).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:n,size:i,position:r}=this;return n&&r<i?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(i,r+Math.min(i-r,t)),n.subarray(r,this.position)):null}readAt(t,n){const i=this.buffer,r=Math.min(this.size,t+n);return i?i.subarray(t,r):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class lo extends Kr{constructor(t,n){super(),this.position=0,this._handle=t,typeof n=="number"?this.size=n:this._pending=(()=>U(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending}))()}readInt32(t){return U(this,void 0,void 0,function*(){const{buffer:n,byteOffset:i}=yield this.readAt(t,4);return new DataView(n,i).getInt32(0,!0)})}seek(t){return U(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return U(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:i,position:r}=this;if(n&&r<i){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let s=r,a=0,o=0;const u=Math.min(i,s+Math.min(i-s,t)),c=new Uint8Array(Math.max(0,(this.position=u)-s));for(;(s+=o)<u&&(a+=o)<c.byteLength;)({bytesRead:o}=yield n.read(c,a,c.byteLength-a,s));return c}return null})}readAt(t,n){return U(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:i,size:r}=this;if(i&&t+n<r){const s=Math.min(r,t+n),a=new Uint8Array(s-t);return(yield i.read(a,0,n,t)).buffer}return new Uint8Array(n)})}close(){return U(this,void 0,void 0,function*(){const t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return U(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return U(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}}const iE=65536;function kr(e){return e<0&&(e=4294967295+e+1),`0x${e.toString(16)}`}const Qr=8,_l=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class Vm{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),i=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]);let r=n[3]*i[3];this.buffer[0]=r&65535;let s=r>>>16;return r=n[2]*i[3],s+=r,r=n[3]*i[2]>>>0,s+=r,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<r?iE:0,this.buffer[1]+=s>>>16,this.buffer[1]+=n[1]*i[3]+n[2]*i[2]+n[3]*i[1],this.buffer[1]+=n[0]*i[3]+n[1]*i[2]+n[2]*i[1]+n[3]*i[0]<<16,this}_plus(t){const n=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${kr(this.buffer[1])} ${kr(this.buffer[0])}`}}class kt extends Vm{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,n=new Uint32Array(2)){return kt.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return kt.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const i=t.length,r=new kt(n);for(let s=0;s<i;){const a=Qr<i-s?Qr:i-s,o=new kt(new Uint32Array([Number.parseInt(t.slice(s,s+a),10),0])),u=new kt(new Uint32Array([_l[a],0]));r.times(u),r.plus(o),s+=a}return r}static convertArray(t){const n=new Uint32Array(t.length*2);for(let i=-1,r=t.length;++i<r;)kt.from(t[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(t,n){return new kt(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new kt(new Uint32Array(t.buffer)).plus(n)}}class Te extends Vm{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const n=this.buffer[1]<<0,i=t.buffer[1]<<0;return n<i||n===i&&this.buffer[0]<t.buffer[0]}static from(t,n=new Uint32Array(2)){return Te.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return Te.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const i=t.startsWith("-"),r=t.length,s=new Te(n);for(let a=i?1:0;a<r;){const o=Qr<r-a?Qr:r-a,u=new Te(new Uint32Array([Number.parseInt(t.slice(a,a+o),10),0])),c=new Te(new Uint32Array([_l[o],0]));s.times(c),s.plus(u),a+=o}return i?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*2);for(let i=-1,r=t.length;++i<r;)Te.from(t[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(t,n){return new Te(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new Te(new Uint32Array(t.buffer)).plus(n)}}class Ln{constructor(t){this.buffer=t}high(){return new Te(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new Te(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){const n=new kt(new Uint32Array([this.buffer[3],0])),i=new kt(new Uint32Array([this.buffer[2],0])),r=new kt(new Uint32Array([this.buffer[1],0])),s=new kt(new Uint32Array([this.buffer[0],0])),a=new kt(new Uint32Array([t.buffer[3],0])),o=new kt(new Uint32Array([t.buffer[2],0])),u=new kt(new Uint32Array([t.buffer[1],0])),c=new kt(new Uint32Array([t.buffer[0],0]));let l=kt.multiply(s,c);this.buffer[0]=l.low();const h=new kt(new Uint32Array([l.high(),0]));return l=kt.multiply(r,c),h.plus(l),l=kt.multiply(s,u),h.plus(l),this.buffer[1]=h.low(),this.buffer[3]=h.lessThan(l)?1:0,this.buffer[2]=h.high(),new kt(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(kt.multiply(i,c)).plus(kt.multiply(r,u)).plus(kt.multiply(s,o)),this.buffer[3]+=kt.multiply(n,c).plus(kt.multiply(i,u)).plus(kt.multiply(r,o)).plus(kt.multiply(s,a)).low(),this}plus(t){const n=new Uint32Array(4);return n[3]=this.buffer[3]+t.buffer[3]>>>0,n[2]=this.buffer[2]+t.buffer[2]>>>0,n[1]=this.buffer[1]+t.buffer[1]>>>0,n[0]=this.buffer[0]+t.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${kr(this.buffer[3])} ${kr(this.buffer[2])} ${kr(this.buffer[1])} ${kr(this.buffer[0])}`}static multiply(t,n){return new Ln(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new Ln(new Uint32Array(t.buffer)).plus(n)}static from(t,n=new Uint32Array(4)){return Ln.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(4)){return Ln.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(4)){const i=t.startsWith("-"),r=t.length,s=new Ln(n);for(let a=i?1:0;a<r;){const o=Qr<r-a?Qr:r-a,u=new Ln(new Uint32Array([Number.parseInt(t.slice(a,a+o),10),0,0,0])),c=new Ln(new Uint32Array([_l[o],0,0,0]));s.times(c),s.plus(u),a+=o}return i?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*4);for(let i=-1,r=t.length;++i<r;)Ln.from(t[i],new Uint32Array(n.buffer,n.byteOffset+4*4*i,4));return n}}class jm extends lt{constructor(t,n,i,r){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=n,this.buffers=i,this.dictionaries=r}visit(t){return super.visit(t instanceof xt?t.type:t)}visitNull(t,{length:n}=this.nextFieldNode()){return ct({type:t,length:n})}visitBool(t,{length:n,nullCount:i}=this.nextFieldNode()){return ct({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitInt(t,{length:n,nullCount:i}=this.nextFieldNode()){return ct({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitFloat(t,{length:n,nullCount:i}=this.nextFieldNode()){return ct({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitUtf8(t,{length:n,nullCount:i}=this.nextFieldNode()){return ct({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:n,nullCount:i}=this.nextFieldNode()){return ct({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:n,nullCount:i}=this.nextFieldNode()){return ct({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitDate(t,{length:n,nullCount:i}=this.nextFieldNode()){return ct({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitTimestamp(t,{length:n,nullCount:i}=this.nextFieldNode()){return ct({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitTime(t,{length:n,nullCount:i}=this.nextFieldNode()){return ct({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitDecimal(t,{length:n,nullCount:i}=this.nextFieldNode()){return ct({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitList(t,{length:n,nullCount:i}=this.nextFieldNode()){return ct({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:n,nullCount:i}=this.nextFieldNode()){return ct({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),children:this.visitMany(t.children)})}visitUnion(t){return t.mode===Ke.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t,{length:n,nullCount:i}=this.nextFieldNode()){return ct({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:n,nullCount:i}=this.nextFieldNode()){return ct({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:n,nullCount:i}=this.nextFieldNode()){return ct({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:n,nullCount:i}=this.nextFieldNode()){return ct({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitFixedSizeList(t,{length:n,nullCount:i}=this.nextFieldNode()){return ct({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),child:this.visit(t.children[0])})}visitMap(t,{length:n,nullCount:i}=this.nextFieldNode()){return ct({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,n,i=this.nextBufferRange()){return n>0&&this.readData(t,i)||new Uint8Array(0)}readOffsets(t,n){return this.readData(t,n)}readTypeIds(t,n){return this.readData(t,n)}readData(t,{length:n,offset:i}=this.nextBufferRange()){return this.bytes.subarray(i,i+n)}readDictionary(t){return this.dictionaries.get(t.id)}}class rE extends jm{constructor(t,n,i,r){super(new Uint8Array(0),n,i,r),this.sources=t}readNullBitmap(t,n,{offset:i}=this.nextBufferRange()){return n<=0?new Uint8Array(0):eo(this.sources[i])}readOffsets(t,{offset:n}=this.nextBufferRange()){return Lt(Uint8Array,Lt(Int32Array,this.sources[n]))}readTypeIds(t,{offset:n}=this.nextBufferRange()){return Lt(Uint8Array,Lt(t.ArrayType,this.sources[n]))}readData(t,{offset:n}=this.nextBufferRange()){const{sources:i}=this;return j.isTimestamp(t)||(j.isInt(t)||j.isTime(t))&&t.bitWidth===64||j.isDate(t)&&t.unit===En.MILLISECOND?Lt(Uint8Array,Te.convertArray(i[n])):j.isDecimal(t)?Lt(Uint8Array,Ln.convertArray(i[n])):j.isBinary(t)||j.isFixedSizeBinary(t)?sE(i[n]):j.isBool(t)?eo(i[n]):j.isUtf8(t)?Fo(i[n].join("")):Lt(Uint8Array,Lt(t.ArrayType,i[n].map(r=>+r)))}}function sE(e){const t=e.join(""),n=new Uint8Array(t.length/2);for(let i=0;i<t.length;i+=2)n[i>>1]=Number.parseInt(t.slice(i,i+2),16);return n}class $m extends Po{constructor(t){super(t),this._values=new Mo(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,wt(n))}_flushPending(t,n){const i=this._offsets,r=this._values.reserve(n).buffer;let s=0;for(const[a,o]of t)if(o===void 0)i.set(a,0);else{const u=o.length;r.set(o,s),i.set(a,u),s+=u}}}class aE extends $e{constructor(t){super(t),this._values=new Bm}setValue(t,n){this._values.set(t,+n)}}class Uo extends Yi{}Uo.prototype._setValue=Jp;class zm extends Uo{}zm.prototype._setValue=Qc;class qm extends Uo{}qm.prototype._setValue=Xc;class Gm extends Yi{}Gm.prototype._setValue=em;class oE extends $e{constructor({type:t,nullValues:n,dictionaryHashFunction:i}){super({type:new Di(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=ho({type:this.type.indices,nullValues:n}),this.dictionary=ho({type:this.type.dictionary,nullValues:null}),typeof i=="function"&&(this.valueToKey=i)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const i=this.indices;return n=i.setValid(t,n),this.length=i.length,n}setValue(t,n){const i=this._keysToIndices,r=this.valueToKey(n);let s=i[r];return s===void 0&&(i[r]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,i=this.dictionary.toVector(),r=this.indices.flush().clone(t);return r.dictionary=n?n.concat(i):i,this.finished||(this._dictionaryOffset+=i.length),this._dictionary=r.dictionary,this.clear(),r}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class Ym extends Yi{}Ym.prototype._setValue=Xp;class uE extends $e{setValue(t,n){const[i]=this.children,r=t*this.stride;for(let s=-1,a=n.length;++s<a;)i.set(r+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const i=this.children.push(t);return this.type=new qr(this.type.listSize,new xt(n,t.type,!0)),i}}class Vo extends Yi{setValue(t,n){this._values.set(t,n)}}class cE extends Vo{setValue(t,n){super.setValue(t,Wp(n))}}class lE extends Vo{}class hE extends Vo{}class jo extends Yi{}jo.prototype._setValue=rm;class Hm extends jo{}Hm.prototype._setValue=al;class Wm extends jo{}Wm.prototype._setValue=ol;class Si extends Yi{setValue(t,n){this._values.set(t,n)}}class fE extends Si{}class dE extends Si{}class pE extends Si{}class mE extends Si{}class _E extends Si{}class yE extends Si{}class gE extends Si{}class vE extends Si{}class bE extends Po{constructor(t){super(t),this._offsets=new Dm}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new zr(new xt(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[i]=this.children;for(const[r,s]of t)if(typeof s>"u")n.set(r,0);else{const a=s.length,o=n.set(r,a).buffer[r];for(let u=-1;++u<a;)i.set(o+u,s[u])}}}class wE extends Po{set(t,n){return super.set(t,n)}setValue(t,n){const i=n instanceof Map?n:new Map(Object.entries(n)),r=this._pending||(this._pending=new Map),s=r.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=i.size,r.set(t,i)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new Vs(new xt(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[i]=this.children;for(const[r,s]of t)if(s===void 0)n.set(r,0);else{let{[r]:a,[r+1]:o}=n.set(r,s.size).buffer;for(const u of s.entries())if(i.set(a,u),++a>=o)break}}}class SE extends $e{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class xE extends $e{setValue(t,n){const{children:i,type:r}=this;switch(Array.isArray(n)||n.constructor){case!0:return r.children.forEach((s,a)=>i[a].set(t,n[a]));case Map:return r.children.forEach((s,a)=>i[a].set(t,n.get(s.name)));default:return r.children.forEach((s,a)=>i[a].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(i=>i.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const i=this.children.push(t);return this.type=new pe([...this.type.children,new xt(n,t.type,!0)]),i}}class is extends Yi{}is.prototype._setValue=Zp;class Km extends is{}Km.prototype._setValue=Jc;class Qm extends is{}Qm.prototype._setValue=Zc;class Xm extends is{}Xm.prototype._setValue=tl;class Jm extends is{}Jm.prototype._setValue=el;class rs extends Yi{}rs.prototype._setValue=tm;class Zm extends rs{}Zm.prototype._setValue=nl;class t_ extends rs{}t_.prototype._setValue=il;class e_ extends rs{}e_.prototype._setValue=rl;class n_ extends rs{}n_.prototype._setValue=sl;class yl extends $e{constructor(t){super(t),this._typeIds=new ta(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,i){return i===void 0&&(i=this._valueToChildTypeId(this,n,t)),this.setValid(t,this.isValid(n))&&this.setValue(t,n,i),this}setValue(t,n,i){this._typeIds.set(t,i);const r=this.type.typeIdToChildIndex[i],s=this.children[r];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const i=this.children.push(t),{type:{children:r,mode:s,typeIds:a}}=this,o=[...r,new xt(n,t.type)];return this.type=new Us(s,[...a,i],o),i}_valueToChildTypeId(t,n,i){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class IE extends yl{}class EE extends yl{constructor(t){super(t),this._offsets=new ta(new Int32Array(0))}setValue(t,n,i){const r=this._typeIds.set(t,i).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[r]),a=this._offsets.set(t,s.length).buffer[t];s==null||s.set(a,n)}}class i_ extends Po{constructor(t){super(t),this._values=new Mo(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Fo(n))}_flushPending(t,n){}}i_.prototype._flushPending=$m.prototype._flushPending;class AE extends lt{visitNull(){return SE}visitBool(){return aE}visitInt(){return Si}visitInt8(){return fE}visitInt16(){return dE}visitInt32(){return pE}visitInt64(){return mE}visitUint8(){return _E}visitUint16(){return yE}visitUint32(){return gE}visitUint64(){return vE}visitFloat(){return Vo}visitFloat16(){return cE}visitFloat32(){return lE}visitFloat64(){return hE}visitUtf8(){return i_}visitBinary(){return $m}visitFixedSizeBinary(){return Ym}visitDate(){return Uo}visitDateDay(){return zm}visitDateMillisecond(){return qm}visitTimestamp(){return is}visitTimestampSecond(){return Km}visitTimestampMillisecond(){return Qm}visitTimestampMicrosecond(){return Xm}visitTimestampNanosecond(){return Jm}visitTime(){return rs}visitTimeSecond(){return Zm}visitTimeMillisecond(){return t_}visitTimeMicrosecond(){return e_}visitTimeNanosecond(){return n_}visitDecimal(){return Gm}visitList(){return bE}visitStruct(){return xE}visitUnion(){return yl}visitDenseUnion(){return EE}visitSparseUnion(){return IE}visitDictionary(){return oE}visitInterval(){return jo}visitIntervalDayTime(){return Hm}visitIntervalYearMonth(){return Wm}visitFixedSizeList(){return uE}visitMap(){return wE}}const kE=new AE;class Y extends lt{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((i,r)=>this.compareFields(i,n[r]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function ze(e,t){return t instanceof e.constructor}function ea(e,t){return e===t||ze(e,t)}function xi(e,t){return e===t||ze(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function $o(e,t){return e===t||ze(e,t)&&e.precision===t.precision}function TE(e,t){return e===t||ze(e,t)&&e.byteWidth===t.byteWidth}function gl(e,t){return e===t||ze(e,t)&&e.unit===t.unit}function na(e,t){return e===t||ze(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function ia(e,t){return e===t||ze(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function RE(e,t){return e===t||ze(e,t)&&e.children.length===t.children.length&&Pi.compareManyFields(e.children,t.children)}function NE(e,t){return e===t||ze(e,t)&&e.children.length===t.children.length&&Pi.compareManyFields(e.children,t.children)}function vl(e,t){return e===t||ze(e,t)&&e.mode===t.mode&&e.typeIds.every((n,i)=>n===t.typeIds[i])&&Pi.compareManyFields(e.children,t.children)}function OE(e,t){return e===t||ze(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Pi.visit(e.indices,t.indices)&&Pi.visit(e.dictionary,t.dictionary)}function bl(e,t){return e===t||ze(e,t)&&e.unit===t.unit}function CE(e,t){return e===t||ze(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Pi.compareManyFields(e.children,t.children)}function FE(e,t){return e===t||ze(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Pi.compareManyFields(e.children,t.children)}Y.prototype.visitNull=ea;Y.prototype.visitBool=ea;Y.prototype.visitInt=xi;Y.prototype.visitInt8=xi;Y.prototype.visitInt16=xi;Y.prototype.visitInt32=xi;Y.prototype.visitInt64=xi;Y.prototype.visitUint8=xi;Y.prototype.visitUint16=xi;Y.prototype.visitUint32=xi;Y.prototype.visitUint64=xi;Y.prototype.visitFloat=$o;Y.prototype.visitFloat16=$o;Y.prototype.visitFloat32=$o;Y.prototype.visitFloat64=$o;Y.prototype.visitUtf8=ea;Y.prototype.visitBinary=ea;Y.prototype.visitFixedSizeBinary=TE;Y.prototype.visitDate=gl;Y.prototype.visitDateDay=gl;Y.prototype.visitDateMillisecond=gl;Y.prototype.visitTimestamp=na;Y.prototype.visitTimestampSecond=na;Y.prototype.visitTimestampMillisecond=na;Y.prototype.visitTimestampMicrosecond=na;Y.prototype.visitTimestampNanosecond=na;Y.prototype.visitTime=ia;Y.prototype.visitTimeSecond=ia;Y.prototype.visitTimeMillisecond=ia;Y.prototype.visitTimeMicrosecond=ia;Y.prototype.visitTimeNanosecond=ia;Y.prototype.visitDecimal=ea;Y.prototype.visitList=RE;Y.prototype.visitStruct=NE;Y.prototype.visitUnion=vl;Y.prototype.visitDenseUnion=vl;Y.prototype.visitSparseUnion=vl;Y.prototype.visitDictionary=OE;Y.prototype.visitInterval=bl;Y.prototype.visitIntervalDayTime=bl;Y.prototype.visitIntervalYearMonth=bl;Y.prototype.visitFixedSizeList=CE;Y.prototype.visitMap=FE;const Pi=new Y;function oc(e,t){return Pi.compareSchemas(e,t)}function ho(e){const t=e.type,n=new(kE.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const i=e.children||[],r={nullValues:e.nullValues},s=Array.isArray(i)?(a,o)=>i[o]||r:({name:a})=>i[a]||r;for(const[a,o]of t.children.entries()){const{type:u}=o,c=s(o,a);n.children.push(ho(Object.assign(Object.assign({},c),{type:u})))}}return n}function Au(e,t){return LE(e,t.map(n=>n.data.concat()))}function LE(e,t){const n=[...e.fields],i=[],r={numBatches:t.reduce((h,p)=>Math.max(h,p.length),0)};let s=0,a=0,o=-1;const u=t.length;let c,l=[];for(;r.numBatches-- >0;){for(a=Number.POSITIVE_INFINITY,o=-1;++o<u;)l[o]=c=t[o].shift(),a=Math.min(a,c?c.length:a);Number.isFinite(a)&&(l=BE(n,a,l,t,r),a>0&&(i[s++]=ct({type:new pe(n),length:a,nullCount:0,children:l.slice()})))}return[e=e.assign(n),i.map(h=>new Oe(e,h))]}function BE(e,t,n,i,r){var s;const a=(t+63&-64)>>3;for(let o=-1,u=i.length;++o<u;){const c=n[o],l=c==null?void 0:c.length;if(l>=t)l===t?n[o]=c:(n[o]=c.slice(0,t),r.numBatches=Math.max(r.numBatches,i[o].unshift(c.slice(t,l-t))));else{const h=e[o];e[o]=h.clone({nullable:!0}),n[o]=(s=c==null?void 0:c._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:ct({type:h.type,length:t,nullCount:t,nullBitmap:new Uint8Array(a)})}}return n}var r_;let _i=class Ji{constructor(...t){var n,i;if(t.length===0)return this.batches=[],this.schema=new At([]),this._offsets=[0],this;let r,s;t[0]instanceof At&&(r=t.shift()),t[t.length-1]instanceof Uint32Array&&(s=t.pop());const a=u=>{if(u){if(u instanceof Oe)return[u];if(u instanceof Ji)return u.batches;if(u instanceof Ot){if(u.type instanceof pe)return[new Oe(new At(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(c=>a(c));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(c=>a(c));if(typeof u=="object"){const c=Object.keys(u),l=c.map(m=>new _t([u[m]])),h=new At(c.map((m,b)=>new xt(String(m),l[b].type))),[,p]=Au(h,l);return p.length===0?[new Oe(u)]:p}}}return[]},o=t.flatMap(u=>a(u));if(r=(i=r??((n=o[0])===null||n===void 0?void 0:n.schema))!==null&&i!==void 0?i:new At([]),!(r instanceof At))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of o){if(!(u instanceof Oe))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!oc(r,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=r,this.batches=o,this._offsets=s??Em(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=Im(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?pl.visit(new _t(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,i=this.data.concat(t.flatMap(({data:r})=>r));return new Ji(n,i.map(r=>new Oe(n,r)))}slice(t,n){const i=this.schema;[t,n]=Sm({length:this.numRows},t,n);const r=Am(this.data,this._offsets,t,n);return new Ji(i,r.map(s=>new Oe(i,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(i=>i.children[t]);if(n.length===0){const{type:i}=this.schema.fields[t],r=ct({type:i,length:0,nullCount:0});n.push(r._changeLengthAndBackfillNullBitmap(this.numRows))}return new _t(n)}return null}setChild(t,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(r=>r.name===t),n)}setChildAt(t,n){let i=this.schema,r=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new _t([ct({type:new pi,length:this.numRows})]));const s=i.fields.slice(),a=s[t].clone({type:n.type}),o=this.schema.fields.map((u,c)=>this.getChildAt(c));[s[t],o[t]]=[a,n],[i,r]=Au(i,o)}return new Ji(i,r)}select(t){const n=this.schema.fields.reduce((i,r,s)=>i.set(r.name,s),new Map);return this.selectAt(t.map(i=>n.get(i)).filter(i=>i>-1))}selectAt(t){const n=this.schema.selectAt(t),i=this.batches.map(r=>r.selectAt(t));return new Ji(n,i)}assign(t){const n=this.schema.fields,[i,r]=t.schema.fields.reduce((o,u,c)=>{const[l,h]=o,p=n.findIndex(m=>m.name===u.name);return~p?h[p]=c:l.push(c),o},[[],[]]),s=this.schema.assign(t.schema),a=[...n.map((o,u)=>[u,r[u]]).map(([o,u])=>u===void 0?this.getChildAt(o):t.getChildAt(u)),...i.map(o=>t.getChildAt(o))].filter(Boolean);return new Ji(...Au(s,a))}};r_=Symbol.toStringTag;_i[r_]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Mr(dl),e.get=Mr(De.getVisitFn(_.Struct)),e.set=km(cn.getVisitFn(_.Struct)),e.indexOf=Tm(no.getVisitFn(_.Struct)),e.getByteLength=Mr(Kn.getVisitFn(_.Struct)),"Table"))(_i.prototype);var s_;let Oe=class Ss{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof At))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=ct({nullCount:0,type:new pe(this.schema.fields),children:this.schema.fields.map(n=>ct({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Ot))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Df(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:i,children:r,length:s}=Object.keys(n).reduce((u,c,l)=>(u.children[l]=n[c],u.length=Math.max(u.length,n[c].length),u.fields[l]=xt.new({name:c,type:n[c].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),a=new At(i),o=ct({type:new pe(i),length:s,children:r,nullCount:0});[this.schema,this.data]=Df(a,o.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=a_(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return De.visit(this.data,t)}set(t,n){return cn.visit(this.data,t,n)}indexOf(t,n){return no.visit(this.data,t,n)}getByteLength(t){return Kn.visit(this.data,t)}[Symbol.iterator](){return pl.visit(new _t([this.data]))}toArray(){return[...this]}concat(...t){return new _i(this.schema,[this,...t])}slice(t,n){const[i]=new _t([this.data]).slice(t,n).data;return new Ss(this.schema,i)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(i=>i.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new _t([this.data.children[t]]):null}setChild(t,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(r=>r.name===t),n)}setChildAt(t,n){let i=this.schema,r=this.data;if(t>-1&&t<this.numCols){n||(n=new _t([ct({type:new pi,length:this.numRows})]));const s=i.fields.slice(),a=r.children.slice(),o=s[t].clone({type:n.type});[s[t],a[t]]=[o,n.data[0]],i=new At(s,new Map(this.schema.metadata)),r=ct({type:new pe(s),children:a})}return new Ss(i,r)}select(t){const n=this.schema.select(t),i=new pe(n.fields),r=[];for(const s of t){const a=this.schema.fields.findIndex(o=>o.name===s);~a&&(r[a]=this.data.children[a])}return new Ss(n,ct({type:i,length:this.numRows,children:r}))}selectAt(t){const n=this.schema.selectAt(t),i=t.map(s=>this.data.children[s]).filter(Boolean),r=ct({type:new pe(n.fields),length:this.numRows,children:i});return new Ss(n,r)}};s_=Symbol.toStringTag;Oe[s_]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Oe.prototype);function Df(e,t,n=t.reduce((i,r)=>Math.max(i,r.length),0)){var i;const r=[...e.fields],s=[...t],a=(n+63&-64)>>3;for(const[o,u]of e.fields.entries()){const c=t[o];(!c||c.length!==n)&&(r[o]=u.clone({nullable:!0}),s[o]=(i=c==null?void 0:c._changeLengthAndBackfillNullBitmap(n))!==null&&i!==void 0?i:ct({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(a)}))}return[e.assign(r),ct({type:new pe(r),length:n,children:s})]}function a_(e,t,n=new Map){for(let i=-1,r=e.length;++i<r;){const a=e[i].type,o=t[i];if(j.isDictionary(a)){if(!n.has(a.id))o.dictionary&&n.set(a.id,o.dictionary);else if(n.get(a.id)!==o.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}a.children&&a.children.length>0&&a_(a.children,o.children,n)}return n}class wl extends Oe{constructor(t){const n=t.fields.map(r=>ct({type:r.type})),i=ct({type:new pe(t.fields),nullCount:0,children:n});super(t,i)}}var fo;(function(e){e[e.BUFFER=0]="BUFFER"})(fo||(fo={}));var po;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(po||(po={}));class Oi{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Oi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Bt),(n||new Oi).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):po.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):fo.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,po.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,fo.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,i){return Oi.startBodyCompression(t),Oi.addCodec(t,n),Oi.addMethod(t,i),Oi.endBodyCompression(t)}}class o_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,i){return t.prep(8,16),t.writeInt64(i),t.writeInt64(n),t.offset()}}let u_=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,i){return t.prep(8,16),t.writeInt64(i),t.writeInt64(n),t.offset()}},ai=class uc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new uc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Bt),(n||new uc).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new u_).__init(this.bb.__vector(this.bb_pos+i)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new o_).__init(this.bb.__vector(this.bb_pos+i)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Oi).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},Ar=class cc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new cc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Bt),(n||new cc).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new ai).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var mo;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(mo||(mo={}));let Ai=class Cn{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new Cn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Bt),(n||new Cn).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Yr.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):mo.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new se).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Yr.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,mo.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,t.createLong(0,0))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,i,r,s,a){return Cn.startMessage(t),Cn.addVersion(t,n),Cn.addHeaderType(t,i),Cn.addHeader(t,r),Cn.addBodyLength(t,s),Cn.addCustomMetadata(t,a),Cn.endMessage(t)}};var DE=hi;class ME extends lt{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return rr.startNull(n),rr.endNull(n)}visitInt(t,n){return Ye.startInt(n),Ye.addBitWidth(n,t.bitWidth),Ye.addIsSigned(n,t.isSigned),Ye.endInt(n)}visitFloat(t,n){return jn.startFloatingPoint(n),jn.addPrecision(n,t.precision),jn.endFloatingPoint(n)}visitBinary(t,n){return er.startBinary(n),er.endBinary(n)}visitBool(t,n){return nr.startBool(n),nr.endBool(n)}visitUtf8(t,n){return ar.startUtf8(n),ar.endUtf8(n)}visitDecimal(t,n){return Re.startDecimal(n),Re.addScale(n,t.scale),Re.addPrecision(n,t.precision),Re.addBitWidth(n,t.bitWidth),Re.endDecimal(n)}visitDate(t,n){return Na.startDate(n),Na.addUnit(n,t.unit),Na.endDate(n)}visitTime(t,n){return sn.startTime(n),sn.addUnit(n,t.unit),sn.addBitWidth(n,t.bitWidth),sn.endTime(n)}visitTimestamp(t,n){const i=t.timezone&&n.createString(t.timezone)||void 0;return an.startTimestamp(n),an.addUnit(n,t.unit),i!==void 0&&an.addTimezone(n,i),an.endTimestamp(n)}visitInterval(t,n){return $n.startInterval(n),$n.addUnit(n,t.unit),$n.endInterval(n)}visitList(t,n){return ir.startList(n),ir.endList(n)}visitStruct(t,n){return sr.startStruct_(n),sr.endStruct_(n)}visitUnion(t,n){Ne.startTypeIdsVector(n,t.typeIds.length);const i=Ne.createTypeIdsVector(n,t.typeIds);return Ne.startUnion(n),Ne.addMode(n,t.mode),Ne.addTypeIds(n,i),Ne.endUnion(n)}visitDictionary(t,n){const i=this.visit(t.indices,n);return ci.startDictionaryEncoding(n),ci.addId(n,new DE(t.id,0)),ci.addIsOrdered(n,t.isOrdered),i!==void 0&&ci.addIndexType(n,i),ci.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return Un.startFixedSizeBinary(n),Un.addByteWidth(n,t.byteWidth),Un.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Vn.startFixedSizeList(n),Vn.addListSize(n,t.listSize),Vn.endFixedSizeList(n)}visitMap(t,n){return Oa.startMap(n),Oa.addKeysSorted(n,t.keysSorted),Oa.endMap(n)}}const ku=new ME;function PE(e,t=new Map){return new At(VE(e,t),La(e.customMetadata),t)}function c_(e){return new Qe(e.count,l_(e.columns),h_(e.columns))}function UE(e){return new Qn(c_(e.data),e.id,e.isDelta)}function VE(e,t){return(e.fields||[]).filter(Boolean).map(n=>xt.fromJSON(n,t))}function Mf(e,t){return(e.children||[]).filter(Boolean).map(n=>xt.fromJSON(n,t))}function l_(e){return(e||[]).reduce((t,n)=>[...t,new vr(n.count,jE(n.VALIDITY)),...l_(n.children)],[])}function h_(e,t=[]){for(let n=-1,i=(e||[]).length;++n<i;){const r=e[n];r.VALIDITY&&t.push(new qn(t.length,r.VALIDITY.length)),r.TYPE&&t.push(new qn(t.length,r.TYPE.length)),r.OFFSET&&t.push(new qn(t.length,r.OFFSET.length)),r.DATA&&t.push(new qn(t.length,r.DATA.length)),t=h_(r.children,t)}return t}function jE(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function $E(e,t){let n,i,r,s,a,o;return!t||!(s=e.dictionary)?(a=Uf(e,Mf(e,t)),r=new xt(e.name,a,e.nullable,La(e.customMetadata))):t.has(n=s.id)?(i=(i=s.indexType)?Pf(i):new Li,o=new Di(t.get(n),i,n,s.isOrdered),r=new xt(e.name,o,e.nullable,La(e.customMetadata))):(i=(i=s.indexType)?Pf(i):new Li,t.set(n,a=Uf(e,Mf(e,t))),o=new Di(a,i,n,s.isOrdered),r=new xt(e.name,o,e.nullable,La(e.customMetadata))),r||null}function La(e){return new Map(Object.entries(e||{}))}function Pf(e){return new Se(e.isSigned,e.bitWidth)}function Uf(e,t){const n=e.type.name;switch(n){case"NONE":return new pi;case"null":return new pi;case"binary":return new Ms;case"utf8":return new Vr;case"bool":return new Ps;case"list":return new zr((t||[])[0]);case"struct":return new pe(t||[]);case"struct_":return new pe(t||[])}switch(n){case"int":{const i=e.type;return new Se(i.isSigned,i.bitWidth)}case"floatingpoint":{const i=e.type;return new Bi(me[i.precision])}case"decimal":{const i=e.type;return new Ja(i.scale,i.precision,i.bitWidth)}case"date":{const i=e.type;return new jr(En[i.unit])}case"time":{const i=e.type;return new mi(dt[i.unit],i.bitWidth)}case"timestamp":{const i=e.type;return new Za(dt[i.unit],i.timezone)}case"interval":{const i=e.type;return new $r(Wn[i.unit])}case"union":{const i=e.type;return new Us(Ke[i.mode],i.typeIds||[],t||[])}case"fixedsizebinary":{const i=e.type;return new to(i.byteWidth)}case"fixedsizelist":{const i=e.type;return new qr(i.listSize,(t||[])[0])}case"map":{const i=e.type;return new Vs((t||[])[0],i.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var mr=hi,zE=Pm,qE=Gr;class we{constructor(t,n,i,r){this._version=n,this._headerType=i,this.body=new Uint8Array(0),r&&(this._createHeader=()=>r),this._bodyLength=typeof t=="number"?t:t.low}static fromJSON(t,n){const i=new we(0,He.V4,n);return i._createHeader=GE(t,n),i}static decode(t){t=new qE(wt(t));const n=Ai.getRootAsMessage(t),i=n.bodyLength(),r=n.version(),s=n.headerType(),a=new we(i,r,s);return a._createHeader=YE(n,s),a}static encode(t){const n=new zE;let i=-1;return t.isSchema()?i=At.encode(n,t.header()):t.isRecordBatch()?i=Qe.encode(n,t.header()):t.isDictionaryBatch()&&(i=Qn.encode(n,t.header())),Ai.startMessage(n),Ai.addVersion(n,He.V4),Ai.addHeader(n,i),Ai.addHeaderType(n,t.headerType),Ai.addBodyLength(n,new mr(t.bodyLength,0)),Ai.finishMessageBuffer(n,Ai.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof At)return new we(0,He.V4,Et.Schema,t);if(t instanceof Qe)return new we(n,He.V4,Et.RecordBatch,t);if(t instanceof Qn)return new we(n,He.V4,Et.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Et.Schema}isRecordBatch(){return this.headerType===Et.RecordBatch}isDictionaryBatch(){return this.headerType===Et.DictionaryBatch}}class Qe{constructor(t,n,i){this._nodes=n,this._buffers=i,this._length=typeof t=="number"?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class Qn{constructor(t,n,i=!1){this._data=t,this._isDelta=i,this._id=typeof n=="number"?n:n.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class qn{constructor(t,n){this.offset=typeof t=="number"?t:t.low,this.length=typeof n=="number"?n:n.low}}class vr{constructor(t,n){this.length=typeof t=="number"?t:t.low,this.nullCount=typeof n=="number"?n:n.low}}function GE(e,t){return()=>{switch(t){case Et.Schema:return At.fromJSON(e);case Et.RecordBatch:return Qe.fromJSON(e);case Et.DictionaryBatch:return Qn.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Et[t]}, type: ${t} }`)}}function YE(e,t){return()=>{switch(t){case Et.Schema:return At.decode(e.header(new Fn));case Et.RecordBatch:return Qe.decode(e.header(new ai),e.version());case Et.DictionaryBatch:return Qn.decode(e.header(new Ar),e.version())}throw new Error(`Unrecognized Message type: { name: ${Et[t]}, type: ${t} }`)}}xt.encode=iA;xt.decode=eA;xt.fromJSON=$E;At.encode=nA;At.decode=HE;At.fromJSON=PE;Qe.encode=rA;Qe.decode=WE;Qe.fromJSON=c_;Qn.encode=sA;Qn.decode=KE;Qn.fromJSON=UE;vr.encode=aA;vr.decode=XE;qn.encode=oA;qn.decode=QE;function HE(e,t=new Map){const n=tA(e,t);return new At(n,Ba(e),t)}function WE(e,t=He.V4){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Qe(e.length(),JE(e),ZE(e,t))}function KE(e,t=He.V4){return new Qn(Qe.decode(e.data(),t),e.id(),e.isDelta())}function QE(e){return new qn(e.offset(),e.length())}function XE(e){return new vr(e.length(),e.nullCount())}function JE(e){const t=[];for(let n,i=-1,r=-1,s=e.nodesLength();++i<s;)(n=e.nodes(i))&&(t[++r]=vr.decode(n));return t}function ZE(e,t){const n=[];for(let i,r=-1,s=-1,a=e.buffersLength();++r<a;)(i=e.buffers(r))&&(t<He.V4&&(i.bb_pos+=8*(r+1)),n[++s]=qn.decode(i));return n}function tA(e,t){const n=[];for(let i,r=-1,s=-1,a=e.fieldsLength();++r<a;)(i=e.fields(r))&&(n[++s]=xt.decode(i,t));return n}function Vf(e,t){const n=[];for(let i,r=-1,s=-1,a=e.childrenLength();++r<a;)(i=e.children(r))&&(n[++s]=xt.decode(i,t));return n}function eA(e,t){let n,i,r,s,a,o;return!t||!(o=e.dictionary())?(r=$f(e,Vf(e,t)),i=new xt(e.name(),r,e.nullable(),Ba(e))):t.has(n=o.id().low)?(s=(s=o.indexType())?jf(s):new Li,a=new Di(t.get(n),s,n,o.isOrdered()),i=new xt(e.name(),a,e.nullable(),Ba(e))):(s=(s=o.indexType())?jf(s):new Li,t.set(n,r=$f(e,Vf(e,t))),a=new Di(r,s,n,o.isOrdered()),i=new xt(e.name(),a,e.nullable(),Ba(e))),i||null}function Ba(e){const t=new Map;if(e)for(let n,i,r=-1,s=Math.trunc(e.customMetadataLength());++r<s;)(n=e.customMetadata(r))&&(i=n.key())!=null&&t.set(i,n.value());return t}function jf(e){return new Se(e.isSigned(),e.bitWidth())}function $f(e,t){const n=e.typeType();switch(n){case zt.NONE:return new pi;case zt.Null:return new pi;case zt.Binary:return new Ms;case zt.Utf8:return new Vr;case zt.Bool:return new Ps;case zt.List:return new zr((t||[])[0]);case zt.Struct_:return new pe(t||[])}switch(n){case zt.Int:{const i=e.type(new Ye);return new Se(i.isSigned(),i.bitWidth())}case zt.FloatingPoint:{const i=e.type(new jn);return new Bi(i.precision())}case zt.Decimal:{const i=e.type(new Re);return new Ja(i.scale(),i.precision(),i.bitWidth())}case zt.Date:{const i=e.type(new Na);return new jr(i.unit())}case zt.Time:{const i=e.type(new sn);return new mi(i.unit(),i.bitWidth())}case zt.Timestamp:{const i=e.type(new an);return new Za(i.unit(),i.timezone())}case zt.Interval:{const i=e.type(new $n);return new $r(i.unit())}case zt.Union:{const i=e.type(new Ne);return new Us(i.mode(),i.typeIdsArray()||[],t||[])}case zt.FixedSizeBinary:{const i=e.type(new Un);return new to(i.byteWidth())}case zt.FixedSizeList:{const i=e.type(new Vn);return new qr(i.listSize(),(t||[])[0])}case zt.Map:{const i=e.type(new Oa);return new Vs((t||[])[0],i.keysSorted())}}throw new Error(`Unrecognized type: "${zt[n]}" (${n})`)}function nA(e,t){const n=t.fields.map(s=>xt.encode(e,s));Fn.startFieldsVector(e,n.length);const i=Fn.createFieldsVector(e,n),r=t.metadata&&t.metadata.size>0?Fn.createCustomMetadataVector(e,[...t.metadata].map(([s,a])=>{const o=e.createString(`${s}`),u=e.createString(`${a}`);return se.startKeyValue(e),se.addKey(e,o),se.addValue(e,u),se.endKeyValue(e)})):-1;return Fn.startSchema(e),Fn.addFields(e,i),Fn.addEndianness(e,uA?Hr.Little:Hr.Big),r!==-1&&Fn.addCustomMetadata(e,r),Fn.endSchema(e)}function iA(e,t){let n=-1,i=-1,r=-1;const s=t.type;let a=t.typeId;j.isDictionary(s)?(a=s.dictionary.typeId,r=ku.visit(s,e),i=ku.visit(s.dictionary,e)):i=ku.visit(s,e);const o=(s.children||[]).map(l=>xt.encode(e,l)),u=en.createChildrenVector(e,o),c=t.metadata&&t.metadata.size>0?en.createCustomMetadataVector(e,[...t.metadata].map(([l,h])=>{const p=e.createString(`${l}`),m=e.createString(`${h}`);return se.startKeyValue(e),se.addKey(e,p),se.addValue(e,m),se.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),en.startField(e),en.addType(e,i),en.addTypeType(e,a),en.addChildren(e,u),en.addNullable(e,!!t.nullable),n!==-1&&en.addName(e,n),r!==-1&&en.addDictionary(e,r),c!==-1&&en.addCustomMetadata(e,c),en.endField(e)}function rA(e,t){const n=t.nodes||[],i=t.buffers||[];ai.startNodesVector(e,n.length);for(const a of n.slice().reverse())vr.encode(e,a);const r=e.endVector();ai.startBuffersVector(e,i.length);for(const a of i.slice().reverse())qn.encode(e,a);const s=e.endVector();return ai.startRecordBatch(e),ai.addLength(e,new mr(t.length,0)),ai.addNodes(e,r),ai.addBuffers(e,s),ai.endRecordBatch(e)}function sA(e,t){const n=Qe.encode(e,t.data);return Ar.startDictionaryBatch(e),Ar.addId(e,new mr(t.id,0)),Ar.addIsDelta(e,t.isDelta),Ar.addData(e,n),Ar.endDictionaryBatch(e)}function aA(e,t){return u_.createFieldNode(e,new mr(t.length,0),new mr(t.nullCount,0))}function oA(e,t){return o_.createBuffer(e,new mr(t.offset,0),new mr(t.length,0))}const uA=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),Sl=e=>`Expected ${Et[e]} Message in stream, but was null or length 0.`,xl=e=>`Header pointer of flatbuffer-encoded ${Et[e]} Message is null or length 0.`,f_=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,d_=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`;class p_{constructor(t){this.source=t instanceof co?t:new co(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||t.value===-1&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?Gt:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(Sl(t));return n.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const n=wt(this.source.read(t));if(n.byteLength<t)throw new Error(d_(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(t=!1){const n=Et.Schema,i=this.readMessage(n),r=i==null?void 0:i.header();if(t&&!r)throw new Error(xl(n));return r}readMetadataLength(){const t=this.source.read(zo),n=t&&new Gr(t),i=(n==null?void 0:n.readInt32(0))||0;return{done:i===0,value:i}}readMetadata(t){const n=this.source.read(t);if(!n)return Gt;if(n.byteLength<t)throw new Error(f_(t,n.byteLength));return{done:!1,value:we.decode(n)}}}class cA{constructor(t,n){this.source=t instanceof Kr?t:wp(t)?new lo(t,n):new Kr(t)}[Symbol.asyncIterator](){return this}next(){return U(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done||t.value===-1&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?Gt:t})}throw(t){return U(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return U(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return U(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(Sl(t));return n.value})}readMessageBody(t){return U(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);const n=wt(yield this.source.read(t));if(n.byteLength<t)throw new Error(d_(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(t=!1){return U(this,void 0,void 0,function*(){const n=Et.Schema,i=yield this.readMessage(n),r=i==null?void 0:i.header();if(t&&!r)throw new Error(xl(n));return r})}readMetadataLength(){return U(this,void 0,void 0,function*(){const t=yield this.source.read(zo),n=t&&new Gr(t),i=(n==null?void 0:n.readInt32(0))||0;return{done:i===0,value:i}})}readMetadata(t){return U(this,void 0,void 0,function*(){const n=yield this.source.read(t);if(!n)return Gt;if(n.byteLength<t)throw new Error(f_(t,n.byteLength));return{done:!1,value:we.decode(n)}})}}class lA extends p_{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof Lf?t:new Lf(t)}next(){const{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:we.fromJSON(t.schema,Et.Schema)};if(this._dictionaryIndex<t.dictionaries.length){const n=t.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:we.fromJSON(n,Et.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const n=t.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:we.fromJSON(n,Et.RecordBatch)}}return this._body=[],Gt}readMessageBody(t){return n(this._body);function n(i){return(i||[]).reduce((r,s)=>[...r,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE&&[s.TYPE]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...n(s.children)],[])}}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(Sl(t));return n.value}readSchema(){const t=Et.Schema,n=this.readMessage(t),i=n==null?void 0:n.header();if(!n||!i)throw new Error(xl(t));return i}}const zo=4,lc="ARROW1",$s=new Uint8Array(lc.length);for(let e=0;e<lc.length;e+=1)$s[e]=lc.codePointAt(e);function Il(e,t=0){for(let n=-1,i=$s.length;++n<i;)if($s[n]!==e[t+n])return!1;return!0}const ra=$s.length,m_=ra+zo,hA=ra*2+zo;class un extends ml{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const n=this._impl.open(t);return pr(n)?n.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return rn.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return rn.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof un?t:Zu(t)?mA(t):wp(t)?gA(t):pr(t)?(()=>U(this,void 0,void 0,function*(){return yield un.from(yield t)}))():Sp(t)||Bc(t)||xp(t)||es(t)?yA(new Kr(t)):_A(new co(t))}static readAll(t){return t instanceof un?t.isSync()?zf(t):qf(t):Zu(t)||ArrayBuffer.isView(t)||Zs(t)||bp(t)?zf(t):qf(t)}}class _o extends un{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return zn(this,arguments,function*(){yield Z(yield*Ra(lr(this[Symbol.iterator]())))})}}class yo extends un{constructor(t){super(t),this._impl=t}readAll(){var t,n;return U(this,void 0,void 0,function*(){const i=new Array;try{for(var r=lr(this),s;s=yield r.next(),!s.done;){const a=s.value;i.push(a)}}catch(a){t={error:a}}finally{try{s&&!s.done&&(n=r.return)&&(yield n.call(r))}finally{if(t)throw t.error}}return i})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class __ extends _o{constructor(t){super(t),this._impl=t}}class fA extends yo{constructor(t){super(t),this._impl=t}}class y_{constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,n){const i=this._loadVectors(t,n,this.schema.fields),r=ct({type:new pe(this.schema.fields),length:t.length,children:i});return new Oe(this.schema,r)}_loadDictionaryBatch(t,n){const{id:i,isDelta:r}=t,{dictionaries:s,schema:a}=this,o=s.get(i);if(r||!o){const u=a.dictionaries.get(i),c=this._loadVectors(t.data,n,[u]);return(o&&r?o.concat(new _t(c)):new _t(c)).memoize()}return o.memoize()}_loadVectors(t,n,i){return new jm(n,t.nodes,t.buffers,this.dictionaries).visitMany(i)}}class go extends y_{constructor(t,n){super(n),this._reader=Zu(t)?new lA(this._handle=t):new p_(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=v_(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):Gt}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):Gt}next(){if(this.closed)return Gt;let t;const{_reader:n}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const i=t.header(),r=n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(i,r)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const i=t.header(),r=n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(i,r);this.dictionaries.set(i.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new wl(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class vo extends y_{constructor(t,n){super(n),this._reader=new cA(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return U(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return U(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=v_(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return U(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):Gt})}return(t){return U(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):Gt})}next(){return U(this,void 0,void 0,function*(){if(this.closed)return Gt;let t;const{_reader:n}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const i=t.header(),r=yield n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(i,r)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const i=t.header(),r=yield n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(i,r);this.dictionaries.set(i.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new wl(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return U(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}}class g_ extends go{constructor(t,n){super(t instanceof Bf?t:new Bf(t),n)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var n;if(this.closed)return null;this._footer||this.open();const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(i&&this._handle.seek(i.offset)){const r=this._reader.readMessage(Et.RecordBatch);if(r!=null&&r.isRecordBatch()){const s=r.header(),a=this._reader.readMessageBody(r.bodyLength);return this._loadRecordBatch(s,a)}}return null}_readDictionaryBatch(t){var n;const i=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(i&&this._handle.seek(i.offset)){const r=this._reader.readMessage(Et.DictionaryBatch);if(r!=null&&r.isDictionaryBatch()){const s=r.header(),a=this._reader.readMessageBody(r.bodyLength),o=this._loadDictionaryBatch(s,a);this.dictionaries.set(s.id,o)}}}_readFooter(){const{_handle:t}=this,n=t.size-m_,i=t.readInt32(n),r=t.readAt(n-i,i);return js.decode(r)}_readNextMessageAndValidate(t){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(i&&this._handle.seek(i.offset))return this._reader.readMessage(t)}return null}}class dA extends vo{constructor(t,...n){const i=typeof n[0]!="number"?n.shift():void 0,r=n[0]instanceof Map?n.shift():void 0;super(t instanceof lo?t:new lo(t,i),r)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(t){const n=Object.create(null,{open:{get:()=>super.open}});return U(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const i of this._footer.dictionaryBatches())i&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,t)})}readRecordBatch(t){var n;return U(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(i&&(yield this._handle.seek(i.offset))){const r=yield this._reader.readMessage(Et.RecordBatch);if(r!=null&&r.isRecordBatch()){const s=r.header(),a=yield this._reader.readMessageBody(r.bodyLength);return this._loadRecordBatch(s,a)}}return null})}_readDictionaryBatch(t){var n;return U(this,void 0,void 0,function*(){const i=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(i&&(yield this._handle.seek(i.offset))){const r=yield this._reader.readMessage(Et.DictionaryBatch);if(r!=null&&r.isDictionaryBatch()){const s=r.header(),a=yield this._reader.readMessageBody(r.bodyLength),o=this._loadDictionaryBatch(s,a);this.dictionaries.set(s.id,o)}}})}_readFooter(){return U(this,void 0,void 0,function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const n=t.size-m_,i=yield t.readInt32(n),r=yield t.readAt(n-i,i);return js.decode(r)})}_readNextMessageAndValidate(t){return U(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(t)}return null})}}class pA extends go{constructor(t,n){super(t,n)}_loadVectors(t,n,i){return new rE(n,t.nodes,t.buffers,this.dictionaries).visitMany(i)}}function v_(e,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:e.autoDestroy}function*zf(e){const t=un.from(e);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function qf(e){return zn(this,arguments,function*(){const n=yield Z(un.from(e));try{if(!(yield Z(n.open({autoDestroy:!1}))).closed)do yield yield Z(n);while(!(yield Z(n.reset().open())).closed)}finally{yield Z(n.cancel())}})}function mA(e){return new _o(new pA(e))}function _A(e){const t=e.peek(ra+7&-8);return t&&t.byteLength>=4?Il(t)?new __(new g_(e.read())):new _o(new go(e)):new _o(new go(function*(){}()))}function yA(e){return U(this,void 0,void 0,function*(){const t=yield e.peek(ra+7&-8);return t&&t.byteLength>=4?Il(t)?new __(new g_(yield e.read())):new yo(new vo(e)):new yo(new vo(function(){return zn(this,arguments,function*(){})}()))})}function gA(e){return U(this,void 0,void 0,function*(){const{size:t}=yield e.stat(),n=new lo(e,t);return t>=hA&&Il(yield n.readAt(0,ra+7&-8))?new fA(new dA(n)):new yo(new vo(n))})}class ee extends lt{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...t){const n=r=>r.flatMap(s=>Array.isArray(s)?n(s):s instanceof Oe?s.data.children:s.data),i=new ee;return i.visitMany(n(t)),i}visit(t){if(t instanceof _t)return this.visitMany(t.data),this;const{type:n}=t;if(!j.isDictionary(n)){const{length:i,nullCount:r}=t;if(i>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");j.isNull(n)||bn.call(this,r<=0?new Uint8Array(0):ll(t.offset,i,t.nullBitmap)),this.nodes.push(new vr(i,r))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function bn(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new qn(this._byteLength,t)),this._byteLength+=t,this}function vA(e){const{type:t,length:n,typeIds:i,valueOffsets:r}=e;if(bn.call(this,i),t.mode===Ke.Sparse)return hc.call(this,e);if(t.mode===Ke.Dense){if(e.offset<=0)return bn.call(this,r),hc.call(this,e);{const s=i.reduce((l,h)=>Math.max(l,h),i[0]),a=new Int32Array(s+1),o=new Int32Array(s+1).fill(-1),u=new Int32Array(n),c=Mc(-r[0],n,r);for(let l,h,p=-1;++p<n;)(h=o[l=i[p]])===-1&&(h=o[l]=c[l]),u[p]=c[p]-h,++a[l];bn.call(this,u);for(let l,h=-1,p=t.children.length;++h<p;)if(l=e.children[h]){const m=t.typeIds[h],b=Math.min(n,a[m]);this.visit(l.slice(o[m],b))}}}return this}function bA(e){let t;return e.nullCount>=e.length?bn.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?bn.call(this,ll(e.offset,e.length,t)):bn.call(this,eo(e.values))}function Hi(e){return bn.call(this,e.values.subarray(0,e.length*e.stride))}function b_(e){const{length:t,values:n,valueOffsets:i}=e,r=i[0],s=i[t],a=Math.min(s-r,n.byteLength-r);return bn.call(this,Mc(-i[0],t,i)),bn.call(this,n.subarray(r,r+a)),this}function El(e){const{length:t,valueOffsets:n}=e;return n&&bn.call(this,Mc(n[0],t,n)),this.visit(e.children[0])}function hc(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}ee.prototype.visitBool=bA;ee.prototype.visitInt=Hi;ee.prototype.visitFloat=Hi;ee.prototype.visitUtf8=b_;ee.prototype.visitBinary=b_;ee.prototype.visitFixedSizeBinary=Hi;ee.prototype.visitDate=Hi;ee.prototype.visitTimestamp=Hi;ee.prototype.visitTime=Hi;ee.prototype.visitDecimal=Hi;ee.prototype.visitList=El;ee.prototype.visitStruct=hc;ee.prototype.visitUnion=vA;ee.prototype.visitInterval=Hi;ee.prototype.visitFixedSizeList=El;ee.prototype.visitMap=El;class w_ extends ml{constructor(t){super(),this._position=0,this._started=!1,this._sink=new Fa,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Be(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return pr(t)?t.then(n=>this.writeAll(n)):es(t)?Rl(this,t):Tl(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof Fa?this._sink=t:(this._sink=new Fa,t&&mx(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&_x(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!oc(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof _i&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof Oe&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!oc(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof Oe?t instanceof wl||this._writeRecordBatch(t):t instanceof _i?this.writeAll(t.batches):Zs(t)&&this.writeAll(t)}_writeMessage(t,n=8){const i=n-1,r=we.encode(t),s=r.byteLength,a=this._writeLegacyIpcFormat?4:8,o=s+a+i&~i,u=o-s-a;return t.headerType===Et.RecordBatch?this._recordBatchBlocks.push(new Mi(o,t.bodyLength,this._position)):t.headerType===Et.DictionaryBatch&&this._dictionaryBlocks.push(new Mi(o,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(o-a)),s>0&&this._write(r),this._writePadding(u)}_write(t){if(this._started){const n=wt(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(we.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write($s)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:i,bufferRegions:r,buffers:s}=ee.assemble(t),a=new Qe(t.numRows,i,r),o=we.from(a,n);return this._writeDictionaries(t)._writeMessage(o)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,i=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:r,nodes:s,bufferRegions:a,buffers:o}=ee.assemble(new _t([t])),u=new Qe(t.length,s,a),c=new Qn(u,n,i),l=we.from(c,r);return this._writeMessage(l)._writeBodyBuffers(o)}_writeBodyBuffers(t){let n,i,r;for(let s=-1,a=t.length;++s<a;)(n=t[s])&&(i=n.byteLength)>0&&(this._write(n),(r=(i+7&-8)-i)>0&&this._writePadding(r));return this}_writeDictionaries(t){for(let[n,i]of t.dictionaries){let r=this._dictionaryDeltaOffsets.get(n)||0;if(r===0||(i=i==null?void 0:i.slice(r)).length>0)for(const s of i.data)this._writeDictionaryBatch(s,n,r>0),r+=s.length}return this}}class Al extends w_{static writeAll(t,n){const i=new Al(n);return pr(t)?t.then(r=>i.writeAll(r)):es(t)?Rl(i,t):Tl(i,t)}}class kl extends w_{static writeAll(t){const n=new kl;return pr(t)?t.then(i=>n.writeAll(i)):es(t)?Rl(n,t):Tl(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=js.encode(new js(t,He.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function Tl(e,t){let n=t;t instanceof _i&&(n=t.batches,e.reset(void 0,t.schema));for(const i of n)e.write(i);return e.finish()}function Rl(e,t){var n,i,r,s;return U(this,void 0,void 0,function*(){try{for(n=lr(t);i=yield n.next(),!i.done;){const a=i.value;e.write(a)}}catch(a){r={error:a}}finally{try{i&&!i.done&&(s=n.return)&&(yield s.call(n))}finally{if(r)throw r.error}}return e.finish()})}function S_(e,t="stream"){return(t==="stream"?Al:kl).writeAll(e).toUint8Array(!0)}var wA=Object.create,x_=Object.defineProperty,SA=Object.getOwnPropertyDescriptor,xA=Object.getOwnPropertyNames,IA=Object.getPrototypeOf,EA=Object.prototype.hasOwnProperty,AA=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),kA=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of xA(t))!EA.call(e,r)&&r!==n&&x_(e,r,{get:()=>t[r],enumerable:!(i=SA(t,r))||i.enumerable});return e},TA=(e,t,n)=>(n=e!=null?wA(IA(e)):{},kA(t||!e||!e.__esModule?x_(n,"default",{value:e,enumerable:!0}):n,e)),RA=AA((e,t)=>{t.exports=Worker}),NA=(e=>(e[e.UNDEFINED=0]="UNDEFINED",e[e.AUTOMATIC=1]="AUTOMATIC",e[e.READ_ONLY=2]="READ_ONLY",e[e.READ_WRITE=3]="READ_WRITE",e))(NA||{}),OA=(e=>(e[e.NONE=0]="NONE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARNING=3]="WARNING",e[e.ERROR=4]="ERROR",e))(OA||{}),CA=(e=>(e[e.NONE=0]="NONE",e[e.CONNECT=1]="CONNECT",e[e.DISCONNECT=2]="DISCONNECT",e[e.OPEN=3]="OPEN",e[e.QUERY=4]="QUERY",e[e.INSTANTIATE=5]="INSTANTIATE",e))(CA||{}),FA=(e=>(e[e.NONE=0]="NONE",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR",e[e.START=3]="START",e[e.RUN=4]="RUN",e[e.CAPTURE=5]="CAPTURE",e))(FA||{}),LA=(e=>(e[e.NONE=0]="NONE",e[e.WEB_WORKER=1]="WEB_WORKER",e[e.NODE_WORKER=2]="NODE_WORKER",e[e.BINDINGS=3]="BINDINGS",e[e.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",e))(LA||{}),BA=class{constructor(e=2){this.level=e}log(e){e.level>=this.level&&console.log(e)}},DA=(e=>(e[e.SUCCESS=0]="SUCCESS",e))(DA||{}),MA=class{constructor(e,t){this._bindings=e,this._conn=t}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(e){return e(this._bindings,this._conn)}async query(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.runQuery(this._conn,e),n=un.from(t);return console.assert(n.isSync(),"Reader is not sync"),console.assert(n.isFile(),"Reader is not file"),new _i(n)}async send(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.startPendingQuery(this._conn,e);for(;t==null;)t=await this._bindings.pollPendingQuery(this._conn);let n=new I_(this._bindings,this._conn,t),i=await un.from(n);return console.assert(i.isAsync()),console.assert(i.isStream()),i}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(e){return await this._bindings.getTableNames(this._conn,e)}async prepare(e){let t=await this._bindings.createPrepared(this._conn,e);return new PA(this._bindings,this._conn,t)}async insertArrowTable(e,t){let n=S_(e,"stream");await this.insertArrowFromIPCStream(n,t)}async insertArrowFromIPCStream(e,t){await this._bindings.insertArrowFromIPCStream(this._conn,e,t)}async insertCSVFromPath(e,t){await this._bindings.insertCSVFromPath(this._conn,e,t)}async insertJSONFromPath(e,t){await this._bindings.insertJSONFromPath(this._conn,e,t)}},I_=class{constructor(e,t,n){this.db=e,this.conn=t,this.header=n,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let e;return this._inFlight!=null?(e=await this._inFlight,this._inFlight=null):e=await this.db.fetchQueryResults(this.conn),this._depleted=e.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:e}}[Symbol.asyncIterator](){return this}},PA=class{constructor(e,t,n){this.bindings=e,this.connectionId=t,this.statementId=n}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...e){let t=await this.bindings.runPrepared(this.connectionId,this.statementId,e),n=un.from(t);return console.assert(n.isSync()),console.assert(n.isFile()),new _i(n)}async send(...e){let t=await this.bindings.sendPrepared(this.connectionId,this.statementId,e),n=new I_(this.bindings,this.connectionId,t),i=await un.from(n);return console.assert(i.isAsync()),console.assert(i.isStream()),i}},UA=(e=>(e.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",e.CLOSE_PREPARED="CLOSE_PREPARED",e.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",e.CONNECT="CONNECT",e.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",e.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",e.CREATE_PREPARED="CREATE_PREPARED",e.DISCONNECT="DISCONNECT",e.DROP_FILE="DROP_FILE",e.DROP_FILES="DROP_FILES",e.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",e.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",e.FLUSH_FILES="FLUSH_FILES",e.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",e.GET_TABLE_NAMES="GET_TABLE_NAMES",e.GET_VERSION="GET_VERSION",e.GLOB_FILE_INFOS="GLOB_FILE_INFOS",e.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",e.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",e.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",e.INSTANTIATE="INSTANTIATE",e.OPEN="OPEN",e.PING="PING",e.POLL_PENDING_QUERY="POLL_PENDING_QUERY",e.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",e.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",e.REGISTER_FILE_URL="REGISTER_FILE_URL",e.RESET="RESET",e.RUN_PREPARED="RUN_PREPARED",e.RUN_QUERY="RUN_QUERY",e.SEND_PREPARED="SEND_PREPARED",e.START_PENDING_QUERY="START_PENDING_QUERY",e.TOKENIZE="TOKENIZE",e))(UA||{}),VA=(e=>(e.CONNECTION_INFO="CONNECTION_INFO",e.ERROR="ERROR",e.FEATURE_FLAGS="FEATURE_FLAGS",e.FILE_BUFFER="FILE_BUFFER",e.FILE_INFOS="FILE_INFOS",e.FILE_SIZE="FILE_SIZE",e.FILE_STATISTICS="FILE_STATISTICS",e.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",e.LOG="LOG",e.OK="OK",e.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",e.QUERY_PLAN="QUERY_PLAN",e.QUERY_RESULT="QUERY_RESULT",e.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",e.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",e.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",e.REGISTERED_FILE="REGISTERED_FILE",e.SCRIPT_TOKENS="SCRIPT_TOKENS",e.SUCCESS="SUCCESS",e.TABLE_NAMES="TABLE_NAMES",e.VERSION_STRING="VERSION_STRING",e))(VA||{}),pt=class{constructor(t,n){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=t,this.data=n,this.promise=new Promise((i,r)=>{this.promiseResolver=i,this.promiseRejecter=r})}};function Da(e){switch(e.typeId){case _.Binary:return{sqlType:"binary"};case _.Bool:return{sqlType:"bool"};case _.Date:return{sqlType:"date"};case _.DateDay:return{sqlType:"date32[d]"};case _.DateMillisecond:return{sqlType:"date64[ms]"};case _.Decimal:{let t=e;return{sqlType:"decimal",precision:t.precision,scale:t.scale}}case _.Float:return{sqlType:"float"};case _.Float16:return{sqlType:"float16"};case _.Float32:return{sqlType:"float32"};case _.Float64:return{sqlType:"float64"};case _.Int:return{sqlType:"int32"};case _.Int16:return{sqlType:"int16"};case _.Int32:return{sqlType:"int32"};case _.Int64:return{sqlType:"int64"};case _.Uint16:return{sqlType:"uint16"};case _.Uint32:return{sqlType:"uint32"};case _.Uint64:return{sqlType:"uint64"};case _.Uint8:return{sqlType:"uint8"};case _.IntervalDayTime:return{sqlType:"interval[dt]"};case _.IntervalYearMonth:return{sqlType:"interval[m]"};case _.List:return{sqlType:"list",valueType:Da(e.valueType)};case _.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:e.byteWidth};case _.Null:return{sqlType:"null"};case _.Utf8:return{sqlType:"utf8"};case _.Struct:return{sqlType:"struct",fields:e.children.map(t=>fc(t.name,t.type))};case _.Map:{let t=e;return{sqlType:"map",keyType:Da(t.keyType),valueType:Da(t.valueType)}}case _.Time:return{sqlType:"time[s]"};case _.TimeMicrosecond:return{sqlType:"time[us]"};case _.TimeMillisecond:return{sqlType:"time[ms]"};case _.TimeNanosecond:return{sqlType:"time[ns]"};case _.TimeSecond:return{sqlType:"time[s]"};case _.Timestamp:return{sqlType:"timestamp",timezone:e.timezone||void 0};case _.TimestampSecond:return{sqlType:"timestamp[s]",timezone:e.timezone||void 0};case _.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:e.timezone||void 0};case _.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:e.timezone||void 0};case _.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:e.timezone||void 0}}throw new Error(`unsupported arrow type: ${e.toString()}`)}function fc(e,t){let n=Da(t);return n.name=e,n}var jA=new TextEncoder,$A=class{constructor(e,t=null){this._onInstantiationProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=e,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),t!=null&&this.attach(t)}get logger(){return this._logger}attach(e){this._worker=e,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((t,n)=>{this._workerShutdownResolver=t})}detach(){!this._worker||(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){!this._worker||(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(e,t=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let n=this._nextMessageId++;return this._pendingRequests.set(n,e),this._worker.postMessage({messageId:n,type:e.type,data:e.data},t),await e.promise}onMessage(e){let t=e.data;switch(t.type){case"LOG":{this._logger.log(t.data);return}case"INSTANTIATE_PROGRESS":{for(let i of this._onInstantiationProgress)i(t.data);return}}let n=this._pendingRequests.get(t.requestId);if(!n){console.warn(`unassociated response: [${t.requestId}, ${t.type.toString()}]`);return}if(this._pendingRequests.delete(t.requestId),t.type=="ERROR"){let i=new Error(t.data.message);i.name=t.data.name,i.stack=t.data.stack,n.promiseRejecter(i);return}switch(n.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(t.type=="OK"){n.promiseResolver(t.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],t.type=="OK"){n.promiseResolver(t.data);return}break;case"GLOB_FILE_INFOS":if(t.type=="FILE_INFOS"){n.promiseResolver(t.data);return}break;case"GET_VERSION":if(t.type=="VERSION_STRING"){n.promiseResolver(t.data);return}break;case"GET_FEATURE_FLAGS":if(t.type=="FEATURE_FLAGS"){n.promiseResolver(t.data);return}break;case"GET_TABLE_NAMES":if(t.type=="TABLE_NAMES"){n.promiseResolver(t.data);return}break;case"TOKENIZE":if(t.type=="SCRIPT_TOKENS"){n.promiseResolver(t.data);return}break;case"COPY_FILE_TO_BUFFER":if(t.type=="FILE_BUFFER"){n.promiseResolver(t.data);return}break;case"EXPORT_FILE_STATISTICS":if(t.type=="FILE_STATISTICS"){n.promiseResolver(t.data);return}break;case"CONNECT":if(t.type=="CONNECTION_INFO"){n.promiseResolver(t.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(t.type=="QUERY_RESULT"){n.promiseResolver(t.data);return}break;case"SEND_PREPARED":if(t.type=="QUERY_RESULT_HEADER"){n.promiseResolver(t.data);return}break;case"START_PENDING_QUERY":if(t.type=="QUERY_RESULT_HEADER_OR_NULL"){n.promiseResolver(t.data);return}break;case"POLL_PENDING_QUERY":if(t.type=="QUERY_RESULT_HEADER_OR_NULL"){n.promiseResolver(t.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],t.type=="SUCCESS"){n.promiseResolver(t.data);return}break;case"FETCH_QUERY_RESULTS":if(t.type=="QUERY_RESULT_CHUNK"){n.promiseResolver(t.data);return}break;case"CREATE_PREPARED":if(t.type=="PREPARED_STATEMENT_ID"){n.promiseResolver(t.data);return}break}n.promiseRejecter(new Error(`unexpected response type: ${t.type.toString()}`))}onError(e){console.error(e),console.error(`error in duckdb worker: ${e.message}`),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn(`worker terminated with ${this._pendingRequests.size} pending requests`);return}this._pendingRequests.clear()}async reset(){let e=new pt("RESET",null);return await this.postTask(e)}async ping(){let e=new pt("PING",null);await this.postTask(e)}async dropFile(e){let t=new pt("DROP_FILE",e);return await this.postTask(t)}async dropFiles(){let e=new pt("DROP_FILES",null);return await this.postTask(e)}async flushFiles(){let e=new pt("FLUSH_FILES",null);return await this.postTask(e)}async instantiate(e,t=null,n=i=>{}){this._onInstantiationProgress.push(n);let i=new pt("INSTANTIATE",[e,t]);return await this.postTask(i)}async getVersion(){let e=new pt("GET_VERSION",null);return await this.postTask(e)}async getFeatureFlags(){let e=new pt("GET_FEATURE_FLAGS",null);return await this.postTask(e)}async open(e){let t=new pt("OPEN",e);await this.postTask(t)}async tokenize(e){let t=new pt("TOKENIZE",e);return await this.postTask(t)}async connectInternal(){let e=new pt("CONNECT",null);return await this.postTask(e)}async connect(){let e=await this.connectInternal();return new MA(this,e)}async disconnect(e){let t=new pt("DISCONNECT",e);await this.postTask(t)}async runQuery(e,t){let n=new pt("RUN_QUERY",[e,t]);return await this.postTask(n)}async startPendingQuery(e,t){let n=new pt("START_PENDING_QUERY",[e,t]);return await this.postTask(n)}async pollPendingQuery(e){let t=new pt("POLL_PENDING_QUERY",e);return await this.postTask(t)}async cancelPendingQuery(e){let t=new pt("CANCEL_PENDING_QUERY",e);return await this.postTask(t)}async fetchQueryResults(e){let t=new pt("FETCH_QUERY_RESULTS",e);return await this.postTask(t)}async getTableNames(e,t){let n=new pt("GET_TABLE_NAMES",[e,t]);return await this.postTask(n)}async createPrepared(e,t){let n=new pt("CREATE_PREPARED",[e,t]);return await this.postTask(n)}async closePrepared(e,t){let n=new pt("CLOSE_PREPARED",[e,t]);await this.postTask(n)}async runPrepared(e,t,n){let i=new pt("RUN_PREPARED",[e,t,n]);return await this.postTask(i)}async sendPrepared(e,t,n){let i=new pt("SEND_PREPARED",[e,t,n]);return await this.postTask(i)}async globFiles(e){let t=new pt("GLOB_FILE_INFOS",e);return await this.postTask(t)}async registerFileText(e,t){let n=jA.encode(t);await this.registerFileBuffer(e,n)}async registerFileURL(e,t,n,i){t===void 0&&(t=e);let r=new pt("REGISTER_FILE_URL",[e,t,n,i]);await this.postTask(r)}async registerEmptyFileBuffer(e){let t=new pt("REGISTER_FILE_BUFFER",[e,new Uint8Array]);await this.postTask(t)}async registerFileBuffer(e,t){let n=new pt("REGISTER_FILE_BUFFER",[e,t]);await this.postTask(n,[t.buffer])}async registerFileHandle(e,t,n,i){let r=new pt("REGISTER_FILE_HANDLE",[e,t,n,i]);await this.postTask(r,[])}async collectFileStatistics(e,t){let n=new pt("COLLECT_FILE_STATISTICS",[e,t]);await this.postTask(n,[])}async exportFileStatistics(e){let t=new pt("EXPORT_FILE_STATISTICS",e);return await this.postTask(t,[])}async copyFileToBuffer(e){let t=new pt("COPY_FILE_TO_BUFFER",e);return await this.postTask(t)}async copyFileToPath(e,t){let n=new pt("COPY_FILE_TO_PATH",[e,t]);await this.postTask(n)}async insertArrowFromIPCStream(e,t,n){if(t.length==0)return;let i=new pt("INSERT_ARROW_FROM_IPC_STREAM",[e,t,n]);await this.postTask(i,[t.buffer])}async insertCSVFromPath(e,t,n){if(n.columns!==void 0){let r=[];for(let s in n.columns){let a=n.columns[s];r.push(fc(s,a))}n.columnsFlat=r,delete n.columns}let i=new pt("IMPORT_CSV_FROM_PATH",[e,t,n]);await this.postTask(i)}async insertJSONFromPath(e,t,n){if(n.columns!==void 0){let r=[];for(let s in n.columns){let a=n.columns[s];r.push(fc(s,a))}n.columnsFlat=r,delete n.columns}let i=new pt("IMPORT_JSON_FROM_PATH",[e,t,n]);await this.postTask(i)}},zA=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),qA=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),GA=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),YA=()=>(async e=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),HA={name:"@duckdb/duckdb-wasm",version:"1.26.0",description:"DuckDB powered by WebAssembly",license:"MIT",repository:{type:"git",url:"https://github.com/duckdb/duckdb-wasm.git"},keywords:["sql","duckdb","relational","database","data","query","wasm","analytics","olap","arrow","parquet","json","csv"],dependencies:{"apache-arrow":"^11.0.0"},devDependencies:{"@types/emscripten":"^1.39.6","@types/jasmine":"^4.3.1","@typescript-eslint/eslint-plugin":"^5.53.0","@typescript-eslint/parser":"^5.49.0",esbuild:"^0.15.12",eslint:"^8.35.0","eslint-plugin-jasmine":"^4.1.3","eslint-plugin-react":"^7.32.2","fast-glob":"^3.2.12",jasmine:"^4.5.0","jasmine-core":"^5.0.0","jasmine-spec-reporter":"^7.0.0","js-sha256":"^0.9.0",karma:"^6.4.2","karma-chrome-launcher":"^3.1.1","karma-coverage":"^2.2.0","karma-firefox-launcher":"^2.1.2","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.0.0","karma-sourcemap-loader":"^0.3.8","karma-spec-reporter":"^0.0.36","make-dir":"^3.1.0",nyc:"^15.1.0",prettier:"^2.8.4",puppeteer:"^19.10.0",rimraf:"^4.3.0",s3rver:"^3.7.1",typedoc:"^0.23.27",typescript:"^4.8.4","wasm-feature-detect":"^1.5.1","web-worker":"^1.2.0"},scripts:{"build:debug":"node bundle.mjs debug && tsc --emitDeclarationOnly","build:release":"node bundle.mjs release && tsc --emitDeclarationOnly",docs:"typedoc",report:"node ./coverage.mjs","test:node":"node --enable-source-maps --experimental-wasm-eh ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:debug":"node --inspect-brk --enable-source-maps --experimental-wasm-eh ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:coverage":"nyc -r json --report-dir ./coverage/node node --experimental-wasm-eh ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:firefox":"karma start ./karma/tests-firefox.cjs","test:chrome":"karma start ./karma/tests-chrome.cjs","test:chrome:eh":"karma start ./karma/tests-chrome-eh.cjs","test:chrome:coverage":"karma start ./karma/tests-chrome-coverage.cjs","test:browser":"karma start ./karma/tests-all.cjs","test:browser:debug":"karma start ./karma/tests-debug.cjs",test:"npm run test:chrome && npm run test:node","test:coverage":"npm run test:chrome:coverage && npm run test:node:coverage && npm run report",lint:"eslint src test"},files:["dist","!dist/types/test"],main:"dist/duckdb-browser.cjs",module:"dist/duckdb-browser.mjs",types:"dist/duckdb-browser.d.ts",jsdelivr:"dist/duckdb-browser.cjs",unpkg:"dist/duckdb-browser.mjs",sideEffects:!1,browser:{fs:!1,path:!1,perf_hooks:!1,os:!1,worker_threads:!1},exports:{"./dist/duckdb-mvp.wasm":"./dist/duckdb-mvp.wasm","./dist/duckdb-eh.wasm":"./dist/duckdb-eh.wasm","./dist/duckdb-coi.wasm":"./dist/duckdb-coi.wasm","./dist/duckdb-browser":"./dist/duckdb-browser.mjs","./dist/duckdb-browser.cjs":"./dist/duckdb-browser.cjs","./dist/duckdb-browser.mjs":"./dist/duckdb-browser.mjs","./dist/duckdb-browser-blocking":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.mjs":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.cjs":"./dist/duckdb-browser-blocking.cjs","./dist/duckdb-browser-coi.pthread.worker.js":"./dist/duckdb-browser-coi.pthread.worker.js","./dist/duckdb-browser-coi.worker.js":"./dist/duckdb-browser-coi.worker.js","./dist/duckdb-browser-eh.worker.js":"./dist/duckdb-browser-eh.worker.js","./dist/duckdb-browser-mvp.worker.js":"./dist/duckdb-browser-mvp.worker.js","./dist/duckdb-node":"./dist/duckdb-node.cjs","./dist/duckdb-node.cjs":"./dist/duckdb-node.cjs","./dist/duckdb-node-blocking":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-blocking.cjs":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-eh.worker.cjs":"./dist/duckdb-node-eh.worker.cjs","./dist/duckdb-node-mvp.worker.cjs":"./dist/duckdb-node-mvp.worker.cjs","./blocking":{browser:{types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},node:{types:"./dist/duckdb-node-blocking.d.ts",require:"./dist/duckdb-node-blocking.cjs",import:"./dist/duckdb-node-blocking.cjs"},types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},".":{browser:{types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"},node:{types:"./dist/duckdb-node.d.ts",import:"./dist/duckdb-node.cjs",require:"./dist/duckdb-node.cjs"},types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"}}},Nl=HA.version.split(".");Nl[0];Nl[1];Nl[2];var WA=()=>typeof navigator>"u",Tu=null,Ru=null,Nu=null,Ou=null,Cu=null;async function KA(){return Tu==null&&(Tu=typeof BigInt64Array<"u"),Ru==null&&(Ru=await qA()),Nu==null&&(Nu=await YA()),Ou==null&&(Ou=await GA()),Cu==null&&(Cu=await zA()),{bigInt64Array:Tu,crossOriginIsolated:WA()||globalThis.crossOriginIsolated||!1,wasmExceptions:Ru,wasmSIMD:Ou,wasmThreads:Nu,wasmBulkMemory:Cu}}async function QA(e){let t=await KA();if(t.wasmExceptions){if(t.wasmSIMD&&t.wasmThreads&&t.crossOriginIsolated&&e.coi)return{mainModule:e.coi.mainModule,mainWorker:e.coi.mainWorker,pthreadWorker:e.coi.pthreadWorker};if(e.eh)return{mainModule:e.eh.mainModule,mainWorker:e.eh.mainWorker,pthreadWorker:null}}return{mainModule:e.mvp.mainModule,mainWorker:e.mvp.mainWorker,pthreadWorker:null}}TA(RA());function XA(){let e=new TextDecoder;return t=>(typeof SharedArrayBuffer<"u"&&t.buffer instanceof SharedArrayBuffer&&(t=new Uint8Array(t)),e.decode(t))}XA();var JA=(e=>(e[e.BUFFER=0]="BUFFER",e[e.NODE_FS=1]="NODE_FS",e[e.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",e[e.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",e[e.HTTP=4]="HTTP",e[e.S3=5]="S3",e))(JA||{});const ZA=""+new URL("../assets/duckdb-mvp.a4aa3c03.wasm",import.meta.url).href,t2=""+new URL("../assets/duckdb-browser-mvp.worker.91331f4b.js",import.meta.url).href,e2=""+new URL("../assets/duckdb-eh.13ec0755.wasm",import.meta.url).href,n2=""+new URL("../assets/duckdb-browser-eh.worker.80bdeff3.js",import.meta.url).href;class i2 extends zi{constructor(t){super(),this.db=null,this.conn=null,this.name=t.name,this.url=t.url}async init(t){const i=await QA({mvp:{mainModule:ZA,mainWorker:t2},eh:{mainModule:e2,mainWorker:n2}}),r=new Worker(i.mainWorker),s=new BA;this.db=new $A(s,r),await this.db.instantiate(i.mainModule,i.pthreadWorker),this.conn=await this.db.connect()}async register(t,n){await this.db.registerFileURL(t,n,4,!1)}async query(t){return await this.conn.query(t)}async parquetLoad(t){const n=`${vg}/${t.parquet}`;console.log("parquet_name and registration path:",t.parquet,n),await this.register(t.parquet,n);const i=`CREATE TABLE ${t.name} AS SELECT * FROM parquet_scan('${t.parquet}')`;console.log("parquet loading query:",i),await this.query(i)}async dbLoad(){const t="IMPORT DATABASE ''";console.log("database load is:",t),await this.query(t)}async loadParquets(t){for(const n of t)await this.parquetLoad(n)}async execute(t,...n){let i=await this.conn.query(t),r=i.toArray().map(Object.fromEntries);return r.columns=i.schema.fields.map(s=>s.name),console.log("duckdb.execute",t,r,...n),this.emit("data",r,...n),this.emit("debug",r),r}}var ki=(e=>(e.LITERAL="literal",e.AST="ast",e.LIST="list",e.ANY="any",e.OPT="opt",e.FIXEDMULTI="fixedmulti",e.MULTI="multi",e))(ki||{});let Gf=bw(e=>e.length>0);class r2{constructor(t){this.binding={},this.spec={},this.spec=t}update(t){return this.binding=Oc(this.binding,t),this}toSQL(){return dc(this.binding,this.spec)}}function dc(e,t){let n=t.children??[],i=$w(dc,[e]),r=[],s;switch(t==null?void 0:t.type){case ki.LITERAL:return t.value;case ki.AST:return r=n.map(i),Gf(r).join("");case ki.LIST:return r=n.map(i),Gf(r).join(t.delim);case ki.ANY:if(s=e[t.id]??t.default??0,s=="inf")return"9e999";if(s=="-inf")return"-9e999";let a=+s;return Number.isNaN(a)?`'${s}'`:s<0||s>=n.length?a:i(n[a]);case ki.OPT:return s=e[t.id]??t.default??0,Nw(s,[1,"selected"])?i(n[0]):"";case ki.FIXEDMULTI:case ki.MULTI:let o=e[t.id]??t.default??[];return Ya(Array,o)||(o=[o]),o.map(u=>dc(u,n[0])).join(t.delim??"");default:return""}}class s2 extends zi{constructor(t){super(),this.spec={},this.dt=null,this.backend=null,this.bindings={},this.spec=t,this.dt=new r2(t.difftree),this.backend=Ya(String,t.backend)?$u(Hd)[t.backend]:t.backend,this.backend&&this.backend.on("data",n=>{this.emit("data",n)})}merge(t,n){return(void 0)(t,n)}async execute(t,n){Ya(Array,t)&&(t=t[0]??{});const i=this.dt.update(t).toSQL();if(console.log("ClientDT.execute",i,t),this.emit("debug",i),this.backend)return this.backend.execute(i,n)}}class a2 extends zi{constructor(t){super(),this.q=[],this.q=t.data??[]}async execute(t,n){this.emit("data",t??this.q,n)}}class o2 extends zi{constructor(t){super();let n=t.attrs??[];this.gen=i=>{let r=n.map(s=>[s,Math.ceil(Math.random()*100)]);return r.push(["id",i]),sp(r)}}async execute(t,...n){this.emit("data",Yw(this.gen,10),...n)}}class u2 extends zi{constructor(t){super(),this.backend=t.backend,this.query=t.query,this.name=t.name,this.params=t.params,this.backend.on("data",(n,i)=>{i==this.name&&this.emit("data",n,this.name)})}prepareQuery(t,n){let i,r=t;console.log("currQuery is,",r);for(const s in n)i="var("+s+")",r=r.replaceAll(i,n[s]);return r}async execute(t){for(const i in t){console.log("check",t[i]);let r=t[i];this.params=Oc(this.params,r)}console.log("QueryBackend name ",this.name," with args ",this.params);let n=this.prepareQuery(this.query,this.params);return this.emit("debug",n),console.log("QueryBackend calling to its own backend"),this.backend.execute(n,this.name)}}const St=Array.isArray;function Me(e){return e!=null?St(e)?e:[e]:[]}function c2(e=0,t=1/0){return`${Yf(e)} < row_number() && row_number() <= ${Yf(t)}`}function Yf(e){return e<0?`count() + ${e}`:e}class E_{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(c2(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Me(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,i){return this.__pivot(this,t,n,i)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...i){return this.__lookup(this,t,n,i.flat())}join(t,n,i,r){return this.__join(this,t,n,i,r)}join_left(t,n,i,r){const s={...r,left:!0,right:!1};return this.__join(this,t,n,i,s)}join_right(t,n,i,r){const s={...r,left:!1,right:!0};return this.__join(this,t,n,i,s)}join_full(t,n,i,r){const s={...r,left:!0,right:!0};return this.__join(this,t,n,i,s)}cross(t,n,i){return this.__cross(this,t,n,i)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function it(e){throw Error(e)}function xe(e){return typeof e=="number"}function Pt(e){return typeof e=="function"}function qo(e,t){const n=Array(e);if(Pt(t))for(let i=0;i<e;++i)n[i]=t(i);else n.fill(t);return n}class l2 extends E_{constructor(t,n,i,r,s,a,o){super(o),this._names=Object.freeze(t),this._data=i,this._total=n,this._nrows=r?r.count():n,this._mask=n!==this._nrows&&r||null,this._group=s||null,this._order=a||null}create(t){it("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){it("Not implemented")}*values(t){const n=this.getter(t),i=this.numRows();for(let r=0;r<i;++r)yield n(r)}get(t,n=0){it("Not implemented")}getter(t){it("Not implemented")}objects(t){it("Not implemented")}object(t){it("Not implemented")}[Symbol.iterator](){it("Not implemented")}print(t={}){xe(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),i=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(i),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),i=new Uint32Array(n),r=this.isOrdered(),s=this.mask();let a=-1;if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))i[++a]=o;else for(let o=0;o<n;++o)i[++a]=o;if(t&&r){const o=this._order,u=this._data;i.sort((c,l)=>o(c,l,u))}return(t||!r)&&(this._index=i),i}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:i}=this._group,r=qo(i,()=>[]),s=this._index,a=this.mask(),o=this.numRows();if(s&&this.isOrdered())for(let u=0,c;u<o;++u)c=s[u],r[n[c]].push(c);else if(a)for(let u=a.next(0);u>=0;u=a.next(u+1))r[n[u]].push(u);else for(let u=0;u<o;++u)r[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,c=this._data;for(let l=0;l<i;++l)r[l].sort((h,p)=>u(h,p,c))}return(t||!this.isOrdered())&&(this._partitions=r),r}scan(t,n,i=1/0,r=0){const s=this._mask,a=this._nrows,o=this._data;let u=r||0;if(u>a)return;const c=Math.min(a,u+i),l=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const h=this.indices(),p=this._data;for(;u<c;++u)t(h[u],p,l)}else if(s){let h=c-u+1;for(u=s.nth(u);--h&&u>-1;u=s.next(u+1))t(u,o,l)}else for(;u<c;++u)t(u,o,l)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const i=[],r=this.numRows();return t=Math.max(0,t+(t<0?r:0)),n=Math.min(r,Math.max(0,n+(n<0?r:0))),this.scan(s=>i.push(s),!0,n-t,t),this.reify(i)}reduce(t){return this.__reduce(this,t)}}let h2=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},f2=function(e){return e&&Pt(e.get)?e:new h2(e)};function yi(e){return e instanceof Date}function ge(e){return e===Object(e)}function bo(e){return e instanceof RegExp}function _e(e){return typeof e=="string"}function d2(e,t){const n=i=>it(`Illegal argument type: ${i||typeof e}`);return e instanceof Map?Hf(e.entries(),t):yi(e)?n("Date"):bo(e)?n("RegExp"):_e(e)?n():St(e)?p2(e,t):Pt(e[Symbol.iterator])?m2(e,t):ge(e)?Hf(Object.entries(e),t):n()}function Hf(e,t=["key","value"]){const n=[],i=[];for(const[s,a]of e)n.push(s),i.push(a);const r={};return t[0]&&(r[t[0]]=n),t[1]&&(r[t[1]]=i),r}function p2(e,t){const n=e.length,i={},r=s=>i[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(r),a=s.length;for(let o=0;o<n;++o){const u=e[o];for(let c=0;c<a;++c)s[c][o]=u[t[c]]}}else t&&t.forEach(r);return i}function m2(e,t){const n={},i=a=>n[a]=[];let r,s;for(const a of e){r||(t=t||Object.keys(a),r=t.map(i),s=r.length);for(let o=0;o<s;++o)r[o].push(a[t[o]])}return!r&&t&&t.forEach(i),n}const{hasOwnProperty:_2}=Object.prototype;function An(e,t){return _2.call(e,t)}function Xe(e){return e?new Wf({...e.data()},e.columnNames()):new Wf}class Wf{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return An(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const vt=void 0,y2=Object.getPrototypeOf(Int8Array);function sa(e){return e instanceof y2}function or(e){return St(e)||sa(e)}function yn(e){return e!=null&&e===e}const _s=e=>or(e)||_e(e),g2={compact:e=>or(e)?e.filter(t=>yn(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>_s(e)?e.includes(t,n):!1,indexof:(e,t)=>_s(e)?e.indexOf(t):-1,join:(e,t)=>or(e)?e.join(t):vt,lastindexof:(e,t)=>_s(e)?e.lastIndexOf(t):-1,length:e=>_s(e)?e.length:0,pluck:(e,t)=>or(e)?e.map(n=>yn(n)?n[t]:vt):vt,reverse:e=>or(e)?e.slice().reverse():_e(e)?e.split("").reverse().join(""):vt,slice:(e,t,n)=>_s(e)?e.slice(t,n):vt};function v2(e,t,n,i,r){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+i*Math.floor(1e-14+(e-t)/i+(r||0)))}function Ma(e,t,n="0"){const i=e+"",r=i.length;return r<t?Array(t-r+1).join(n)+i:i}const On=e=>(e<10?"0":"")+e,b2=e=>e<0?"-"+Ma(-e,6):e>9999?"+"+Ma(e,6):Ma(e,4);function A_(e,t,n,i,r,s,a,o,u){const c=o?"Z":"";return b2(e)+"-"+On(t+1)+"-"+On(n)+(!u||a?"T"+On(i)+":"+On(r)+":"+On(s)+"."+Ma(a,3)+c:s?"T"+On(i)+":"+On(r)+":"+On(s)+c:r||i||!o?"T"+On(i)+":"+On(r)+c:"")}function k_(e,t){return isNaN(e)?"Invalid Date":A_(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function Go(e,t){return isNaN(e)?"Invalid Date":A_(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const w2=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function S2(e){return e.match(w2)}function x2(e,t=Date.parse){return S2(e)?t(e):e}const T_=6e4,R_=864e5,N_=6048e5,Ht=new Date,Wt=new Date,Xt=e=>(Ht.setTime(typeof e=="string"?x2(e):e),Ht);function I2(e,t,n,i,r,s,a){return arguments.length?new Date(e,t||0,n??1,i||0,r||0,s||0,a||0):new Date(Date.now())}function E2(e,t,n,i,r,s,a){return arguments.length?new Date(Date.UTC(e,t||0,n??1,i||0,r||0,s||0,a||0)):new Date(Date.now())}function A2(e){Wt.setTime(+e),Wt.setHours(0,0,0,0),Ht.setTime(+Wt),Ht.setMonth(0),Ht.setDate(1);const t=(Wt.getTimezoneOffset()-Ht.getTimezoneOffset())*T_;return Math.floor(1+(Wt-Ht-t)/R_)}function k2(e){Wt.setTime(+e),Wt.setUTCHours(0,0,0,0);const t=Date.UTC(Wt.getUTCFullYear(),0,1);return Math.floor(1+(Wt-t)/R_)}function T2(e,t){const n=t||0;Wt.setTime(+e),Wt.setDate(Wt.getDate()-(Wt.getDay()+7-n)%7),Wt.setHours(0,0,0,0),Ht.setTime(+e),Ht.setMonth(0),Ht.setDate(1),Ht.setDate(1-(Ht.getDay()+7-n)%7),Ht.setHours(0,0,0,0);const i=(Wt.getTimezoneOffset()-Ht.getTimezoneOffset())*T_;return Math.floor((1+(Wt-Ht)-i)/N_)}function R2(e,t){const n=t||0;return Wt.setTime(+e),Wt.setUTCDate(Wt.getUTCDate()-(Wt.getUTCDay()+7-n)%7),Wt.setUTCHours(0,0,0,0),Ht.setTime(+e),Ht.setUTCMonth(0),Ht.setUTCDate(1),Ht.setUTCDate(1-(Ht.getUTCDay()+7-n)%7),Ht.setUTCHours(0,0,0,0),Math.floor((1+(Wt-Ht))/N_)}const N2={format_date:(e,t)=>k_(Xt(e),!t),format_utcdate:(e,t)=>Go(Xt(e),!t),timestamp:e=>+Xt(e),year:e=>Xt(e).getFullYear(),quarter:e=>Math.floor(Xt(e).getMonth()/3),month:e=>Xt(e).getMonth(),date:e=>Xt(e).getDate(),dayofweek:e=>Xt(e).getDay(),hours:e=>Xt(e).getHours(),minutes:e=>Xt(e).getMinutes(),seconds:e=>Xt(e).getSeconds(),milliseconds:e=>Xt(e).getMilliseconds(),utcyear:e=>Xt(e).getUTCFullYear(),utcquarter:e=>Math.floor(Xt(e).getUTCMonth()/3),utcmonth:e=>Xt(e).getUTCMonth(),utcdate:e=>Xt(e).getUTCDate(),utcdayofweek:e=>Xt(e).getUTCDay(),utchours:e=>Xt(e).getUTCHours(),utcminutes:e=>Xt(e).getUTCMinutes(),utcseconds:e=>Xt(e).getUTCSeconds(),utcmilliseconds:e=>Xt(e).getUTCMilliseconds(),datetime:I2,dayofyear:A2,week:T2,utcdatetime:E2,utcdayofyear:k2,utcweek:R2,now:Date.now};function Ol(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:yi(e)||yi(t)?+e==+t:bo(e)&&bo(t)?e+""==t+"":ge(e)&&ge(t)?O2(e,t):!1}function O2(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return Kf(e,t);const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length||(n.sort(),i.sort(),!Kf(n,i,(s,a)=>s===a)))return!1;const r=n.length;for(let s=0;s<r;++s){const a=n[s];if(!Ol(e[a],t[a]))return!1}return!0}function Kf(e,t,n=Ol){const i=e.length;if(i!==t.length)return!1;for(let r=0;r<i;++r)if(!n(e[r],t[r]))return!1;return!0}const C2={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let F2=Math.random;function ss(){return F2()}const L2={random:ss,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function Cl(e){return e instanceof Map}function B2(e){return e instanceof Set}function Pa(e){return Cl(e)||B2(e)}function Fu(e){return Array.from(e)}const D2={has:(e,t)=>Pa(e)?e.has(t):e!=null?An(e,t):!1,keys:e=>Cl(e)?Fu(e.keys()):e!=null?Object.keys(e):[],values:e=>Pa(e)?Fu(e.values()):e!=null?Object.values(e):[],entries:e=>Pa(e)?Fu(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):vt};function M2(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(An(t,e))return t[e];return n!==void 0?n:e}function P2(e,t,n){let i=arguments.length;e=+e,t=+t,n=i<2?(t=e,e=0,1):i<3?1:+n,i=Math.max(0,Math.ceil((t-e)/n))|0;const r=new Array(i);for(let s=0;s<i;++s)r[s]=e+s*n;return r}const U2={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const i=e==null?e:String(e).match(t);return n==null||i==null?i:typeof n=="number"?i[n]:i.groups?i.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},Tr={bin:v2,equal:Ol,recode:M2,sequence:P2,...g2,...N2,...C2,...L2,...D2,...U2};function zs(e){return typeof e=="bigint"}function Xn(e){return e===void 0?e+"":zs(e)?e+"n":JSON.stringify(e)}function X(e,t=[],n=[]){return new V2(e,Me(t),Me(n))}let V2=class{constructor(t,n,i){this.name=t,this.fields=n,this.params=i}toString(){const t=[...this.fields.map(n=>`d[${Xn(n)}]`),...this.params.map(Xn)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const O_=e=>X("any",e),C_=()=>X("count"),F_=e=>X("array_agg",e),L_=e=>X("array_agg_distinct",e),B_=(e,t)=>X("map_agg",[e,t]),D_=(e,t)=>X("object_agg",[e,t]),M_=(e,t)=>X("entries_agg",[e,t]);({...Tr});function j2(e,t){e=Pa(e)?e:new Set(e);let n=t,i=0;for(;e.has(n);)n=t+ ++i;return n}function $2(e,t){if(!e||!t)return e;const{keys:n,rows:i,size:r}=e,s=new Int32Array(r);t.scan(l=>s[n[l]]=1);const a=s.reduce((l,h)=>l+h,0);if(a===r)return e;const o=Array(a);let u=0;for(let l=0;l<r;++l)s[l]&&(o[s[l]=u++]=i[l]);const c=new Uint32Array(n.length);return t.scan(l=>c[l]=s[n[l]]),{...e,keys:c,rows:o,size:u}}function z2(e,t,n,i){const{keys:r,rows:s,size:a}=e;let o=s,u=a,c=null;if(n){c=new Int32Array(a),t(b=>c[r[b]]=1);const m=c.reduce((b,y)=>b+y,0);if(m!==a){o=Array(m),u=0;for(let b=0;b<a;++b)c[b]&&(o[c[b]=u++]=s[b])}}let l=-1;const h=new Uint32Array(i);return t(u!==a?m=>h[++l]=c[r[m]]:m=>h[++l]=r[m]),{...e,keys:h,rows:o,size:u}}function q2(e,t,n,i){const r=i==="map"||i===!0?B_:i==="entries"?M_:i==="object"?D_:it('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),a=j2(e.columnNames(),"_");let o=e.select().reify(t).create({data:{[a]:n}}).rollup({[a]:F_(a)});for(let u=s.length;--u>=0;)o=o.groupby(s.slice(0,u)).rollup({[a]:r(s[u],a)});return o.get(a)}const G2="ArrayPattern",Y2="ArrowFunctionExpression",H2="FunctionExpression",Fi="Identifier",as="Literal",P_="MemberExpression",W2="ObjectExpression",U_="ObjectPattern",V_="Property",aa="Column",K2="Constant",Q2="Dictionary",X2="Function",J2="Parameter",j_="Op",Dt=(e,t)=>{const n=Z2[e.type];return n?n(e,t):it(`Unsupported expression construct: ${e.type}`)},Lu=(e,t)=>"("+Dt(e.left,t)+" "+e.operator+" "+Dt(e.right,t)+")",Bu=(e,t)=>"("+Bn(e.params,t)+")=>"+Dt(e.body,t),Qf=(e,t)=>Dt(e.callee,t)+"("+Bn(e.arguments,t)+")",Bn=(e,t,n=",")=>e.map(i=>Dt(i,t)).join(n),$_=e=>e.computed?`[${Xn(e.name)}]`:`.${e.name}`,Xf=(e,t,n)=>{const i=e.table||"";return`data${i}${$_(e)}.${n}(${t.index}${i})`},Z2={Constant:e=>e.raw,Column:(e,t)=>Xf(e,t,"get"),Dictionary:(e,t)=>Xf(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${$_(e)}`,Op:(e,t)=>`op(${Xn(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:i}=e,r=i.length;let s=n[0].value.raw;for(let a=0;a<r;)s+="${"+Dt(i[a],t)+"}"+n[++a].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,i=Dt(e.object,t),r=Dt(e.property,t);return i+(n?"."+r:"["+r+"]")},CallExpression:Qf,NewExpression:(e,t)=>"new "+Qf(e,t),ArrayExpression:(e,t)=>"["+Bn(e.elements,t)+"]",AssignmentExpression:Lu,BinaryExpression:Lu,LogicalExpression:Lu,UnaryExpression:(e,t)=>"("+e.operator+Dt(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+Dt(e.test,t)+"?"+Dt(e.consequent,t)+":"+Dt(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Bn(e.properties,t)+"})",Property:(e,t)=>{const n=Dt(e.key,t);return(e.computed?`[${n}]`:n)+":"+Dt(e.value,t)},ArrowFunctionExpression:Bu,FunctionExpression:Bu,FunctionDeclaration:Bu,ArrayPattern:(e,t)=>"["+Bn(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Bn(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Bn(e.declarations,t,","),VariableDeclarator:(e,t)=>Dt(e.id,t)+"="+Dt(e.init,t),SpreadElement:(e,t)=>"..."+Dt(e.argument,t),BlockStatement:(e,t)=>"{"+Bn(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>Dt(e.expression,t),IfStatement:(e,t)=>"if ("+Dt(e.test,t)+")"+Dt(e.consequent,t)+(e.alternate?" else "+Dt(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+Dt(e.discriminant,t)+") {"+Bn(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+Dt(e.test,t):"default")+": "+Bn(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+Dt(e.argument,t),Program:(e,t)=>Dt(e.body[0],t)};function wo(e,t={index:"row"}){return Dt(e,t)}function tk(e,t,n=15,i=!0,r=0,s){const o=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/o),c=t-e||Math.abs(e)||1,l=[5,2];for(s=Math.max(r,Math.pow(10,Math.round(Math.log(c)/o)-u));Math.ceil(c/s)>n;)s*=10;const h=l.length;for(let p=0;p<h;++p){const m=s/l[p];m>=r&&c/m<=n&&(s=m)}}if(i){let u=Math.log(s);const c=u>=0?0:~~(-u/o)+1,l=Math.pow(10,-c-1);u=Math.floor(e/s+l)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function Xr(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:yi(e)?+e:St(e)||sa(e)?`[${e.map(Xr)}]`:bo(e)?e+"":ek(e)}function ek(e){let t="{",n=-1;for(const i in e)++n>0&&(t+=","),t+=`"${i}":${Xr(e[i])}`;return t+="}",t}function So(e,t){const n=e.length;return n===1?(i,r)=>Xr(e[0](i,r)):(i,r)=>{let s="";for(let a=0;a<n;++a){a>0&&(s+="|");const o=e[a](i,r);if(t&&(o==null||o!==o))return null;s+=Xr(o)}return s}}function nk(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=Xr(t),i=e.get(n);i?++i.n:e.set(n,{v:t,n:1})},decrement(t){const n=Xr(t),i=e.get(n);i.n===1?e.delete(n):--i.n},forEach(t){e.forEach(({v:n,n:i})=>t(n,i))}}}function oi(){}function ik(e,t=0,n=e.length){let i=e[t++];for(let r=t;r<n;++r)i*=e[r];return i}function ie(e){return e.init=e.init||oi,e.add=e.add||oi,e.rem=e.rem||oi,e}function Jf(e,t){return e.product_v=!1,e.product=t}const z_={count:{create:()=>ie({value:e=>e.count}),param:[]},array_agg:{create:()=>ie({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>ie({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>ie({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>ie({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>ie({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:vt}),param:[1]},valid:{create:()=>ie({value:e=>e.valid}),param:[1]},invalid:{create:()=>ie({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=nk(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>ie({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>ie({value:e=>{let t=vt,n=0;return e.distinct.forEach((i,r)=>{r>n&&(n=r,t=i)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:vt,add:(e,t)=>zs(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>Jf(e,1),value:e=>e.valid?e.product_v?Jf(e,ik(e.list.values())):e.product:void 0,add:(e,t)=>zs(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:vt,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>ie({value:e=>e.valid?e.mean:vt}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):vt,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>ie({value:e=>e.valid>1?e.dev/e.valid:vt}),param:[1],req:["variance"]},stdev:{create:()=>ie({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):vt}),param:[1],req:["variance"]},stdevp:{create:()=>ie({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):vt}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=vt,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===vt)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=vt,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===vt)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>ie({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>ie({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):vt,add:(e,t,n)=>{const i=t-e.mean_x,r=n-e.mean_y;e.mean_x+=i/e.valid,e.mean_y+=r/e.valid;const s=n-e.mean_y;e.dev_x+=i*(t-e.mean_x),e.dev_y+=r*s,e.cov+=i*s},rem:(e,t,n)=>{const i=t-e.mean_x,r=n-e.mean_y;e.mean_x-=e.valid?i/e.valid:e.mean_x,e.mean_y-=e.valid?r/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=i*(t-e.mean_x),e.dev_y-=r*s,e.cov-=i*s}}),param:[2]},covariancep:{create:()=>ie({value:e=>e.valid>1?e.cov/e.valid:vt}),param:[2],req:["covariance"]},corr:{create:()=>ie({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):vt}),param:[2],req:["covariance"]},bins:{create:(e,t,n,i)=>ie({value:r=>tk(r.min,r.max,e,t,n,i)}),param:[1,4],req:["min","max"]}},Zf={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},td={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:i,size:r}=t;let s=n;if(e<s){for(;s+1<r&&i(s+1);)++s;e=s}return(1+e)/r}}},param:[]},q_={row_number:{create(){return{init:oi,value:e=>e.index+1}},param:[]},rank:Zf,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const i=n.index;if(i>=e){for(t=e=i+1;n.peer(e);t+=++e);t/=e-i}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=Zf.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:td,ntile:{create(e){e=+e,e>0||it("ntile num must be greater than zero.");const{init:t,value:n}=td.create();return{init:t,value:i=>Math.ceil(e*n(i))}},param:[0,1]},lag:{create(e,t=vt){return e=+e||1,{init:oi,value:(n,i)=>{const r=n.index-e;return r>=0?n.value(r,i):t}}},param:[1,2]},lead:{create(e,t=vt){return e=+e||1,{init:oi,value:(n,i)=>{const r=n.index+e;return r<n.size?n.value(r,i):t}}},param:[1,2]},first_value:{create(){return{init:oi,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:oi,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||it("nth_value nth must be greater than zero."),{init:oi,value:(t,n)=>{const i=t.i0+(e-1);return i<t.i1?t.value(i,n):vt}}},param:[1,1]},fill_down:{create(e=vt){let t;return{init:()=>t=e,value:(n,i)=>{const r=n.value(n.index,i);return yn(r)?t=r:t}}},param:[1,1]},fill_up:{create(e=vt){let t,n;return{init:()=>(t=e,n=-1),value:(i,r)=>i.index<=n?t:(n=rk(i,r,i.index))>=0?t=i.value(n,r):(n=i.size,t=e)}},param:[1,1]}};function rk(e,t,n){for(const i=e.size;n<i;++n)if(yn(e.value(n,t)))return n;return-1}function Fl(e){return An(z_,e)}function Ll(e){return An(q_,e)}function G_(e){return An(Tr,e)||e==="row_object"}function Y_(e){return Fl(e)&&z_[e]}function H_(e){return Ll(e)&&q_[e]}function ys(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const Bl={escape:(e,t,n)=>ys(e,t,n),expr:(e,t)=>ys(`(row,data,op)=>${e}`,Tr,t),expr2:(e,t)=>ys(`(row0,data0,row,data)=>${e}`,Tr,t),join:(e,t)=>ys(`(row1,data1,row2,data2)=>${e}`,Tr,t),param:(e,t)=>ys(e,Tr,t)},sk={"==":1,"!=":1,"===":1,"!==":1};function W_(e,t,n=0,i,r){if(e.type=aa,e.name=t,e.table=n,r&&i&&Pt(i.keyFor)){const s=sk[r.operator]?r.left===e?r.right:r.left:r.callee&&r.callee.name==="equal"?r.arguments[r.arguments[0]===e?1:0]:null;s&&s.type===as&&ak(r,e,s,i.keyFor(s.value))}return e}function ak(e,t,n,i){return i<0?(e.type=as,e.value=!1,e.raw="false"):(t.type=Q2,n.value=i,n.raw=i+""),!0}function Yo(e){return St(e)?e:Cl(e)?e.entries():e?Object.entries(e):[]}const K_="row_object";function Q_(e,t){e.type=W2;const n=e.properties=[];for(const i of Yo(t)){const[r,s]=St(i)?i:[i,i];n.push({type:V_,key:{type:as,raw:Xn(s)},value:W_({computed:!0},r)})}return e}function X_(e){return wo(Q_({},e))}function J_(e){return Bl.expr(X_(e))}function Dl(e,t=1){return(e*t+63&-64||64)/t}function Ui(e,t,n=e.BYTES_PER_ELEMENT){return new e(Dl(t,n))}function Ml(e){return e instanceof Ot?e:new Ot(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function ok(e){return new _t([Ml(e)])}const Pl=new TextEncoder;function uk(e,t,n){const i=Pl.encode(n);return e.set(i,t),i.length}function ck(e,t,n){return Pl.encodeInto(n,e.subarray(t)).written}const lk=Pl.encodeInto?ck:uk;function ed(e,t){const n=Ui(e.ArrayType,t);return{set(i,r){n[r]=i},data:()=>({type:e,length:t,buffers:[null,n]})}}function hk(e,t){const n=Ui(e.ArrayType,t/8);return{set(i,r){i&&(n[r>>3]|=1<<r%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function fk(e,t){const n=Ui(e.ArrayType,t);return{set(i,r){n[r]=i/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function dk(e,t){const n=Ui(e.ArrayType,t<<1);return{set(i,r){const s=r<<1;n[s]=i%4294967296|0,n[s+1]=i/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function pk(e){const t=ho({type:e,nullValues:[null,void 0]});return{set(n,i){t.set(i,n)},data:()=>t.finish().flush()}}function mk(e,t,n){const i=Ui(Int32Array,t+1),r=Ui(Uint8Array,3*n);let s=0;return{set(a,o){s+=lk(r,s,a),i[o+1]=s},data:()=>{const a=Dl(s),o=r.length>a?r.subarray(0,a):r;return{type:e,length:t,buffers:[i,o]}}}}function _k(e,t){const n=[],i=Ui(e.indices.ArrayType,t),r=Object.create(null);let s=-1,a=0;return{set(o,u){const c=String(o);let l=r[c];l===void 0&&(a+=c.length,r[c]=l=++s,n.push(c)),i[u]=l},data:()=>({type:e,length:t,buffers:[null,i],dict:yk(e.dictionary,n,a)})}}function yk(e,t,n){const i=mk(e,t.length,n);return t.forEach(i.set),ok(i.data())}function gk(e,t){const n=Ui(Uint8Array,t/8);let i=0;return{set(r,s){r==null?++i:(e.set(r,s),n[s>>3]|=1<<s%8)},data:()=>{const r=e.data();return i&&(r.nulls=i,r.buffers[2]=n),r}}}function vk(e,t,n=!0){let i;switch(e.typeId){case _.Int:i=e.bitWidth<64?ed:null;break;case _.Float:i=e.precision>0?ed:null;break;case _.Dictionary:i=e.dictionary.typeId===_.Utf8&&e.indices.typeId===_.Int&&e.indices.bitWidth<64?_k:null;break;case _.Bool:i=hk;break;case _.Date:i=e.unit?dk:fk;break}return i==null?pk(e):n?gk(i(e,t),t):i(e,t)}function bk(e,t){const n=e.length,i=Dl(n,e.BYTES_PER_ELEMENT);let r=e;return n!==i&&(r=new e.constructor(i),r.set(e)),Ml({type:t,length:n,buffers:[null,r]})}function Z_(e,t,n,i,r=!0){const s=vk(i,e,r);return t(n,s.set),Ml(s.data())}function Ul(e){if(e instanceof j||e==null)return e;switch(e){case _.Binary:return new Ms;case _.Bool:return new Ps;case _.DateDay:return new Nx;case _.DateMillisecond:case _.Date:return new Ox;case _.Dictionary:return new Di(new Vr,new Li);case _.Float16:return new Gp;case _.Float32:return new Yc;case _.Float64:case _.Float:return new Hc;case _.Int8:return new Uc;case _.Int16:return new Vc;case _.Int32:case _.Int:return new Li;case _.Int64:return new jc;case _.IntervalDayTime:return new Dx;case _.Interval:case _.IntervalYearMonth:return new Mx;case _.Null:return new pi;case _.TimeMicrosecond:return new Lx;case _.TimeMillisecond:case _.Time:return new Fx;case _.TimeNanosecond:return new Bx;case _.TimeSecond:return new Cx;case _.Uint8:return new $c;case _.Uint16:return new zc;case _.Uint32:return new qc;case _.Uint64:return new Gc;case _.Utf8:return new Vr;default:it(`Unsupported type code: ${Xn(e)}. Use a data type constructor instead?`)}}function wk(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function ty(e,t){const n=pc();return e(t,n.add),n}function pc(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(yi(t))++e.dates,wk(t)&&++e.utcdays;else if(or(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const i=e.array_prof||(e.array_prof=pc());t.forEach(i.add)}else{++e.structs;const i=e.struct_prof||(e.struct_prof={});for(const r in t)(i[r]||(i[r]=pc())).add(t[r])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return Ul(Sk(e))}};return e}function Sk(e){const t=e.count-e.nulls;if(t===0)return _.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?_.Float64:n<128?_.Int8:n<32768?_.Int16:_.Int32:n>=2**32?_.Float64:n<256?_.Uint8:n<65536?_.Uint16:_.Uint32}else{if(e.nums===t)return _.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?_.Int64:it(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?_.Uint64:it(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return _.Bool;if(e.utcdays===t)return _.DateDay;if(e.dates===t)return _.DateMillisecond;if(e.arrays===t){const n=xt.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new qr(e.minlen,n):new zr(n)}else if(e.structs===t){const n=e.struct_prof;return new pe(Object.keys(n).map(i=>xt.new(i,n[i].type(),!0)))}else{if(e.strings>0)return _.Dictionary;it("Type inference failure")}}}}function xk(e,t,n,i,r,s=!0){if(r=Ul(r),!r){const a=ty(i,t);s=a.nulls>0,r=a.type()}return Z_(n,i,t,r,s)}function Ik(e,t,n,i,r,s=!0){r=Ul(r);const a=e.column(t),o=!(e.isFiltered()||e.isOrdered()),u=Ek(a);if(u&&o&&nd(u.type,r))return u;const c=a.data;if(sa(c)){const l=Ak(c);if(o&&l&&nd(l,r))return bk(c,l);r=r||l,s=!1}if(!r){const l=ty(i,a);s=l.nulls>0,r=l.type()}return Z_(n,i,a,r,s)}function Ek(e){return e instanceof _t?e:e.vector instanceof _t?e.vector:null}function Ak(e){const n={Float32Array:Yc,Float64Array:Hc,Int8Array:Uc,Int16Array:Vc,Int32Array:Li,Uint8Array:$c,Uint16Array:zc,Uint32Array:qc,BigInt64Array:jc,BigUint64Array:Gc}[e.constructor.name];return n?new n:null}function nd(e,t){return!e||!t?!0:e.compareTo(t)}function kk(e,t,n){const i=Math.min(e.length,n+t);return(r,s)=>{for(let a=n;a<i;++a)s(e[a][r],a)}}function Tk(e,t,n){const i=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(r,s)=>{let a=-1;i&&or(r.data)?r.data.forEach(s):e.scan(o=>s(r.get(o),++a),!0,t,n)}}const Rk=()=>it("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function Nk(){try{return _i}catch{Rk()}}function ey(e,t={}){const{types:n={}}=t,{dataFrom:i,names:r,nrows:s,scan:a}=Ok(e,t),o={};r.forEach(c=>{const l=i(e,c,s,a,n[c]);l.length!==s&&it("Column length mismatch"),o[c]=l});const u=Nk();return new u(o)}function Ok(e,t){const{columns:n,limit:i=1/0,offset:r=0}=t,s=Pt(n)?n(e):St(n)?n:null;if(St(e))return{dataFrom:xk,names:s||Object.keys(e[0]),nrows:Math.min(i,e.length-r),scan:kk(e,i,r)};if(Ck(e))return{dataFrom:Ik,names:s||e.columnNames(),nrows:Math.min(i,e.numRows()-r),scan:Tk(e,i,r)};it("Unsupported input data type")}function Ck(e){return e&&Pt(e.reify)}function Fk(e,t={}){const{format:n,...i}=t,r=n||"stream";if(!["stream","file"].includes(r))throw Error("Unrecognised output format");return S_(ey(e,i),n)}function Lk(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function Bk(e,t={}){let n=0,i=0,r=0,s=0,a=0,o=0;return e(u=>{if(++n,u==null){++i;return}const c=typeof u;if(c==="object"&&yi(u))++r,Lk(u)&&++s;else if(c==="number"&&(++a,u===u&&(u|0)!==u)){const l=u+"",h=l.indexOf(".");if(h>=0){const p=l.indexOf("e"),m=p>0?p:l.length;o=Math.max(o,m-h-1)}}}),{align:(i+a+r)/n>.5?"r":"l",format:{utc:r===s,digits:Math.min(o,t.maxdigits||6)}}}function Ho(e,t){return Pt(t)?t(e):t||e.columnNames()}function ny(e,t,n){const i=n.format||{},r=n.align||{},s={},a={};return t.forEach(o=>{const u=Bk(Dk(e,o),n);a[o]=r[o]||u.align,s[o]=i[o]||u.format}),{align:a,format:s}}function Dk(e,t){const n=e.column(t);return i=>e.scan(r=>i(n.get(r)))}function Vl(e,t,n=100,i,r){const s=e.data(),a=t.length;e.scan(o=>{r.row(o);for(let u=0;u<a;++u){const c=t[u];r.cell(s[t[u]].get(o),c,u)}},!0,n,i)}function Mk(e,t={}){const n=Ho(e,t.columns),i=t.format||{},r=t.delimiter||",",s=new RegExp(`["${r}
\r]`),a=c=>c==null?"":yi(c)?Go(c,!0):s.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c,o=n.map(a);let u="";return Vl(e,n,t.limit||1/0,t.offset,{row(){u+=o.join(r)+`
`},cell(c,l,h){o[h]=a(i[l]?i[l](c):c)}}),u+o.join(r)}function iy(e,t={}){if(Pt(t))return t(e)+"";const n=typeof e;if(n==="object"){if(yi(e))return t.utc?Go(e):k_(e);{const i=JSON.stringify(e,(s,a)=>sa(a)?Array.from(a):a),r=t.maxlen||30;return i.length>r?i.slice(0,28)+""+(i[0]==="["?"]":"}"):i}}else if(n==="number"){const i=t.digits||0;let r;return e!==0&&((r=Math.abs(e))>=1e18||r<Math.pow(10,-i))?e.toExponential(i):e.toFixed(i)}else return e+""}function Wo(e,t,n={}){for(const i in e)n[i]=t(e[i],i);return n}function Pk(e,t={}){const n=Ho(e,t.columns),{align:i,format:r}=ny(e,n,t),s=Uk(t),a=t.null,o=y=>y==="c"?"center":y==="r"?"right":"left",u=y=>y.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),c=(y,S)=>u(iy(y,S)),l=a?(y,S)=>y==null?a(y):c(y,S):c;let h=-1,p=-1;const m=(y,S,I)=>{const k=I?o(i[S]):"",$=s[y]&&s[y](S,p,h)||"",L=(k?`text-align: ${k};`+($?" ":""):"")+$;return`<${y}${L?` style="${L}"`:""}>`};let b=m("table")+m("thead")+m("tr",h)+n.map(y=>`${m("th",y,1)}${y}</th>`).join("")+"</tr></thead>"+m("tbody");return Vl(e,n,t.limit,t.offset,{row(y){h=y,b+=(++p?"</tr>":"")+m("tr")},cell(y,S){b+=m("td",S,1)+l(y,r[S])+"</td>"}}),b+"</tr></tbody></table>"}function Uk(e){return Wo(e.style,t=>Pt(t)?t:()=>t)}function Vk(e,t=!0,n=!1){return e===void 0||e?t:n}const jk=e=>yi(e)?Go(e,!0):e;function $k(e,t={}){const n=Vk(t.schema),i=t.format||{},r=Ho(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(r.map(a=>({name:a})))+'},"data":{'),r.forEach((a,o)=>{s+=(o?",":"")+JSON.stringify(a)+":[";const u=e.column(a),c=i[a]||jk;let l=-1;e.scan(h=>{const p=u.get(h);s+=(++l?",":"")+JSON.stringify(c(p))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function zk(e,t={}){const n=Ho(e,t.columns),{align:i,format:r}=ny(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",a=u=>u.replace(/\|/g,"\\|");let o="|"+n.map(a).join("|")+`|
|`+n.map(u=>s(i[u])).join("|")+"|";return Vl(e,n,t.limit,t.offset,{row(){o+=`
|`},cell(u,c){o+=a(iy(u,r[c]))+"|"}}),o+`
`}function ry(e,t){for(const[n,i]of Yo(t))e.set(n,i);return e}function qk(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function gi(e,t,n=new Map){return t=xe(t)?e.columnName(t):t,_e(t)?n.set(t,t):St(t)?t.forEach(i=>gi(e,i,n)):Pt(t)?gi(e,t(e),n):ge(t)?ry(n,t):it(`Invalid column selection: ${Xn(t)}`),n}function Ko(e,t){return e.toObject=t,e}function sy(e){return St(e)?e.map(sy):e&&e.toObject?e.toObject():e}function Jr(){return Ko(e=>e.columnNames(),()=>({all:[]}))}function ay(...e){return e=e.flat(),Ko(t=>{const n=gi(t,e);return t.columnNames(i=>!n.has(i))},()=>({not:sy(e)}))}function Gk(e,t){return Ko(n=>{let i=xe(e)?e:n.columnIndex(e),r=xe(t)?t:n.columnIndex(t);if(r<i){const s=r;r=i,i=s}return n.columnNames().slice(i,r+1)},()=>({range:[e,t]}))}function Yk(e){return _e(e)&&(e=RegExp(qk(e))),Ko(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function Hk(e){return sa(e.data)?e.data.constructor:Array}class li extends l2{static from(t,n){return new li(d2(t,n),n)}static new(t,n){if(t instanceof li)return t;const i={},r=[];for(const[s,a]of Yo(t))i[s]=a,r.push(s);return new li(i,n||r)}constructor(t,n,i,r,s,a){Wo(t,f2,t),n=n||Object.keys(t);const o=n.length?t[n[0]].length:0;super(n,o,t,i,r,s,a)}create({data:t,names:n,filter:i,groups:r,order:s}){const a=i!==void 0?i:this.mask();return new li(t||this._data,n||(t?null:this._names),a,r!==void 0?r:$2(this._group,i&&a),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),i=this.reify(),r=Xe(i).groupby(i.groups());return t.forEach(s=>{s=li.new(s),s.numRows()!==n&&it("Assign row counts do not match"),s=s.reify(),s.columnNames(a=>r.add(a,s.column(a)))}),this.create(r.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const i=this.column(t),r=new n(this.numRows());let s=-1;return this.scan(a=>r[++s]=i.get(a),!0),r}get(t,n=0){const i=this.column(t);return this.isFiltered()||this.isOrdered()?i.get(this.indices()[n]):i.get(n)}getter(t){const n=this.column(t),i=this.isFiltered()||this.isOrdered()?this.indices():null;return i?r=>n.get(i[r]):n?r=>n.get(r):it(`Unrecognized column: ${t}`)}object(t=0){return id(this)(t)}objects(t={}){const{grouped:n,limit:i,offset:r}=t,s=gi(this,t.columns||Jr()),a=J_(s),o=[];if(this.scan((u,c)=>o.push(a(u,c)),!0,i,r),n&&this.isGrouped()){const u=[];return this.scan(c=>u.push(c),!0,i,r),q2(this,u,o,n)}return o}*[Symbol.iterator](){const t=id(this),n=this.numRows();for(let i=0;i<n;++i)yield t(i)}reify(t){const n=t?t.length:this.numRows(),i=this._names;let r,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(r=this.data());else return this;if(!r){const a=t?u=>t.forEach(u):u=>this.scan(u,!0),o=i.length;r={};for(let u=0;u<o;++u){const c=i[u],l=this.column(c),h=r[c]=new(Hk(l))(n);let p=-1;a(m=>h[++p]=l.get(m))}this.isGrouped()&&(s=z2(this.groups(),a,!!t,n))}return this.create({data:r,names:i,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,i)=>i(n),this)}toArrow(t){return ey(this,t)}toArrowBuffer(t){return Fk(this,t)}toCSV(t){return Mk(this,t)}toHTML(t){return Pk(this,t)}toJSON(t){return $k(this,t)}toMarkdown(t){return zk(this,t)}}function id(e){let t=e._builder;if(!t){const n=J_(e.columnNames()),i=e.data();if(e.isOrdered()||e.isFiltered()){const r=e.indices();t=s=>n(r[s],i)}else t=r=>n(r,i);e._builder=t}return t}class Wk{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function mt(e,t,n,i){const r=n[e.type]||n.Default;if(r&&r(e,t,i)===!1)return;const s=Kk[e.type];s&&s(e,t,n)}const xa=(e,t,n)=>{mt(e.argument,t,n,e)},Du=(e,t,n)=>{mt(e.left,t,n,e),mt(e.right,t,n,e)},rd=(e,t,n)=>{mt(e.test,t,n,e),mt(e.consequent,t,n,e),e.alternate&&mt(e.alternate,t,n,e)},Mu=(e,t,n)=>{Dn(e.params,t,n,e),mt(e.body,t,n,e)},sd=(e,t,n)=>{mt(e.callee,t,n,e),Dn(e.arguments,t,n,e)},Dn=(e,t,n,i)=>{e.forEach(r=>mt(r,t,n,i))},Kk={TemplateLiteral:(e,t,n)=>{Dn(e.expressions,t,n,e),Dn(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{mt(e.object,t,n,e),mt(e.property,t,n,e)},CallExpression:sd,NewExpression:sd,ArrayExpression:(e,t,n)=>{Dn(e.elements,t,n,e)},AssignmentExpression:Du,AwaitExpression:xa,BinaryExpression:Du,LogicalExpression:Du,UnaryExpression:xa,UpdateExpression:xa,ConditionalExpression:rd,ObjectExpression:(e,t,n)=>{Dn(e.properties,t,n,e)},Property:(e,t,n)=>{mt(e.key,t,n,e),mt(e.value,t,n,e)},ArrowFunctionExpression:Mu,FunctionExpression:Mu,FunctionDeclaration:Mu,VariableDeclaration:(e,t,n)=>{Dn(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{mt(e.id,t,n,e),mt(e.init,t,n,e)},SpreadElement:(e,t,n)=>{mt(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{Dn(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{mt(e.expression,t,n,e)},IfStatement:rd,ForStatement:(e,t,n)=>{mt(e.init,t,n,e),mt(e.test,t,n,e),mt(e.update,t,n,e),mt(e.body,t,n,e)},WhileStatement:(e,t,n)=>{mt(e.test,t,n,e),mt(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{mt(e.body,t,n,e),mt(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{mt(e.discriminant,t,n,e),Dn(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&mt(e.test,t,n,e),Dn(e.consequent,t,n,e)},ReturnStatement:xa,Program:(e,t,n)=>{mt(e.body[0],t,n,e)}};function oy(e){delete e.start,delete e.end,delete e.optional}function ad(e){oy(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function Qk(e){return mt(e,null,{Column:ad,Constant:ad,Default:oy}),e}function ue(e,t){return t&&t.type===e}function Xk(e){return ue(H2,e)||ue(Y2,e)}function Jk(e){return Pt(e)?e:()=>e}const Zk="Escaped functions are not valid as rollup or pivot values.";function tT(e,t,n){e.aggronly&&it(Zk);const i="(row,data)=>fn("+X_(e.table.columnNames())+",$)";return{escape:Bl.escape(i,Jk(t.expr),n)}}var eT=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],uy=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,3104,541,1507,4938,6,4191],nT="-----------------------------------------------------------------------------------------------------------------------------------------------------",cy="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",Pu={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},Uu="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",iT={5:Uu,"5module":Uu+" export import",6:Uu+" const class extends export import super"},rT=/^in(stanceof)?$/,sT=new RegExp("["+cy+"]"),aT=new RegExp("["+cy+nT+"]");function mc(e,t){for(var n=65536,i=0;i<t.length;i+=2){if(n+=t[i],n>e)return!1;if(n+=t[i+1],n>=e)return!0}return!1}function vi(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&sT.test(String.fromCharCode(e)):t===!1?!1:mc(e,uy)}function Zr(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&aT.test(String.fromCharCode(e)):t===!1?!1:mc(e,uy)||mc(e,eT)}var gt=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function Ze(e,t){return new gt(e,{beforeExpr:!0,binop:t})}var tn={beforeExpr:!0},Ae={startsExpr:!0},jl={};function ft(e,t){return t===void 0&&(t={}),t.keyword=e,jl[e]=new gt(e,t)}var d={num:new gt("num",Ae),regexp:new gt("regexp",Ae),string:new gt("string",Ae),name:new gt("name",Ae),privateId:new gt("privateId",Ae),eof:new gt("eof"),bracketL:new gt("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new gt("]"),braceL:new gt("{",{beforeExpr:!0,startsExpr:!0}),braceR:new gt("}"),parenL:new gt("(",{beforeExpr:!0,startsExpr:!0}),parenR:new gt(")"),comma:new gt(",",tn),semi:new gt(";",tn),colon:new gt(":",tn),dot:new gt("."),question:new gt("?",tn),questionDot:new gt("?."),arrow:new gt("=>",tn),template:new gt("template"),invalidTemplate:new gt("invalidTemplate"),ellipsis:new gt("...",tn),backQuote:new gt("`",Ae),dollarBraceL:new gt("${",{beforeExpr:!0,startsExpr:!0}),eq:new gt("=",{beforeExpr:!0,isAssign:!0}),assign:new gt("_=",{beforeExpr:!0,isAssign:!0}),incDec:new gt("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new gt("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Ze("||",1),logicalAND:Ze("&&",2),bitwiseOR:Ze("|",3),bitwiseXOR:Ze("^",4),bitwiseAND:Ze("&",5),equality:Ze("==/!=/===/!==",6),relational:Ze("</>/<=/>=",7),bitShift:Ze("<</>>/>>>",8),plusMin:new gt("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Ze("%",10),star:Ze("*",10),slash:Ze("/",10),starstar:new gt("**",{beforeExpr:!0}),coalesce:Ze("??",1),_break:ft("break"),_case:ft("case",tn),_catch:ft("catch"),_continue:ft("continue"),_debugger:ft("debugger"),_default:ft("default",tn),_do:ft("do",{isLoop:!0,beforeExpr:!0}),_else:ft("else",tn),_finally:ft("finally"),_for:ft("for",{isLoop:!0}),_function:ft("function",Ae),_if:ft("if"),_return:ft("return",tn),_switch:ft("switch"),_throw:ft("throw",tn),_try:ft("try"),_var:ft("var"),_const:ft("const"),_while:ft("while",{isLoop:!0}),_with:ft("with"),_new:ft("new",{beforeExpr:!0,startsExpr:!0}),_this:ft("this",Ae),_super:ft("super",Ae),_class:ft("class",Ae),_extends:ft("extends",tn),_export:ft("export"),_import:ft("import",Ae),_null:ft("null",Ae),_true:ft("true",Ae),_false:ft("false",Ae),_in:ft("in",{beforeExpr:!0,binop:7}),_instanceof:ft("instanceof",{beforeExpr:!0,binop:7}),_typeof:ft("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:ft("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:ft("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},ln=/\r\n?|\n|\u2028|\u2029/,oT=new RegExp(ln.source,"g");function os(e){return e===10||e===13||e===8232||e===8233}function ly(e,t,n){n===void 0&&(n=e.length);for(var i=t;i<n;i++){var r=e.charCodeAt(i);if(os(r))return i<n-1&&r===13&&e.charCodeAt(i+1)===10?i+2:i+1}return-1}var hy=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,on=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,fy=Object.prototype,uT=fy.hasOwnProperty,cT=fy.toString,oa=Object.hasOwn||function(e,t){return uT.call(e,t)},od=Array.isArray||function(e){return cT.call(e)==="[object Array]"};function ur(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}function Vi(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var lT=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,qs=function(t,n){this.line=t,this.column=n};qs.prototype.offset=function(t){return new qs(this.line,this.column+t)};var Qo=function(t,n,i){this.start=n,this.end=i,t.sourceFile!==null&&(this.source=t.sourceFile)};function dy(e,t){for(var n=1,i=0;;){var r=ly(e,i,t);if(r<0)return new qs(n,t-i);++n,i=r}}var _c={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},ud=!1;function hT(e){var t={};for(var n in _c)t[n]=e&&oa(e,n)?e[n]:_c[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!ud&&typeof console=="object"&&console.warn&&(ud=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),od(t.onToken)){var i=t.onToken;t.onToken=function(r){return i.push(r)}}return od(t.onComment)&&(t.onComment=fT(t,t.onComment)),t}function fT(e,t){return function(n,i,r,s,a,o){var u={type:n?"Block":"Line",value:i,start:r,end:s};e.locations&&(u.loc=new Qo(this,a,o)),e.ranges&&(u.range=[r,s]),t.push(u)}}var Gs=1,us=2,$l=4,py=8,my=16,_y=32,zl=64,yy=128,ua=256,ql=Gs|us|ua;function Gl(e,t){return us|(e?$l:0)|(t?py:0)}var xo=0,Yl=1,fi=2,gy=3,vy=4,by=5,ce=function(t,n,i){this.options=t=hT(t),this.sourceFile=t.sourceFile,this.keywords=ur(iT[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var r="";t.allowReserved!==!0&&(r=Pu[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(r+=" await")),this.reservedWords=ur(r);var s=(r?r+" ":"")+Pu.strict;this.reservedWordsStrict=ur(s),this.reservedWordsStrictBind=ur(s+" "+Pu.strictBind),this.input=String(n),this.containsEsc=!1,i?(this.pos=i,this.lineStart=this.input.lastIndexOf(`
`,i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(ln).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=d.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Gs),this.regexpState=null,this.privateNameStack=[]},Zn={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};ce.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};Zn.inFunction.get=function(){return(this.currentVarScope().flags&us)>0};Zn.inGenerator.get=function(){return(this.currentVarScope().flags&py)>0&&!this.currentVarScope().inClassFieldInit};Zn.inAsync.get=function(){return(this.currentVarScope().flags&$l)>0&&!this.currentVarScope().inClassFieldInit};Zn.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&ua)return!1;if(t.flags&us)return(t.flags&$l)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};Zn.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&zl)>0||n||this.options.allowSuperOutsideMethod};Zn.allowDirectSuper.get=function(){return(this.currentThisScope().flags&yy)>0};Zn.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Zn.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(us|ua))>0||n};Zn.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&ua)>0};ce.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var i=this,r=0;r<t.length;r++)i=t[r](i);return i};ce.parse=function(t,n){return new this(n,t).parse()};ce.parseExpressionAt=function(t,n,i){var r=new this(i,t,n);return r.nextToken(),r.parseExpression()};ce.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(ce.prototype,Zn);var Ie=ce.prototype,dT=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Ie.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){on.lastIndex=e,e+=on.exec(this.input)[0].length;var t=dT.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){on.lastIndex=e+t[0].length;var n=on.exec(this.input),i=n.index+n[0].length,r=this.input.charAt(i);return r===";"||r==="}"||ln.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(r)||r==="!"&&this.input.charAt(i+1)==="=")}e+=t[0].length,on.lastIndex=e,e+=on.exec(this.input)[0].length,this.input[e]===";"&&e++}};Ie.eat=function(e){return this.type===e?(this.next(),!0):!1};Ie.isContextual=function(e){return this.type===d.name&&this.value===e&&!this.containsEsc};Ie.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};Ie.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};Ie.canInsertSemicolon=function(){return this.type===d.eof||this.type===d.braceR||ln.test(this.input.slice(this.lastTokEnd,this.start))};Ie.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};Ie.semicolon=function(){!this.eat(d.semi)&&!this.insertSemicolon()&&this.unexpected()};Ie.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};Ie.expect=function(e){this.eat(e)||this.unexpected()};Ie.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var Xo=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Ie.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};Ie.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,i=e.doubleProto;if(!t)return n>=0||i>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),i>=0&&this.raiseRecoverable(i,"Redefinition of __proto__ property")};Ie.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Ie.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var M=ce.prototype;M.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==d.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var i=0,r=Object.keys(this.undefinedExports);i<r.length;i+=1){var s=r[i];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var Hl={kind:"loop"},pT={kind:"switch"};M.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;on.lastIndex=this.pos;var t=on.exec(this.input),n=this.pos+t[0].length,i=this.input.charCodeAt(n);if(i===91||i===92)return!0;if(e)return!1;if(i===123||i>55295&&i<56320)return!0;if(vi(i,!0)){for(var r=n+1;Zr(i=this.input.charCodeAt(r),!0);)++r;if(i===92||i>55295&&i<56320)return!0;var s=this.input.slice(n,r);if(!rT.test(s))return!0}return!1};M.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;on.lastIndex=this.pos;var e=on.exec(this.input),t=this.pos+e[0].length,n;return!ln.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(Zr(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};M.parseStatement=function(e,t,n){var i=this.type,r=this.startNode(),s;switch(this.isLet(e)&&(i=d._var,s="let"),i){case d._break:case d._continue:return this.parseBreakContinueStatement(r,i.keyword);case d._debugger:return this.parseDebuggerStatement(r);case d._do:return this.parseDoStatement(r);case d._for:return this.parseForStatement(r);case d._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(r,!1,!e);case d._class:return e&&this.unexpected(),this.parseClass(r,!0);case d._if:return this.parseIfStatement(r);case d._return:return this.parseReturnStatement(r);case d._switch:return this.parseSwitchStatement(r);case d._throw:return this.parseThrowStatement(r);case d._try:return this.parseTryStatement(r);case d._const:case d._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(r,s);case d._while:return this.parseWhileStatement(r);case d._with:return this.parseWithStatement(r);case d.braceL:return this.parseBlock(!0,r);case d.semi:return this.parseEmptyStatement(r);case d._export:case d._import:if(this.options.ecmaVersion>10&&i===d._import){on.lastIndex=this.pos;var a=on.exec(this.input),o=this.pos+a[0].length,u=this.input.charCodeAt(o);if(u===40||u===46)return this.parseExpressionStatement(r,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===d._import?this.parseImport(r):this.parseExport(r,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(r,!0,!e);var c=this.value,l=this.parseExpression();return i===d.name&&l.type==="Identifier"&&this.eat(d.colon)?this.parseLabeledStatement(r,c,l,e):this.parseExpressionStatement(r,l)}};M.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(d.semi)||this.insertSemicolon()?e.label=null:this.type!==d.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var i=0;i<this.labels.length;++i){var r=this.labels[i];if((e.label==null||r.name===e.label.name)&&(r.kind!=null&&(n||r.kind==="loop")||e.label&&n))break}return i===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};M.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};M.parseDoStatement=function(e){return this.next(),this.labels.push(Hl),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(d._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(d.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};M.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Hl),this.enterScope(0),this.expect(d.parenL),this.type===d.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===d._var||this.type===d._const||n){var i=this.startNode(),r=n?"let":this.value;return this.next(),this.parseVar(i,!0,r),this.finishNode(i,"VariableDeclaration"),(this.type===d._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&i.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===d._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,i)):(t>-1&&this.unexpected(t),this.parseFor(e,i))}var s=this.isContextual("let"),a=!1,o=new Xo,u=this.parseExpression(t>-1?"await":!0,o);return this.type===d._in||(a=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===d._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&a&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,o),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(o,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};M.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,Es|(n?0:yc),!1,t)};M.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(d._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};M.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(d.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};M.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(d.braceL),this.labels.push(pT),this.enterScope(0);for(var t,n=!1;this.type!==d.braceR;)if(this.type===d._case||this.type===d._default){var i=this.type===d._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),i?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(d.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};M.parseThrowStatement=function(e){return this.next(),ln.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var mT=[];M.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===d._catch){var t=this.startNode();if(this.next(),this.eat(d.parenL)){t.param=this.parseBindingAtom();var n=t.param.type==="Identifier";this.enterScope(n?_y:0),this.checkLValPattern(t.param,n?vy:fi),this.expect(d.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0);t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(d._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};M.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")};M.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(Hl),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};M.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};M.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};M.parseLabeledStatement=function(e,t,n,i){for(var r=0,s=this.labels;r<s.length;r+=1){var a=s[r];a.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var o=this.type.isLoop?"loop":this.type===d._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var c=this.labels[u];if(c.statementStart===e.start)c.statementStart=this.start,c.kind=o;else break}return this.labels.push({name:t,kind:o,statementStart:this.start}),e.body=this.parseStatement(i?i.indexOf("label")===-1?i+"label":i:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};M.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};M.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(d.braceL),e&&this.enterScope(0);this.type!==d.braceR;){var i=this.parseStatement(null);t.body.push(i)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};M.parseFor=function(e,t){return e.init=t,this.expect(d.semi),e.test=this.type===d.semi?null:this.parseExpression(),this.expect(d.semi),e.update=this.type===d.parenR?null:this.parseExpression(),this.expect(d.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};M.parseForIn=function(e,t){var n=this.type===d._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(d.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};M.parseVar=function(e,t,n){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(d.eq)?i.init=this.parseMaybeAssign(t):n==="const"&&!(this.type===d._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():i.id.type!=="Identifier"&&!(t&&(this.type===d._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(d.comma))break}return e};M.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?Yl:fi,!1)};var Es=1,yc=2,wy=4;M.parseFunction=function(e,t,n,i,r){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!i)&&(this.type===d.star&&t&yc&&this.unexpected(),e.generator=this.eat(d.star)),this.options.ecmaVersion>=8&&(e.async=!!i),t&Es&&(e.id=t&wy&&this.type!==d.name?null:this.parseIdent(),e.id&&!(t&yc)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?Yl:fi:gy));var s=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Gl(e.async,e.generator)),t&Es||(e.id=this.type===d.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,r),this.yieldPos=s,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(e,t&Es?"FunctionDeclaration":"FunctionExpression")};M.parseFunctionParams=function(e){this.expect(d.parenL),e.params=this.parseBindingList(d.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};M.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var i=this.enterClassBody(),r=this.startNode(),s=!1;for(r.body=[],this.expect(d.braceL);this.type!==d.braceR;){var a=this.parseClassElement(e.superClass!==null);a&&(r.body.push(a),a.type==="MethodDefinition"&&a.kind==="constructor"?(s&&this.raise(a.start,"Duplicate constructor in the same class"),s=!0):a.key&&a.key.type==="PrivateIdentifier"&&_T(i,a)&&this.raiseRecoverable(a.key.start,"Identifier '#"+a.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(r,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};M.parseClassElement=function(e){if(this.eat(d.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),i="",r=!1,s=!1,a="method",o=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(d.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===d.star?o=!0:i="static"}if(n.static=o,!i&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===d.star)&&!this.canInsertSemicolon()?s=!0:i="async"),!i&&(t>=9||!s)&&this.eat(d.star)&&(r=!0),!i&&!s&&!r){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=u:i=u)}if(i?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=i,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===d.parenL||a!=="method"||r||s){var c=!n.static&&Io(n,"constructor"),l=c&&e;c&&a!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=c?"constructor":a,this.parseClassMethod(n,r,s,l)}else this.parseClassField(n);return n};M.isClassElementNameStart=function(){return this.type===d.name||this.type===d.privateId||this.type===d.num||this.type===d.string||this.type===d.bracketL||this.type.keyword};M.parseClassElementName=function(e){this.type===d.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};M.parseClassMethod=function(e,t,n,i){var r=e.key;e.kind==="constructor"?(t&&this.raise(r.start,"Constructor can't be a generator"),n&&this.raise(r.start,"Constructor can't be an async method")):e.static&&Io(e,"prototype")&&this.raise(r.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,i);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};M.parseClassField=function(e){if(Io(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&Io(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(d.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};M.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(ua|zl);this.type!==d.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};M.parseClassId=function(e,t){this.type===d.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,fi,!1)):(t===!0&&this.unexpected(),e.id=null)};M.parseClassSuper=function(e){e.superClass=this.eat(d._extends)?this.parseExprSubscripts(null,!1):null};M.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};M.exitClassBody=function(){for(var e=this.privateNameStack.pop(),t=e.declared,n=e.used,i=this.privateNameStack.length,r=i===0?null:this.privateNameStack[i-1],s=0;s<n.length;++s){var a=n[s];oa(t,a.name)||(r?r.used.push(a):this.raiseRecoverable(a.start,"Private field '#"+a.name+"' must be declared in an enclosing class"))}};function _T(e,t){var n=t.key.name,i=e[n],r="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(r=(t.static?"s":"i")+t.kind),i==="iget"&&r==="iset"||i==="iset"&&r==="iget"||i==="sget"&&r==="sset"||i==="sset"&&r==="sget"?(e[n]="true",!1):i?!0:(e[n]=r,!1)}function Io(e,t){var n=e.computed,i=e.key;return!n&&(i.type==="Identifier"&&i.name===t||i.type==="Literal"&&i.value===t)}M.parseExport=function(e,t){if(this.next(),this.eat(d.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==d.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(d._default)){this.checkExport(t,"default",this.lastTokStart);var n;if(this.type===d._function||(n=this.isAsyncFunction())){var i=this.startNode();this.next(),n&&this.next(),e.declaration=this.parseFunction(i,Es|wy,!1,n)}else if(this.type===d._class){var r=this.startNode();e.declaration=this.parseClass(r,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(null),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==d.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var s=0,a=e.specifiers;s<a.length;s+=1){var o=a[s];this.checkUnreserved(o.local),this.checkLocalExport(o.local),o.local.type==="Literal"&&this.raise(o.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};M.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),oa(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};M.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var i=0,r=t.properties;i<r.length;i+=1){var s=r[i];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var a=0,o=t.elements;a<o.length;a+=1){var u=o[a];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"?this.checkPatternExport(e,t.argument):n==="ParenthesizedExpression"&&this.checkPatternExport(e,t.expression)};M.checkVariableExport=function(e,t){if(e)for(var n=0,i=t;n<i.length;n+=1){var r=i[n];this.checkPatternExport(e,r.id)}};M.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};M.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(d.braceL);!this.eat(d.braceR);){if(n)n=!1;else if(this.expect(d.comma),this.afterTrailingComma(d.braceR))break;var i=this.startNode();i.local=this.parseModuleExportName(),i.exported=this.eatContextual("as")?this.parseModuleExportName():i.local,this.checkExport(e,i.exported,i.exported.start),t.push(this.finishNode(i,"ExportSpecifier"))}return t};M.parseImport=function(e){return this.next(),this.type===d.string?(e.specifiers=mT,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===d.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};M.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===d.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLValSimple(n.local,fi),e.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(d.comma))return e}if(this.type===d.star){var i=this.startNode();return this.next(),this.expectContextual("as"),i.local=this.parseIdent(),this.checkLValSimple(i.local,fi),e.push(this.finishNode(i,"ImportNamespaceSpecifier")),e}for(this.expect(d.braceL);!this.eat(d.braceR);){if(t)t=!1;else if(this.expect(d.comma),this.afterTrailingComma(d.braceR))break;var r=this.startNode();r.imported=this.parseModuleExportName(),this.eatContextual("as")?r.local=this.parseIdent():(this.checkUnreserved(r.imported),r.local=r.imported),this.checkLValSimple(r.local,fi),e.push(this.finishNode(r,"ImportSpecifier"))}return e};M.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===d.string){var e=this.parseLiteral(this.value);return lT.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};M.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};M.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var Nn=ce.prototype;Nn.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var i=0,r=e.properties;i<r.length;i+=1){var s=r[i];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};Nn.toAssignableList=function(e,t){for(var n=e.length,i=0;i<n;i++){var r=e[i];r&&this.toAssignable(r,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};Nn.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};Nn.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==d.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};Nn.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case d.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(d.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case d.braceL:return this.parseObj(!0)}return this.parseIdent()};Nn.parseBindingList=function(e,t,n){for(var i=[],r=!0;!this.eat(e);)if(r?r=!1:this.expect(d.comma),t&&this.type===d.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===d.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),i.push(s),this.type===d.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else{var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),i.push(a)}}return i};Nn.parseBindingListItem=function(e){return e};Nn.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(d.eq))return n;var i=this.startNodeAt(e,t);return i.left=n,i.right=this.parseMaybeAssign(),this.finishNode(i,"AssignmentPattern")};Nn.checkLValSimple=function(e,t,n){t===void 0&&(t=xo);var i=t!==xo;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(i?"Binding ":"Assigning to ")+e.name+" in strict mode"),i&&(t===fi&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(oa(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==by&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":i&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return i&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(i?"Binding":"Assigning to")+" rvalue")}};Nn.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=xo),e.type){case"ObjectPattern":for(var i=0,r=e.properties;i<r.length;i+=1){var s=r[i];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var a=0,o=e.elements;a<o.length;a+=1){var u=o[a];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};Nn.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=xo),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var fn=function(t,n,i,r,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!i,this.override=r,this.generator=!!s},Ut={b_stat:new fn("{",!1),b_expr:new fn("{",!0),b_tmpl:new fn("${",!1),p_stat:new fn("(",!1),p_expr:new fn("(",!0),q_tmpl:new fn("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new fn("function",!1),f_expr:new fn("function",!0),f_expr_gen:new fn("function",!0,!1,null,!0),f_gen:new fn("function",!1,!1,null,!0)},cs=ce.prototype;cs.initialContext=function(){return[Ut.b_stat]};cs.curContext=function(){return this.context[this.context.length-1]};cs.braceIsBlock=function(e){var t=this.curContext();return t===Ut.f_expr||t===Ut.f_stat?!0:e===d.colon&&(t===Ut.b_stat||t===Ut.b_expr)?!t.isExpr:e===d._return||e===d.name&&this.exprAllowed?ln.test(this.input.slice(this.lastTokEnd,this.start)):e===d._else||e===d.semi||e===d.eof||e===d.parenR||e===d.arrow?!0:e===d.braceL?t===Ut.b_stat:e===d._var||e===d._const||e===d.name?!1:!this.exprAllowed};cs.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};cs.updateContext=function(e){var t,n=this.type;n.keyword&&e===d.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};cs.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};d.parenR.updateContext=d.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Ut.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};d.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Ut.b_stat:Ut.b_expr),this.exprAllowed=!0};d.dollarBraceL.updateContext=function(){this.context.push(Ut.b_tmpl),this.exprAllowed=!0};d.parenL.updateContext=function(e){var t=e===d._if||e===d._for||e===d._with||e===d._while;this.context.push(t?Ut.p_stat:Ut.p_expr),this.exprAllowed=!0};d.incDec.updateContext=function(){};d._function.updateContext=d._class.updateContext=function(e){e.beforeExpr&&e!==d._else&&!(e===d.semi&&this.curContext()!==Ut.p_stat)&&!(e===d._return&&ln.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===d.colon||e===d.braceL)&&this.curContext()===Ut.b_stat)?this.context.push(Ut.f_expr):this.context.push(Ut.f_stat),this.exprAllowed=!1};d.backQuote.updateContext=function(){this.curContext()===Ut.q_tmpl?this.context.pop():this.context.push(Ut.q_tmpl),this.exprAllowed=!1};d.star.updateContext=function(e){if(e===d._function){var t=this.context.length-1;this.context[t]===Ut.f_expr?this.context[t]=Ut.f_expr_gen:this.context[t]=Ut.f_gen}this.exprAllowed=!0};d.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==d.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var st=ce.prototype;st.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var i=e.key,r;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){r==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=i.start):this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0);return}r="$"+r;var a=t[r];if(a){var o;s==="init"?o=this.strict&&a.init||a.get||a.set:o=a.init||a[s],o&&this.raiseRecoverable(i.start,"Redefinition of property")}else a=t[r]={init:!1,get:!1,set:!1};a[s]=!0}};st.parseExpression=function(e,t){var n=this.start,i=this.startLoc,r=this.parseMaybeAssign(e,t);if(this.type===d.comma){var s=this.startNodeAt(n,i);for(s.expressions=[r];this.eat(d.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return r};st.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var i=!1,r=-1,s=-1,a=-1;t?(r=t.parenthesizedAssign,s=t.trailingComma,a=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new Xo,i=!0);var o=this.start,u=this.startLoc;(this.type===d.parenL||this.type===d.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var c=this.parseMaybeConditional(e,t);if(n&&(c=n.call(this,c,o,u)),this.type.isAssign){var l=this.startNodeAt(o,u);return l.operator=this.value,this.type===d.eq&&(c=this.toAssignable(c,!1,t)),i||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=c.start&&(t.shorthandAssign=-1),this.type===d.eq?this.checkLValPattern(c):this.checkLValSimple(c),l.left=c,this.next(),l.right=this.parseMaybeAssign(e),a>-1&&(t.doubleProto=a),this.finishNode(l,"AssignmentExpression")}else i&&this.checkExpressionErrors(t,!0);return r>-1&&(t.parenthesizedAssign=r),s>-1&&(t.trailingComma=s),c};st.parseMaybeConditional=function(e,t){var n=this.start,i=this.startLoc,r=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return r;if(this.eat(d.question)){var s=this.startNodeAt(n,i);return s.test=r,s.consequent=this.parseMaybeAssign(),this.expect(d.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return r};st.parseExprOps=function(e,t){var n=this.start,i=this.startLoc,r=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||r.start===n&&r.type==="ArrowFunctionExpression"?r:this.parseExprOp(r,n,i,-1,e)};st.parseExprOp=function(e,t,n,i,r){var s=this.type.binop;if(s!=null&&(!r||this.type!==d._in)&&s>i){var a=this.type===d.logicalOR||this.type===d.logicalAND,o=this.type===d.coalesce;o&&(s=d.logicalAND.binop);var u=this.value;this.next();var c=this.start,l=this.startLoc,h=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,r),c,l,s,r),p=this.buildBinary(t,n,e,h,u,a||o);return(a&&this.type===d.coalesce||o&&(this.type===d.logicalOR||this.type===d.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(p,t,n,i,r)}return e};st.buildBinary=function(e,t,n,i,r,s){i.type==="PrivateIdentifier"&&this.raise(i.start,"Private identifier can only be left side of binary expression");var a=this.startNodeAt(e,t);return a.left=n,a.operator=r,a.right=i,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")};st.parseMaybeUnary=function(e,t,n,i){var r=this.start,s=this.startLoc,a;if(this.isContextual("await")&&this.canAwait)a=this.parseAwait(i),t=!0;else if(this.type.prefix){var o=this.startNode(),u=this.type===d.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0,u,i),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(o.argument):this.strict&&o.operator==="delete"&&o.argument.type==="Identifier"?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):o.operator==="delete"&&Sy(o.argument)?this.raiseRecoverable(o.start,"Private fields can not be deleted"):t=!0,a=this.finishNode(o,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===d.privateId)(i||this.privateNameStack.length===0)&&this.unexpected(),a=this.parsePrivateIdent(),this.type!==d._in&&this.unexpected();else{if(a=this.parseExprSubscripts(e,i),this.checkExpressionErrors(e))return a;for(;this.type.postfix&&!this.canInsertSemicolon();){var c=this.startNodeAt(r,s);c.operator=this.value,c.prefix=!1,c.argument=a,this.checkLValSimple(a),this.next(),a=this.finishNode(c,"UpdateExpression")}}if(!n&&this.eat(d.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(r,s,a,this.parseMaybeUnary(null,!1,!1,i),"**",!1);else return a};function Sy(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&Sy(e.expression)}st.parseExprSubscripts=function(e,t){var n=this.start,i=this.startLoc,r=this.parseExprAtom(e,t);if(r.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return r;var s=this.parseSubscripts(r,n,i,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};st.parseSubscripts=function(e,t,n,i,r){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,a=!1;;){var o=this.parseSubscript(e,t,n,i,s,a,r);if(o.optional&&(a=!0),o===e||o.type==="ArrowFunctionExpression"){if(a){var u=this.startNodeAt(t,n);u.expression=o,o=this.finishNode(u,"ChainExpression")}return o}e=o}};st.parseSubscript=function(e,t,n,i,r,s,a){var o=this.options.ecmaVersion>=11,u=o&&this.eat(d.questionDot);i&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var c=this.eat(d.bracketL);if(c||u&&this.type!==d.parenL&&this.type!==d.backQuote||this.eat(d.dot)){var l=this.startNodeAt(t,n);l.object=e,c?(l.property=this.parseExpression(),this.expect(d.bracketR)):this.type===d.privateId&&e.type!=="Super"?l.property=this.parsePrivateIdent():l.property=this.parseIdent(this.options.allowReserved!=="never"),l.computed=!!c,o&&(l.optional=u),e=this.finishNode(l,"MemberExpression")}else if(!i&&this.eat(d.parenL)){var h=new Xo,p=this.yieldPos,m=this.awaitPos,b=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var y=this.parseExprList(d.parenR,this.options.ecmaVersion>=8,!1,h);if(r&&!u&&!this.canInsertSemicolon()&&this.eat(d.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=p,this.awaitPos=m,this.awaitIdentPos=b,this.parseArrowExpression(this.startNodeAt(t,n),y,!0,a);this.checkExpressionErrors(h,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=m||this.awaitPos,this.awaitIdentPos=b||this.awaitIdentPos;var S=this.startNodeAt(t,n);S.callee=e,S.arguments=y,o&&(S.optional=u),e=this.finishNode(S,"CallExpression")}else if(this.type===d.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var I=this.startNodeAt(t,n);I.tag=e,I.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(I,"TaggedTemplateExpression")}return e};st.parseExprAtom=function(e,t){this.type===d.slash&&this.readRegexp();var n,i=this.potentialArrowAt===this.start;switch(this.type){case d._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),n=this.startNode(),this.next(),this.type===d.parenL&&!this.allowDirectSuper&&this.raise(n.start,"super() call outside constructor of a subclass"),this.type!==d.dot&&this.type!==d.bracketL&&this.type!==d.parenL&&this.unexpected(),this.finishNode(n,"Super");case d._this:return n=this.startNode(),this.next(),this.finishNode(n,"ThisExpression");case d.name:var r=this.start,s=this.startLoc,a=this.containsEsc,o=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&o.name==="async"&&!this.canInsertSemicolon()&&this.eat(d._function))return this.overrideContext(Ut.f_expr),this.parseFunction(this.startNodeAt(r,s),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(d.arrow))return this.parseArrowExpression(this.startNodeAt(r,s),[o],!1,t);if(this.options.ecmaVersion>=8&&o.name==="async"&&this.type===d.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return o=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(d.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,s),[o],!0,t)}return o;case d.regexp:var u=this.value;return n=this.parseLiteral(u.value),n.regex={pattern:u.pattern,flags:u.flags},n;case d.num:case d.string:return this.parseLiteral(this.value);case d._null:case d._true:case d._false:return n=this.startNode(),n.value=this.type===d._null?null:this.type===d._true,n.raw=this.type.keyword,this.next(),this.finishNode(n,"Literal");case d.parenL:var c=this.start,l=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(l)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),l;case d.bracketL:return n=this.startNode(),this.next(),n.elements=this.parseExprList(d.bracketR,!0,!0,e),this.finishNode(n,"ArrayExpression");case d.braceL:return this.overrideContext(Ut.b_expr),this.parseObj(!1,e);case d._function:return n=this.startNode(),this.next(),this.parseFunction(n,0);case d._class:return this.parseClass(this.startNode(),!1);case d._new:return this.parseNew();case d.backQuote:return this.parseTemplate();case d._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}};st.parseExprImport=function(){var e=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var t=this.parseIdent(!0);switch(this.type){case d.parenL:return this.parseDynamicImport(e);case d.dot:return e.meta=t,this.parseImportMeta(e);default:this.unexpected()}};st.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(d.parenR)){var t=this.start;this.eat(d.comma)&&this.eat(d.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};st.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};st.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};st.parseParenExpression=function(){this.expect(d.parenL);var e=this.parseExpression();return this.expect(d.parenR),e};st.parseParenAndDistinguishExpression=function(e,t){var n=this.start,i=this.startLoc,r,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a=this.start,o=this.startLoc,u=[],c=!0,l=!1,h=new Xo,p=this.yieldPos,m=this.awaitPos,b;for(this.yieldPos=0,this.awaitPos=0;this.type!==d.parenR;)if(c?c=!1:this.expect(d.comma),s&&this.afterTrailingComma(d.parenR,!0)){l=!0;break}else if(this.type===d.ellipsis){b=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===d.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,h,this.parseParenItem));var y=this.lastTokEnd,S=this.lastTokEndLoc;if(this.expect(d.parenR),e&&!this.canInsertSemicolon()&&this.eat(d.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=p,this.awaitPos=m,this.parseParenArrowList(n,i,u,t);(!u.length||l)&&this.unexpected(this.lastTokStart),b&&this.unexpected(b),this.checkExpressionErrors(h,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=m||this.awaitPos,u.length>1?(r=this.startNodeAt(a,o),r.expressions=u,this.finishNodeAt(r,"SequenceExpression",y,S)):r=u[0]}else r=this.parseParenExpression();if(this.options.preserveParens){var I=this.startNodeAt(n,i);return I.expression=r,this.finishNode(I,"ParenthesizedExpression")}else return r};st.parseParenItem=function(e){return e};st.parseParenArrowList=function(e,t,n,i){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,i)};var yT=[];st.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(d.dot)){e.meta=t;var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var i=this.start,r=this.startLoc,s=this.type===d._import;return e.callee=this.parseSubscripts(this.parseExprAtom(),i,r,!0,!1),s&&e.callee.type==="ImportExpression"&&this.raise(i,"Cannot use new with import()"),this.eat(d.parenL)?e.arguments=this.parseExprList(d.parenR,this.options.ecmaVersion>=8,!1):e.arguments=yT,this.finishNode(e,"NewExpression")};st.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===d.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===d.backQuote,this.finishNode(n,"TemplateElement")};st.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var i=this.parseTemplateElement({isTagged:t});for(n.quasis=[i];!i.tail;)this.type===d.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(d.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(d.braceR),n.quasis.push(i=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};st.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===d.name||this.type===d.num||this.type===d.string||this.type===d.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===d.star)&&!ln.test(this.input.slice(this.lastTokEnd,this.start))};st.parseObj=function(e,t){var n=this.startNode(),i=!0,r={};for(n.properties=[],this.next();!this.eat(d.braceR);){if(i)i=!1;else if(this.expect(d.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(d.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,r,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};st.parseProperty=function(e,t){var n=this.startNode(),i,r,s,a;if(this.options.ecmaVersion>=9&&this.eat(d.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===d.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===d.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,a=this.startLoc),e||(i=this.eat(d.star)));var o=this.containsEsc;return this.parsePropertyName(n),!e&&!o&&this.options.ecmaVersion>=8&&!i&&this.isAsyncProp(n)?(r=!0,i=this.options.ecmaVersion>=9&&this.eat(d.star),this.parsePropertyName(n)):r=!1,this.parsePropertyValue(n,e,i,r,s,a,t,o),this.finishNode(n,"Property")};st.parsePropertyValue=function(e,t,n,i,r,s,a,o){if((n||i)&&this.type===d.colon&&this.unexpected(),this.eat(d.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===d.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,i);else if(!t&&!o&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==d.comma&&this.type!==d.braceR&&this.type!==d.eq){(n||i)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var u=e.kind==="get"?0:1;if(e.value.params.length!==u){var c=e.value.start;e.kind==="get"?this.raiseRecoverable(c,"getter should have no params"):this.raiseRecoverable(c,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}else this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||i)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=r),e.kind="init",t?e.value=this.parseMaybeDefault(r,s,this.copyNode(e.key)):this.type===d.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(r,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};st.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(d.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(d.bracketR),e.key;e.computed=!1}return e.key=this.type===d.num||this.type===d.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};st.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};st.parseMethod=function(e,t,n){var i=this.startNode(),r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(i),this.options.ecmaVersion>=6&&(i.generator=e),this.options.ecmaVersion>=8&&(i.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Gl(t,i.generator)|zl|(n?yy:0)),this.expect(d.parenL),i.params=this.parseBindingList(d.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(i,!1,!0,!1),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(i,"FunctionExpression")};st.parseArrowExpression=function(e,t,n,i){var r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(Gl(n,!1)|my),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,i),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(e,"ArrowFunctionExpression")};st.parseFunctionBody=function(e,t,n,i){var r=t&&this.type!==d.braceL,s=this.strict,a=!1;if(r)e.body=this.parseMaybeAssign(i),e.expression=!0,this.checkParams(e,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||o)&&(a=this.strictDirective(this.end),a&&o&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(e,!s&&!a&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,by),e.body=this.parseBlock(!1,void 0,a&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};st.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var i=n[t];if(i.type!=="Identifier")return!1}return!0};st.checkParams=function(e,t){for(var n=Object.create(null),i=0,r=e.params;i<r.length;i+=1){var s=r[i];this.checkLValInnerPattern(s,Yl,t?null:n)}};st.parseExprList=function(e,t,n,i){for(var r=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(d.comma),t&&this.afterTrailingComma(e))break;var a=void 0;n&&this.type===d.comma?a=null:this.type===d.ellipsis?(a=this.parseSpread(i),i&&this.type===d.comma&&i.trailingComma<0&&(i.trailingComma=this.start)):a=this.parseMaybeAssign(!1,i),r.push(a)}return r};st.checkUnreserved=function(e){var t=e.start,n=e.end,i=e.name;if(this.inGenerator&&i==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&i==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&i==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(i==="arguments"||i==="await")&&this.raise(t,"Cannot use "+i+" in class static initialization block"),this.keywords.test(i)&&this.raise(t,"Unexpected keyword '"+i+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var r=this.strict?this.reservedWordsStrict:this.reservedWords;r.test(i)&&(!this.inAsync&&i==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+i+"' is reserved"))}};st.parseIdent=function(e){var t=this.startNode();return this.type===d.name?t.name=this.value:this.type.keyword?(t.name=this.type.keyword,(t.name==="class"||t.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop()):this.unexpected(),this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};st.parsePrivateIdent=function(){var e=this.startNode();return this.type===d.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e),e};st.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===d.semi||this.canInsertSemicolon()||this.type!==d.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(d.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};st.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var Eo=ce.prototype;Eo.raise=function(e,t){var n=dy(this.input,e);t+=" ("+n.line+":"+n.column+")";var i=new SyntaxError(t);throw i.pos=e,i.loc=n,i.raisedAt=this.pos,i};Eo.raiseRecoverable=Eo.raise;Eo.curPosition=function(){if(this.options.locations)return new qs(this.curLine,this.pos-this.lineStart)};var Wi=ce.prototype,gT=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Wi.enterScope=function(e){this.scopeStack.push(new gT(e))};Wi.exitScope=function(){this.scopeStack.pop()};Wi.treatFunctionsAsVarInScope=function(e){return e.flags&us||!this.inModule&&e.flags&Gs};Wi.declareName=function(e,t,n){var i=!1;if(t===fi){var r=this.currentScope();i=r.lexical.indexOf(e)>-1||r.functions.indexOf(e)>-1||r.var.indexOf(e)>-1,r.lexical.push(e),this.inModule&&r.flags&Gs&&delete this.undefinedExports[e]}else if(t===vy){var s=this.currentScope();s.lexical.push(e)}else if(t===gy){var a=this.currentScope();this.treatFunctionsAsVar?i=a.lexical.indexOf(e)>-1:i=a.lexical.indexOf(e)>-1||a.var.indexOf(e)>-1,a.functions.push(e)}else for(var o=this.scopeStack.length-1;o>=0;--o){var u=this.scopeStack[o];if(u.lexical.indexOf(e)>-1&&!(u.flags&_y&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){i=!0;break}if(u.var.push(e),this.inModule&&u.flags&Gs&&delete this.undefinedExports[e],u.flags&ql)break}i&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};Wi.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};Wi.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Wi.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&ql)return t}};Wi.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&ql&&!(t.flags&my))return t}};var Jo=function(t,n,i){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new Qo(t,i)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},ca=ce.prototype;ca.startNode=function(){return new Jo(this,this.start,this.startLoc)};ca.startNodeAt=function(e,t){return new Jo(this,e,t)};function xy(e,t,n,i){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=i),this.options.ranges&&(e.range[1]=n),e}ca.finishNode=function(e,t){return xy.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};ca.finishNodeAt=function(e,t,n,i){return xy.call(this,e,t,n,i)};ca.copyNode=function(e){var t=new Jo(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var Iy="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Ey=Iy+" Extended_Pictographic",Ay=Ey,ky=Ay+" EBase EComp EMod EPres ExtPict",Ty=ky,vT=Ty,bT={9:Iy,10:Ey,11:Ay,12:ky,13:Ty,14:vT},cd="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Ry="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Ny=Ry+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Oy=Ny+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Cy=Oy+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Fy=Cy+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",wT=Fy+" Kawi Nag_Mundari Nagm",ST={9:Ry,10:Ny,11:Oy,12:Cy,13:Fy,14:wT},Ly={};function xT(e){var t=Ly[e]={binary:ur(bT[e]+" "+cd),nonBinary:{General_Category:ur(cd),Script:ur(ST[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var Vu=0,ld=[9,10,11,12,13,14];Vu<ld.length;Vu+=1){var IT=ld[Vu];xT(IT)}var D=ce.prototype,Ii=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":""),this.unicodeProperties=Ly[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};Ii.prototype.reset=function(t,n,i){var r=i.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=i,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9};Ii.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};Ii.prototype.at=function(t,n){n===void 0&&(n=!1);var i=this.source,r=i.length;if(t>=r)return-1;var s=i.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=r)return s;var a=i.charCodeAt(t+1);return a>=56320&&a<=57343?(s<<10)+a-56613888:s};Ii.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var i=this.source,r=i.length;if(t>=r)return r;var s=i.charCodeAt(t),a;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=r||(a=i.charCodeAt(t+1))<56320||a>57343?t+1:t+2};Ii.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};Ii.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};Ii.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};Ii.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};D.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,i=0;i<n.length;i++){var r=n.charAt(i);t.indexOf(r)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(r,i+1)>-1&&this.raise(e.start,"Duplicate regular expression flag")}};D.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};D.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var i=n[t];e.groupNames.indexOf(i)===-1&&e.raise("Invalid named capture referenced")}};D.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};D.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};D.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};D.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};D.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};D.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};D.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var i=0,r=-1;if(this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue),e.eat(125)))return r!==-1&&r<i&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};D.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};D.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};D.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};D.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};D.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};D.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};D.regexp_eatSyntaxCharacter=function(e){var t=e.current();return By(t)?(e.lastIntValue=t,e.advance(),!0):!1};function By(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}D.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!By(n);)e.advance();return e.pos!==t};D.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};D.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};D.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};D.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=Vi(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=Vi(e.lastIntValue);return!0}return!1};D.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,i=e.current(n);return e.advance(n),i===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(i=e.lastIntValue),ET(i)?(e.lastIntValue=i,!0):(e.pos=t,!1)};function ET(e){return vi(e,!0)||e===36||e===95}D.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,i=e.current(n);return e.advance(n),i===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(i=e.lastIntValue),AT(i)?(e.lastIntValue=i,!0):(e.pos=t,!1)};function AT(e){return Zr(e,!0)||e===36||e===95||e===8204||e===8205}D.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};D.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};D.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};D.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};D.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};D.regexp_eatZero=function(e){return e.current()===48&&!Zo(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};D.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};D.regexp_eatControlLetter=function(e){var t=e.current();return Dy(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function Dy(e){return e>=65&&e<=90||e>=97&&e<=122}D.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,i=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var r=e.lastIntValue;if(i&&r>=55296&&r<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var a=e.lastIntValue;if(a>=56320&&a<=57343)return e.lastIntValue=(r-55296)*1024+(a-56320)+65536,!0}e.pos=s,e.lastIntValue=r}return!0}if(i&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&kT(e.lastIntValue))return!0;i&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function kT(e){return e>=0&&e<=1114111}D.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};D.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};D.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(TT(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(t===80||t===112)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1};function TT(e){return e===100||e===68||e===115||e===83||e===119||e===87}D.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,i),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,r),!0}return!1};D.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){oa(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};D.regexp_validateUnicodePropertyNameOrValue=function(e,t){e.unicodeProperties.binary.test(t)||e.raise("Invalid property name")};D.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";My(t=e.current());)e.lastStringValue+=Vi(t),e.advance();return e.lastStringValue!==""};function My(e){return Dy(e)||e===95}D.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";RT(t=e.current());)e.lastStringValue+=Vi(t),e.advance();return e.lastStringValue!==""};function RT(e){return My(e)||Zo(e)}D.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};D.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1};D.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};D.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||Vy(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var i=e.current();return i!==93?(e.lastIntValue=i,e.advance(),!0):!1};D.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};D.regexp_eatClassControlLetter=function(e){var t=e.current();return Zo(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};D.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};D.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;Zo(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function Zo(e){return e>=48&&e<=57}D.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;Py(n=e.current());)e.lastIntValue=16*e.lastIntValue+Uy(n),e.advance();return e.pos!==t};function Py(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function Uy(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}D.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};D.regexp_eatOctalDigit=function(e){var t=e.current();return Vy(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function Vy(e){return e>=48&&e<=55}D.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var i=0;i<t;++i){var r=e.current();if(!Py(r))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+Uy(r),e.advance()}return!0};var Wl=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new Qo(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},ht=ce.prototype;ht.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Wl(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};ht.getToken=function(){return this.next(),new Wl(this)};typeof Symbol<"u"&&(ht[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===d.eof,value:t}}}});ht.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(d.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};ht.readToken=function(e){return vi(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};ht.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};ht.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var i=void 0,r=t;(i=ly(this.input,r,this.pos))>-1;)++this.curLine,r=this.lineStart=i;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};ht.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),i=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!os(i);)i=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};ht.skipSpace=function(){t:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(e>8&&e<14||e>=5760&&hy.test(String.fromCharCode(e)))++this.pos;else break t}}};ht.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};ht.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(d.ellipsis)):(++this.pos,this.finishToken(d.dot))};ht.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(d.assign,2):this.finishOp(d.slash,1)};ht.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,i=e===42?d.star:d.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,i=d.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(d.assign,n+1):this.finishOp(i,n)};ht.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(d.assign,3)}return this.finishOp(e===124?d.logicalOR:d.logicalAND,2)}return t===61?this.finishOp(d.assign,2):this.finishOp(e===124?d.bitwiseOR:d.bitwiseAND,1)};ht.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(d.assign,2):this.finishOp(d.bitwiseXOR,1)};ht.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||ln.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(d.incDec,2):t===61?this.finishOp(d.assign,2):this.finishOp(d.plusMin,1)};ht.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(d.assign,n+1):this.finishOp(d.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(d.relational,n))};ht.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(d.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(d.arrow)):this.finishOp(e===61?d.eq:d.prefix,1)};ht.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(d.questionDot,2)}if(t===63){if(e>=12){var i=this.input.charCodeAt(this.pos+2);if(i===61)return this.finishOp(d.assign,3)}return this.finishOp(d.coalesce,2)}}return this.finishOp(d.question,1)};ht.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),vi(t,!0)||t===92))return this.finishToken(d.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Vi(t)+"'")};ht.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(d.parenL);case 41:return++this.pos,this.finishToken(d.parenR);case 59:return++this.pos,this.finishToken(d.semi);case 44:return++this.pos,this.finishToken(d.comma);case 91:return++this.pos,this.finishToken(d.bracketL);case 93:return++this.pos,this.finishToken(d.bracketR);case 123:return++this.pos,this.finishToken(d.braceL);case 125:return++this.pos,this.finishToken(d.braceR);case 58:return++this.pos,this.finishToken(d.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(d.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(d.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Vi(e)+"'")};ht.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};ht.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var i=this.input.charAt(this.pos);if(ln.test(i)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(i==="[")t=!0;else if(i==="]"&&t)t=!1;else if(i==="/"&&!t)break;e=i==="\\"}++this.pos}var r=this.input.slice(n,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var o=this.regexpState||(this.regexpState=new Ii(this));o.reset(n,r,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var u=null;try{u=new RegExp(r,a)}catch{}return this.finishToken(d.regexp,{pattern:r,flags:a,value:u})};ht.readInt=function(e,t,n){for(var i=this.options.ecmaVersion>=12&&t===void 0,r=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,a=0,o=0,u=0,c=t??1/0;u<c;++u,++this.pos){var l=this.input.charCodeAt(this.pos),h=void 0;if(i&&l===95){r&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),o===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),o=l;continue}if(l>=97?h=l-97+10:l>=65?h=l-65+10:l>=48&&l<=57?h=l-48:h=1/0,h>=e)break;o=l,a=a*e+h}return i&&o===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:a};function NT(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function jy(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}ht.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=jy(this.input.slice(t,this.pos)),++this.pos):vi(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(d.num,n)};ht.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var i=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&i===110){var r=jy(this.input.slice(t,this.pos));return++this.pos,vi(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(d.num,r)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),i===46&&!n&&(++this.pos,this.readInt(10),i=this.input.charCodeAt(this.pos)),(i===69||i===101)&&!n&&(i=this.input.charCodeAt(++this.pos),(i===43||i===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),vi(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=NT(this.input.slice(t,this.pos),n);return this.finishToken(d.num,s)};ht.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};ht.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var i=this.input.charCodeAt(this.pos);if(i===e)break;i===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):i===8232||i===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(os(i)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(d.string,t)};var $y={};ht.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===$y)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};ht.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw $y;this.raise(e,t)};ht.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===d.template||this.type===d.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(d.dollarBraceL)):(++this.pos,this.finishToken(d.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(d.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(os(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};ht.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(d.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};ht.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Vi(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var i=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(i,8);return r>255&&(i=i.slice(0,-1),r=parseInt(i,8)),this.pos+=i.length-1,t=this.input.charCodeAt(this.pos),(i!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-i.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return os(t)?"":String.fromCharCode(t)}};ht.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};ht.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,i=this.options.ecmaVersion>=6;this.pos<this.input.length;){var r=this.fullCharCodeAtPos();if(Zr(r,i))this.pos+=r<=65535?1:2;else if(r===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(t?vi:Zr)(a,i)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=Vi(a),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};ht.readWord=function(){var e=this.readWord1(),t=d.name;return this.keywords.test(e)&&(t=jl[e]),this.finishToken(t,e)};var OT="8.8.2";ce.acorn={Parser:ce,version:OT,defaultOptions:_c,Position:qs,SourceLocation:Qo,getLineInfo:dy,Node:Jo,TokenType:gt,tokTypes:d,keywordTypes:jl,TokContext:fn,tokContexts:Ut,isIdentifierChar:Zr,isIdentifierStart:vi,Token:Wl,isNewLine:os,lineBreak:ln,lineBreakG:oT,nonASCIIwhitespace:hy};function CT(e,t){return ce.parse(e,t)}const Kl={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},FT={ecmaVersion:11},hd="$",LT="d",BT="d1",DT="d2",de=e=>(t,n)=>n.error(t,e+" not allowed"),MT=de("Aggregate function"),PT=de("Window function"),UT="Invalid argument",Ql="Invalid column reference",VT=Ql+" (must be input to an aggregate function)",zy="Invalid function call",jT="Invalid member expression",$T="Invalid operator parameter",zT="Invalid param reference",qT="Invalid variable reference",GT="Variable not accessible in operator call",YT="Unsupported variable declaration",HT="Unsupported destructuring pattern",qy="Table expressions do not support closures",Gy="Use aq.escape(fn) to use a function as-is (including closures)",WT="use table.params({ name: value }) to define dynamic parameters",KT="use aq.addFunction(name, fn) to add new op functions",QT=`
Note: ${qy}. ${Gy}, or ${WT}.`,Yy=`
Note: ${qy}. ${Gy}, or ${KT}.`,XT=`The ${K_} method is not valid in multi-table expressions.`;function JT(e,t){const n=ZT(t);let i=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,Xk(i)?(eR(i,e),i=i.body):e.join?(e.scope.add(e.tuple1=BT),e.scope.add(e.tuple2=DT),e.scope.add(e.$param=hd)):(e.scope.add(e.tuple=LT),e.scope.add(e.$param=hd)),mt(i,e,Xl),e.root}function ZT(e){try{const t=e.field?tR(e):St(e)?Xn(e):e;return CT(`expr=(${t})`,FT).body[0].expression.right}catch{it(`Expression parse error: ${e+""}`)}}function tR(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const Xl={FunctionDeclaration:de("Function definitions"),ForStatement:de("For loops"),ForOfStatement:de("For-of loops"),ForInStatement:de("For-in loops"),WhileStatement:de("While loops"),DoWhileStatement:de("Do-while loops"),AwaitExpression:de("Await expressions"),ArrowFunctionExpression:de("Function definitions"),AssignmentExpression:de("Assignments"),FunctionExpression:de("Function definitions"),NewExpression:de('Use of "new"'),UpdateExpression:de("Update expressions"),VariableDeclarator(e,t){bc(e.id,t)},Identifier(e,t,n){Ky(e,t,n)&&!t.scope.has(e.name)&&t.error(e,qT,QT)},CallExpression(e,t){const n=Hy(e.callee),i=Y_(n)||H_(n);if(i){if((t.join||t.aggregate===!1)&&Fl(n)&&MT(e,t),(t.join||t.window===!1)&&Ll(n)&&PT(e,t),t.$op=1,t.ast)vc(e,n,t),e.arguments.forEach(r=>mt(r,t,gc));else{const r=t.op(nR(t,i,n,e.arguments));Object.assign(e,{type:j_,name:r.id})}return t.$op=0,!1}else G_(n)?vc(e,n,t):t.error(e,zy,Yy)},MemberExpression(e,t,n){const{object:i,property:r}=e;if(!ue(Fi,i))return;const{name:s}=i;if(Wy(e)&&ue(Fi,r)&&An(Kl,r.name)){Jy(e,r.name);return}const a=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(a>=0)return fd(e,a,t,Qy,n);if(s===t.$param)return fd(e,a,t,rR);t.paramsRef.has(s)?Ys(e,t.paramsRef.get(s)):t.columnRef.has(s)?Xy(i,s,t,e):An(t.params,s)&&Ys(i,s)}};function fd(e,t,n,i,r){const{property:s,computed:a}=e;let o;if(!a)o=s.name;else if(ue(as,s))o=s.value;else try{mt(s,n,Xl,e),o=n.param(s)}catch{n.error(e,jT)}return i(e,o,t,n,r),!1}const gc={...Xl,VariableDeclarator:de("Variable declaration in operator call"),Identifier(e,t,n){Ky(e,t,n)&&t.error(e,GT)},CallExpression(e,t){const n=Hy(e.callee);G_(n)?vc(e,n,t):t.error(e,zy,Yy)}};function eR(e,t){e.generator&&de("Generator functions")(e,t),e.async&&de("Async functions")(e,t);const{params:n}=e,i=n.length,r=a=>(o,u)=>t.columnRef.set(o,[u,a]),s=(a,o)=>t.paramsRef.set(a,o);i&&(t.join?(gs(t,n[0],"tuple1",r(1)),i>1&&gs(t,n[1],"tuple2",r(2)),i>2&&gs(t,n[2],"$param",s)):(gs(t,n[0],"tuple",r(0)),i>1&&gs(t,n[1],"$param",s))),t.root=e.body}function gs(e,t,n,i){ue(Fi,t)?(e.scope.add(t.name),e[n]=t.name):ue(U_,t)&&t.properties.forEach(r=>{const s=ue(Fi,r.key)?r.key.name:ue(as,r.key)?r.key.value:e.error(r,UT);ue(Fi,r.value)||e.error(r.value,HT),i(r.value.name,s)})}function nR(e,t,n,i){const r=[],s=[],a=t.param[0]||0,o=a+(t.param[1]||0);return i.forEach((u,c)=>{c<a?(mt(u,e,gc),r.push(e.field(u))):c<o?(mt(u,e,gc),s.push(e.param(u))):e.error(u,$T)}),{name:n,fields:r,params:s,...e.spec.window||{}}}function Hy(e){return ue(Fi,e)?e.name:ue(P_,e)?Wy(e)?iR(e.property.name):e.property.name:null}function Wy(e){return ue(Fi,e.object)&&e.object.name==="Math"}function iR(e){return e==="max"?"greatest":e==="min"?"least":e}function Ky(e,t,n){const{name:i}=e;if(!(ue(P_,n)&&n.property===e)){if(!(ue(V_,n)&&n.key===e))if(t.paramsRef.has(i))Ys(e,t.paramsRef.get(i));else if(t.columnRef.has(i))Xy(e,i,t,n);else if(An(t.params,i))Ys(e,i);else if(An(Kl,i))Jy(e,i);else return!0}}function Qy(e,t,n,i,r){const s=n===0?i.table:n>0?i.join[n-1]:null,a=s&&s.column(t);s&&!a&&i.error(e,Ql),i.aggronly&&!i.$op&&i.error(e,VT),W_(e,t,n,a,r)}function Xy(e,t,n,i){const[r,s]=n.columnRef.get(t);Qy(e,r,s,n,i)}function rR(e,t,n,i){i.params&&!An(i.params,t)&&i.error(e,zT),Ys(e,t)}function Ys(e,t){e.type=J2,e.name=t}function Jy(e,t){e.type=K2,e.name=t,e.raw=Kl[t]}function vc(e,t,n){if(t===K_){const i=n.table;i||n.error(e,XT),Q_(e,e.arguments.length?e.arguments.map(r=>{const s=n.param(r),a=xe(s)?i.columnName(s):s;return i.column(a)||n.error(r,Ql),a}):i.columnNames())}else e.callee={type:X2,name:t}}function bc(e,t){ue(Fi,e)?t.scope.add(e.name):ue(G2,e)?e.elements.forEach(n=>bc(n,t)):ue(U_,e)?e.properties.forEach(n=>bc(n.value,t)):t.error(e.id,YT)}const sR={[aa]:1,[j_]:1};function Pe(e,t={}){const n=t.generate||wo,i=t.compiler||Bl,r=oR(t),s={},a={},o=[],u=[];let c=0,l=-1;const h=t.join?i.join:t.index==1?i.expr2:i.expr,p={op(y){const S=aR(y);return a[S]||(y.id=++l,a[S]=y)},field(y){const S=n(y);return s[S]||(s[S]=++c)},param(y){return ue(as,y)?y.value:i.param(n(y),r)},value(y,S){o.push(y);const I=S.escape||(t.ast?Qk(S):h(n(S),r));u.push(I),sR[S.type]&&I!==S&&ge(I)&&(I.field=S.name)},error(y,S,I=""){const k=y.start-6,$=y.end-6,L=String(p.spec).slice(k,$);it(`${S}: "${L}"${I}`)}};Object.assign(p,t,{params:r});for(const[y,S]of Yo(e))p.value(y+"",S.escape?tT(p,S,r):JT(p,S));if(t.ast)return{names:o,exprs:u};const m=[];for(const y in s)m[s[y]]=i.expr(y,r);const b=Object.values(a);return b.forEach(y=>y.fields=y.fields.map(S=>m[S])),{names:o,exprs:u,ops:b}}function aR(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(i=>Number.isFinite(i)?Math.abs(i):-1);t+=`[${n},${!!e.peers}]`}return t}function oR(e){return(e.table?ju(e.table):e.join?{...ju(e.join[1]),...ju(e.join[0])}:{})||{}}function ju(e){return e&&Pt(e.params)?e.params():{}}const Zy="Expr",dn="ExprList",t0="ExprNumber",xs="ExprObject",Rr="JoinKeys",Ao="JoinValues",nn="Options",Jl="OrderKeys",Ti="SelectionList",Zi="TableRef",Nr="TableRefList",uR="Descending",cR="Query",lR="Selection",hR="Verb",fR="Window";function Zl(e,t){return e&&e.expr?new dd({...e,...t}):new dd(t,e)}class dd{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...Pt(this.expr)?{func:!0}:{}}}}function dR(e){return Zl(e,{desc:!0})}function _r(e,t,n=0){const i=n?{field:!0,table:n}:{field:!0};return Zl(e,t?{expr:t,...i}:i)}function pR(e,t,n){return Zl(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function mR(e){const t=n=>n;return t.toString=()=>e,t}function pd(e,t){return t=t&&Pt(t.query)?t.query():t,t&&Pt(t.evaluate)?t.evaluate(null,e):e(t)}function e0(e){return ge(e)&&(St(e.all)||St(e.matches)||St(e.not)||St(e.range))}function Hs(e){return e&&Pt(e.toObject)?e.toObject():Pt(e)?{expr:String(e),func:!0}:St(e)?e.map(Hs):ge(e)?Wo(e,t=>Hs(t)):e}function th(e){return St(e)?e.map(th):ge(e)?St(e.verbs)?la.from(e):St(e.all)?Jr():St(e.range)?Gk(...e.range):St(e.match)?Yk(RegExp(...e.match)):St(e.not)?ay(e.not.map(Hs)):_R(e):e}function _R(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=_r(n):e.func===!0&&(t=n=mR(n)),ge(e.window)){const{frame:i,peers:r}=e.window;t=n=pR(n,i,r)}e.desc===!0&&(t=dR(n))}return e===t?Wo(e,i=>th(i)):t}function yR(e){return St(e)?e.map(gR):e}function gR(e){const t=[];return Me(e).forEach(n=>{xe(n)?t.push(n):_e(n)?t.push(_r(n,null)):ge(n)&&n.expr||Pt(n)?t.push(n):it(`Invalid key value: ${n+""}`)}),t}function vR(e){return St(e)?e.map(bR):e}function bR(e,t){return t<2?Me(e):e}function wR(e){const t=[];return e.forEach(n=>{const i=n.expr!=null?n.expr:n;if(ge(i)&&!Pt(i))for(const r in i)t.push(i[r]);else n=xe(i)?i:_e(i)?_r(n):Pt(i)?n:it(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const SR={[Zy]:s0,[dn]:ts,[t0]:TR,[xs]:ji,[Rr]:RR,[Ao]:NR,[Jl]:ts,[Ti]:AR};function xR(e,t,n){return t===Zi?md(e):t===Nr?e.map(md):n0(Hs(e),t,n)}function n0(e,t,n){return t===nn?e&&IR(e,n):SR[t](e)}function IR(e,t={}){const n={};for(const i in e){const r=e[i];n[i]=t[i]?n0(r,t[i]):r}return n}function ER(e,t){return Pe({expr:e},{...t,ast:!0}).exprs[0]}function eh(e){return{type:aa,name:e}}function i0(e){return{type:aa,index:e}}function ji(e,t){if(_e(e))return ER(e,t);if(e.expr){let n;if(e.field===!0?n=eh(e.expr):e.func===!0&&(n=ji(e.expr,t)),n)return e.desc&&(n={type:uR,expr:n}),e.window&&(n={type:fR,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...ji(e[n],t),as:n}))}function r0(e){const t=lR;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:ts(e.not)}:e.range?{type:t,operator:"range",arguments:ts(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:it("Invalid input")}function AR(e){return Me(e).map(kR).flat()}function kR(e){return e0(e)?r0(e):xe(e)?i0(e):_e(e)?eh(e):ge(e)?Object.keys(e).map(t=>({type:aa,name:t,as:e[t]})):it("Invalid input")}function s0(e){return e0(e)?r0(e):xe(e)?i0(e):_e(e)?eh(e):ge(e)?ji(e):it("Invalid input")}function ts(e){return Me(e).map(s0).flat()}function TR(e){return xe(e)?e:ji(e)}function RR(e){return St(e)?e.map(ts):ji(e,{join:!0})}function NR(e){return St(e)?e.map((t,n)=>n<2?ts(t):ji(t,{join:!0})):ji(e,{join:!0})}function md(e){return e&&Pt(e.toAST)?e.toAST():e}class a0{constructor(t,n=[],i=[]){this.verb=t,this.schema=n,n.forEach((r,s)=>{const a=r.type,o=i[s],u=a===Rr?yR(o):a===Ao?vR(o):a===Jl?wR(o):o;this[r.name]=u!==void 0?u:r.default})}static from(t){const n=wc[t.verb],i=(n.schema||[]).map(({name:r})=>th(t[r]));return n(...i)}evaluate(t,n){const i=this.schema.map(({name:r,type:s})=>{const a=this[r];return s===Zi?pd(n,a):s===Nr?a.map(o=>pd(n,o)):a});return t[this.verb](...i)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=Hs(this[n])}),t}toAST(){const t={type:hR,verb:this.verb};return this.schema.forEach(({name:n,type:i,props:r})=>{t[n]=xR(this[n],i,r)}),t}}function Nt(e,t){return Object.assign((...n)=>new a0(e,t,n),{schema:t})}const wc={count:Nt("count",[{name:"options",type:nn}]),derive:Nt("derive",[{name:"values",type:xs},{name:"options",type:nn,props:{before:Ti,after:Ti}}]),filter:Nt("filter",[{name:"criteria",type:xs}]),groupby:Nt("groupby",[{name:"keys",type:dn}]),orderby:Nt("orderby",[{name:"keys",type:Jl}]),relocate:Nt("relocate",[{name:"columns",type:Ti},{name:"options",type:nn,props:{before:Ti,after:Ti}}]),rename:Nt("rename",[{name:"columns",type:Ti}]),rollup:Nt("rollup",[{name:"values",type:xs}]),sample:Nt("sample",[{name:"size",type:t0},{name:"options",type:nn,props:{weight:Zy}}]),select:Nt("select",[{name:"columns",type:Ti}]),ungroup:Nt("ungroup"),unorder:Nt("unorder"),reify:Nt("reify"),dedupe:Nt("dedupe",[{name:"keys",type:dn,default:[]}]),impute:Nt("impute",[{name:"values",type:xs},{name:"options",type:nn,props:{expand:dn}}]),fold:Nt("fold",[{name:"values",type:dn},{name:"options",type:nn}]),pivot:Nt("pivot",[{name:"keys",type:dn},{name:"values",type:dn},{name:"options",type:nn}]),spread:Nt("spread",[{name:"values",type:dn},{name:"options",type:nn}]),unroll:Nt("unroll",[{name:"values",type:dn},{name:"options",type:nn,props:{drop:dn}}]),lookup:Nt("lookup",[{name:"table",type:Zi},{name:"on",type:Rr},{name:"values",type:dn}]),join:Nt("join",[{name:"table",type:Zi},{name:"on",type:Rr},{name:"values",type:Ao},{name:"options",type:nn}]),cross:Nt("cross",[{name:"table",type:Zi},{name:"values",type:Ao},{name:"options",type:nn}]),semijoin:Nt("semijoin",[{name:"table",type:Zi},{name:"on",type:Rr}]),antijoin:Nt("antijoin",[{name:"table",type:Zi},{name:"on",type:Rr}]),concat:Nt("concat",[{name:"tables",type:Nr}]),union:Nt("union",[{name:"tables",type:Nr}]),intersect:Nt("intersect",[{name:"tables",type:Nr}]),except:Nt("except",[{name:"tables",type:Nr}])};class la extends E_{constructor(t,n,i){super(n),this._verbs=t||[],this._table=i}static from({verbs:t,table:n,params:i}){return new la(t.map(a0.from),i,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const i of this._verbs)t=i.evaluate(t.params(this._params),n);return t}toObject(){return _d(this,"toObject")}toJSON(){return this.toObject()}toAST(){return _d(this,"toAST",{type:cR})}}function _d(e,t,n){return{...n,verbs:e._verbs.map(i=>i[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function OR(e,t){return new la(e._verbs.concat(t),e._params,e._table)}for(const e in wc){const t=wc[e];la.prototype["__"+e]=function(n,...i){return OR(n,t(...i))}}function ls(e,t,...n){const i=["_","$"],r=i.slice(0,n.length);return r.push('"use strict"; const '+n.map((s,a)=>s.map((o,u)=>`${i[a]}${u} = ${i[a]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...r)(...n)}function CR(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function nh(e,t){const n=Xe();return t.forEach((i,r)=>{const s=_e(i)?i:r;if(s){const a=e.column(r)||it(`Unrecognized column: ${r}`);n.add(s,a)}}),e.create(n)}function o0(e,t,{before:n,after:i}={}){const r=n!=null,s=i!=null;r||s||it("relocate requires a before or after option."),r&&s&&it("relocate accepts only one of the before or after options."),t=gi(e,t);const a=[...gi(e,r?n:i).keys()],o=r?a[0]:a.pop(),u=new Map;return e.columnNames().forEach(c=>{const l=!t.has(c);if(c===o){s&&l&&u.set(c,c);for(const[h,p]of t)u.set(h,p);if(s)return}l&&u.set(c,c)}),nh(e,u)}function ha(e,t=i=>i,n=""){const i=e.length;if(!i)return"";let r=t(e[0],0);for(let s=1;s<i;++s)r+=n+t(e[s],s);return r}function ih(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function FR(e,t=0,n=e.length){let i=n?e[t++]:vt;for(let r=t;r<n;++r)i>e[r]&&(i=e[r]);return i}function LR(e,t=0,n=e.length){let i=n?e[t++]:vt;for(let r=t;r<n;++r)i<e[r]&&(i=e[r]);return i}function Ia(e){return zs(e)?e:+e}function BR(e,t){const n=e.length;if(!n)return vt;if((t=+t)<=0||n<2)return Ia(e[0]);if(t>=1)return Ia(e[n-1]);const i=(n-1)*t,r=Math.floor(i),s=Ia(e[r]);return zs(s)?s:s+(Ia(e[r+1])-s)*(i-r)}class DR{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:FR(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:LR(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(ih)),BR(this._sorted,t)}}const ko=(e,t,n)=>ls(t,"{"+ha(e,(i,r)=>`_${r}.${n}(${t});`)+"}",e);function MR(e,t){const{ops:n,output:i}=PR(e,t),r=e[0].fields,s=r.length,a=s===0?rh:s===1?UR:s===2?VR:it("Unsupported field count: "+s);return new a(r,n,i,t)}function PR(e,t){const n={},i=[];function r(a,o=[]){const u=a+":"+o;if(n[u])return n[u];const c=Y_(a),l=c.create(...o);return t<0&&c.stream&&c.stream.forEach(h=>r(h,[])),c.req&&c.req.forEach(h=>r(h,[])),n[u]=l,i.push(l),l}const s=e.map(a=>{const o=r(a.name,a.params);return o.output=a.id,o});return{ops:i,output:s}}class rh extends Wk{constructor(t,n,i,r){super(i),this._op=n,this._fields=t,this._stream=!!r}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new DR),t}write(t,n,i){const r=this._outputs,s=r.length;for(let a=0;a<s;++a)n[r[a].output][i]=r[a].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class UR extends rh{constructor(t,n,i,r){super(t,n,i,r);const s=["state","v1","v2"];this._add=ko(n,s,"add"),this._rem=ko(n,s,"rem")}add(t,n,i){const r=this._fields[0](n,i);++t.count,yn(r)&&(++t.valid,t.list&&t.list.add(r),this._add(t,r))}rem(t,n,i){const r=this._fields[0](n,i);--t.count,yn(r)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,r))}}class VR extends rh{constructor(t,n,i,r){super(t,n,i,r);const s=["state","v1","v2"];this._add=ko(n,s,"add"),this._rem=ko(n,s,"rem")}add(t,n,i){const r=this._fields[0](n,i),s=this._fields[1](n,i);++t.count,yn(r)&&yn(s)&&(++t.valid,t.list&&t.list.add([r,s]),this._add(t,r,s))}rem(t,n,i){const r=this._fields[0](n,i),s=this._fields[1](n,i);--t.count,yn(r)&&yn(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,r,s))}}function br(e,t,n){if(t.length){const i=e.data(),{keys:r}=e.groups()||{},s=hs(e,t),a=r?(o,u)=>s[o][r[u]]:o=>s[o][0];n=n.map(o=>u=>o(u,i,a))}return n}function hs(e,t,n){if(!t.length)return n;const i=u0(t),r=e.groups(),s=r?r.size:1;return n=n||qo(t.length,()=>Array(s)),s>1?i.forEach(a=>{const o=l0(e,a,r);for(let u=0;u<s;++u)a.write(o[u],n,u)}):i.forEach(a=>{const o=c0(e,a);a.write(o,n,0)}),n}function u0(e,t){const n=[],i={};for(const r of e){const s=r.fields.map(a=>a+"").join(",");(i[s]||(i[s]=[])).push(r)}for(const r in i)n.push(MR(i[r],t));return n}function c0(e,t){const n=t.init(),i=e.totalRows(),r=e.data(),s=e.mask();if(e.isOrdered()){const a=e.indices();for(let o=0;o<i;++o)t.add(n,a[o],r)}else if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))t.add(n,a,r);else for(let a=0;a<i;++a)t.add(n,a,r);return n}function l0(e,t,n){const{keys:i,size:r}=n,s=qo(r,()=>t.init()),a=e.data();if(e.isOrdered()){const o=e.indices(),u=o.length;for(let c=0;c<u;++c){const l=o[c];t.add(s[i[l]],l,a)}}else if(e.isFiltered()){const o=e.mask();for(let u=o.next(0);u>=0;u=o.next(u+1))t.add(s[i[u]],u,a)}else{const o=e.totalRows();for(let u=0;u<o;++u)t.add(s[i[u]],u,a)}return s}function h0(e,t){const{get:n,names:i,rows:r,size:s}=t,a=i.length;for(let o=0;o<a;++o){const u=e.add(i[o],Array(s)),c=n[o];for(let l=0;l<s;++l)u[l]=c(r[l])}}function f0(e){return{left(t,n,i,r){for(i==null&&(i=0),r==null&&(r=t.length);i<r;){const s=i+r>>>1;e(t[s],n)<0?i=s+1:r=s}return i},right(t,n,i,r){for(i==null&&(i=0),r==null&&(r=t.length);i<r;){const s=i+r>>>1;e(t[s],n)>0?r=s:i=s+1}return i}}}const yd=f0(ih);function jR(e,t,n,i,r){let s,a,o,u,c;const l=y=>a[y-1]===a[y],h=i.length,p=r.length,m=i.length?ls(["w","r","k"],"{"+ha(i,(y,S)=>`r[_${S}.id][k]=_${S}.value(w,_${S}.get);`)+"}",i):()=>{},b={i0:0,i1:0,index:0,size:0,peer:l,init(y,S,I,k){b.index=b.i0=b.i1=0,b.size=S.length,s=y,a=S,u=I,c=k,o=r?r.map($=>$.init()):null;for(let $=0;$<h;++$)i[$].init();return b},value(y,S){return S(s[y],e)},step(y){const[S,I]=t,k=b.size,$=b.i0,L=b.i1;b.i0=S!=null?Math.max(0,y-Math.abs(S)):0,b.i1=I!=null?Math.min(k,y+Math.abs(I)+1):k,b.index=y,n&&(b.i0>0&&l(b.i0)&&(b.i0=yd.left(a,a[b.i0])),b.i1<k&&l(b.i1)&&(b.i1=yd.right(a,a[b.i1-1])));for(let Ct=0;Ct<p;++Ct){const at=r[Ct],Kt=o[Ct];for(let yt=$;yt<b.i0;++yt)at.rem(Kt,s[yt],e);for(let yt=L;yt<b.i1;++yt)at.add(Kt,s[yt],e);at.write(Kt,u,c)}return m(b,u,c),u}};return b}const $R=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),zR=e=>!!e.peers;function qR(e){const{id:t,name:n,fields:i=[],params:r=[]}=e,s=H_(n).create(...r);return i.length&&(s.get=i[0]),s.id=t,s}function GR(e,t,n,i={},r){const s=e.data(),a=YR(r,s),o=a.length,u=ls(["r","d","op"],"{"+ha(t,(c,l)=>`_${l}[r] = $${l}(r, d, op);`)+"}",t,n);e.partitions().forEach((c,l)=>{const h=c.length,p=HR(e,c);for(let b=0;b<o;++b)a[b].init(c,p,i,l);const m=b=>i[b][l];for(let b=0;b<h;++b){for(let y=0;y<o;++y)a[y].step(b);u(c[b],s,m)}})}function YR(e,t){const n={};return e.forEach(i=>{const r=$R(i),s=zR(i),a=`${r},${s}`,{aggOps:o,winOps:u}=n[a]||(n[a]={frame:r,peers:s,aggOps:[],winOps:[]});Fl(i.name)?o.push(i):u.push(qR(i))}),Object.values(n).map(i=>jR(t,i.frame,i.peers,i.winOps,u0(i.aggOps,i.frame[0]!=null?-1:1)))}function HR(e,t){if(e.isOrdered()){const n=e.comparator(),i=e.data(),r=t.length,s=new Uint32Array(r);for(let a=1,o=0;a<r;++a)s[a]=n(t[a-1],t[a],i)?++o:o;return s}else return t}function WR(e){return Ll(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function sh(e,{names:t,exprs:n,ops:i},r={}){const s=e.totalRows(),a=Xe(r.drop?null:e),o=t.map(p=>a.add(p,Array(s))),[u,c]=KR(i),l=e.isGrouped()?e.groups().size:1,h=hs(e,u,qo(i.length,()=>Array(l)));return c.length?GR(e,o,n,h,c):QR(e,o,n,h),e.create(a)}function KR(e){const t=[],n=[],i=e.length;for(let r=0;r<i;++r){const s=e[r];s.id=r,(WR(s)?n:t).push(s)}return[t,n]}function QR(e,t,n,i){const r=e.mask(),s=e.data(),{keys:a}=e.groups()||{},o=a?(c,l)=>i[c][a[l]]:c=>i[c][0],u=t.length;for(let c=0;c<u;++c){const l=n[c],h=t[c];if(r)for(let p=r.next(0);p>=0;p=r.next(p+1))h[p]=l(p,s,o);else{const p=e.totalRows();for(let m=0;m<p;++m)h[m]=l(m,s,o)}}}function XR(e,t,n={}){const i=sh(e,Pe(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?i:o0(i,Object.keys(t).filter(r=>!e.column(r)),n)}function JR(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((i,r)=>i.antijoin(r.select(n)),e).dedupe()}const Ea=2147483648,ZR=4294967295;class d0{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let i=0;i<t;++i)for(let r=this._bits[i];r;++n)r&=r-1;return n}get(t){return this._bits[t>>5]&Ea>>>t}set(t){this._bits[t>>5]|=Ea>>>t}clear(t){this._bits[t>>5]&=~(Ea>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,i=n.length;let r=t>>5,s=n[r]&ZR>>>t;for(;r<i;s=n[++r])if(s!==0)return(r<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let r=0;r<n;++r)t[r]=~t[r];const i=this._size%32;return i&&(t[n-1]&=Ea>>i-1),this}and(t){if(t){const n=this._bits,i=t._bits,r=n.length;for(let s=0;s<r;++s)n[s]&=i[s]}return this}or(t){if(t){const n=this._bits,i=t._bits,r=n.length;for(let s=0;s<r;++s)n[s]|=i[s]}return this}}function tN(e,t){const n=e.totalRows(),i=e.mask(),r=e.data(),s=new d0(n);if(i)for(let a=i.next(0);a>=0;a=i.next(a+1))t(a,r)&&s.set(a);else for(let a=0;a<n;++a)t(a,r)&&s.set(a);return e.create({filter:s})}function eN(e,t){const n=Pe({p:t},{table:e});let i=n.exprs[0];if(n.ops.length){const{data:r}=sh(e,n,{drop:!0}).column("p");i=s=>r[s]}return tN(e,i)}function p0(e,{names:t=[],exprs:n=[],ops:i=[]},r={}){if(!t.length)return e;const s=r.limit>0?+r.limit:1/0,a=r.index?r.index===!0?"index":r.index+"":null,o=new Set(r.drop),u=br(e,i,n),c=Xe(),l=new Set(t),h=[],p=[],m=[];e.columnNames().forEach(L=>{if(!o.has(L)){const Ct=c.add(L,[]);l.has(L)||(h.push(e.column(L)),p.push(Ct))}}),t.forEach(L=>{o.has(L)||(c.has(L)||c.add(L,[]),m.push(c.data[L]))});const b=a?c.add(a,[]):null;let y=0;const S=h.length,I=m.length,k=(L,Ct)=>{for(let at=0;at<S;++at)p[at].length=y+Ct,p[at].fill(h[at].get(L),y,y+Ct)},$=b?(L,Ct)=>{for(let at=0;at<Ct;++at)b[L+at]=at}:()=>{};if(I===1){const L=u[0],Ct=m[0];e.scan((at,Kt)=>{const yt=Me(L(at,Kt)),ve=Math.min(yt.length,s);k(at,ve);for(let Je=0;Je<ve;++Je)Ct[y+Je]=yt[Je];$(y,ve),y+=ve})}else e.scan((L,Ct)=>{let at=0;const Kt=u.map(yt=>{const ve=Me(yt(L,Ct));return at=Math.min(Math.max(at,ve.length),s),ve});k(L,at);for(let yt=0;yt<I;++yt){const ve=m[yt],Je=Kt[yt];for(let qe=0;qe<at;++qe)ve[y+qe]=Je[qe]}$(y,at),y+=at});return e.create(c.new())}function nN(e,{names:t=[],exprs:n=[],ops:i=[]},r={}){if(t.length===0)return e;const[s="key",a="value"]=r.as||[],o=br(e,i,n);return p0(e,{names:[s,a],exprs:[()=>t,(u,c)=>o.map(l=>l(u,c))]},{...r,drop:t})}function kn(e,t,n,i={window:!1}){const r=new Map,s=a=>{a=xe(a)?t.columnName(a):a,_e(a)?r.set(a,_r(a)):Pt(a)?gi(t,a).forEach(s):ge(a)?ry(r,a):it(`Invalid ${e} value: ${a+""}`)};return Me(n).forEach(s),i.preparse&&i.preparse(r),Pe(r,{table:t,...i})}function iN(e,t,n){return nN(e,kn("fold",e,t),n)}function gd(e,t,n,i){const r=n&&n.length;return rN(r?sN(e,n,i):e,t,r)}function rN(e,{names:t,exprs:n,ops:i},r){const s=br(e,i,n),a=r?null:Xe(e),o=e.totalRows();return t.forEach((u,c)=>{const l=e.column(u),h=r?l.data:a.add(u,Array(o)),p=s[c];e.scan(m=>{const b=l.get(m);h[m]=yn(b)?b:p(m)})}),r?e:e.create(a)}function sN(e,t,n){const i=e.groups(),r=e.data(),s=(i?i.names:[]).concat(t),a=(i?i.get:[]).concat(t.map(b=>e.getter(b))),o=new Set,u=So(a);e.scan((b,y)=>o.add(u(b,y)));const c=e.columnNames(),l=Xe(),h=c.map(b=>l.add(b,[]));c.forEach((b,y)=>{const S=r[b],I=h[y];e.scan(k=>I.push(S.get(k)))});const p=So(a.map((b,y)=>S=>S[y])),m=ls("v","{"+h.map((b,y)=>`_${y}.push(v[$${y}]);`).join("")+"}",h,c.map(b=>s.indexOf(b)));if(i){let b=i.keys.length;const y=n.reduce((I,k)=>I*k.length,i.size),S=new Uint32Array(y+(b-o.size));S.set(i.keys),vd(i,n,(I,k)=>{o.has(p(I))||(m(I),S[b++]=k[0])}),l.groupby({...i,keys:S})}else vd(i,n,b=>{o.has(p(b))||m(b)});return e.create(l.new())}function vd(e,t,n){const i=e?e.get.length:0,r=e?1:0,s=r+t.length,a=new Int32Array(s),o=new Int32Array(s),u=[];if(e){const{get:l,rows:h,size:p}=e;a[0]=p,u.push((m,b)=>{const y=h[b];for(let S=0;S<i;++S)m[S]=l[S](y)})}t.forEach((l,h)=>{const p=h+i;a[h+r]=l.length,u.push((m,b)=>m[p]=l[b])});const c=Array(i+t.length);for(let l=0;l<s;++l)u[l](c,0);n(c,o);for(let l=s-1;l>=0;){const h=++o[l];h<a[l]?(u[l](c,h),n(c,o),l=s-1):(o[l]=0,u[l](c,0),--l)}}function ah(e,{names:t,exprs:n,ops:i}){const r=Xe(),s=e.groups();return s&&h0(r,s),aN(t,n,s,hs(e,i),r),e.create(r.new())}function aN(e,t,n,i=[],r){if(!t.length)return;const s=n?n.size:1,a=(u,c)=>i[u][c],o=e.length;for(let u=0;u<o;++u){const c=t[u];if(c.field!=null)r.add(e[u],i[c.field]);else if(s>1){const l=r.add(e[u],Array(s));for(let h=0;h<s;++h)l[h]=c(h,null,a)}else r.add(e[u],[c(0,null,a)])}}function oN(e,t,n={}){if(t=Pe(t,{table:e}),t.names.forEach(i=>e.column(i)?0:it(`Invalid impute column ${Xn(i)}`)),n.expand){const i={preparse:uN,aggronly:!0},r=kn("impute",e,n.expand,i),s=ah(e.ungroup(),r);return gd(e,t,r.names,r.names.map(a=>s.get(a,0)))}else return gd(e,t)}function uN(e){e.forEach((t,n)=>t.field?e.set(n,L_(t+"")):0)}function cN(e,t){const n=e.columnNames();return t.length?t.reduce((i,r)=>i.semijoin(r.select(n)),e).dedupe():e.reify([])}function m0(e,t){const n=new Map;return e.scan((i,r)=>{const s=t(i,r);s!=null&&s===s&&n.set(s,i)}),n}function lN(e,t,n){const i=new Map,r=e.length;for(let s=0;s<r;++s){const a=e[s],o=n(a,t);o!=null&&o===o&&(i.has(o)?i.get(o).push(s):i.set(o,[s]))}return i}function hN(e,t){const n=["i","a","j","b"];return ls(n,"{"+ha(e,(i,r)=>`_${r}.push($${r}(${n}));`)+"}",e,t)}function fN(e,t,n,{names:i,exprs:r},s={}){const a=e.data(),o=e.indices(!1),u=o.length,c=new Int32Array(u),l=t.data(),h=t.indices(!1),p=h.length,m=new Int32Array(p),b=i.length,y=Xe(),S=Array(b),I=Array(b);for(let L=0;L<i.length;++L)S[L]=y.add(i[L],[]),I[L]=r[L];const k=hN(S,I);if((St(n)?pN:dN)(k,n,a,l,o,h,c,m,u,p),s.left)for(let L=0;L<u;++L)c[L]||k(o[L],a,-1,l);if(s.right)for(let L=0;L<p;++L)m[L]||k(-1,a,h[L],l);return e.create(y.new())}function dN(e,t,n,i,r,s,a,o,u,c){for(let l=0;l<u;++l){const h=r[l];for(let p=0;p<c;++p){const m=s[p];t(h,n,m,i)&&(e(h,n,m,i),a[l]=1,o[p]=1)}}}function pN(e,[t,n],i,r,s,a,o,u,c,l){let h,p,m,b,y,S,I,k,$=e;c>=l?(h=i,p=t,m=o,b=s,y=r,S=n,I=u,k=a):(h=r,p=n,m=u,b=a,y=i,S=t,I=o,k=s,$=(at,Kt,yt,ve)=>e(yt,ve,at,Kt));const L=lN(k,y,S),Ct=b.length;for(let at=0;at<Ct;++at){const Kt=b[at],yt=L.get(p(Kt,h));if(yt){const ve=yt.length;for(let Je=0;Je<ve;++Je){const qe=yt[Je];$(Kt,h,k[qe],y),I[qe]=1}m[at]=1}}}function To(e,t,n){const i=new Map;Me(n).forEach((s,a)=>{s=xe(s)?t.columnName(s):s,_e(s)?i.set(a,_r(s)):Pt(s)||ge(s)&&s.expr?i.set(a,s):it(`Invalid ${e} key value: ${s+""}`)});const r=Pe(i,{table:t,aggregate:!1,window:!1});return So(r.exprs,!0)}function mN(e,t){const n=new Set(t);return e.filter(i=>n.has(i))}function oh(e,t,n){if(n)_e(n)?n=[n,n]:St(n)&&n.length===1&&(n=[n[0],n[0]]);else{const i=mN(e.columnNames(),t.columnNames());i.length||it("Natural join requires shared column names."),n=[i,i]}return n}function _0(e,t,n,i){return n.length!==i.length&&it("Mismatched number of join keys"),[To("join",e,n),To("join",t,i)]}const _N={aggregate:!1,window:!1},yN={..._N,index:1};function bd(e,t,n,i,r={}){n=oh(e,t,n);const s={join:[e,t]};let a;if(St(n)){const[o,u]=n.map(Me);a=_0(e,t,o,u),i||(i=gN(e,o,u,r))}else a=Pe({on:n},s).exprs[0],i||(i=[Jr(),Jr()]);return fN(e,t,a,vN(e,t,i,s,r&&r.suffix),r)}function gN(e,t,n,i){const r=[];t.forEach((a,o)=>_e(a)&&a===n[o]?r.push(a):0);const s=ay(r);if(i.left&&i.right){const a=new Set(r);return[e.columnNames().map(o=>{const u=`[${Xn(o)}]`;return a.has(o)?{[o]:`(a, b) => a${u} == null ? b${u} : a${u}`}:o}),s]}return i.right?[s,Jr()]:[Jr(),s]}function vN(e,t,n,i,r=[]){if(St(n)){let s,a,o,u=n.length;s=a=o={names:[],exprs:[]},u--&&(s=kn("join",e,n[0],i)),u--&&(a=kn("join",t,n[1],yN)),u--&&(o=Pe(n[2],i));const c=new Set,l=new Set(s.names);return a.names.forEach(h=>{l.has(h)&&c.add(h)}),c.size&&(wd(s.names,c,r[0]||"_1"),wd(a.names,c,r[1]||"_2")),{names:s.names.concat(a.names,o.names),exprs:s.exprs.concat(a.exprs,o.exprs)}}else return Pe(n,i)}function wd(e,t,n){e.forEach((i,r)=>t.has(i)?e[r]=i+n:0)}function bN(e,t,n,i={}){const r=new d0(e.totalRows());return(St(n)?wN:SN)(r,e,t,n),i.anti&&r.not().and(e.mask()),e.create({filter:r})}function wN(e,t,n,[i,r]){const s=m0(n,r);t.scan((a,o)=>{s.get(i(a,o))>=0&&e.set(a)})}function SN(e,t,n,i){const r=t.numRows(),s=n.numRows(),a=t.data(),o=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),c=n.indices(!1);for(let l=0;l<r;++l){const h=u[l];for(let p=0;p<s;++p)if(i(h,a,c[p],o)){e.set(h);break}}}else for(let u=0;u<r;++u)for(let c=0;c<s;++c)if(i(u,a,c,o)){e.set(u);break}}function Sd(e,t,n,i){n=oh(e,t,n);const r=St(n)?_0(e,t,...n.map(Me)):Pe({on:n},{join:[e,t]}).exprs[0];return bN(e,t,r,i)}function xN(e,t,[n,i],{names:r,exprs:s,ops:a}){const o=Xe(e),u=e.totalRows();r.forEach(p=>o.add(p,Array(u).fill(vt)));const c=m0(t,i),l=ls(["lr","rr","data"],"{"+ha(r,(p,m)=>`_[${m}][lr] = $[${m}](rr, data);`)+"}",r.map(p=>o.data[p]),br(t,a,s)),h=t.data();return e.scan((p,m)=>{const b=c.get(n(p,m));b>=0&&l(p,b,h)}),e.create(o)}function IN(e,t,n,i){return n=oh(e,t,n),xN(e,t,[To("lookup",e,n[0]),To("lookup",t,n[1])],kn("lookup",t,i))}const Sc=(e,t)=>e??t;function EN(e,t,n,i={}){const{keys:r,keyColumn:s}=AN(e,t,i),a=Sc(i.valueSeparator,"_"),o=n.names.length>1?(c,l)=>l+a+r[c]:c=>r[c],u=r.map(c=>hs(e,n.ops.map(l=>{if(l.name==="count"){const p=m=>c===s[m]?1:NaN;return p.toString=()=>c+":1",{...l,name:"sum",fields:[p]}}const h=l.fields.map(p=>{const m=(b,y)=>c===s[b]?p(b,y):NaN;return m.toString=()=>c+":"+p,m});return{...l,fields:h}})));return e.create(kN(n,o,e.groups(),u))}function AN(e,t,n){const i=n.limit>0?+n.limit:1/0,r=Sc(n.sort,!0),s=Sc(n.keySeparator,"_"),a=br(e,t.ops,t.exprs),o=a.length===1?a[0]:(h,p)=>a.map(m=>m(h,p)).join(s),u=Array(e.totalRows());e.scan((h,p)=>u[h]=o(h,p));const c=hs(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[h=>u[h]],params:[]}])[0][0],l=r?c.sort():c;return{keys:Number.isFinite(i)?l.slice(0,i):l,keyColumn:u}}function kN({names:e,exprs:t},n,i,r){const s=i?i.size:1,a=Xe(),o=r.length,u=e.length;let c;const l=(h,p)=>c[h][p];i&&h0(a,i);for(let h=0;h<u;++h){const p=t[h];if(p.field!=null)for(let m=0;m<o;++m)a.add(n(m,e[h]),r[m][p.field]);else if(s>1)for(let m=0;m<o;++m){c=r[m];const b=a.add(n(m,e[h]),Array(s));for(let y=0;y<s;++y)b[y]=p(y,null,l)}else for(let m=0;m<o;++m)c=r[m],a.add(n(m,e[h]),[p(0,null,l)])}return a.new()}function TN(e,t,n,i){return EN(e,kn("fold",e,t),kn("fold",e,n,{preparse:RN,aggronly:!0}),i)}function RN(e){e.forEach((t,n)=>t.field?e.set(n,O_(t+"")):0)}function NN(e,t){const n=new Map;return e.columnNames(i=>(n.set(i,i),0)),nh(e,gi(e,t,n))}function xd(e,t){return ah(e,Pe(t,{table:e,aggronly:!0,window:!1}))}function ON(e,t,n,i){return(t?i?FN:CN:i?BN:LN)(e.length,e,n,i)}function CN(e,t,n){const i=n.length;for(let r=0;r<e;++r)t[r]=n[i*ss()|0];return t}function FN(e,t,n,i){const r=n.length,s=new Float64Array(r);let a=0;for(let u=0;u<r;++u)s[u]=a+=i(n[u]);const o=f0(ih).right;for(let u=0;u<e;++u)t[u]=n[o(s,a*ss())];return t}function LN(e,t,n){const i=n.length;if(e>=i)return n;for(let r=0;r<e;++r)t[r]=n[r];for(let r=e;r<i;++r){const s=r*ss();s<e&&(t[s|0]=n[r])}return t}function BN(e,t,n,i){const r=n.length;if(e>=r)return n;const s=new Float32Array(r),a=new Uint32Array(r);for(let o=0;o<r;++o)a[o]=o,s[o]=-Math.log(ss())/i(n[o]);a.sort((o,u)=>s[o]-s[u]);for(let o=0;o<e;++o)t[o]=n[a[o]];return t}function DN(e,t=0,n=e.length){let i=n-(t=+t);for(;i;){const r=ss()*i--|0,s=e[i+t];e[i+t]=e[r+t],e[r+t]=s}return e}function MN(e,t,n,i={}){const{replace:r,shuffle:s}=i,a=e.partitions(!1);let o=0;t=a.map((l,h)=>{let p=t(h);return o+=p=r?p:Math.min(l.length,p),p});const u=new Uint32Array(o);let c=0;return a.forEach((l,h)=>{const p=t[h],m=u.subarray(c,c+=p);!r&&p===l.length?m.set(l):ON(m,r,l,n)}),s!==!1&&(a.length>1||!r)&&DN(u),e.reify(u)}function PN(e,t,n={}){return MN(e,UN(e,t),VN(e,n.weight),n)}const y0=e=>t=>e.get(t)||0;function UN(e,t){return xe(t)?()=>t:y0(ah(e,Pe({size:t},{table:e,window:!1})).column("size"))}function VN(e,t){return t==null?null:(t=xe(t)?e.columnName(t):t,y0(_e(t)?e.column(t):sh(e,Pe({w:t},{table:e}),{drop:!0}).column("w")))}function jN(e,t){return nh(e,gi(e,t))}function $N(e,{names:t,exprs:n,ops:i=[]},r={}){if(t.length===0)return e;const s=t.length===1&&r.as||[],a=r.drop==null?!0:!!r.drop,o=r.limit==null?s.length||1/0:Math.max(1,+r.limit||1),u=br(e,i,n),c=Xe(),l=t.reduce((p,m,b)=>p.set(m,b),new Map),h=(p,m)=>{const b=zN(e,u[p],o),y=b.length;for(let S=0;S<y;++S)c.add(s[S]||`${m}_${S+1}`,b[S])};return e.columnNames().forEach(p=>{l.has(p)?(a||c.add(p,e.column(p)),h(l.get(p),p),l.delete(p)):c.add(p,e.column(p))}),l.forEach(h),e.create(c)}function zN(e,t,n){const i=e.totalRows(),r=[];return e.scan((s,a)=>{const o=Me(t(s,a)),u=Math.min(o.length,n);for(;r.length<u;)r.push(Array(i).fill(vt));for(let c=0;c<u;++c)r[c][s]=o[c]}),r}function qN(e,t,n){return $N(e,kn("spread",e,t),n)}function GN(e,t){return e.concat(t).dedupe()}function YN(e,t,n){return p0(e,kn("unroll",e,t),n&&n.drop?{...n,drop:kn("unroll",e,n.drop).names}:n)}function HN(e,t){return e.create({groups:WN(e,t)})}function WN(e,{names:t=[],exprs:n=[],ops:i=[]}){const r=t.length;if(r===0)return null;if(r===1&&!e.isFiltered()&&n[0].field){const m=e.column(n[0].field);if(m.groups)return m.groups(t)}let s=br(e,i,n);const a=So(s),o=e.totalRows(),u=new Uint32Array(o),c={},l=[],h=e.data(),p=e.mask();if(p)for(let m=p.next(0);m>=0;m=p.next(m+1)){const b=a(m,h)+"",y=c[b];u[m]=y??(c[b]=l.push(m)-1)}else for(let m=0;m<o;++m){const b=a(m,h)+"",y=c[b];u[m]=y??(c[b]=l.push(m)-1)}return i.length||(s=s.map(m=>b=>m(b,h))),{keys:u,get:s,names:t,rows:l,size:l.length}}function KN(e,t){return HN(e,kn("groupby",e,t))}function QN(e,t){return e.create({order:t})}const XN=(e,t,n,i)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${i}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${i} : `;function JN(e,t){const n=[],i=[],r=[];let s=null,a="0",o="0";e.isGrouped()&&(s=e.groups().keys,a="ka",o="kb");const{ops:u}=Pe(t,{table:e,value:(m,b)=>{if(n.push(m),b.escape){const y=S=>`fn[${r.length}](${S}, data)`;i.push([y("a"),y("b")]),r.push(b.escape)}else i.push([wo(b,{index:"a",op:a}),wo(b,{index:"b",op:o})])},window:!1}),c=hs(e,u),l=(m,b)=>c[m][b],h=n.length;let p="return (a, b) => {"+(l&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let m=0;m<h;++m){const b=t.get(n[m]).desc?-1:1,[y,S]=i[m];p+=XN(y,S,-b,b)}return p+="0;};",Function("op","keys","fn","data",p)(l,s,r,e.data())}function ZN(e,t){return QN(e,tO(e,t))}function tO(e,t){let n=-1;const i=new Map,r=s=>i.set(++n+"",s);return t.forEach(s=>{const a=s.expr!=null?s.expr:s;if(ge(a)&&!Pt(a))for(const o in a)r(a[o]);else r(xe(a)?_r(s,e.columnName(a)):_e(a)?_r(s):Pt(a)?s:it(`Invalid orderby field: ${s+""}`))}),JN(e,i)}function eO(e,t){const n=e.numRows(),i=n+t.reduce((a,o)=>a+o.numRows(),0);if(n===i)return e;const r=[e,...t],s=Xe();return e.columnNames().forEach(a=>{const o=Array(i);let u=0;r.forEach(c=>{const l=c.column(a)||{get:()=>vt};c.scan(h=>o[u++]=l.get(h))}),s.add(a,o)}),e.create(s.new())}function nO(e,t){const n=Xe(),i=e.groups(),{get:r,names:s=[],rows:a,size:o=1}=i||{},u=new Uint32Array(o+1);s.forEach(p=>n.add(p,null));const c=i?l0(e,t,i):[c0(e,t)];t.outputs().map(p=>n.add(p,[]));const l=u.length-1;let h=0;for(let p=0;p<l;++p)h+=u[p+1]=t.write(c[p],n.data,u[p]);if(i){const p=e.data();s.forEach((m,b)=>{const y=n.data[m]=Array(h),S=r[b];for(let I=0,k=0;I<o;++I)y.fill(S(a[I],p),k,k+=u[I+1])})}return e.create(n.new())}function iO(e){return e.isGrouped()?e.create({groups:null}):e}function rO(e){return e.isOrdered()?e.create({order:null}):e}const sO={__antijoin:(e,t,n)=>Sd(e,t,n,{anti:!0}),__count:(e,t={})=>xd(e,{[t.as||"count"]:C_()}),__cross:(e,t,n,i)=>bd(e,t,()=>!0,n,{...i,left:!0,right:!0}),__concat:eO,__dedupe:CR,__derive:XR,__except:JR,__filter:eN,__fold:iN,__impute:oN,__intersect:cN,__join:bd,__lookup:IN,__pivot:TN,__relocate:o0,__rename:NN,__rollup:xd,__sample:PN,__select:jN,__semijoin:Sd,__spread:qN,__union:GN,__unroll:YN,__groupby:KN,__orderby:ZN,__ungroup:iO,__unorder:rO,__reduce:nO};Object.assign(li.prototype,sO);function aO(e,t){return li.from(e,t)}li.prototype;class oO extends zi{constructor(t){super(),this.main_data_name=t.main_data_name,this.main_data=t.main_data_default,this.function_store=t.function_store,this.func_elected=t.default_func}async execute(t=[]){var o;console.log("args received back matching table backend",t),this.func_elected=((o=t[0])==null?void 0:o.func_elected)??this.func_elected;let n=aO(this.main_data);console.log("data for render",n.print());let i=n.columnNames();i=xw(i,["year","gid","value"]);let r=Ww(i,i);console.log("function store is :",this.function_store," and func elected is: ",this.func_elected);let s=this.function_store[0][this.func_elected];console.log("func is: ",s);let a=[];console.log("years in matching table backend are before passing to stats calculation: ",n.array("year")),r.forEach(([u,c])=>{let l=s(u,n.array(u),c,n.array(c));a.push({x:u,y:c,value:l})}),console.log("final information for rendering: ",a),this.emit("data",a,"matching_table")}render(t,n){console.log("updating matching table data with received _data, name,",t,n),console.log("matching table update for main data"),this.main_data=t??this.main_data,this.execute([])}}let uO={ArrayBackend:lx,URLBackend:hx,DuckDBBackend:i2,ClientDiffTreeBackend:s2,IdentityBackend:a2,RandomBackend:o2,QueryBackend:u2,MatchingTableBackEnd:oO};class VO extends Map{get backends(){return Zd(this)}createBackends(t){for(const n of t)this.createBackend(n)}createBackend(t){let n=uO[t.type];if(!n)throw new Error(`Backend type ${t.type} not found`);let i=new n(t);return this[t.id]=i,console.info("createBackend",t.id,i),i}}function cO(e){return e&&e.execute}function Id(e){return e&&e.addSourceIact}class Ed{constructor(t){var r,s;let n=$u(qb),i=$u(Hd);this.id=t.id,this.m=t.m,this.type=(r=this.m)==null?void 0:r.type,this.space=(s=this.m)==null?void 0:s.space,this.postprocess=t.postprocess??np,this.source=Id(t.source)?t.source:n[t.source],this.target=cO(t.target)?t.target:i[t.target],Id(this.source)?this.source.addSourceIact(this):console.warn("Interaction source doesn't define addSourceIact",this.source)}trigger(t,...n){let i=this.postprocess(t);console.log("let's see iact binding: ",t),this.target.execute(i,...n)}preview(t){throw new Error("Not Implemented")}}class jO{constructor(){this.iacts=[]}register(t){t instanceof Ed?this.iacts.push(t):this.iacts.push(new Ed(t))}registerInteractions(t){t.forEach(n=>this.register(n))}}function lO(e){let t;return{c(){t=tt("div"),this.h()},l(n){t=et(n,"DIV",{id:!0,class:!0}),ot(t).forEach(C),this.h()},h(){B(t,"id","loading"),B(t,"class","svelte-1e2b3ig")},m(n,i){Tt(n,t,i)},p:Rt,i:Rt,o:Rt,d(n){n&&C(t)}}}class $O extends Ue{constructor(t){super(),Ve(this,t,null,lO,je,{})}}function hO(e){let t,n,i,r,s,a,o,u;return{c(){t=tt("div"),n=ae("Time to initialize database is "),i=ae(e[1]),r=ae(" milliseconds."),s=Fe(),a=tt("div"),o=ae("DESDR: "),u=ae(e[0]),this.h()},l(c){t=et(c,"DIV",{class:!0});var l=ot(t);n=oe(l,"Time to initialize database is "),i=oe(l,e[1]),r=oe(l," milliseconds."),l.forEach(C),s=Le(c),a=et(c,"DIV",{class:!0});var h=ot(a);o=oe(h,"DESDR: "),u=oe(h,e[0]),h.forEach(C),this.h()},h(){B(t,"class","text-xs"),B(a,"class","text-center py-5 px-2 text-5xl font-bold")},m(c,l){Tt(c,t,l),V(t,n),V(t,i),V(t,r),Tt(c,s,l),Tt(c,a,l),V(a,o),V(a,u)},p(c,[l]){l&2&&xn(i,c[1]),l&1&&xn(u,c[0])},i:Rt,o:Rt,d(c){c&&C(t),c&&C(s),c&&C(a)}}}function fO(e,t,n){let{country:i,initTime:r}=t;return e.$$set=s=>{"country"in s&&n(0,i=s.country),"initTime"in s&&n(1,r=s.initTime)},[i,r]}class zO extends Ue{constructor(t){super(),Ve(this,t,fO,hO,je,{country:0,initTime:1})}}let qO={climatology:{name:"climatology",query:"with __dbt__cte__chirps as ( with unpivot_result as ( select * from chirps_raw ), gid_map as ( select a.gid, a.year, a.value, a.dekad, b.village from unpivot_result a left join admin_raw b on a.gid = b.gid ), filter_year_admin as ( select * from gid_map where gid = 'var(region)' and YEAR >= var(year_start) and YEAR <= var(year_end) ), cap as ( select *, case when value > var(dekcap) then var(dekcap) else value end as value_cap from filter_year_admin a ), output as ( select * from cap ) select * from output ),source as ( select * from __dbt__cte__chirps ), climatology as ( select dekad, avg(value_cap) as average_value from source group by dekad order by dekad ) select * from climatology"},crop_cal:{name:"crop_cal",query:"with __dbt__cte__crop_cal_precast as ( SELECT gid, crop, activity, GREATEST((start_time - DATE '2020-01-01')/10, 1) as start_time, GREATEST((end_time - DATE '2020-01-01')/10, 1) as end_time FROM crop_cal_raw WHERE gid='var(region)' )SELECT gid, crop, activity, start_time::INTEGER AS start_time, end_time::INTEGER AS end_time FROM __dbt__cte__crop_cal_precast"},vegetation_chirps:{name:"vegetation_chirps",query:"with __dbt__cte__chirps as ( with unpivot_result as ( select * from chirps_raw ), gid_map as ( select a.gid, a.year, a.value, a.dekad, b.village from unpivot_result a left join admin_raw b on a.gid = b.gid ), filter_year_admin as ( select * from gid_map where gid = 'var(region)' and YEAR >= var(year_start) and YEAR <= var(year_end) ), cap as ( select *, case when value > var(dekcap) then var(dekcap) else value end as value_cap from filter_year_admin a ), output as ( select * from cap ) select * from output ),source as ( select * from __dbt__cte__chirps ), intervel as ( select * from source where dekad >= var(vegetation_first) and dekad <= var(vegetation_last) ), rain_window as ( select year, sum(value) *var(scalar_vegetation) as window_value from intervel group by year ), trigger_exit as ( select round(percentile_cont(var(freq)) within group (order by window_value asc)) as trigger_value, round(min(window_value)) * var(exit_multiplier) as exit_value from rain_window ), output as ( select * from rain_window cross join trigger_exit order by year ) select * from output"},payout_sum_late:{name:"payout_sum_late",query:"with __dbt__cte__chirps as ( with unpivot_result as ( select * from chirps_raw ), gid_map as ( select a.gid, a.year, a.value, a.dekad, b.village from unpivot_result a left join admin_raw b on a.gid = b.gid ), filter_year_admin as ( select * from gid_map where gid = 'var(region)' and YEAR >= var(year_start) and YEAR <= var(year_end) ), cap as ( select *, case when value > var(dekcap) then var(dekcap) else value end as value_cap from filter_year_admin a ), output as ( select * from cap ) select * from output ), __dbt__cte__sum_late as ( with source as ( select * from __dbt__cte__chirps ), intervel as ( select * from source where dekad >= var(sum_late_first) and dekad <= var(sum_late_last) ), rain_window as ( select year, sum(value_cap) as window_value from intervel group by year ), trigger_exit as ( select round(percentile_cont(var(freq)) within group (order by window_value asc)) as trigger_value, round(min(window_value)) * var(exit_multiplier) as exit_value from rain_window ), output as ( select * from rain_window cross join trigger_exit order by year ) select * from output ),source as ( select * from __dbt__cte__sum_late ), payout_raw as ( select *, case when EXIT_VALUE = TRIGGER_VALUE then 0 else (WINDOW_VALUE - TRIGGER_VALUE)/(EXIT_VALUE - TRIGGER_VALUE) end as payout_value from source ), output as ( select year, case when payout_value < 0 then 0 when payout_value > 1 then 1 else payout_value end as payout from payout_raw ) select * from output"},chirps:{name:"chirps",query:"with unpivot_result as ( select * from chirps_raw ), gid_map as ( select a.gid, a.year, a.value, a.dekad, b.village from unpivot_result a left join admin_raw b on a.gid = b.gid ), filter_year_admin as ( select * from gid_map where gid = 'var(region)' and YEAR >= var(year_start) and YEAR <= var(year_end) ), cap as ( select *, case when value > var(dekcap) then var(dekcap) else value end as value_cap from filter_year_admin a ), output as ( select * from cap ) select * from output"},matching:{name:"matching",query:"with __dbt__cte__badyear as ( SELECT * FROM badyear_raw WHERE gid='var(region)' AND is_bad_year = 1 ORDER BY variable ), __dbt__cte__chirps as ( with unpivot_result as ( select * from chirps_raw ), gid_map as ( select a.gid, a.year, a.value, a.dekad, b.village from unpivot_result a left join admin_raw b on a.gid = b.gid ), filter_year_admin as ( select * from gid_map where gid = 'var(region)' and YEAR >= var(year_start) and YEAR <= var(year_end) ), cap as ( select *, case when value > var(dekcap) then var(dekcap) else value end as value_cap from filter_year_admin a ), output as ( select * from cap ) select * from output ), __dbt__cte__sum_early as ( with source as ( select * from __dbt__cte__chirps ), intervel as ( select * from source where dekad >= var(sum_early_first) and dekad <= var(sum_early_last) ), rain_window as ( select year, sum(value_cap) as window_value from intervel group by year ), trigger_exit as ( select round(percentile_cont(var(freq)) within group (order by window_value asc)) as trigger_value, round(min(window_value)) * var(exit_multiplier) as exit_value from rain_window ), output as ( select * from rain_window cross join trigger_exit order by year ) select * from output ), __dbt__cte__payout_sum_early as ( with source as ( select * from __dbt__cte__sum_early ), payout_raw as ( select *, case when EXIT_VALUE = TRIGGER_VALUE then 0 else (WINDOW_VALUE - TRIGGER_VALUE)/(EXIT_VALUE - TRIGGER_VALUE) end as payout_value from source ), output as ( select year, case when payout_value < 0 then 0 when payout_value > 1 then 1 else payout_value end as payout from payout_raw ) select * from output ), __dbt__cte__sum_late as ( with source as ( select * from __dbt__cte__chirps ), intervel as ( select * from source where dekad >= var(sum_late_first) and dekad <= var(sum_late_last) ), rain_window as ( select year, sum(value_cap) as window_value from intervel group by year ), trigger_exit as ( select round(percentile_cont(var(freq)) within group (order by window_value asc)) as trigger_value, round(min(window_value)) * var(exit_multiplier) as exit_value from rain_window ), output as ( select * from rain_window cross join trigger_exit order by year ) select * from output ), __dbt__cte__payout_sum_late as ( with source as ( select * from __dbt__cte__sum_late ), payout_raw as ( select *, case when EXIT_VALUE = TRIGGER_VALUE then 0 else (WINDOW_VALUE - TRIGGER_VALUE)/(EXIT_VALUE - TRIGGER_VALUE) end as payout_value from source ), output as ( select year, case when payout_value < 0 then 0 when payout_value > 1 then 1 else payout_value end as payout from payout_raw ) select * from output ), __dbt__cte__evi as ( with unpivot_result as ( select * from evi_raw ), gid_map as ( select a.gid, a.year, a.value, a.dekad, b.village from unpivot_result a left join admin_raw b on a.gid = b.gid ), filter_year_admin as ( select * from gid_map where gid = 'var(region)' and YEAR >= var(year_start) and YEAR <= var(year_end) ), cap as ( select *, case when value > var(dekcap) then var(dekcap) else value end as value_cap from filter_year_admin a ), output as ( select * from cap ) select * from output ), __dbt__cte__vegetation_evi as ( with source as ( select * from __dbt__cte__evi ), intervel as ( select * from source where dekad >= var(vegetation_first) and dekad <= var(vegetation_last) ), rain_window as ( select year, sum(value) *var(scalar_vegetation) as window_value from intervel group by year ), trigger_exit as ( select round(percentile_cont(var(freq)) within group (order by window_value asc)) as trigger_value, round(min(window_value)) * var(exit_multiplier) as exit_value from rain_window ), output as ( select * from rain_window cross join trigger_exit order by year ) select * from output ), __dbt__cte__payout_vegetation_evi as ( with source as ( select * from __dbt__cte__vegetation_evi ), payout_raw as ( select *, case when EXIT_VALUE = TRIGGER_VALUE then 0 else (WINDOW_VALUE - TRIGGER_VALUE)/(EXIT_VALUE - TRIGGER_VALUE) end as payout_value from source ), output as ( select year, case when payout_value < 0 then 0 when payout_value > 1 then 1 else payout_value end as payout from payout_raw ) select * from output ), __dbt__cte__payout_combined as ( with source as ( select a.year as year, var(sum_early_weight)*a.payout + var(vegetation_weight)*GREATEST(b.payout,c.payout) as combined_payout, a.payout as sum_early, b.payout as sum_late, c.payout as vegetation from __dbt__cte__payout_sum_early a join __dbt__cte__payout_sum_late b on a.year = b.year left join __dbt__cte__payout_vegetation_evi c on a.year = c.year ) select * from source )SELECT a.gid, b.year, a.is_bad_year, b.combined_payout, b.sum_early, b.sum_late, b.vegetation FROM __dbt__cte__badyear a RIGHT JOIN __dbt__cte__payout_combined b ON a.year = b.year"},evi:{name:"evi",query:"with unpivot_result as ( select * from evi_raw ), gid_map as ( select a.gid, a.year, a.value, a.dekad, b.village from unpivot_result a left join admin_raw b on a.gid = b.gid ), filter_year_admin as ( select * from gid_map where gid = 'var(region)' and YEAR >= var(year_start) and YEAR <= var(year_end) ), cap as ( select *, case when value > var(dekcap) then var(dekcap) else value end as value_cap from filter_year_admin a ), output as ( select * from cap ) select * from output"},badyear:{name:"badyear",query:"SELECT * FROM badyear_raw WHERE gid='var(region)' AND is_bad_year = 1 ORDER BY variable"},payout_combined:{name:"payout_combined",query:"with __dbt__cte__chirps as ( with unpivot_result as ( select * from chirps_raw ), gid_map as ( select a.gid, a.year, a.value, a.dekad, b.village from unpivot_result a left join admin_raw b on a.gid = b.gid ), filter_year_admin as ( select * from gid_map where gid = 'var(region)' and YEAR >= var(year_start) and YEAR <= var(year_end) ), cap as ( select *, case when value > var(dekcap) then var(dekcap) else value end as value_cap from filter_year_admin a ), output as ( select * from cap ) select * from output ), __dbt__cte__sum_early as ( with source as ( select * from __dbt__cte__chirps ), intervel as ( select * from source where dekad >= var(sum_early_first) and dekad <= var(sum_early_last) ), rain_window as ( select year, sum(value_cap) as window_value from intervel group by year ), trigger_exit as ( select round(percentile_cont(var(freq)) within group (order by window_value asc)) as trigger_value, round(min(window_value)) * var(exit_multiplier) as exit_value from rain_window ), output as ( select * from rain_window cross join trigger_exit order by year ) select * from output ), __dbt__cte__payout_sum_early as ( with source as ( select * from __dbt__cte__sum_early ), payout_raw as ( select *, case when EXIT_VALUE = TRIGGER_VALUE then 0 else (WINDOW_VALUE - TRIGGER_VALUE)/(EXIT_VALUE - TRIGGER_VALUE) end as payout_value from source ), output as ( select year, case when payout_value < 0 then 0 when payout_value > 1 then 1 else payout_value end as payout from payout_raw ) select * from output ), __dbt__cte__sum_late as ( with source as ( select * from __dbt__cte__chirps ), intervel as ( select * from source where dekad >= var(sum_late_first) and dekad <= var(sum_late_last) ), rain_window as ( select year, sum(value_cap) as window_value from intervel group by year ), trigger_exit as ( select round(percentile_cont(var(freq)) within group (order by window_value asc)) as trigger_value, round(min(window_value)) * var(exit_multiplier) as exit_value from rain_window ), output as ( select * from rain_window cross join trigger_exit order by year ) select * from output ), __dbt__cte__payout_sum_late as ( with source as ( select * from __dbt__cte__sum_late ), payout_raw as ( select *, case when EXIT_VALUE = TRIGGER_VALUE then 0 else (WINDOW_VALUE - TRIGGER_VALUE)/(EXIT_VALUE - TRIGGER_VALUE) end as payout_value from source ), output as ( select year, case when payout_value < 0 then 0 when payout_value > 1 then 1 else payout_value end as payout from payout_raw ) select * from output ), __dbt__cte__evi as ( with unpivot_result as ( select * from evi_raw ), gid_map as ( select a.gid, a.year, a.value, a.dekad, b.village from unpivot_result a left join admin_raw b on a.gid = b.gid ), filter_year_admin as ( select * from gid_map where gid = 'var(region)' and YEAR >= var(year_start) and YEAR <= var(year_end) ), cap as ( select *, case when value > var(dekcap) then var(dekcap) else value end as value_cap from filter_year_admin a ), output as ( select * from cap ) select * from output ), __dbt__cte__vegetation_evi as ( with source as ( select * from __dbt__cte__evi ), intervel as ( select * from source where dekad >= var(vegetation_first) and dekad <= var(vegetation_last) ), rain_window as ( select year, sum(value) *var(scalar_vegetation) as window_value from intervel group by year ), trigger_exit as ( select round(percentile_cont(var(freq)) within group (order by window_value asc)) as trigger_value, round(min(window_value)) * var(exit_multiplier) as exit_value from rain_window ), output as ( select * from rain_window cross join trigger_exit order by year ) select * from output ), __dbt__cte__payout_vegetation_evi as ( with source as ( select * from __dbt__cte__vegetation_evi ), payout_raw as ( select *, case when EXIT_VALUE = TRIGGER_VALUE then 0 else (WINDOW_VALUE - TRIGGER_VALUE)/(EXIT_VALUE - TRIGGER_VALUE) end as payout_value from source ), output as ( select year, case when payout_value < 0 then 0 when payout_value > 1 then 1 else payout_value end as payout from payout_raw ) select * from output ),source as ( select a.year as year, var(sum_early_weight)*a.payout + var(vegetation_weight)*GREATEST(b.payout,c.payout) as combined_payout, a.payout as sum_early, b.payout as sum_late, c.payout as vegetation from __dbt__cte__payout_sum_early a join __dbt__cte__payout_sum_late b on a.year = b.year left join __dbt__cte__payout_vegetation_evi c on a.year = c.year ) select * from source"},check:{name:"check",query:"with __dbt__cte__chirps as ( with unpivot_result as ( select * from chirps_raw ), gid_map as ( select a.gid, a.year, a.value, a.dekad, b.village from unpivot_result a left join admin_raw b on a.gid = b.gid ), filter_year_admin as ( select * from gid_map where gid = 'var(region)' and YEAR >= var(year_start) and YEAR <= var(year_end) ), cap as ( select *, case when value > var(dekcap) then var(dekcap) else value end as value_cap from filter_year_admin a ), output as ( select * from cap ) select * from output ), __dbt__cte__sum_early as ( with source as ( select * from __dbt__cte__chirps ), intervel as ( select * from source where dekad >= var(sum_early_first) and dekad <= var(sum_early_last) ), rain_window as ( select year, sum(value_cap) as window_value from intervel group by year ), trigger_exit as ( select round(percentile_cont(var(freq)) within group (order by window_value asc)) as trigger_value, round(min(window_value)) * var(exit_multiplier) as exit_value from rain_window ), output as ( select * from rain_window cross join trigger_exit order by year ) select * from output ), __dbt__cte__payout_sum_early as ( with source as ( select * from __dbt__cte__sum_early ), payout_raw as ( select *, case when EXIT_VALUE = TRIGGER_VALUE then 0 else (WINDOW_VALUE - TRIGGER_VALUE)/(EXIT_VALUE - TRIGGER_VALUE) end as payout_value from source ), output as ( select year, case when payout_value < 0 then 0 when payout_value > 1 then 1 else payout_value end as payout from payout_raw ) select * from output ), __dbt__cte__sum_late as ( with source as ( select * from __dbt__cte__chirps ), intervel as ( select * from source where dekad >= var(sum_late_first) and dekad <= var(sum_late_last) ), rain_window as ( select year, sum(value_cap) as window_value from intervel group by year ), trigger_exit as ( select round(percentile_cont(var(freq)) within group (order by window_value asc)) as trigger_value, round(min(window_value)) * var(exit_multiplier) as exit_value from rain_window ), output as ( select * from rain_window cross join trigger_exit order by year ) select * from output ), __dbt__cte__payout_sum_late as ( with source as ( select * from __dbt__cte__sum_late ), payout_raw as ( select *, case when EXIT_VALUE = TRIGGER_VALUE then 0 else (WINDOW_VALUE - TRIGGER_VALUE)/(EXIT_VALUE - TRIGGER_VALUE) end as payout_value from source ), output as ( select year, case when payout_value < 0 then 0 when payout_value > 1 then 1 else payout_value end as payout from payout_raw ) select * from output ), __dbt__cte__evi as ( with unpivot_result as ( select * from evi_raw ), gid_map as ( select a.gid, a.year, a.value, a.dekad, b.village from unpivot_result a left join admin_raw b on a.gid = b.gid ), filter_year_admin as ( select * from gid_map where gid = 'var(region)' and YEAR >= var(year_start) and YEAR <= var(year_end) ), cap as ( select *, case when value > var(dekcap) then var(dekcap) else value end as value_cap from filter_year_admin a ), output as ( select * from cap ) select * from output ), __dbt__cte__vegetation_evi as ( with source as ( select * from __dbt__cte__evi ), intervel as ( select * from source where dekad >= var(vegetation_first) and dekad <= var(vegetation_last) ), rain_window as ( select year, sum(value) *var(scalar_vegetation) as window_value from intervel group by year ), trigger_exit as ( select round(percentile_cont(var(freq)) within group (order by window_value asc)) as trigger_value, round(min(window_value)) * var(exit_multiplier) as exit_value from rain_window ), output as ( select * from rain_window cross join trigger_exit order by year ) select * from output ), __dbt__cte__payout_vegetation_evi as ( with source as ( select * from __dbt__cte__vegetation_evi ), payout_raw as ( select *, case when EXIT_VALUE = TRIGGER_VALUE then 0 else (WINDOW_VALUE - TRIGGER_VALUE)/(EXIT_VALUE - TRIGGER_VALUE) end as payout_value from source ), output as ( select year, case when payout_value < 0 then 0 when payout_value > 1 then 1 else payout_value end as payout from payout_raw ) select * from output ), __dbt__cte__payout_combined as ( with source as ( select a.year as year, var(sum_early_weight)*a.payout + var(vegetation_weight)*GREATEST(b.payout,c.payout) as combined_payout, a.payout as sum_early, b.payout as sum_late, c.payout as vegetation from __dbt__cte__payout_sum_early a join __dbt__cte__payout_sum_late b on a.year = b.year left join __dbt__cte__payout_vegetation_evi c on a.year = c.year ) select * from source )select sum(a.combined_payout) from __dbt__cte__payout_combined a"},payout_sum_early:{name:"payout_sum_early",query:"with __dbt__cte__chirps as ( with unpivot_result as ( select * from chirps_raw ), gid_map as ( select a.gid, a.year, a.value, a.dekad, b.village from unpivot_result a left join admin_raw b on a.gid = b.gid ), filter_year_admin as ( select * from gid_map where gid = 'var(region)' and YEAR >= var(year_start) and YEAR <= var(year_end) ), cap as ( select *, case when value > var(dekcap) then var(dekcap) else value end as value_cap from filter_year_admin a ), output as ( select * from cap ) select * from output ), __dbt__cte__sum_early as ( with source as ( select * from __dbt__cte__chirps ), intervel as ( select * from source where dekad >= var(sum_early_first) and dekad <= var(sum_early_last) ), rain_window as ( select year, sum(value_cap) as window_value from intervel group by year ), trigger_exit as ( select round(percentile_cont(var(freq)) within group (order by window_value asc)) as trigger_value, round(min(window_value)) * var(exit_multiplier) as exit_value from rain_window ), output as ( select * from rain_window cross join trigger_exit order by year ) select * from output ),source as ( select * from __dbt__cte__sum_early ), payout_raw as ( select *, case when EXIT_VALUE = TRIGGER_VALUE then 0 else (WINDOW_VALUE - TRIGGER_VALUE)/(EXIT_VALUE - TRIGGER_VALUE) end as payout_value from source ), output as ( select year, case when payout_value < 0 then 0 when payout_value > 1 then 1 else payout_value end as payout from payout_raw ) select * from output"},crop_cal_precast:{name:"crop_cal_precast",query:"SELECT gid, crop, activity, GREATEST((start_time - DATE '2020-01-01')/10, 1) as start_time, GREATEST((end_time - DATE '2020-01-01')/10, 1) as end_time FROM crop_cal_raw WHERE gid='var(region)'"},payout_vegetation_evi:{name:"payout_vegetation_evi",query:"with __dbt__cte__evi as ( with unpivot_result as ( select * from evi_raw ), gid_map as ( select a.gid, a.year, a.value, a.dekad, b.village from unpivot_result a left join admin_raw b on a.gid = b.gid ), filter_year_admin as ( select * from gid_map where gid = 'var(region)' and YEAR >= var(year_start) and YEAR <= var(year_end) ), cap as ( select *, case when value > var(dekcap) then var(dekcap) else value end as value_cap from filter_year_admin a ), output as ( select * from cap ) select * from output ), __dbt__cte__vegetation_evi as ( with source as ( select * from __dbt__cte__evi ), intervel as ( select * from source where dekad >= var(vegetation_first) and dekad <= var(vegetation_last) ), rain_window as ( select year, sum(value) *var(scalar_vegetation) as window_value from intervel group by year ), trigger_exit as ( select round(percentile_cont(var(freq)) within group (order by window_value asc)) as trigger_value, round(min(window_value)) * var(exit_multiplier) as exit_value from rain_window ), output as ( select * from rain_window cross join trigger_exit order by year ) select * from output ),source as ( select * from __dbt__cte__vegetation_evi ), payout_raw as ( select *, case when EXIT_VALUE = TRIGGER_VALUE then 0 else (WINDOW_VALUE - TRIGGER_VALUE)/(EXIT_VALUE - TRIGGER_VALUE) end as payout_value from source ), output as ( select year, case when payout_value < 0 then 0 when payout_value > 1 then 1 else payout_value end as payout from payout_raw ) select * from output"},vegetation_evi:{name:"vegetation_evi",query:"with __dbt__cte__evi as ( with unpivot_result as ( select * from evi_raw ), gid_map as ( select a.gid, a.year, a.value, a.dekad, b.village from unpivot_result a left join admin_raw b on a.gid = b.gid ), filter_year_admin as ( select * from gid_map where gid = 'var(region)' and YEAR >= var(year_start) and YEAR <= var(year_end) ), cap as ( select *, case when value > var(dekcap) then var(dekcap) else value end as value_cap from filter_year_admin a ), output as ( select * from cap ) select * from output ),source as ( select * from __dbt__cte__evi ), intervel as ( select * from source where dekad >= var(vegetation_first) and dekad <= var(vegetation_last) ), rain_window as ( select year, sum(value) *var(scalar_vegetation) as window_value from intervel group by year ), trigger_exit as ( select round(percentile_cont(var(freq)) within group (order by window_value asc)) as trigger_value, round(min(window_value)) * var(exit_multiplier) as exit_value from rain_window ), output as ( select * from rain_window cross join trigger_exit order by year ) select * from output"},sum_late:{name:"sum_late",query:"with __dbt__cte__chirps as ( with unpivot_result as ( select * from chirps_raw ), gid_map as ( select a.gid, a.year, a.value, a.dekad, b.village from unpivot_result a left join admin_raw b on a.gid = b.gid ), filter_year_admin as ( select * from gid_map where gid = 'var(region)' and YEAR >= var(year_start) and YEAR <= var(year_end) ), cap as ( select *, case when value > var(dekcap) then var(dekcap) else value end as value_cap from filter_year_admin a ), output as ( select * from cap ) select * from output ),source as ( select * from __dbt__cte__chirps ), intervel as ( select * from source where dekad >= var(sum_late_first) and dekad <= var(sum_late_last) ), rain_window as ( select year, sum(value_cap) as window_value from intervel group by year ), trigger_exit as ( select round(percentile_cont(var(freq)) within group (order by window_value asc)) as trigger_value, round(min(window_value)) * var(exit_multiplier) as exit_value from rain_window ), output as ( select * from rain_window cross join trigger_exit order by year ) select * from output"},sum_early:{name:"sum_early",query:"with __dbt__cte__chirps as ( with unpivot_result as ( select * from chirps_raw ), gid_map as ( select a.gid, a.year, a.value, a.dekad, b.village from unpivot_result a left join admin_raw b on a.gid = b.gid ), filter_year_admin as ( select * from gid_map where gid = 'var(region)' and YEAR >= var(year_start) and YEAR <= var(year_end) ), cap as ( select *, case when value > var(dekcap) then var(dekcap) else value end as value_cap from filter_year_admin a ), output as ( select * from cap ) select * from output ),source as ( select * from __dbt__cte__chirps ), intervel as ( select * from source where dekad >= var(sum_early_first) and dekad <= var(sum_early_last) ), rain_window as ( select year, sum(value_cap) as window_value from intervel group by year ), trigger_exit as ( select round(percentile_cont(var(freq)) within group (order by window_value asc)) as trigger_value, round(min(window_value)) * var(exit_multiplier) as exit_value from rain_window ), output as ( select * from rain_window cross join trigger_exit order by year ) select * from output"}};export{vO as $,np as A,Wd as B,Js as C,yO as D,qa as E,zi as F,Oc as G,Rd as H,Nh as I,ip as J,xw as K,qw as L,Yw as M,vn as N,$w as O,lw as P,tp as Q,Ce as R,In as S,Uw as T,Ya as U,Zd as V,Ed as W,VO as X,Hd as Y,jO as Z,qt as _,mb as a,qO as a0,zO as a1,$O as a2,aO as a3,gO as a4,za as b,Os as c,Ac as d,Vd as e,kc as f,Fs as g,Uh as h,Ri as i,Eb as j,yb as k,_O as l,zb as m,zd as n,Tc as o,Zt as p,te as q,rb as r,qh as s,Hb as t,Xd as u,Yn as v,Kd as w,Qd as x,sw as y,ww as z};
