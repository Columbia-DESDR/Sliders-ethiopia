import{S as fe,i as be,s as me,k as v,l as w,m as q,h as l,n as f,b as p,D as E,I as y,a1 as we,a5 as ye,a as x,e as ue,a6 as ge,c as $,T as R,a7 as he,g as U,d as Q,J as ce,a0 as de,o as ke,w as xe,y as Z,q as J,z as F,r as O,A as K,a4 as C,u as $e,B as ee,W as qe}from"../chunks/index.c742ee74.js";import{a3 as Ee,X as De,Y as pe,Z as Ie,$ as _e,G as Ve,a0 as te,a1 as Le,a2 as Se}from"../chunks/model_out.b0bd97d0.js";function Be(n){let a,r;return{c(){a=v("div"),r=v("div"),this.h()},l(t){a=w(t,"DIV",{class:!0});var d=q(a);r=w(d,"DIV",{id:!0}),q(r).forEach(l),d.forEach(l),this.h()},h(){f(r,"id","table"),f(a,"class","table-auto")},m(t,d){p(t,a,d),E(a,r)},p:y,i:y,o:y,d(t){t&&l(a)}}}function Pe(n,a,r){let t;function d(m,_){if(console.log("in debug...."),t=m??t,!t||t.length==0)return;console.log("debug data is",t);let i=Ee(t);console.log("data table done,",i.print()),document.getElementById("table").innerHTML=i.toHTML()}return[d]}class Te extends fe{constructor(a){super(),be(this,a,Pe,Be,me,{render:0})}get render(){return this.$$.ctx[0]}}function Me(n){return{c:y,l:y,m:y,p:y,i:y,o:y,d:y}}function Ne(n){let a,r,t,d,m,_,i=Object.keys(te)+"",o,u,b,z,B,D,S=JSON.stringify(n[4],null,2)+"",M,P,I,G,N,V,c,g,h,X,W,T,k,j,L,H,Y,ae;a=new Le({props:{country:"Ethiopia Data View",initTime:n[18]}});let ve={};return L=new Te({props:ve}),n[11](L),{c(){Z(a.$$.fragment),r=x(),t=v("div"),d=J("Models available"),m=x(),_=v("div"),o=J(i),u=x(),b=v("div"),z=J("Parameters currently"),B=x(),D=v("div"),M=J(S),P=x(),I=v("div"),G=J("Enter selected model"),N=x(),V=v("div"),c=v("input"),g=x(),h=v("div"),X=J("Enter param updates"),W=x(),T=v("div"),k=v("input"),j=x(),Z(L.$$.fragment),this.h()},l(e){F(a.$$.fragment,e),r=$(e),t=w(e,"DIV",{class:!0});var s=q(t);d=O(s,"Models available"),s.forEach(l),m=$(e),_=w(e,"DIV",{class:!0});var A=q(_);o=O(A,i),A.forEach(l),u=$(e),b=w(e,"DIV",{class:!0});var le=q(b);z=O(le,"Parameters currently"),le.forEach(l),B=$(e),D=w(e,"DIV",{class:!0});var re=q(D);M=O(re,S),re.forEach(l),P=$(e),I=w(e,"DIV",{class:!0});var ne=q(I);G=O(ne,"Enter selected model"),ne.forEach(l),N=$(e),V=w(e,"DIV",{class:!0});var se=q(V);c=w(se,"INPUT",{type:!0,class:!0}),se.forEach(l),g=$(e),h=w(e,"DIV",{class:!0});var ie=q(h);X=O(ie,"Enter param updates"),ie.forEach(l),W=$(e),T=w(e,"DIV",{class:!0});var oe=q(T);k=w(oe,"INPUT",{type:!0,class:!0}),oe.forEach(l),j=$(e),F(L.$$.fragment,e),this.h()},h(){f(t,"class","text-2xl text-center svelte-1pb3xwo"),f(_,"class","px-5 py-2 bg-white border-solid border-2 border-black svelte-1pb3xwo"),f(b,"class","text-2xl text-center svelte-1pb3xwo"),f(D,"class","px-5 py-2 bg-white border-solid border-2 border-black svelte-1pb3xwo"),f(I,"class","text-2xl py-2 text-center svelte-1pb3xwo"),f(c,"type","text"),f(c,"class","block w-full px-5 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding bg-no-repeat border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"),f(V,"class","px-[1%] py-[1%] ml-[5.9%] svelte-1pb3xwo"),f(h,"class","text-2xl py-2 text-center svelte-1pb3xwo"),f(k,"type","text"),f(k,"class","block w-full px-5 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding bg-no-repeat border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"),f(T,"class","px-[1%] py-[1%] ml-[5.9%] svelte-1pb3xwo")},m(e,s){K(a,e,s),p(e,r,s),p(e,t,s),E(t,d),p(e,m,s),p(e,_,s),E(_,o),p(e,u,s),p(e,b,s),E(b,z),p(e,B,s),p(e,D,s),E(D,M),p(e,P,s),p(e,I,s),E(I,G),p(e,N,s),p(e,V,s),E(V,c),C(c,n[1]),p(e,g,s),p(e,h,s),E(h,X),p(e,W,s),p(e,T,s),E(T,k),C(k,n[3]),p(e,j,s),K(L,e,s),H=!0,Y||(ae=[R(c,"input",n[9]),R(c,"change",n[7]),R(k,"input",n[10]),R(k,"change",n[6])],Y=!0)},p(e,s){(!H||s&16)&&S!==(S=JSON.stringify(e[4],null,2)+"")&&$e(M,S),s&2&&c.value!==e[1]&&C(c,e[1]),s&8&&k.value!==e[3]&&C(k,e[3]);const A={};L.$set(A)},i(e){H||(U(a.$$.fragment,e),U(L.$$.fragment,e),H=!0)},o(e){Q(a.$$.fragment,e),Q(L.$$.fragment,e),H=!1},d(e){ee(a,e),e&&l(r),e&&l(t),e&&l(m),e&&l(_),e&&l(u),e&&l(b),e&&l(B),e&&l(D),e&&l(P),e&&l(I),e&&l(N),e&&l(V),e&&l(g),e&&l(h),e&&l(W),e&&l(T),e&&l(j),n[11](null),ee(L,e),Y=!1,qe(ae)}}}function Je(n){let a,r;return a=new Se({}),{c(){Z(a.$$.fragment)},l(t){F(a.$$.fragment,t)},m(t,d){K(a,t,d),r=!0},p:y,i(t){r||(U(a.$$.fragment,t),r=!0)},o(t){Q(a.$$.fragment,t),r=!1},d(t){ee(a,t)}}}function Oe(n){let a,r,t,d,m,_;we(n[8]);let i={ctx:n,current:null,token:null,hasCatch:!1,pending:Je,then:Ne,catch:Me,value:18,blocks:[,,,]};return ye(n[5],i),{c(){a=v("meta"),r=x(),t=ue(),i.block.c(),this.h()},l(o){const u=ge("svelte-1qxraob",document.head);a=w(u,"META",{name:!0,content:!0}),u.forEach(l),r=$(o),t=ue(),i.block.l(o),this.h()},h(){document.title="DESDR: Ethiopia",f(a,"name","description"),f(a,"content","DESDR Ethiopia")},m(o,u){E(document.head,a),p(o,r,u),p(o,t,u),i.block.m(o,i.anchor=u),i.mount=()=>t.parentNode,i.anchor=t,d=!0,m||(_=R(window,"resize",n[8]),m=!0)},p(o,[u]){n=o,he(i,n,u)},i(o){d||(U(i.block),d=!0)},o(o){for(let u=0;u<3;u+=1){const b=i.blocks[u];Q(b)}d=!1},d(o){l(a),o&&l(r),o&&l(t),i.block.d(o),i.token=null,i=null,m=!1,_()}}}function ze(n,a,r){let t,d;ce(n,pe,c=>r(13,t=c)),ce(n,_e,c=>r(14,d=c));let m=0,_=null,i=null,o=null,u=null,b={region:1128,dekcap:24,freq:.23,year_start:1981,year_end:2020,back_fill_year:2001,sum_early_weight:.4,sum_late_weight:.4,vegetation_weight:.6,sum_early_first:28,sum_early_last:33,sum_late_first:29,sum_late_last:34,vegetation_first:10,vegetation_last:30,scalar_vegetation:1,exit_multiplier:.8};const z=[{name:"admin_raw",parquet:"admin_raw.parquet"},{name:"badyear_raw",parquet:"badyear_raw.parquet"},{name:"chirps_raw",parquet:"chirps_raw.parquet"},{name:"crop_cal_raw",parquet:"crop_cal_raw.parquet"},{name:"evi_raw",parquet:"evi_raw.parquet"}];de(pe,t=new De,t),de(_e,d=new Ie,d);let B=t.createBackend({id:"duckdb1",type:"DuckDBBackend",name:null,url:null,schema:[]});async function D(c){console.log("dbGoLive started");let g=Date.now();await c.init(!1),await c.loadParquets(z);let h=Date.now();return console.log("db go live time is,",h-g),h-g}let S=D(B),M=function(){console.log("new param raw entry is: ",u);let c=String(u),g=JSON.parse(c);console.log("new parameters received",g),r(4,b=Ve(b,g)),P()},P=function(){console.log("executing model: ",te[_].query),i=t.createBackend({id:"query_under_debug",type:"QueryBackend",query:te[_].query,name:"test",params:b,backend:B}),i.registerView(o),i.execute(b)};ke(async()=>{await S});function I(){r(0,m=window.innerWidth)}function G(){_=this.value,r(1,_)}function N(){u=this.value,r(3,u)}function V(c){xe[c?"unshift":"push"](()=>{o=c,r(2,o)})}return[m,_,o,u,b,S,M,P,I,G,N,V]}class Re extends fe{constructor(a){super(),be(this,a,ze,Oe,me,{})}}export{Re as component};
