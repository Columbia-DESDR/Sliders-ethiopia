import{S as fe,i as me,s as be,k as w,l as y,m as E,h as l,n as m,b as _,D,I as g,a1 as we,a5 as ye,a as $,e as ue,a6 as ge,c as x,T as G,a7 as he,g as U,d as Q,J as ce,a0 as de,o as ke,w as $e,y as F,q as J,z as K,r as O,A as Z,a4 as A,u as xe,B as ee,W as Ee}from"../chunks/index.2e68a764.js";import{a8 as De,W as qe,X as _e,Y as Se,$ as Ve,a0 as pe,a1 as Ie,a2 as Le,a3 as Be,a4 as Te,G as Ce,a5 as te,a6 as Me,a7 as Ne}from"../chunks/model_out.68c07326.js";function Pe(s){let a,r;return{c(){a=w("div"),r=w("div"),this.h()},l(t){a=y(t,"DIV",{class:!0});var d=E(a);r=y(d,"DIV",{id:!0}),E(r).forEach(l),d.forEach(l),this.h()},h(){m(r,"id","table"),m(a,"class","table-auto")},m(t,d){_(t,a,d),D(a,r)},p:g,i:g,o:g,d(t){t&&l(a)}}}function Je(s,a,r){let t;function d(v,p){if(console.log("in debug...."),t=v??t,!t||t.length==0)return;console.log("debug data is",t);let i=De(t);console.log("data table done,",i.print()),document.getElementById("table").innerHTML=i.toHTML()}return[d]}class Oe extends fe{constructor(a){super(),me(this,a,Je,Pe,be,{render:0})}get render(){return this.$$.ctx[0]}}function We(s){return{c:g,l:g,m:g,p:g,i:g,o:g,d:g}}function ze(s){let a,r,t,d,v,p,i=Object.keys(te)+"",o,u,b,C,M,h,V=JSON.stringify(s[4],null,2)+"",I,N,q,W,P,c,f,L,B,X,H,T,k,R,S,z,Y,ae;a=new Me({props:{country:"Ethiopia Data View",initTime:s[17]}});let ve={};return S=new Oe({props:ve}),s[11](S),{c(){F(a.$$.fragment),r=$(),t=w("div"),d=J("Models available"),v=$(),p=w("div"),o=J(i),u=$(),b=w("div"),C=J("Parameters currently"),M=$(),h=w("div"),I=J(V),N=$(),q=w("div"),W=J("Enter selected model"),P=$(),c=w("div"),f=w("input"),L=$(),B=w("div"),X=J("Enter param updates"),H=$(),T=w("div"),k=w("input"),R=$(),F(S.$$.fragment),this.h()},l(e){K(a.$$.fragment,e),r=x(e),t=y(e,"DIV",{class:!0});var n=E(t);d=O(n,"Models available"),n.forEach(l),v=x(e),p=y(e,"DIV",{class:!0});var j=E(p);o=O(j,i),j.forEach(l),u=x(e),b=y(e,"DIV",{class:!0});var le=E(b);C=O(le,"Parameters currently"),le.forEach(l),M=x(e),h=y(e,"DIV",{class:!0});var re=E(h);I=O(re,V),re.forEach(l),N=x(e),q=y(e,"DIV",{class:!0});var se=E(q);W=O(se,"Enter selected model"),se.forEach(l),P=x(e),c=y(e,"DIV",{class:!0});var ne=E(c);f=y(ne,"INPUT",{type:!0,class:!0}),ne.forEach(l),L=x(e),B=y(e,"DIV",{class:!0});var ie=E(B);X=O(ie,"Enter param updates"),ie.forEach(l),H=x(e),T=y(e,"DIV",{class:!0});var oe=E(T);k=y(oe,"INPUT",{type:!0,class:!0}),oe.forEach(l),R=x(e),K(S.$$.fragment,e),this.h()},h(){m(t,"class","text-2xl text-center svelte-1rq187w"),m(p,"class","px-5 py-2 bg-white border-solid border-2 border-black svelte-1rq187w"),m(b,"class","text-2xl text-center svelte-1rq187w"),m(h,"class","px-5 py-2 bg-white border-solid border-2 border-black svelte-1rq187w"),m(q,"class","text-2xl py-2 text-center svelte-1rq187w"),m(f,"type","text"),m(f,"class","block w-full px-5 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding bg-no-repeat border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"),m(c,"class","px-[1%] py-[1%] ml-[5.9%] svelte-1rq187w"),m(B,"class","text-2xl py-2 text-center svelte-1rq187w"),m(k,"type","text"),m(k,"class","block w-full px-5 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding bg-no-repeat border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"),m(T,"class","px-[1%] py-[1%] ml-[5.9%] svelte-1rq187w")},m(e,n){Z(a,e,n),_(e,r,n),_(e,t,n),D(t,d),_(e,v,n),_(e,p,n),D(p,o),_(e,u,n),_(e,b,n),D(b,C),_(e,M,n),_(e,h,n),D(h,I),_(e,N,n),_(e,q,n),D(q,W),_(e,P,n),_(e,c,n),D(c,f),A(f,s[1]),_(e,L,n),_(e,B,n),D(B,X),_(e,H,n),_(e,T,n),D(T,k),A(k,s[3]),_(e,R,n),Z(S,e,n),z=!0,Y||(ae=[G(f,"input",s[9]),G(f,"change",s[7]),G(k,"input",s[10]),G(k,"change",s[6])],Y=!0)},p(e,n){(!z||n&16)&&V!==(V=JSON.stringify(e[4],null,2)+"")&&xe(I,V),n&2&&f.value!==e[1]&&A(f,e[1]),n&8&&k.value!==e[3]&&A(k,e[3]);const j={};S.$set(j)},i(e){z||(U(a.$$.fragment,e),U(S.$$.fragment,e),z=!0)},o(e){Q(a.$$.fragment,e),Q(S.$$.fragment,e),z=!1},d(e){ee(a,e),e&&l(r),e&&l(t),e&&l(v),e&&l(p),e&&l(u),e&&l(b),e&&l(M),e&&l(h),e&&l(N),e&&l(q),e&&l(P),e&&l(c),e&&l(L),e&&l(B),e&&l(H),e&&l(T),e&&l(R),s[11](null),ee(S,e),Y=!1,Ee(ae)}}}function Ge(s){let a,r;return a=new Ne({}),{c(){F(a.$$.fragment)},l(t){K(a.$$.fragment,t)},m(t,d){Z(a,t,d),r=!0},p:g,i(t){r||(U(a.$$.fragment,t),r=!0)},o(t){Q(a.$$.fragment,t),r=!1},d(t){ee(a,t)}}}function He(s){let a,r,t,d,v,p;we(s[8]);let i={ctx:s,current:null,token:null,hasCatch:!1,pending:Ge,then:ze,catch:We,value:17,blocks:[,,,]};return ye(s[5],i),{c(){a=w("meta"),r=$(),t=ue(),i.block.c(),this.h()},l(o){const u=ge("svelte-1qxraob",document.head);a=y(u,"META",{name:!0,content:!0}),u.forEach(l),r=x(o),t=ue(),i.block.l(o),this.h()},h(){document.title="DESDR: Ethiopia",m(a,"name","description"),m(a,"content","DESDR Ethiopia")},m(o,u){D(document.head,a),_(o,r,u),_(o,t,u),i.block.m(o,i.anchor=u),i.mount=()=>t.parentNode,i.anchor=t,d=!0,v||(p=G(window,"resize",s[8]),v=!0)},p(o,[u]){s=o,he(i,s,u)},i(o){d||(U(i.block),d=!0)},o(o){for(let u=0;u<3;u+=1){const b=i.blocks[u];Q(b)}d=!1},d(o){l(a),o&&l(r),o&&l(t),i.block.d(o),i.token=null,i=null,v=!1,p()}}}function Re(s,a,r){let t,d;ce(s,_e,c=>r(13,t=c)),ce(s,pe,c=>r(14,d=c));let v=0,p=null,i=null,o=null,u=null,b={region:1128,dekcap:24,freq:.23,year_start:1981,year_end:2020,back_fill_year:2001,sum_early_weight:.4,sum_late_weight:.4,vegetation_weight:.6,sum_early_first:28,sum_early_last:33,sum_late_first:29,sum_late_last:34,vegetation_first:10,vegetation_last:30,scalar_vegetation:1,exit_multiplier:.8};de(_e,t=new qe,t),de(pe,d=new Ve,d);let C=t.createBackend({id:"duckdb1",type:"DuckDBBackend",name:"chirps_raw",url:Se,schema:[]});async function M(c){console.log("dbGoLive started");let f=Date.now();await c.init(!1),await c.loadCSVString("admin_raw",Ie),await c.loadCSVString("crop_cal_raw",Le),await c.loadCSVString("badyear_raw",Be),await c.loadCSVString("evi_raw",Te);let L=Date.now();return console.log("db go live time is,",L-f),L-f}let h=M(C),V=function(){console.log("new param raw entry is: ",u);let c=String(u),f=JSON.parse(c);console.log("new parameters received",f),r(4,b=Ce(b,f)),I()},I=function(){console.log("executing model: ",te[p].query),i=t.createBackend({id:"query_under_debug",type:"QueryBackend",query:te[p].query,name:"test",params:b,backend:C}),i.registerView(o),i.execute(b)};ke(async()=>{await h});function N(){r(0,v=window.innerWidth)}function q(){p=this.value,r(1,p)}function W(){u=this.value,r(3,u)}function P(c){$e[c?"unshift":"push"](()=>{o=c,r(2,o)})}return[v,p,o,u,b,h,V,I,N,q,W,P]}class Ue extends fe{constructor(a){super(),me(this,a,Re,He,be,{})}}export{Ue as component};
